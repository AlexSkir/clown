(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAOdJREFUOI3t0zErhWEUAOCnK9Pd76a4kjALGQ0+1ySrwXgXg9WPMBjFYJMSZTGom1kppJj9BBYZGL4zfG4ZvnPv6Cxv5z29T+e8dUbkYxK72EATL/huJLEC54FcoYNTpLwC79jpuz+Jbmtjd2ijh61KrYP9DNaKfAFfFXQbe1lsDg+Yx61y/HuMDYLNRN5W/mkxDKwV9TT2iNl/7M9YGybWxAcuMR3YU5y1MVjHIVZwg7dBMDjwe7F7mMpi8IrFSr6Kiyw2gWflBixhE0dqrFM1GtHNJ0ZxjGWcKce9rguKLroYzzzujx/AVUNl5zj/7wAAAABJRU5ErkJggg=="},,,,function(e,t,a){},,,,,,,,,function(e,t,a){},,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADCSURBVDhP7dAxCwFhGMDxh00Gk4nBYDAZFIvNJ/BBDOwGiUlJklAWPov4FqSUDEqUSfyf91zdqTuv3b9+3fte3b13j1hUwxpLJPWGTRHE0cLTYw6rGtjC+7BawVf0ff0sgYyz9GX1BW3cUMUG7un6O1/r4YKy2Ynk8cAeMb0RVhdnFM1OJIsdFqhDBxtYBXeUzE4khwMmCJqTrzGmzlIKOGKA0FPdUjihgz6uaMK6IXTK+pIZ3AFap9MdIW12/35M5AUsFCcIOdPfYQAAAABJRU5ErkJggg=="},,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEdSURBVEhL3dU/a8JAHMbxIChYlQ52aIeCU6Gbk2+hXcV306lDofSttIvuQsGhk4uLIIiCVVF0KxQ6td9HchDkvDvSdKgPfCC55H4PJP6Jjj4tPKOwO8s4ZSzxjTb+pKSODVTSwf8sKeIVKsi85ARdaPAa2/g4k5IKetBAvexr6HFlUnKKN2jQDFcw+fU7qaIPDZighv2kLjnDANo4wiUOJVXJC7RhiAsteJIsudeCK3l84RPnWghMAyqY7s4cyeEDujkNb4HyBNvmEN5HpOhF6YfNNsDFvORmzBndqA22QTZmeAnzmI6dCS1JfjzvYNZ17I2vJDlcGcNc03FQDpXY/oDeYa7r5yU4+n48YIEVHrE/XLmFBsuNFo4hUfQDRmuR/2vYwfIAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAWZJREFUOI2t0jFI1VEUx/FPGjlki9ai0CQIDQ5pCqbNTxJdykGdWmxxsUAHXYJwqMVBNHVzKWh2EAdBTDCQFhWKrMW2aFTiyXO4f+GP/u//8dQfHLiXe+73nvs7h2tWdYX5PZhDF6rwCyeXffwZVtCIZkxgHe9wv1LYIJZwM+OsDbOYjpxf0BBmcCMnpxa/0VEONoz5MrB7+IgDwdeoBgXDh3NymvAZvXiVB3uOIkpJ7OE1GlI5rVhFndD5OzFYAf9TsHScYAMfsIl6PBA6nqlW/IvAzmIL+7greLuI21mwGvzENhawjL8pUBHvsYPu5M5bPI5VN3qukgNMYQCTQpP2EiCM4WkMVoPDyBeLaE8eKGEcL9EXg8FIBHbWiBep/Tf058Gq8D0H+AWfkvWxMHO5epIDKwnGHyVRKAerxp/kYhtuZeR8xcOksrVywLTqBMN/pKrbFQa4sxJQlh7hjTCLLVeFXUmnRmtxEV/Efn8AAAAASUVORK5CYII="},,,,function(e,t,a){e.exports=a.p+"static/media/error.d70d2a0b.jpg"},function(e,t,a){e.exports=a(80)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(32),r=a.n(c),s=a(12),i=(a(46),a(3)),l=a(4),u=a(6),d=a(5),m=a(23),p=a(7),h=a(15),f=(a(47),a(1)),v=a.n(f),g=(a(21),a(33)),b=a.n(g),y=a(14);var k=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gif":return Object.assign({},e,{gif:t.value});case"frames":return Object.assign({},e,{frames:t.value});case"piskelID":return Object.assign({},e,{piskelID:t.value});case"projects":return Object.assign({},e,{projects:t.value});default:return e}}),w=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"currentPage":return Object.assign({},e,{currentPage:t.value});case"currentColor":return Object.assign({},e,{currentColor:t.value});case"backColor":return Object.assign({},e,{backColor:t.value});case"currentTool":return Object.assign({},e,{currentTool:t.value});case"fps":return Object.assign({},e,{fps:t.value});case"customWidth":return Object.assign({},e,{customWidth:t.value});default:return e}}),E=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setBg":return Object.assign({},e,{setBg:t.value});case"title":return Object.assign({},e,{title:t.value});case"description":return Object.assign({},e,{description:t.value});default:return e}}),N=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"currentCanvas":return Object.assign({},e,{currentCanvas:t.value});default:return e}}),S=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"name":return Object.assign({},e,{name:t.value});case"userID":return Object.assign({},e,{userID:t.value});case"imageURL":return Object.assign({},e,{imageURL:t.value});case"email":return Object.assign({},e,{email:t.value});case"token":return Object.assign({},e,{token:t.value});case"googleUrl":return Object.assign({},e,{googleUrl:t.value});case"urlToGif":return Object.assign({},e,{urlToGif:t.value});default:return e}}),C=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"optionsBlock":return Object.assign({},e,{optionsBlock:t.value});default:return e}}),O=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addColor":return Object.assign({},e,{addColor:t.value});default:return e}});Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"piskelGif":return Object.assign({},e,{piskelGif:t.value});case"piskelTitle":return Object.assign({},e,{piskelTitle:t.value});case"piskelDescription":return Object.assign({},e,{piskelDescription:t.value});case"piskelDate":return Object.assign({},e,{piskelDate:t.value});default:return e}});function j(e){var t=v()("#".concat(e)).val(),a="rgb(".concat(v()("#".concat(e)).val().match(/[A-Za-z0-9]{2}/g).map(function(e){return parseInt(e,16)}).join(", "),")");"customed1"===e&&(w.dispatch({type:"currentColor",value:a}),v()("#currentColor").css({"background-color":a})),"customed2"===e&&(w.dispatch({type:"backColor",value:a}),v()("#backColor").css({"background-color":a})),v()("#".concat(e)).attr("value",t)}var A=a(35),I=a.n(A);var x=a(17),T=a.n(x);var M,B,D,P,U=a(36),F=a.n(U);w.subscribe(function(){M=w.getState().currentTool,B=w.getState().currentColor,D=w.getState().backColor}),N.subscribe(function(){P=N.getState().currentCanvas});var L,R=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={tool:"",active:"",value1:"#161030",value2:"#c0c0c0",pickedColor:""},e.mounted=!1,e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;v()(document).click(function(t){return e.colorPickerHandleClick(t)})}},{key:"componentDidMount",value:function(){var e=v()("#currentColor").css("background-color"),t=v()("#backColor").css("background-color");w.dispatch({type:"currentColor",value:e}),w.dispatch({type:"backColor",value:t}),this.mounted=!0,!0===this.mounted&&this.setState({pickedColor:e})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"switchColorsOnClick",value:function(){w.dispatch({type:"currentColor",value:D}),w.dispatch({type:"backColor",value:this.state.pickedColor});var e=v()("#customed1").val(),t=v()("#customed2").val();v()("#currentColor").css({"background-color":B}),v()("#backColor").css({"background-color":D}),this.setState({value1:t,value2:e,pickedColor:B})}},{key:"colorPickerHandleClick",value:function(e){if("colorPickerTool"===this.state.tool){if(v()("#drawCanvas").hide(),v()(e.target).is(".canvas")){var t=document.querySelector("#canvas".concat(P)),a=t.getBoundingClientRect(),n=Math.round(e.clientX-a.left),o=Math.round(e.clientY-a.top),c=t.getContext("2d").getImageData(n,o,1,1).data,r="rgba(".concat(c[0],", ").concat(c[1],", ").concat(c[2],")");if(c[3]>0){var s=function(e,t,a){var n=e.toString(16),o=t.toString(16),c=a.toString(16);return n.length<2&&(n="0".concat(n)),o.length<2&&(o="0".concat(o)),c.length<2&&(c="0".concat(c)),"#".concat(n).concat(o).concat(c)}(c[0],c[1],c[2]);w.dispatch({type:"currentColor",value:r}),v()("#currentColor").css({"background-color":r}),this.setState({value1:s,pickedColor:r})}}}else v()("#drawCanvas").show()}},{key:"buttonOnHoverIn",value:function(e){var t=v()(e.target).attr("id");this.mounted&&this.setState({active:t})}},{key:"buttonOnHoverOut",value:function(e){v()(e.target).children().removeClass("fas-hovered"),this.mounted&&this.setState({active:"false"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{name:"Tools"},o.a.createElement("div",{className:"palette",id:"palette-tool-area"},o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"paint-bucket",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"paintBucketTool"!==w.getState().currentTool?(v()("#palette-tool-area").find("button").removeClass("hovered"),v()("#paint-bucket").addClass("hovered"),w.dispatch({type:"currentTool",value:"paintBucketTool"}),v()("#paint-bucket").focus(),v()(document.body).css({cursor:"url(".concat(I.a,") 15 15, auto")})):"paintBucketTool"===w.getState().currentTool&&(w.dispatch({type:"currentTool",value:""}),v()("#paint-bucket").removeClass("hovered"),v()("#paint-bucket").blur(),v()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"fas fa-fill-drip ".concat("paint-bucket"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"color-picker",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"colorPickerTool"!==w.getState().currentTool?(v()("#palette-tool-area").find("button").removeClass("hovered"),v()("#color-picker").addClass("hovered"),w.dispatch({type:"currentTool",value:"colorPickerTool"}),v()("#color-picker").focus(),v()(document.body).css({cursor:"url(".concat(b.a,") 1 10, auto")})):"colorPickerTool"===w.getState().currentTool&&(w.dispatch({type:"currentTool",value:"none"}),v()("#color-picker").removeClass("hovered"),v()("#color-picker").blur(),v()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"fas fa-eye-dropper ".concat("color-picker"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"pen",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"penTool"!==w.getState().currentTool?(v()("#palette-tool-area").find("button").removeClass("hovered"),w.dispatch({type:"currentTool",value:"penTool"}),v()("#pen").addClass("hovered"),v()("#pen").focus(),v()(document.body).css({cursor:"url(".concat(T.a,") 1 18, auto")})):"penTool"===w.getState().currentTool&&(w.dispatch({type:"currentTool",value:""}),v()("#pen").removeClass("hovered"),v()("#pen").blur(),v()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"fas fa-pencil-alt ".concat("pen"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"eraser",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"eraserTool"!==w.getState().currentTool?(w.dispatch({type:"currentTool",value:"eraserTool"}),v()("#palette-tool-area").find("button").removeClass("hovered"),v()("#eraser").addClass("hovered"),v()("#eraser").focus(),v()(document.body).css({cursor:"url(".concat(F.a,") 1 18, auto")})):"eraserTool"===w.getState().currentTool&&(w.dispatch({type:"currentTool",value:""}),v()("#eraser").removeClass("hovered"),v()("#eraser").blur(),v()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"fas fa-eraser ".concat("eraser"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"stroke",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"strokeTool"!==w.getState().currentTool?(w.dispatch({type:"currentTool",value:"strokeTool"}),v()("#palette-tool-area").find("button").removeClass("hovered"),v()("#stroke").addClass("hovered"),v()("#stroke").focus(),v()(document.body).css({cursor:"url(".concat(T.a,") 1 18, auto")})):"strokeTool"===w.getState().currentTool&&(w.dispatch({type:"currentTool",value:""}),v()("#stroke").removeClass("hovered"),v()("#stroke").blur(),v()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"fas fa-slash ".concat("stroke"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"rectangle",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"rectangleTool"!==w.getState().currentTool?(w.dispatch({type:"currentTool",value:"rectangleTool"}),v()("#palette-tool-area").find("button").removeClass("hovered"),v()("#rectangle").addClass("hovered"),v()("#rectangle").focus(),v()(document.body).css({cursor:"url(".concat(T.a,") 1 18, auto")})):"rectangleTool"===w.getState().currentTool&&(w.dispatch({type:"currentTool",value:""}),v()("#rectangle").removeClass("hovered"),v()("#rectangle").blur(),v()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"far fa-square ".concat("rectangle"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"circle",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"circleTool"!==w.getState().currentTool?(w.dispatch({type:"currentTool",value:"circleTool"}),v()("#palette-tool-area").find("button").removeClass("hovered"),v()("#circle").addClass("hovered"),v()("#circle").focus(),v()(document.body).css({cursor:"url(".concat(T.a,") 1 18, auto")})):"circleTool"===w.getState().currentTool&&(w.dispatch({type:"currentTool",value:""}),v()("#circle").removeClass("hovered"),v()("#circle").blur(),v()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"far fa-circle ".concat("circle"===this.state.active?"fas-hovered":"")})))),o.a.createElement("div",{className:"color"},o.a.createElement("div",{className:"color-block hidden"},o.a.createElement("div",{className:"radiobutton current",id:"currentColor"}),o.a.createElement("div",{className:"radiobutton back",id:"backColor"}),o.a.createElement("button",{type:"button",id:"switchHexValue",onClick:function(){var t=function(e){var t="".concat(e),a=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(t),n=parseInt(a[2],10).toString(16),o=parseInt(a[3],10).toString(16),c=parseInt(a[4],10).toString(16);return"#".concat(1===n.length?"0".concat(n):n).concat(1===o.length?"0".concat(o):o).concat(1===c.length?"0".concat(c):c)}(B);e.setState({value1:t})}})),o.a.createElement("div",{className:"switcher",role:"button",onClick:function(){return e.switchColorsOnClick()},onFocus:function(){},onKeyPress:function(){},tabIndex:"-1"},o.a.createElement("i",{className:"fas fa-retweet"})),o.a.createElement("div",{className:"color-block-upper"},o.a.createElement("input",{type:"color",name:"colors",className:"input-color",id:"customed1",value:this.state.value1,onChange:function(){j("customed1"),e.setState({value1:v()("#customed1").val(),pickedColor:B})}})),o.a.createElement("div",{className:"color-block-under"},o.a.createElement("input",{type:"color",name:"colors",className:"input-color",id:"customed2",value:this.state.value2,onChange:function(){j("customed2"),e.setState({value2:v()("#customed2").val()})}}))))}}]),t}(o.a.Component),H=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155;v()(window).bind("resize",function(){for(var e=0;e<v()("#canvas-block").children().length;e+=1){var t=v()("#canvas".concat(e+1)).get(0).getContext("2d").getImageData(0,0,H,H);L=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155,v()("#canvas".concat(e+1)).attr("width",L).attr("height",L),v()("#canvas".concat(e+1)).get(0).getContext("2d").putImageData(t,0,0)}v()("#drawCanvas").attr("width",L).attr("height",L),v()("#new-width").text(v()("#canvas1").width()),v()("#resize-input").attr("max",v()("#canvas1").width())});var z,W,G,Y,J,K,q;a(49);function V(e){var t=v()("#canvas".concat(z)).get(0).getContext("2d");Y=e.offsetX,J=e.offsetY,"penTool"===G?(t.fillStyle=v()("#currentColor").css("background-color"),t.strokeStyle=v()("#currentColor").css("background-color")):"eraserTool"===G&&(t.fillStyle="rgba(0, 0, 0, 1)",t.strokeStyle="rgba(0, 0, 0, 1)");var a=Math.ceil(v()("#canvas".concat(z)).width()/W),n=Math.floor(e.offsetX/a)*a,o=Math.floor(e.offsetY/a)*a;K>Y||q>J?t.fillRect(n,o,a,a):(K+a<Y||q+a<J)&&t.fillRect(n,o,a,a)}function Q(e){var t=Math.ceil(v()("#canvas".concat(z)).width()/W);if(K=Math.floor(e.offsetX/t)*t,q=Math.floor(e.offsetY/t)*t,"penTool"===G||"eraserTool"===G){var a=v()("#canvas".concat(z)).get(0).getContext("2d");"penTool"===G?(a.globalCompositeOperation="source-over",a.fillStyle=v()("#currentColor").css("background-color"),a.strokeStyle=v()("#currentColor").css("background-color")):"eraserTool"===G&&(a.fillStyle="rgba(0, 0, 0, 1)",a.strokeStyle="rgba(0, 0, 0, 1)",a.globalCompositeOperation="destination-out"),a.fillRect(K,q,t,t),v()("#drawCanvas").mousemove(V),O.dispatch({type:"addColor",value:v()("#currentColor").css("background-color")}),v()("#addColorButton").click()}}N.subscribe(function(){z=N.getState().currentCanvas}),w.subscribe(function(){W=w.getState().customWidth||33,G=w.getState().currentTool});var X,Z,_,$,ee=0,te=0,ae=0,ne=0;function oe(e){var t=Math.ceil(v()("#canvas".concat(z)).width()/W),a=v()("#drawCanvas").get(0).getContext("2d"),n=v()("#drawCanvas").width();ae=e.pageX-this.offsetLeft,ne=e.pageY-this.offsetTop,a.clearRect(0,0,n,n),a.globalCompositeOperation="source-over",a.strokeStyle=v()("#currentColor").css("background-color"),a.lineWidth=t,a.beginPath(),"strokeTool"===G?(a.moveTo(ee,te),a.lineTo(ae,ne),a.stroke()):"rectangleTool"===G?(a.moveTo(ee,te),a.lineTo(ae,te),a.lineTo(ae,ne),a.lineTo(ee,ne),a.lineTo(ee,te),a.stroke()):"circleTool"===G&&(X=Math.sqrt((ee-ae)*(ee-ae)+(te-ne)*(te-ne))/2,a.arc(ee,te,X,0,2*Math.PI),a.stroke()),v()("#drawCanvas").mouseup(function(){t=Math.ceil(v()("#canvas".concat(z)).width()/W);var e=v()("#canvas".concat(z)).get(0).getContext("2d");e.globalCompositeOperation="source-over",e.strokeStyle=v()("#currentColor").css("background-color"),e.lineWidth=t,e.beginPath(),"strokeTool"===G?(e.moveTo(ee,te),e.lineTo(ae,ne),e.stroke(),a.clearRect(0,0,n,n)):"rectangleTool"===G?(e.moveTo(ee,te),e.lineTo(ae,te),e.lineTo(ae,ne),e.lineTo(ee,ne),e.lineTo(ee,te),e.stroke(),a.clearRect(0,0,n,n)):"circleTool"===G&&(e.arc(ee,te,X,0,2*Math.PI),e.stroke(),a.clearRect(0,0,n,n))})}function ce(e){ee=e.pageX-this.offsetLeft,te=e.pageY-this.offsetTop,v()("#drawCanvas").mousemove(oe),O.dispatch({type:"addColor",value:v()("#currentColor").css("background-color")}),v()("#addColorButton").click()}function re(e,t,a){var n=e.width,o=e.data;return{r:o[4*(n*a+t)+0],g:o[4*(n*a+t)+1],b:o[4*(n*a+t)+2],a:o[4*(n*a+t)+3]}}function se(e,t,a,n){var o=e.width,c=e.data;c[4*(o*n+a)+0]=t.r,c[4*(o*n+a)+1]=t.g,c[4*(o*n+a)+2]=t.b,c[4*(o*n+a)+3]=t.a}function ie(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}function le(e){if("paintBucketTool"===_){var t=document.querySelector("#canvas".concat(Z)),a=t.getContext("2d"),n=v()("#currentColor").css("background-color"),o=n.match(/([0-9]+\.?[0-9]*)/g),c={r:+o[0],g:+o[1],b:+o[2],a:255};a.fillStyle=n,a.strokeStyle=n;var r=t.getBoundingClientRect(),s=Math.round(e.clientX-r.left),i=Math.round(e.clientY-r.top),l=a.getImageData(0,0,t.width,t.height);!function(e,t,a,n){var o=e.width,c=e.height,r=[],s=re(e,a,n),i={x:a,y:n};if(!ie(s,t))for(r.push({x:i.x,y:i.y});r.length;){i=r.pop();for(var l=!0,u=!0,d=!1,m=!1;u&&i.y>=0;)i.y-=1,u=ie(re(e,i.x,i.y),s);for(;l&&i.y<c;)se(e,t,i.x,i.y),i.x-1>=0&&ie(re(e,i.x-1,i.y),s)?d||(d=!0,r.push({x:i.x-1,y:i.y})):d=!1,i.x+1<o&&ie(re(e,i.x+1,i.y),s)?m||(r.push({x:i.x+1,y:i.y}),m=!0):m=!1,i.y+=1,l=ie(re(e,i.x,i.y),s)}}(l,c,s,i),a.putImageData(l,0,0),O.dispatch({type:"addColor",value:v()("#currentColor").css("background-color")}),v()("#addColorButton").click();var u=v()("#canvas".concat(Z))[0].toDataURL("image/png");v()("#frame".concat(Z)).find(".preview-box").css({background:"url(".concat(u,")"),"background-size":"contain"})}}N.subscribe(function(){Z=N.getState().currentCanvas}),w.subscribe(function(){_=w.getState().currentTool}),w.subscribe(function(){$=w.getState().fps||3});var ue,de,me=0;function pe(){clearTimeout(ue);var e=1e3/$;v()(".preview").children().css({display:"none"}),v()(".preview").children()[me]&&(v()(".preview").children()[me].style.display="block"),(me+=1)===v()(".preview").children().length&&(me=0),ue=setTimeout(pe,e)}function he(e){var t=new Image;v()("#canvas".concat(e))[0]&&v()(t).attr("id","canvasImage".concat(e)).css({width:"100%"}).attr("src",v()("#canvas".concat(e))[0].toDataURL("image/png")),v()("#canvasImage".concat(e)).length?v()(t).insertBefore("#canvasImage".concat(e)).next().remove():v()(t).appendTo(".preview"),v()(".preview").children().length>1?(me=0,pe()):clearTimeout(ue)}var fe,ve=0;function ge(){de&&(ve+=1,de.close()),de=window.open("about:blank","window".concat(ve),"width=300,height=300");var e=v()(".preview").clone().appendTo(de.document.body).css({display:"flex","justify-content":"center","align-items":"center",height:"100%"});v()(de.document.body).css({display:"flex","justify-content":"center","align-items":"center"});var t=$,a=0;v()(de).ready(function n(){var o=1e3/t;e.children().css({display:"none"}),e.children()[a]&&(e.children()[a].style.display="block"),(a+=1)===e.children().length&&(a=0),setTimeout(n,o)})}N.subscribe(function(){fe=N.getState().currentCanvas});var be,ye=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={size:""},e.mounted=!1,e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155;this.setState({size:t}),v()(document).click(function(){return e.penHandleClick()})}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"penHandleClick",value:function(){this.mounted=!0,v()("#drawCanvas").unbind("mousedown").unbind("mouseup").unbind("click"),v()("#drawCanvas").click(le),v()("#drawCanvas").mousedown(Q),v()("#drawCanvas").mousedown(ce),v()("#drawCanvas").mouseup(function(){v()("#drawCanvas").off("mousemove"),setTimeout(function(){var e=v()("#canvas".concat(fe))[0].toDataURL("image/png");v()("#frame".concat(fe)).find(".preview-box").css({background:"url(".concat(e,")"),"background-size":"contain"})},300),setTimeout(function(){he(fe)},500)})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{id:"canvas-block",className:"canvas-block"},o.a.createElement("canvas",{id:"canvas1",className:"canvas hidden",width:this.state.size,height:this.state.size})),o.a.createElement("canvas",{id:"drawCanvas",className:"drawCanvas",width:this.state.size,height:this.state.size}))}}]),t}(o.a.Component);a(50),a(51);function ke(){var e=v()(this).find(".number").text();N.dispatch({type:"currentCanvas",value:+e}),v()(".canvas").addClass("hidden"),v()("#canvas".concat(e)).removeClass("hidden"),v()(".activeFrame")&&v()(".activeFrame").removeClass("activeFrame"),v()(this).toggleClass("activeFrame"),setTimeout(function(){he(+e)},200)}function we(){var e=v()(this).find("span");e.hasClass("minorZ")&&(e.removeClass("minorZ"),1===v()("#sortable").children().length&&(v()("#frame1").find(".removeFrame").addClass("minorZ"),v()("#frame1").find(".dragFrame").addClass("minorZ")))}function Ee(){var e=v()(this).find("span");e.hasClass("minorZ")||e.addClass("minorZ"),1===v()("#sortable").children().length&&(v()("#frame1").find(".copyFrame").addClass("minorZ"),v()("#frame1").find(".dragFrame").addClass("minorZ"))}function Ne(){for(var e=0;e<v()("#canvas-block").children().length;e+=1)v()("#canvas-block").children()[e].id="canvas".concat(e+1);for(var t=0;t<v()(".preview").children().length;t+=1)v()(".preview").children()[t].id="canvasImage".concat(t+1);for(var a=0;a<v()("#sortable").children().length;a+=1){v()("#sortable").children()[a].id="frame".concat(a+1),v()(v()("#sortable").children()[a]).find(".number").text(a+1),he(a+1)}}function Se(){v()("#sortable").sortable(),v()("#sortable").sortable("option","disabled",!1),v()("#sortable").disableSelection()}function Ce(e){v()("#sortable").sortable("option","disabled",!0),setTimeout(function(){var t=v()(e.currentTarget).parent().find(".number").text();Ne();var a=v()(e.currentTarget).parent().find(".number").text();t<a?v()("#canvas".concat(t)).insertAfter("#canvas".concat(a)):v()("#canvas".concat(t)).insertBefore("#canvas".concat(a)),Ne()},200),setTimeout(function(){v()(e.currentTarget).parent().click()},400)}function Oe(e){var t=v()(this).parent().find(".number").text(),a="number"===typeof e?e:t;v()("#frame".concat(a)).remove(),v()("#canvasImage".concat(a)).remove(),v()("#canvas".concat(a)).remove(),Ne(),v()("#frame".concat(+a-1)).click()}function je(){var e=v()(this).parent().find(".number").text();v()("#frame".concat(e)).clone().insertAfter("#frame".concat(e)).attr("id","frame".concat(+e+1)).removeClass("activeFrame").hover(we,Ee).click(ke),function(e){var t=v()("#canvas".concat(e)).clone().attr("id","canvas".concat(+e+1)).attr("width",v()("#canvas".concat(e)).width()).attr("height",v()("#canvas".concat(e)).width()).insertAfter("#canvas".concat(e)),a=v()("#canvas".concat(e)).get(0).getContext("2d").getImageData(0,0,v()("#canvas".concat(e)).width(),v()("#canvas".concat(e)).width());t.get(0).getContext("2d").putImageData(a,0,0)}(e),v()("#frame".concat(+e+1)).find(".removeFrame").click(Oe),v()("#frame".concat(+e+1)).find(".copyFrame").click(je),v()("#frame".concat(+e+1)).find(".dragFrame").mousedown(Se).mouseup(Ce),setTimeout(function(){v()("#frame".concat(+e+1)).click()},100),Ne();var t=v()("#canvas".concat(e))[0].toDataURL("image/png");t&&v()("#frame".concat(+e+1)).find(".preview-box").css({background:"url(".concat(t,")"),"background-size":"contain"});for(var a=0;a<v()(".frame-list").children().length;a+=1)he(a+1)}function Ae(){var e=v()(".frame-list").children().length+1;v()(".frame").first().clone().appendTo(".frame-list").attr("id","frame".concat(e)).removeClass("activeFrame").hover(we,Ee).click(ke).find(".preview-box").css({background:"none"}),v()(".number").last().text(e),function(e){var t=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155;v()("<canvas/>",{class:"canvas hidden",id:"canvas".concat(e)}).attr("width",t).attr("height",t).appendTo("#canvas-block")}(e),v()("#frame".concat(e)).find(".removeFrame").click(Oe),v()("#frame".concat(e)).find(".copyFrame").click(je),v()("#frame".concat(e)).find(".dragFrame").mousedown(Se).mouseup(Ce),setTimeout(function(){v()("#frame".concat(e)).click()},100)}w.subscribe(function(){be=w.getState().customWidth});var Ie,xe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){v()(".frame").hover(we,Ee).click(ke),v()(".removeFrame").click(Oe),v()(".copyFrame").click(je),v()(".dragFrame").mousedown(Se).mouseup(Ce),v()("#frame1").click(ke).click(),v()("#current-width").text(be),v()("#current-height").text(be),v()("#new-width").text(v()("#canvas1").width()),v()("#resize-input").attr("max",v()("#canvas1").width())}},{key:"render",value:function(){return o.a.createElement("div",{className:"frame-box"},o.a.createElement("ul",{id:"sortable",className:"frame-list"},o.a.createElement("li",{className:"ui-state-default frame activeFrame",id:"frame1"},o.a.createElement("p",{id:"preview-box",className:"preview-box"}),o.a.createElement("title",{className:"number"},"1"),o.a.createElement("span",{className:"removeFrame minorZ"},o.a.createElement("i",{className:"fas fa-trash-alt"})),o.a.createElement("span",{className:"dragFrame minorZ"},o.a.createElement("i",{className:"fas fa-arrows-alt"})),o.a.createElement("span",{className:"copyFrame minorZ"},o.a.createElement("i",{className:"fas fa-copy"})))),o.a.createElement("button",{className:"addNewFrame",onClick:Ae,type:"button"},"Add new frame"))}}]),t}(o.a.Component),Te=(a(52),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={active:""},e.mounted=!1,e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"hoverIn",value:function(){this.mounted&&this.setState({active:!0})}},{key:"hoverOut",value:function(){this.mounted&&this.setState({active:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"preview-area",className:"preview-area",onMouseEnter:function(){return e.hoverIn()},onMouseLeave:function(){return e.hoverOut()}},o.a.createElement("div",{className:"preview-open ".concat(this.state.active?"":"hidden"),id:"preview-open",role:"button",tabIndex:"-1",onKeyPress:void 0,onClick:ge},o.a.createElement("i",{className:"fas fa-external-link-alt"})),o.a.createElement("div",{className:"preview"}))}}]),t}(o.a.Component)),Me=(a(53),a(54),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={hovered:"",mouseEnter:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"popHintOnMouseOver",value:function(e){var t=e.target.getAttribute("id");this.state.hovered===t?this.setState({hovered:""}):this.setState({hovered:t})}},{key:"mouseIn",value:function(){this.setState({mouseEnter:!0})}},{key:"mouseOut",value:function(){this.setState({mouseEnter:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"layers-box",onMouseOver:function(t){return e.popHintOnMouseOver(t)},onFocus:function(){}},o.a.createElement("div",{className:"layer-outlet"},o.a.createElement("span",{className:"layer-title"},"Layers"),o.a.createElement("i",{id:"layers-preview",className:"fas fa-eye",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}}),o.a.createElement("p",{className:"hint layers-preview ".concat("layers-preview"===this.state.hovered?"":"hidden")},"Preview all layers",o.a.createElement("i",{className:"layers-preview-arrow fas fa-sort-down"}))),o.a.createElement("div",{className:"layer-buttons-box"},o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-plus",className:"fas fa-plus"})),o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-up",className:"fas fa-arrow-up"})),o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-down",className:"fas fa-arrow-down"})),o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-edit-name",className:"fas fa-pen"})),o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-merge",className:"fas fa-compress"})),o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-remove",className:"fas fa-times"})),o.a.createElement("p",{className:"hint layers-plus ".concat(!0===this.state.mouseEnter&&"layers-plus"===this.state.hovered?"":"hidden")},"Create a layer",o.a.createElement("i",{className:"layers-plus-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"hint layers-up ".concat(!0===this.state.mouseEnter&&"layers-up"===this.state.hovered?"":"hidden")},"Move layer up",o.a.createElement("i",{className:"layers-up-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"hint layers-down ".concat(!0===this.state.mouseEnter&&"layers-down"===this.state.hovered?"":"hidden")},"Move layer down",o.a.createElement("i",{className:"layers-down-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"hint layers-edit-name ".concat(!0===this.state.mouseEnter&&"layers-edit-name"===this.state.hovered?"":"hidden")},"Edit layer name",o.a.createElement("i",{className:"layers-edit-name-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"big hint layers-merge ".concat(!0===this.state.mouseEnter&&"layers-merge"===this.state.hovered?"":"hidden")},"Merge with layer below",o.a.createElement("i",{className:"layers-merge-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"big hint layers-remove ".concat(!0===this.state.mouseEnter&&"layers-remove"===this.state.hovered?"":"hidden")},"Delete selected layer",o.a.createElement("i",{className:"layers-remove-arrow fas fa-sort-down"}))),o.a.createElement("ul",{className:"layer-list"},o.a.createElement("li",{className:"layer-item"},"Layer 1")))}}]),t}(o.a.Component));a(55);O.subscribe(function(){Ie=O.getState().addColor});var Be,De=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={hovered:"",mouseEnter:!1,color:[],changed:!1,active:""},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"popHintOnMouseOver",value:function(e){var t=e.target.getAttribute("id");this.state.hovered===t?this.setState({hovered:""}):this.setState({hovered:t})}},{key:"mouseIn",value:function(){this.setState({mouseEnter:!0})}},{key:"mouseOut",value:function(){this.setState({mouseEnter:!1})}},{key:"addNewColor",value:function(){-1===this.state.color.indexOf(Ie)&&(this.state.color.push(Ie),this.setState({changed:!0,active:Ie}))}},{key:"changeCurColor",value:function(e){var t=v()(e.target).css("background-color");this.setState({active:t}),v()("#currentColor").css({background:t}),w.dispatch({type:"currentColor",value:t}),v()("#switchHexValue").click()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"palettes-box",onMouseOver:function(t){return e.popHintOnMouseOver(t)},onFocus:function(){}},o.a.createElement("div",{className:"palettes-outlet"},o.a.createElement("span",{className:"palettes-title"},"Palettes")),o.a.createElement("div",{className:"palettes-buttons-box"},o.a.createElement("button",{type:"button",className:"palettes-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"palettes-plus",className:"fas fa-plus"})),o.a.createElement("button",{type:"button",id:"palettes-dropdown-list",className:"palettes-button colors-list"},"Current colors",o.a.createElement("i",{className:"colors-list-arrow fas fa-sort-down ".concat("palettes-dropdown-list"===this.state.hovered?"colors-list-arrow-hovered":"")})),o.a.createElement("button",{type:"button",className:"palettes-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"palettes-edit",className:"fas fa-pen"})),o.a.createElement("p",{className:"hint palettes-plus ".concat(!0===this.state.mouseEnter&&"palettes-plus"===this.state.hovered?"":"hidden")},"Create a new palette",o.a.createElement("i",{className:"palettes-plus-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"hint palettes-edit ".concat(!0===this.state.mouseEnter&&"palettes-edit"===this.state.hovered?"":"hidden")},"Palette options",o.a.createElement("i",{className:"palettes-edit-arrow fas fa-sort-down"}))),o.a.createElement("ul",{className:"palettes-list"},o.a.createElement("span",{className:"palette-colors-isempty ".concat(!0===this.state.changed?"hidden":"")},"No colors in this palette yet"),this.state.color.map(function(t){return o.a.createElement("li",{key:t,id:t,className:"palette-sample-list"},o.a.createElement("div",{style:{background:t},className:"palette-sample ".concat(e.state.active===t?"active-palette-sample":""),onClick:function(t){return e.changeCurColor(t)},tabIndex:"-1",onKeyPress:function(){},onFocus:function(){},role:"button"}))})),o.a.createElement("button",{id:"addColorButton",className:"hidden",type:"button",onClick:function(){return e.addNewColor()}}))}}]),t}(o.a.Component);a(56);C.subscribe(function(){Be=C.getState().optionsBlock});var Pe,Ue,Fe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={active:""},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"addActiveOnClick",value:function(e){var t,a=e.target.getAttribute("id"),n=v()(e.target).css("background-image");t=n,v()(".frame").css({background:t}),v()(".canvas").css({background:t}),this.setState({active:a})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"general-settings-block ".concat("settings"===Be?"flexed":"hidden")},o.a.createElement("div",{className:"current-bg"},o.a.createElement("span",{className:"default-bg bold"},"Background"),o.a.createElement("div",{className:"general-settings-buttons-area"},o.a.createElement("button",{type:"button",id:"bg1",onClick:function(t){return e.addActiveOnClick(t)},className:"general-settings-button bg1 ".concat("bg1"===this.state.active?"active-button":"not-active-button")}),o.a.createElement("button",{type:"button",id:"bg2",onClick:function(t){return e.addActiveOnClick(t)},className:"general-settings-button bg2 ".concat("bg2"===this.state.active?"active-button":"not-active-button")}),o.a.createElement("button",{type:"button",id:"bg3",onClick:function(t){return e.addActiveOnClick(t)},className:"general-settings-button bg3 ".concat("bg3"===this.state.active?"active-button":"not-active-button")}),o.a.createElement("button",{type:"button",id:"bg4",onClick:function(t){return e.addActiveOnClick(t)},className:"general-settings-button bg4 ".concat("bg4"===this.state.active?"active-button":"not-active-button")})),o.a.createElement("p",null,"Set default background")))}}]),t}(o.a.Component);a(57);w.subscribe(function(){Pe=w.getState().customWidth||33}),C.subscribe(function(){Ue=C.getState().optionsBlock});var Le=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={customWidth:""},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){v()("#current-width").text(Pe),v()("#current-height").text(Pe),v()("#new-width").text(v()("#canvas1").width()),v()("#resize-input").attr("max","".concat(v()("#canvas1").width())),this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"resizeCanvasOnClickHandler",value:function(){if(v()("#resize-input").val()){var e=+v()("#resize-input").val(),t=+v()("#resize-input").attr("max");e>0&&e<t?(w.dispatch({type:"customWidth",value:e}),this.mounted&&this.setState({customWidth:Pe}),v()("#resize-input").val(""),v()("#error-message").text("")):(v()("#error-message").text("Size can be from ".concat(v()("#resize-input").attr("min")," to ").concat(v()("#resize-input").attr("max")," px")),v()("#resize-input").val(""))}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"resize-canvas-block ".concat("resize-settings"===Ue?"flexed":"hidden")},o.a.createElement("div",{className:"current-size"},o.a.createElement("span",{className:"default-size bold"},"current size"),o.a.createElement("p",null,"Width ",o.a.createElement("span",{className:"default-width bold",id:"current-width"},this.state.customWidth),"px"),o.a.createElement("p",null,"Height",o.a.createElement("span",{className:"default-width bold",id:"current-height"},this.state.customWidth),"px")),o.a.createElement("div",{className:"resize-canvas"},o.a.createElement("span",{className:"resize bold"},"resize"),o.a.createElement("p",{className:"new-width-block"},o.a.createElement("span",null,"1 - "),o.a.createElement("span",{id:"new-width",className:"canvas-width"}),o.a.createElement("span",null,"px"),o.a.createElement("input",{type:"number",className:"resize-input",id:"resize-input",min:"1",onKeyPress:function(t){"Enter"===t.key&&e.resizeCanvasOnClickHandler()}})),o.a.createElement("p",{id:"error-message",className:"error-message"}),o.a.createElement("button",{id:"resize-button",className:"resize-button",type:"button",onClick:function(){return e.resizeCanvasOnClickHandler()}},"Change canvas size")))}}]),t}(o.a.Component),Re=(a(58),a(19)),He=function(){var e,t,a,n,o,c={},r=[],s=[],i=[],l=[],u=c.NeuQuant=function(e,c,r){var l,u;for(t=e,a=c,n=r,o=new Array(256),l=0;l<256;l++)o[l]=new Array(4),(u=o[l])[0]=u[1]=u[2]=(l<<12)/256,i[l]=256,s[l]=0},d=(c.map=function(e,t,a){var n,c,s,i,l,u,d;for(l=1e3,d=-1,c=(n=r[t])-1;n<256||c>=0;)n<256&&((s=(u=o[n])[1]-t)>=l?n=256:(n++,s<0&&(s=-s),(i=u[0]-e)<0&&(i=-i),(s+=i)<l&&((i=u[2]-a)<0&&(i=-i),(s+=i)<l&&(l=s,d=u[3])))),c>=0&&((s=t-(u=o[c])[1])>=l?c=-1:(c--,s<0&&(s=-s),(i=u[0]-e)<0&&(i=-i),(s+=i)<l&&((i=u[2]-a)<0&&(i=-i),(s+=i)<l&&(l=s,d=u[3]))));return d},c.process=function(){return function(){var o,c,r,s,i,u,d,f,v,g,b,y,k,w;for(a<1509&&(n=1),e=30+(n-1)/3,y=t,k=0,w=a,g=(b=a/(3*n))/100|0,f=1024,(d=(u=2048)>>6)<=1&&(d=0),o=0;o<d;o++)l[o]=f*(256*(d*d-o*o)/(d*d));for(v=a<1509?3:a%499!==0?1497:a%491!==0?1473:a%487!==0?1461:1509,o=0;o<b;)if(r=(255&y[k+0])<<4,s=(255&y[k+1])<<4,i=(255&y[k+2])<<4,c=h(r,s,i),p(f,c,r,s,i),0!==d&&m(d,c,r,s,i),(k+=v)>=w&&(k-=a),0===g&&(g=1),++o%g===0)for(f-=f/e,(d=(u-=u/30)>>6)<=1&&(d=0),c=0;c<d;c++)l[c]=f*(256*(d*d-c*c)/(d*d))}(),d(),function(){var e,t,a,n,c,s,i,l;for(i=0,l=0,e=0;e<256;e++){for(a=e,n=(c=o[e])[1],t=e+1;t<256;t++)(s=o[t])[1]<n&&(a=t,n=s[1]);if(s=o[a],e!=a&&(t=s[0],s[0]=c[0],c[0]=t,t=s[1],s[1]=c[1],c[1]=t,t=s[2],s[2]=c[2],c[2]=t,t=s[3],s[3]=c[3],c[3]=t),n!=i){for(r[i]=l+e>>1,t=i+1;t<n;t++)r[t]=e;i=n,l=e}}for(r[i]=l+255>>1,t=i+1;t<256;t++)r[t]=255}(),function(){for(var e=[],t=new Array(256),a=0;a<256;a++)t[o[a][3]]=a;for(var n=0,c=0;c<256;c++){var r=t[c];e[n++]=o[r][0],e[n++]=o[r][1],e[n++]=o[r][2]}return e}()},function(){var e;for(e=0;e<256;e++)o[e][0]>>=4,o[e][1]>>=4,o[e][2]>>=4,o[e][3]=e}),m=function(e,t,a,n,c){var r,s,i,u,d,m,p;for((i=t-e)<-1&&(i=-1),(u=t+e)>256&&(u=256),r=t+1,s=t-1,m=1;r<u||s>i;){if(d=l[m++],r<u){p=o[r++];try{p[0]-=d*(p[0]-a)/(1<<18),p[1]-=d*(p[1]-n)/(1<<18),p[2]-=d*(p[2]-c)/(1<<18)}catch(h){}}if(s>i){p=o[s--];try{p[0]-=d*(p[0]-a)/(1<<18),p[1]-=d*(p[1]-n)/(1<<18),p[2]-=d*(p[2]-c)/(1<<18)}catch(h){}}}},p=function(e,t,a,n,c){var r=o[t];r[0]-=e*(r[0]-a)/1024,r[1]-=e*(r[1]-n)/1024,r[2]-=e*(r[2]-c)/1024},h=function(e,t,a){var n,c,r,l,u,d,m,p,h,f;for(h=p=~(1<<31),m=d=-1,n=0;n<256;n++)(c=(f=o[n])[0]-e)<0&&(c=-c),(r=f[1]-t)<0&&(r=-r),c+=r,(r=f[2]-a)<0&&(r=-r),(c+=r)<p&&(p=c,d=n),(l=c-(s[n]>>12))<h&&(h=l,m=n),u=i[n]>>10,i[n]-=u,s[n]+=u<<10;return i[d]+=64,s[d]-=65536,m};return u.apply(this,arguments),c},ze=function(){var e,t,a,n,o,c,r,s,i,l,u,d,m={},p=[],h=[],f=0,v=!1,g=0,b=0,y=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],k=[],w=m.LZWEncoder=function(o,c,r,s){e=o,t=c,a=r,n=Math.max(2,s)},E=function(e,t){k[d++]=e,d>=254&&O(t)},N=function(e){S(5003),f=l+2,v=!0,I(l,e)},S=function(e){for(var t=0;t<e;++t)p[t]=-1},C=m.compress=function(e,t){var a,n,o,c,m,g;for(v=!1,s=j(r=i=e),u=(l=1<<e-1)+1,f=l+2,d=0,c=A(),g=0,a=5003;a<65536;a*=2)++g;g=8-g,S(5003),I(l,t);e:for(;-1!=(o=A());)if(a=(o<<12)+c,p[n=o<<g^c]!=a){if(p[n]>=0){m=5003-n,0===n&&(m=1);do{if((n-=m)<0&&(n+=5003),p[n]==a){c=h[n];continue e}}while(p[n]>=0)}I(c,t),c=o,f<4096?(h[n]=f++,p[n]=a):N(t)}else c=h[n];I(c,t),I(u,t)},O=(m.encode=function(a){a.writeByte(n),o=e*t,c=0,C(n+1,a),a.writeByte(0)},function(e){d>0&&(e.writeByte(d),e.writeBytes(k,0,d),d=0)}),j=function(e){return(1<<e)-1},A=function(){return 0===o?-1:(--o,255&a[c++])},I=function(e,t){for(g&=y[b],b>0?g|=e<<b:g=e,b+=r;b>=8;)E(255&g,t),g>>=8,b-=8;if((f>s||v)&&(v?(s=j(r=i),v=!1):s=12==++r?4096:j(r)),e==u){for(;b>0;)E(255&g,t),g>>=8,b-=8;O(t)}};return w.apply(this,arguments),m},We=function(){for(var e=0,t={};e<256;e++)t[e]=String.fromCharCode(e);function a(){this.bin=[]}a.prototype.getData=function(){for(var e="",a=this.bin.length,n=0;n<a;n++)e+=t[this.bin[n]];return e},a.prototype.writeByte=function(e){this.bin.push(e)},a.prototype.writeUTFBytes=function(e){for(var t=e.length,a=0;a<t;a++)this.writeByte(e.charCodeAt(a))},a.prototype.writeBytes=function(e,t,a){for(var n=a||e.length,o=t||0;o<n;o++)this.writeByte(e[o])};var n,o,c,r,s,i,l,u,d,m={},p=null,h=-1,f=0,g=!1,b=[],y=7,k=-1,w=!1,E=!0,N=!1,S=10,C="Generated by jsgif (https://github.com/antimatter15/jsgif/)",O=(m.setDelay=function(e){f=Math.round(e/10)},m.setDispose=function(e){e>=0&&(k=e)},m.setRepeat=function(e){e>=0&&(h=e)},m.setTransparent=function(e){p=e},m.setComment=function(e){C=e},m.addFrame=function(e,t){if(null===e||!g||null===r)throw new Error("Please call start method before calling addFrame");var a=!0;try{t?e instanceof ImageData?(s=e.data,n==e.width&&o==e.height||j(e.width,e.height)):e instanceof Uint8ClampedArray?e.length==n*o*4?s=e:(console.log("Please set the correct size: ImageData length mismatch"),a=!1):(console.log("Please provide correct input"),a=!1):(s=e.getImageData(0,0,e.canvas.width,e.canvas.height).data,N||j(e.canvas.width,e.canvas.height)),x(),A(),E&&(D(),U(),h>=0&&P()),T(),""!==C&&M(),B(),E||U(),L(),E=!1}catch(c){a=!1}return a},m.download=function(e){if(null===r||0==w)console.log("Please call start method and add frames and call finish method before calling download");else{e=void 0!==e?(e.endsWith(".gif"),e):"download.gif";var t=document.createElement("a");t.download=e,t.href=URL.createObjectURL(new Blob([new Uint8Array(r.bin)],{type:"image/gif"})),t.click()}},m.upload=function(e){if(null!==r&&0!=w){e=void 0!==e?(e.endsWith(".gif"),e):"download.gif";var t=document.createElement("a");t.target="_blank",t.href=URL.createObjectURL(new Blob([new Uint8Array(r.bin)],{type:"image/gif"}));v()(t).attr("href").replace("blob:","");return new Uint8Array(r.bin)}console.log("Please call start method and add frames and call finish method before calling download")},m.finish=function(){if(!g)return!1;var e=!0;g=!1;try{r.writeByte(59),w=!0}catch(t){e=!1}return e},function(){c=0,s=null,i=null,l=null,d=null,w=!1,E=!0}),j=(m.setFrameRate=function(e){15!=e&&(f=Math.round(100/e))},m.setQuality=function(e){e<1&&(e=1),S=e},m.setSize=function(e,t){g&&!E||((n=e)<1&&(n=320),(o=t)<1&&(o=240),N=!0)}),A=(m.start=function(){O();var e=!0;w=!1,r=new a;try{r.writeUTFBytes("GIF89a")}catch(t){e=!1}return g=e},m.cont=function(){O();return w=!1,r=new a,g=!0},function(){var e=i.length,t=e/3;l=[];var a=new He(i,e,S);d=a.process();for(var n=0,o=0;o<t;o++){var r=a.map(255&i[n++],255&i[n++],255&i[n++]);b[r]=!0,l[o]=r}i=null,u=8,y=7,null!==p&&(c=I(p))}),I=function(e){if(null===d)return-1;for(var t=(16711680&e)>>16,a=(65280&e)>>8,n=255&e,o=0,c=16777216,r=d.length,s=0;s<r;){var i=t-(255&d[s++]),l=a-(255&d[s++]),u=n-(255&d[s]),m=i*i+l*l+u*u,p=s/3;b[p]&&m<c&&(c=m,o=p),s++}return o},x=function(){var e=n,t=o;i=[];for(var a=s,c=0,r=0;r<t;r++)for(var l=0;l<e;l++){var u=r*e*4+4*l;i[c++]=a[u],i[c++]=a[u+1],i[c++]=a[u+2]}},T=function(){var e,t;r.writeByte(33),r.writeByte(249),r.writeByte(4),null===p?(e=0,t=0):(e=1,t=2),k>=0&&(t=7&k),t<<=2,r.writeByte(0|t|e),F(f),r.writeByte(c),r.writeByte(0)},M=function(){r.writeByte(33),r.writeByte(254),r.writeByte(C.length),r.writeUTFBytes(C),r.writeByte(0)},B=function(){r.writeByte(44),F(0),F(0),F(n),F(o),E?r.writeByte(0):r.writeByte(128|y)},D=function(){F(n),F(o),r.writeByte(240|y),r.writeByte(0),r.writeByte(0)},P=function(){r.writeByte(33),r.writeByte(255),r.writeByte(11),r.writeUTFBytes("NETSCAPE2.0"),r.writeByte(3),r.writeByte(1),F(h),r.writeByte(0)},U=function(){r.writeBytes(d);for(var e=768-d.length,t=0;t<e;t++)r.writeByte(0)},F=function(e){r.writeByte(255&e),r.writeByte(e>>8&255)},L=function(){new ze(n,o,l,u).encode(r)};m.stream=function(){return r},m.setProperties=function(e,t){g=e,E=t};return m};var Ge,Ye,Je,Ke=window.UploaderForGoogleDrive=function(){var e=function(){this.interval=1e3,this.maxInterval=6e4};e.prototype.retry=function(e){setTimeout(e,this.interval),this.interval=this.nextInterval_()},e.prototype.reset=function(){this.interval=1e3},e.prototype.nextInterval_=function(){var e=2*this.interval+this.getRandomInt_(0,1e3);return Math.min(e,this.maxInterval)},e.prototype.getRandomInt_=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};var t=function(t){var a=function(){};if(this.file=t.file,this.contentType=t.contentType||this.file.type||"application/octet-stream",this.metadata=t.metadata||{name:this.file.name,mimeType:this.contentType},t.token)this.token=t.token;else try{this.token=window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse(!0).access_token,S.dispatch({type:"token",value:this.token})}catch(o){throw console.log(o),new Error("Uploader: missing Google OAuth2 access_token")}if(this.onComplete=t.onComplete||a,this.onProgress=t.onProgress||a,this.onError=t.onError||a,this.offset=t.offset||0,this.chunkSize=t.chunkSize||0,this.retryHandler=new e,this.url=t.url,!this.url){var n=t.params||{};n.uploadType="resumable",this.url=this.buildUrl_(t.fileId,n,t.baseUrl)}this.httpMethod=t.fileId?"PATCH":"POST"};return t.prototype.upload=function(){var e=new XMLHttpRequest;e.open(this.httpMethod,this.url,!0),e.setRequestHeader("Authorization","Bearer ".concat(this.token)),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("X-Upload-Content-Length",this.file.size),e.setRequestHeader("X-Upload-Content-Type",this.contentType),e.setRequestHeader("writersCanShare",!0),e.onload=function(e){if(e.target.status<400){var t=e.target.getResponseHeader("Location");this.url=t,this.sendFile_()}else this.onUploadError_(e)}.bind(this),e.onerror=this.onUploadError_.bind(this),e.send(JSON.stringify(this.metadata))},t.prototype.sendFile_=function(){var e=this.file,t=this.file.size;(this.offset||this.chunkSize)&&(this.chunkSize&&(t=Math.min(this.offset+this.chunkSize,this.file.size)),e=e.slice(this.offset,t));var a=new XMLHttpRequest;a.open("PUT",this.url,!0),a.setRequestHeader("Content-Type",this.contentType),a.setRequestHeader("Content-Range","bytes ".concat(this.offset,"-").concat(t-1,"/").concat(this.file.size)),a.setRequestHeader("X-Upload-Content-Type",this.file.type),a.setRequestHeader("writersCanShare",!0),a.upload&&a.upload.addEventListener("progress",this.onProgress),a.onload=this.onContentUploadSuccess_.bind(this),a.onerror=this.onContentUploadError_.bind(this),a.send(e)},t.prototype.resume_=function(){var e=new XMLHttpRequest;e.open("PUT",this.url,!0),e.setRequestHeader("Content-Range","bytes */".concat(this.file.size)),e.setRequestHeader("X-Upload-Content-Type",this.file.type),e.setRequestHeader("writersCanShare",!0),e.upload&&e.upload.addEventListener("progress",this.onProgress),e.onload=this.onContentUploadSuccess_.bind(this),e.onerror=this.onContentUploadError_.bind(this),e.send()},t.prototype.extractRange_=function(e){var t=e.getResponseHeader("Range");t&&(this.offset=parseInt(t.match(/\d+/g).pop(),10)+1)},t.prototype.onContentUploadSuccess_=function(e){200==e.target.status||201==e.target.status?this.onComplete(e.target.response):308==e.target.status?(this.extractRange_(e.target),this.retryHandler.reset(),this.sendFile_()):this.onContentUploadError_(e)},t.prototype.onContentUploadError_=function(e){e.target.status&&e.target.status<500?this.onError(e.target.response):this.retryHandler.retry(this.resume_.bind(this))},t.prototype.onUploadError_=function(e){this.onError(e.target.response)},t.prototype.buildQuery_=function(e){return e=e||{},Object.keys(e).map(function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))}).join("&")},t.prototype.buildUrl_=function(e,t,a){var n=a||"https://www.googleapis.com/upload/drive/v3/files/";e&&(n+=e);var o=this.buildQuery_(t);return o&&(n+="?".concat(o)),n},t}();function qe(e){var t=new We;t.setRepeat(0),t.setDelay(Ge),t.start();for(var a=0;a<v()("#canvas-block").children().length;a+=1){for(var n=document.querySelector("#canvas".concat(a+1)),o=v()("#canvas".concat(a+1)).get(0).getContext("2d").getImageData(0,0,v()("#canvas".concat(a+1)).width(),v()("#canvas".concat(a+1)).width()),c=o.data.length,r=[],s=void 0,i=0;c>0;)(s=o.data.slice(i,i+4)).every(function(e){return 0===e})&&(s=s.map(function(){return 255})),r.push.apply(r,Object(Re.a)(s)),i+=4,c-=4;var l=Uint8ClampedArray.from(r),u=new ImageData(l,n.width,n.height);t.setSize(n.height,n.width),t.addFrame(u,!0)}return t.finish(),Je=Je||"New Piskel-clone",e?t.upload("".concat(Je,".gif")):t.download("".concat(Je,".gif"))}function Ve(){var e=new We;e.setRepeat(0),e.setDelay(Ge),e.start();for(var t=0;t<v()("#canvas-block").children().length;t+=1){for(var a=document.querySelector("#canvas".concat(t+1)),n=v()("#canvas".concat(t+1)).get(0).getContext("2d").getImageData(0,0,v()("#canvas".concat(t+1)).width(),v()("#canvas".concat(t+1)).width()),o=n.data.length,c=[],r=void 0,s=0;o>0;)(r=n.data.slice(s,s+4)).every(function(e){return 0===e})&&(r=r.map(function(){return 255})),c.push.apply(c,Object(Re.a)(r)),s+=4,o-=4;var i=Uint8ClampedArray.from(c),l=new ImageData(i,a.width,a.height);e.setSize(a.height,a.width),e.addFrame(l,!0)}e.finish();var u=e.stream().getData();return"data:image/gif;base64,".concat(function(e){for(var t,a,n,o,c,r,s,i="",l=0,u=e.length,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l<u;)o=(t=e.charCodeAt(l++))>>2,c=(3&t)<<4|(a=e.charCodeAt(l++))>>4,r=(15&a)<<2|(n=e.charCodeAt(l++))>>6,s=63&n,isNaN(a)?r=s=64:isNaN(n)&&(s=64),i=i+d.charAt(o)+d.charAt(c)+d.charAt(r)+d.charAt(s);return i}(u))}window.pUploaderForGoogleDrive=function(e){return new Promise(function(t,a){e.onComplete=function(e){var a;try{a="string"===typeof e?JSON.parse(e):e}catch(n){a=e}t(a)},e.onError=function(e){a(e)},new window.UploaderForGoogleDrive(e).upload()})},w.subscribe(function(){var e=w.getState().fps||3;Ge=1e3/e}),N.subscribe(function(){Ye=N.getState().currentCanvas}),E.subscribe(function(){Je=E.getState().title});var Qe="AIzaSyD8p3NmO-jrbUeGpC9EYDHzH8FWOl3ivss";function Xe(){window.gapi.client.setApiKey(Qe),window.gapi.client.load("https://content.googleapis.com/discovery/v1/apis/drive/v3/rest").then(function(){console.log("GAPI client loaded for API")},function(e){console.error("Error loading GAPI client for API",e)});var e=new Blob([qe("upload")],{type:"image/gif"});new Ke({file:e,metadata:{name:Je},onComplete:function(e){var t=JSON.parse(e).id,a="https://drive.google.com/open?id=".concat(t),n="https://drive.google.com/thumbnail?id=".concat(t);S.dispatch({type:"googleUrl",value:a}),S.dispatch({type:"gifUrl",value:n}),v()("#google-link").attr("href",a),v()("#span-link").attr("href",n),window.gapi.client.drive.permissions.create({fileId:"".concat(t),resource:{role:"reader",type:"anyone"}}).then(function(e){console.log("Response",e)},function(e){console.error("Execute error",e)})},onError:function(e){console.log(e)}}).upload()}var Ze=a(26),_e=a.n(Ze);_e.a.initializeApp({apiKey:"AIzaSyBADlQGxow-MMb31zZkmqE10d4XSh2nMaM",authDomain:"piskel-clown-1561245773423.firebaseapp.com",databaseURL:"https://piskel-clown-1561245773423.firebaseio.com",projectId:"piskel-clown-1561245773423",storageBucket:"",messagingSenderId:"717448332612",appId:"1:717448332612:web:b29e4fdc54066ec0"});var $e,et,tt,at,nt,ot,ct=_e.a;function rt(){var e=new Date,t=e.getDate();t<10&&(t="0".concat(t));var a=e.getMonth();a<10&&(a="0".concat(a));var n=e.getHours();n<10&&(n="0".concat(n));var o=e.getMinutes();o<10&&(o="0".concat(o));var c=new Date("".concat(n,":").concat(o," ").concat(a,"/").concat(t,"/").concat(e.getFullYear())).getTime();return"".concat(n,":").concat(o," ").concat(t,"/").concat(a,"/").concat(e.getFullYear(),"  ").concat(c)}function st(e,t,a,n,o,c,r,s,i,l){var u=void 0!==a?a:localStorage.getItem("project"),d=e,m=[];if(t&&Object.keys(t).length>0)for(var p in t)d[p]={gif:t[p].gif,frames:t[p].frames,title:t[p].title,date:t[p].date,time:t[p].time,description:t[p].description,fps:t[p].fps};if(0===Object.keys(d).length)d[u]={gif:n,frames:o,title:c,date:r,time:s,description:i,fps:l};else{for(var h in d)h===u&&(d[h].gif=n,d[h].frames=o,d[h].title=c,d[h].date=r,d[h].time=s,d[h].description=i,d[h].fps=l),m.push(h);m.every(function(e){return e!==u})&&(d[u]={gif:n,frames:o,title:c,date:r,time:s,description:i,fps:l})}return d}function it(e,t,a,n,o,c,r,s,i){ct.database().ref("users/".concat(e,"/").concat(t)).set({frames:a,gif:n,date:o,time:c,title:r,description:s,fps:i})}window.localProjects={},window.authLocalProjects={},C.subscribe(function(){$e=C.getState().optionsBlock}),S.subscribe(function(){et=S.getState().name,tt=S.getState().userID}),k.subscribe(function(){at=k.getState().piskelID}),E.subscribe(function(){nt=E.getState().title,ot=E.getState().description});var lt,ut,dt,mt,pt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={isLogin:!1,isFull:!1,isSaved:!1,title:"",description:""},e.mounted=!1,e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){nt?this.setState({title:nt}):this.setState({title:"New Piskel"}),ot&&this.setState({description:ot})}},{key:"componentDidMount",value:function(){this.mounted=!0,et&&this.setState({isLogin:!0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.state={isFull:!1,isSaved:!1,title:"New Piskel",description:""}}},{key:"saveLocallyHandler",value:function(){var e=this,t=v()("#title-input").val();this.setState({title:t}),E.dispatch({type:"title",value:t});for(var a=[],n=0;n<v()(".preview").children().length;n+=1)a.push(v()(".preview").children()[n].src);var o=Ve(),c="undefined"!==localStorage.getItem("localProjects")?JSON.parse(localStorage.getItem("localProjects")):void 0;if(c)if(Object.keys(c).length<20)this.setState({isSaved:!0}),setTimeout(function(){e.mounted&&e.setState({isSaved:!1})},5e3);else{if(!Object.entries(c).some(function(e){return e[0]===localStorage.getItem("project")}))return this.setState({isFull:"local"}),void setTimeout(function(){e.mounted&&e.setState({isFull:!1})},5e3);this.setState({isSaved:!0}),setTimeout(function(){e.mounted&&e.setState({isSaved:!1})},5e3)}var r=rt().split("  "),s=v()("#description-input").val(),i=v()("#fps-bar").val(),l=JSON.stringify(st(window.localProjects,c,at,o,a,t,r[0],r[1],s,i));localStorage.setItem("localProjects",l),k.dispatch({type:"projects",value:l}),v()("#addLocalPiskel").click()}},{key:"saveToGaleryHandler",value:function(){var e=this;if(!localStorage.getItem("auth"))return this.setState({isLogin:!1}),void v()("#signOuted").click();var t=v()("#title-input").val();this.setState({title:t}),E.dispatch({type:"title",value:t});for(var a=[],n=0;n<v()(".preview").children().length;n+=1)a.push(v()(".preview").children()[n].src);var o=Ve(),c="undefined"!==localStorage.getItem("authLocalProjects")?JSON.parse(localStorage.getItem("authLocalProjects")):void 0,r=localStorage.getItem("userID"),s="undefined"!==localStorage.getItem("".concat(r))?JSON.parse(localStorage.getItem("".concat(r))):void 0;if(s)if(Object.keys(s).length<30)this.setState({isSaved:!0}),setTimeout(function(){e.mounted&&e.setState({isSaved:!1})},5e3);else{if(!Object.entries(s).some(function(e){return e[0]===localStorage.getItem("project")}))return this.setState({isFull:"personal"}),void setTimeout(function(){e.mounted&&e.setState({isFull:!1})},5e3);this.setState({isSaved:!0}),setTimeout(function(){e.mounted&&e.setState({isSaved:!1})},5e3)}var i=rt().split("  "),l=v()("#description-input").val(),u=v()("#fps-bar").val(),d=JSON.stringify(function(e,t,a,n,o,c,r,s,i,l,u){var d,m=e,p=localStorage.getItem("userID");if(t){var h=Object.entries(t);m={};for(var f=0;f<h.length;f+=1)m[h[f][0]]={},m[h[f][0]]=h[f][1];h.every(function(e){return e[0]!==i})&&(m[i]={})}else m[i]={};if(localStorage.getItem("".concat(p))&&(m[i]={},m[i]=JSON.parse(localStorage.getItem("".concat(p)))),m)for(var v=Object.entries(m),g=0;g<v.length;g+=1)v[g][0]===i&&(d=v[g][1]);for(var b=st(m["".concat(i)],d,a,n,o,c,r,s,l,u),y=Object.entries(b),k=0;k<y.length;k+=1){var w=y[k][0],E=y[k][1];it(i,w,E.frames,E.gif,E.date,E.time,E.title,E.description,E.fps)}var N=JSON.stringify(b);return localStorage.setItem("".concat(i),N),m["".concat(i)]=b,m}(window.authLocalProjects,c,at,o,a,t,i[0],i[1],tt,l,u));localStorage.setItem("authLocalProjects",d)}},{key:"updateState",value:function(){et&&this.setState({isLogin:!0}),nt?this.setState({title:nt}):this.setState({title:"New Piskel"}),ot&&this.setState({description:ot})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"save-settings-block ".concat(this.mounted&&"save-settings"===$e?"flexed":"hidden")},o.a.createElement("div",{className:"sprite-info-block"},o.a.createElement("span",{className:"sprite-info bold"},"Sprite information"),o.a.createElement("span",{className:"label-title"},"Title:"),o.a.createElement("input",{className:"title-input",id:"title-input",value:this.state.title,onChange:function(){return e.setState({title:v()("#title-input").val()})}}),o.a.createElement("span",{className:"label-description"},"Description:"),o.a.createElement("textarea",{rows:"1",cols:"6",className:"description-input",id:"description-input",value:this.state.description,onChange:function(){return e.setState({description:v()("#description-input").val()})}})),o.a.createElement("div",{className:"save-online-block"},o.a.createElement("span",{className:"save-online bold"},"Save online"),o.a.createElement("button",{id:"save-locally",className:"save-online-button",type:"button",onClick:function(){return e.saveLocallyHandler()}},"Save locally"),o.a.createElement("p",{className:"save-online-info"},"Your piskel will be saved and available only from this browser"),o.a.createElement("button",{id:"save-online",className:"save-online-button ".concat(this.mounted&&this.state.isLogin?"":"hidden"),type:"button",onClick:function(){return e.saveToGaleryHandler()}},"Save to your gallery"),o.a.createElement("button",{type:"button",onClick:function(){v()(".abcRioButton.abcRioButtonLightBlue").click()},className:"save-online-button ".concat(this.mounted&&this.state.isLogin?"hidden":"")},"Sign in to save to your gallery"),o.a.createElement("p",{className:"save-online-info"},"Your piskel will be stored online in your gallery"),o.a.createElement("button",{type:"button",className:"hidden",id:"updateSaveButtonLoggedIn",onClick:function(){return e.updateState()}}),o.a.createElement("p",{id:"error",className:"".concat(this.mounted&&this.state.isFull?"storage-warning error":"hidden")},"Your ".concat(this.state.isFull," storage is full, please delete old piskels")),o.a.createElement("p",{id:"success",className:"".concat(this.mounted&&this.state.isSaved?"storage-warning success":"hidden")},"Your animation successfully saved!")))}}]),t}(o.a.Component);a(72);C.subscribe(function(){lt=C.getState().optionsBlock}),S.subscribe(function(){ut=S.getState().googleUrl,dt=S.getState().urlToGif,mt=S.getState().name});var ht,ft=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={active:"show-gif-block",dataUrl:"",googleUrl:"",isLogin:!1},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.mounted=!0,mt&&this.setState({isLogin:!0})}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"showExportOptions",value:function(e){var t=e.target.getAttribute("id");this.setState({active:t})}},{key:"updateState",value:function(){mt&&this.setState({isLogin:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"export-settings-block ".concat("export-settings"===lt?"flexed":"hidden")},o.a.createElement("span",{className:"export-info bold"},"Export"),o.a.createElement("div",{className:"file-format-buttons"},o.a.createElement("button",{id:"show-gif-block",className:"show-gif-block ".concat("show-gif-block"===this.state.active?"active-show-button":"not-active-show-button"),type:"button",onClick:function(t){return e.showExportOptions(t)}},"GIF"),o.a.createElement("button",{id:"show-png-block",className:"show-png-block ".concat("show-png-block"===this.state.active?"active-show-button":"not-active-show-button"),type:"button",onClick:function(t){return e.showExportOptions(t)}},"PNG")),o.a.createElement("div",{className:"gif-block ".concat("show-gif-block"===this.state.active?"flexed":"hidden")},o.a.createElement("span",{className:"gif-title"},"Convert your sprite to an animated GIF"),o.a.createElement("div",{className:"download-block"},o.a.createElement("button",{id:"download-gif",className:"gif-button",type:"button",onClick:function(){return qe()}},"Download"),o.a.createElement("span",{className:"download-gif-title"},"Download as an animated GIF")),o.a.createElement("div",{className:"download-block"},o.a.createElement("button",{id:"upload-gif",className:"gif-button",type:"button",onClick:function(){var t=Ve();e.setState({dataUrl:t})}},"Open in new tab"),o.a.createElement("span",{className:"upload-gif-title"},"Watch an animated GIF in new tab"),o.a.createElement("div",{className:"link-to-gif ".concat(this.state.dataUrl?"":"hidden")},o.a.createElement("button",{type:"button",onClick:function(){!function(e){var t=window.open();v()(t.document.body).css({display:"flex",width:"100vw",heigh:"100vh","justify-content":"center","align-items":"center",background:"whitesmoke"}),v()("<img></img>",{src:e}).appendTo(t.document.body)}(e.state.dataUrl),e.setState({dataUrl:""})}},"your animation file"))),o.a.createElement("div",{className:"download-block"},o.a.createElement("button",{id:"upload-google",className:"gif-button ".concat(this.state.isLogin?"":"hidden"),type:"button",onClick:function(){if(!localStorage.getItem("auth"))return e.setState({isLogin:!1}),void v()("#signOuted").click();Xe(),setTimeout(function(){e.setState({googleUrl:!0})},700),setTimeout(function(){e.setState({googleUrl:""})},15e4)}},"Get link"),o.a.createElement("span",{className:"upload-gif-google ".concat(this.state.isLogin?"blocked":"hidden")},"Save your animation to Google disk to share"),o.a.createElement("button",{type:"button",onClick:function(){v()(".abcRioButton.abcRioButtonLightBlue").click()},className:"save-online-button ".concat(this.state.isLogin?"hidden":"")},"Sign in to save to Google disk"),o.a.createElement("button",{type:"button",className:"hidden",id:"updateGoogleButtonLoggedIn",onClick:function(){return e.updateState()}}),o.a.createElement("div",{className:"link-to-gif ".concat(this.state.googleUrl?"":"hidden")},o.a.createElement("span",null,"Click the link"),o.a.createElement("a",{className:"google-link",id:"google-link",rel:"noopener noreferrer",target:"_blank",href:ut},"Link to file on Google disk"),o.a.createElement("a",{className:"google-link",id:"span-link",rel:"noopener noreferrer",target:"_blank",href:dt},"Direct link to your GIF")))),o.a.createElement("div",{className:"png-block ".concat("show-png-block"===this.state.active?"flexed":"hidden")},o.a.createElement("span",{className:"png-title"},"Export your animation as a PNG file"),o.a.createElement("div",{className:"download-block"},o.a.createElement("button",{id:"download-png",className:"png-button",type:"button",onClick:function(){return function(){var e=Ye,t=new We;t.setRepeat(0),t.setDelay(Ge),t.start();for(var a,n=v()("#canvas".concat(e)).width(),o=v()("#canvas".concat(e)).get(0).getContext("2d").getImageData(0,0,n,n),c=o.data.length,r=[],s=0;c>0;)(a=o.data.slice(s,s+4)).every(function(e){return 0===e})&&(a=a.map(function(){return 255})),r.push.apply(r,Object(Re.a)(a)),s+=4,c-=4;var i=Uint8ClampedArray.from(r),l=new ImageData(i,n,n);t.setSize(n,n),t.addFrame(l,!0),t.finish(),Je=Je||"New Piskel-clone",t.download("".concat(Je,".png"))}()}},"Download"),o.a.createElement("span",{className:"download-png-title"},"Download selected frame as PNG file")),o.a.createElement("div",{className:"download-block"},o.a.createElement("button",{id:"open-png",className:"png-button",type:"button",onClick:function(){for(var e=[],t=0;t<v()(".preview").children().length;t+=1)e.push(v()(".preview").children()[t].src);!function(e,t){var a=window.open();v()(a.document.body).css({display:"flex","flex-direction":"column",width:"100vw",height:"100vh","align-items":"center",background:"whitesmoke",overflow:"hidden"});for(var n=v()("<div></div>",{id:"ancor",width:"100%",height:"50%"}).appendTo(a.document.body).css({width:"80%",height:"50%",background:"white","overflow-y":"scroll","margin-bottom":"25px",border:"1px solid black"}),o=0;o<e.length;o+=1)v()("<img></img>",{src:e[o],width:"25%"}).appendTo(n).css({border:"1px solid black"});v()("<div></div>",{text:t}).appendTo(a.document.body).css({display:"flex","flex-wrap":"wrap",width:"80%",height:"40%","overflow-y":"scroll","word-break":"break-word"})}(e,Ve())}},"Open"),o.a.createElement("span",{className:"open-png-title"},"Open the spritesheet as a data uri"))),o.a.createElement("div",{id:"hidden",className:"hidden"}))}}]),t}(o.a.Component);a(30);C.subscribe(function(){ht=C.getState().optionsBlock});var vt,gt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){return o.a.createElement("div",{className:"general-settings-block ".concat("import-settings"===ht?"flexed":"hidden")},o.a.createElement("div",{className:"current-bg"},o.a.createElement("span",{className:"default-bg bold"},"Load from browser"),o.a.createElement("p",null,"Load your animation saved in this browser"),o.a.createElement("button",{type:"button",onClick:function(){return v()("#showSavesButton").click()},className:"browse-local-piskels-button"},"Browse local saves")))}}]),t}(o.a.Component);w.subscribe(function(){vt=w.getState().fps});var bt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={fps:3,hovered:"",active:"none",mouseEnter:!1},e.mounted=!1,e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fpsOnChangeHandler",value:function(){w.dispatch({type:"fps",value:v()("#fps-bar").val()}),this.mounted&&this.setState({fps:vt})}},{key:"popHintOnMouseOver",value:function(e){var t=e.target.getAttribute("id");this.mounted&&(this.state.hovered===t?this.setState({hovered:""}):this.setState({hovered:t}))}},{key:"mouseIn",value:function(){this.mounted&&this.setState({mouseEnter:!0})}},{key:"mouseOut",value:function(){this.mounted&&this.setState({mouseEnter:!1})}},{key:"showOptionsOnClick",value:function(e){var t=v()(e.target).attr("id")||v()(e.target).find("i").attr("id");this.mounted&&(this.state.active===t?(this.setState({active:"none"}),C.dispatch({type:"optionsBlock",value:"none"})):(this.setState({active:t}),C.dispatch({type:"optionsBlock",value:t})))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"optionsBox",id:"optionsBox"},o.a.createElement("div",{className:"fps-options"},o.a.createElement("span",{id:"display-fps",className:"display-fps"},"".concat(this.state.fps," FPS")),o.a.createElement("input",{type:"range",min:"1",max:"24",step:"1",defaultValue:this.state.fps,id:"fps-bar",className:"fps-bar",onChange:function(){return e.fpsOnChangeHandler()}})),o.a.createElement(Me,null),o.a.createElement(De,null),o.a.createElement("div",{className:"options-blocks-area ".concat("none"===this.state.active?"":"slide")},o.a.createElement(Fe,null),o.a.createElement(Le,null),o.a.createElement(pt,null),o.a.createElement(ft,null),o.a.createElement(gt,null)),o.a.createElement("div",{className:"settings-buttons ".concat(this.state.active&&"none"===this.state.active?"":"slide"),onMouseOver:function(t){return e.popHintOnMouseOver(t)},onFocus:function(){}},o.a.createElement("button",{type:"button",className:"settings-button",onFocus:function(){},onClick:function(t){return e.showOptionsOnClick(t)},onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"settings",className:"fas fa-cog ".concat("settings"===this.state.hovered?"fas-hovered":""," ").concat("settings"===this.state.active?"fas-hovered":"")})),o.a.createElement("button",{type:"button",className:"settings-button",onFocus:function(){},onClick:function(t){return e.showOptionsOnClick(t)},onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"resize-settings",className:"fas fa-crop ".concat("resize-settings"===this.state.hovered?"fas-hovered":""," ").concat("resize-settings"===this.state.active?"fas-hovered":"")})),o.a.createElement("button",{type:"button",className:"settings-button",onFocus:function(){},onClick:function(t){return e.showOptionsOnClick(t)},onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"save-settings",className:"fas fa-save ".concat("save-settings"===this.state.hovered?"fas-hovered":""," ").concat("save-settings"===this.state.active?"fas-hovered":"")})),o.a.createElement("button",{type:"button",className:"settings-button",onFocus:function(){},onClick:function(t){return e.showOptionsOnClick(t)},onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"export-settings",className:"fas fa-file-download ".concat("export-settings"===this.state.hovered?"fas-hovered":""," ").concat("export-settings"===this.state.active?"fas-hovered":"")})),o.a.createElement("button",{type:"button",className:"settings-button",onFocus:function(){},onClick:function(t){return e.showOptionsOnClick(t)},onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"import-settings",className:"fas fa-file-upload ".concat("import-settings"===this.state.hovered?"fas-hovered":""," ").concat("import-settings"===this.state.active?"fas-hovered":"")})),o.a.createElement("p",{className:"hint settings-button-cog ".concat(!0===this.state.mouseEnter&&"settings"===this.state.hovered?"":"hidden")},"Settings",o.a.createElement("i",{className:"settings-button-cog-arrow fas fa-caret-right"})),o.a.createElement("p",{className:"big hint resize-settings ".concat(!0===this.state.mouseEnter&&"resize-settings"===this.state.hovered?"":"hidden")},"Resize the drawing area",o.a.createElement("i",{className:"resize-settings-arrow fas fa-caret-right"})),o.a.createElement("p",{className:"hint save-settings ".concat(!0===this.state.mouseEnter&&"save-settings"===this.state.hovered?"":"hidden")},"Save to your galery",o.a.createElement("i",{className:"save-settings-arrow fas fa-caret-right"})),o.a.createElement("p",{className:"big hint export-settings ".concat(!0===this.state.mouseEnter&&"export-settings"===this.state.hovered?"":"hidden")},"Export as image or animated gif",o.a.createElement("i",{className:"export-settings-arrow fas fa-caret-right"})),o.a.createElement("p",{className:"big hint import-settings ".concat(!0===this.state.mouseEnter&&"import-settings"===this.state.hovered?"":"hidden")},"Import your animation",o.a.createElement("i",{className:"import-settings-arrow fas fa-caret-right"}))))}}]),t}(o.a.Component);function yt(e){for(var t=v()("#drawCanvas").width();v()("#canvas-block").children().length>1;)Oe(v()("#canvas-block").children().length);v()("#canvas1").get(0).getContext("2d").clearRect(0,0,t,t);for(var a=function(a){if(v()("#canvas-block")){e.length>v()("#canvas-block").children().length&&v()(".addNewFrame").click();var n=v()("#canvas".concat(a+1)).get(0).getContext("2d"),o=new Image;new Promise(function(t,n){o.src=e[a],o.src?t("Success!"):n(Error("Something went wrong"))}).then(function(){n.drawImage(o,0,0,t,t);var e=v()("#canvas".concat(a+1))[0].toDataURL("image/png");v()("#frame".concat(a+1)).find(".preview-box").css({background:"url(".concat(e,")"),"background-size":"contain"}),he(a+1)})}},n=0;n<e.length;n+=1)a(n)}var kt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={projects:[],page:""},e.changedProjects="",e.mounted=!1,e.project="",e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){if(localStorage.getItem("localProjects")){var e=JSON.parse(localStorage.getItem("localProjects")),t=Object.entries(e).sort(function(e,t){return t[1].time-e[1].time});this.setState({projects:t})}}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"deletePiskel",value:function(e){for(var t=0;t<this.state.projects.length;t+=1)this.state.projects[t][0]===e&&this.state.projects.splice(t,1);this.changedProjects=this.state.projects,window.localProjects={};for(var a=0;a<this.changedProjects.length;a+=1)window.localProjects[this.changedProjects[a][0]]=this.changedProjects[a][1];this.setState({projects:this.changedProjects});var n=JSON.stringify(window.localProjects);localStorage.setItem("localProjects",n)}},{key:"addPiskel",value:function(){if(localStorage.getItem("localProjects")){var e=JSON.parse(localStorage.getItem("localProjects")),t=Object.entries(e).sort(function(e,t){return t[1].time-e[1].time});this.setState({projects:t})}}},{key:"isRedirected",value:function(){return this.state.page?(this.mounted=!1,o.a.createElement(h.a,{to:"/create-animation/".concat(this.project)})):o.a.createElement("div",{className:"hidden"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"local-saves-block"},o.a.createElement("div",null,o.a.createElement("span",{className:"local-saves-title"},"Browse local piskels"),o.a.createElement("i",{className:"far fa-window-close local-saves-button",onClick:function(){return v()("#hideSavesButton").click()},onKeyPress:void 0,tabIndex:"-1",role:"button"})),o.a.createElement("div",{className:"table-wrapper"},o.a.createElement("table",{className:"table-local-saves",cellPadding:"10",cellSpacing:"20"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"table-title"},"Name"),o.a.createElement("th",{className:"table-title"},"Date"),o.a.createElement("th",{className:"table-title"},"Actions"))),o.a.createElement("tbody",null,this.state.projects.map(function(t){return o.a.createElement("tr",{key:t[0]},o.a.createElement("td",{key:t[1].title,className:"table-data"},t[1].title),o.a.createElement("td",{key:t[1].date,className:"table-data"},t[1].date),o.a.createElement("td",{key:"".concat(t[0],"-buttons"),className:"table-data table-data-buttons"},o.a.createElement("button",{key:"".concat(t[0],"-load"),type:"button",className:"table-button",onClick:function(){e.project=t[0],localStorage.setItem("project",t[0]),k.dispatch({type:"piskelID",value:t[0]}),E.dispatch({type:"title",value:t[1].title}),E.dispatch({type:"description",value:t[1].description}),setTimeout(function(){yt(t[1].frames)},300),v()("#hideSavesButton").click(),v()("#updateSaveButtonLoggedIn").click(),e.setState({page:"create-animation/".concat(t[0])})}},"Load"),o.a.createElement("button",{key:"".concat(t[0],"-delete"),type:"button",className:"table-button",onClick:function(){return e.deletePiskel(t[0])}},"Delete")))})))),this.isRedirected(),o.a.createElement("button",{id:"addLocalPiskel",type:"button",className:"hidden",onClick:function(){return e.addPiskel()}}))}}]),t}(o.a.Component),wt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={showSaves:!1},e.mounted=!1,e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,v()(window).bind("beforeunload",function(){return"are you sure you want to leave?"})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"container",className:"container"},o.a.createElement("section",{className:"tool-pannel",id:"tool-pannel"},o.a.createElement(R,null)),o.a.createElement("section",{className:"frame-area",id:"frame-area"},o.a.createElement(xe,null)),o.a.createElement("section",{className:"canvas-area",id:"canvas-area"},o.a.createElement(ye,null)),o.a.createElement("section",{className:"preview-area noselect",id:"preview-area"},o.a.createElement(Te,null)),o.a.createElement("section",{className:"options-area",id:"options-area"},o.a.createElement(bt,null)),o.a.createElement("div",{className:"local-saves-page ".concat(this.mounted&&this.state.showSaves?"":"hidden")},o.a.createElement("div",{className:"local-saves-background"}),o.a.createElement(kt,null)),o.a.createElement("button",{type:"button",className:"hidden",id:"showSavesButton",onClick:function(){return e.setState({showSaves:!0})}}),o.a.createElement("button",{type:"button",className:"hidden",id:"hideSavesButton",onClick:function(){return e.setState({showSaves:!1})}}))}}]),t}(o.a.Component);a(77);function Et(){for(var e,t=[],a=0;a<20;a+=1)e=[[48,57],[65,90],[97,122]][3*Math.random()>>0],t[a]=String.fromCharCode((Math.random()*(e[1]-e[0]+1)>>0)+e[0]);return t.join("")}var Nt,St,Ct=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={page:""},e.id="",e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"isRedirected",value:function(e){return this.state.page?o.a.createElement(h.a,{to:"/create-animation/".concat(this.id)}):e?o.a.createElement("span",{className:"description-link"},"Create a new Sprite"):o.a.createElement("span",{className:"link"},"Create Sprite")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"homepage-section"},o.a.createElement("div",{className:"home-about"},o.a.createElement("h1",null,o.a.createElement("span",{className:"piskel"},"Piskel-clone "),"is a free online editor for animated sprites & pixel art"),o.a.createElement("h2",null,"Create animations in your browser."),o.a.createElement("h2",null,o.a.createElement("span",{className:"description-link"},"Try an example"),", use ",o.a.createElement("span",{role:"button",tabIndex:"-1",onKeyPress:void 0,className:"description-link",onClick:function(){return v()(".abcRioButton.abcRioButtonLightBlue").click()}},"Google sign in")," to access your gallery or simply ",o.a.createElement("button",{type:"button",className:"text-button",onClick:function(){e.id=Et(),k.dispatch({type:"piskelID",value:e.id}),w.dispatch({type:"currentPage",value:"create-animation/".concat(e.id)}),e.setState({page:"create-animation/".concat(e.id)}),localStorage.setItem("page","create-animation/".concat(e.id)),localStorage.setItem("project",e.id),v()(document.body).css({cursor:"default"})}},this.isRedirected("span"))),o.a.createElement("div",{className:"home-buttons"},o.a.createElement("button",{type:"button",className:"login-button",onClick:function(){return v()(".abcRioButton.abcRioButtonLightBlue").click()}},"Sign in"),o.a.createElement("button",{type:"button",className:"create-button",onClick:function(){e.id=Et(),k.dispatch({type:"piskelID",value:e.id}),e.setState({page:"create-animation/".concat(e.id)}),localStorage.setItem("page","create-animation/".concat(e.id)),localStorage.setItem("project",e.id),v()(document.body).css({cursor:"default"})}},this.isRedirected()))),o.a.createElement("div",{className:"home-image"},o.a.createElement("div",{className:"screen"}),o.a.createElement("div",{className:"home-preview"})))}}]),t}(o.a.Component);S.subscribe(function(){Nt=S.getState().name,St=S.getState().imageURL});var Ot=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={active:"",height:"",isEmpty:!0,projects:[]},e.changedProjects="",e.localObj={},e.mounted=!1,e.user="",e.project="",e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.user=localStorage.getItem("userID"),localStorage.getItem("auth")||this.setState({isEmpty:!0})}},{key:"componentDidMount",value:function(){var e=this;if(this.setState({height:window.innerHeight}),this.mounted=!0,localStorage.getItem("".concat(this.user))){var t=JSON.parse(localStorage.getItem("".concat(this.user))),a=Object.entries(t).sort(function(e,t){return t[1].time-e[1].time});this.setState({isEmpty:!1,projects:a})}else ct.database().ref("/users/".concat(this.user)).once("value").then(function(t){if(e.localObj=t.val(),e.localObj){var a=JSON.stringify(e.localObj);localStorage.setItem("".concat(e.user),a);var n=Object.entries(e.localObj).sort(function(e,t){return t[1].time-e[1].time});e.setState({isEmpty:!1,projects:n})}})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"deletePiskel",value:function(e){if(!localStorage.getItem("auth"))return this.setState({isEmpty:!0}),void v()("#signOuted").click();for(var t=0;t<this.state.projects.length;t+=1)this.state.projects[t][0]===e&&(ct.database().ref("users/".concat(this.user,"/").concat(this.state.projects[t][0])).set(null),this.state.projects.splice(t,1));this.changedProjects=this.state.projects,window["".concat(this.user)]={};for(var a=0;a<this.changedProjects.length;a+=1)window["".concat(this.user)][this.changedProjects[a][0]]=this.changedProjects[a][1];this.setState({projects:this.changedProjects});var n=JSON.stringify(window["".concat(this.user)]);localStorage.setItem("".concat(this.user),n)}},{key:"hoverIn",value:function(e){this.mounted&&this.setState({active:e.currentTarget.id})}},{key:"hoverOut",value:function(){this.mounted&&this.setState({active:!1})}},{key:"isRedirected",value:function(){return this.state.page?(this.mounted=!1,o.a.createElement(h.a,{to:"/".concat(this.state.page)})):o.a.createElement("div",{className:"hidden"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"user-page",style:{height:this.state.height-110}},o.a.createElement("div",{className:"user-image",style:{backgroundImage:"url(".concat(St,")"),backgroundSize:"contain"}}),o.a.createElement("h2",{className:"user-name"},Nt),o.a.createElement("ul",{className:"piskel-list"},o.a.createElement("li",null,"all"),o.a.createElement("li",null,"public"),o.a.createElement("li",null,"private"),o.a.createElement("li",null,"deleted")),o.a.createElement("div",{id:"user-piskel-preview-area",className:"user-piskel-preview-area"},o.a.createElement("span",{className:"".concat(this.state.isEmpty?"":"hidden")},"No piskel available in 'all' category."),o.a.createElement("div",{className:"user-preview-piskel-block ".concat(this.state.isEmpty?"hidden":"flexed")},this.state.projects.map(function(t,a){return o.a.createElement("div",{key:t,className:"preview-wrapper",id:t[0],onMouseEnter:function(t){return e.hoverIn(t)},onMouseLeave:function(){return e.hoverOut()}},o.a.createElement("img",{key:t[1].gif,className:"preview-gif",src:t[1].gif,alt:"preview"}),o.a.createElement("span",{key:t[1].title,className:"preview-gif-title"},t[1].title),o.a.createElement("span",{key:t[1].date,className:"preview-gif-date"},t[1].date),o.a.createElement("div",{key:"".concat(t[0],"-button-block"),className:"piskel-preview-button-block"},o.a.createElement("button",{key:"".concat(t[0],"-delete"),type:"button",className:"piskel-preview-button ".concat(e.state.active===t[0]?"":"hidden"),onClick:function(){return e.deletePiskel(t[0])}},o.a.createElement("i",{key:"".concat(t[0],"-delete-icon"),className:"fas fa-trash-alt user-buttons"})),o.a.createElement("button",{key:"".concat(t[0],"-edit"),type:"button",className:"piskel-preview-button ".concat(e.state.active===t[0]?"":"hidden"),onClick:function(){e.project=t[0],localStorage.setItem("project",e.project),k.dispatch({type:"piskelID",value:t[0]}),E.dispatch({type:"title",value:t[1].title}),E.dispatch({type:"description",value:t[1].description}),e.setState({page:"create-animation/".concat(e.project)}),setTimeout(function(){yt(t[1].frames)},300)}},o.a.createElement("i",{key:"".concat(t[0],"-edit-icon"),className:"fas fa-pencil-alt user-buttons"})),o.a.createElement("button",{key:"".concat(t[0],"-copy"),type:"button",className:"piskel-preview-button ".concat(e.state.active===t[0]?"":"hidden"),onClick:function(){e.project=Et(),localStorage.setItem("project",e.project),k.dispatch({type:"piskelID",value:e.project}),E.dispatch({type:"title",value:t[1].title}),E.dispatch({type:"description",value:t[1].description}),e.setState({page:"create-animation/".concat(e.project)}),setTimeout(function(){yt(t[1].frames)},300)}},o.a.createElement("i",{key:"".concat(t[0],"-copy-icon"),className:"fas fa-copy user-buttons"})),o.a.createElement("button",{key:"".concat(t[0],"-view"),type:"button",className:"piskel-preview-button ".concat(e.state.active===t[0]?"":"hidden"),onClick:function(){e.project=t[0],localStorage.setItem("project",e.project),k.dispatch({type:"piskelID",value:e.project}),e.setState({page:"user/projects/".concat(e.user,"/").concat(e.project)})}},o.a.createElement("i",{key:"".concat(t[0],"-copy-icon"),className:"fas fa-eye user-buttons"}))))})),this.isRedirected()),o.a.createElement("div",{className:"hidden"},o.a.createElement("button",{id:"userAddPiskel",type:"button",onClick:void 0})))}}]),t}(o.a.Component),jt=a(40),At=a.n(jt);a(78);function It(e,t){return Math.ceil(t-(t-e)*Math.random())}var xt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"isPropsReceived",value:function(){this.props.state&&function e(){var t=100-48e3/window.innerWidth,a=100-37500/window.innerHeight,n=5500/window.innerHeight,o=window.innerHeight-370;document.getElementById("error-image-wrapper").animate([{top:"55px",left:"0"},{top:"".concat(It(n,a),"%"),left:"".concat(It(0,t/2),"%")},{top:"".concat(It(n,a),"%"),left:"".concat(It(0,t/2),"%")},{top:"".concat(o,"px"),left:"".concat(It(t/2,t),"%")},{top:"".concat(It(n,a),"%"),left:"".concat(It(t/2,t),"%")},{top:"55px",left:"".concat(t,"%")},{top:"".concat(It(n,a),"%"),left:"".concat(It(t/2,t),"%")},{top:"".concat(o,"px"),left:"".concat(It(t/2,t),"%")},{top:"".concat(It(n,a),"%"),left:"".concat(It(0,t/2),"%")},{top:"".concat(It(n,a),"%"),left:"".concat(It(0,t/2),"%")},{top:"55px",left:"0"}],{duration:3e4,delay:0,easing:"linear"}).play(),setTimeout(function(){e()},3e4)}()}},{key:"render",value:function(){return o.a.createElement("div",{className:"error-page"},o.a.createElement("div",{className:"error-image-wrapper",id:"error-image-wrapper"},o.a.createElement("img",{src:At.a,alt:"Oops! Somthing went wrong"})),o.a.createElement("div",{className:"error-text-wrapper"},o.a.createElement("span",null,"Oops! Something went wrong :("),o.a.createElement("span",null,"Please refresh the Webpage!")),this.isPropsReceived())}}]),t}(o.a.Component),Tt=(a(79),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={projectInfo:[]},e.changedProjects="",e.localObj={},e.mounted=!1,e.user="",e.project="",e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.user=localStorage.getItem("userID"),this.project=localStorage.getItem("project")}},{key:"componentDidMount",value:function(){var e=this;if(localStorage.getItem("".concat(this.user))){var t=JSON.parse(localStorage.getItem("".concat(this.user))),a=Object.entries(t);this.localObj=a.filter(function(t){return t[0]===e.project}),this.setState({projectInfo:this.localObj})}}},{key:"render",value:function(){return o.a.createElement("div",{className:"project-section"},this.state.projectInfo.map(function(e){return o.a.createElement("div",{key:"".concat(e[0],"-project-wrapper"),className:"project-wrapper"},o.a.createElement("div",{key:"".concat(e[0],"-gif-wrapper"),className:"piskel-page-gif-wrapper"},o.a.createElement("img",{key:e[1].gif,src:e[1].gif,alt:"preview-gif"})),o.a.createElement("div",{key:"".concat(e[0],"-info-wrapper"),className:"piskel-page-info-wrapper"},o.a.createElement("span",{className:"sprite-info-title bold",key:"".concat(e[0],"-title")},"Title"),o.a.createElement("h3",{className:"sprite-title",key:e[1].title},e[1].title),o.a.createElement("span",{className:"sprite-info-title bold",key:"".concat(e[0],"-description")},"Description"),o.a.createElement("h3",{className:"sprite-description",key:e[1].description},"".concat(e[1].description||"no-description yet")),o.a.createElement("span",{className:"sprite-info-title bold",key:"".concat(e[0],"-date")},"Created:"),o.a.createElement("h3",{className:"sprite-date bold",key:e[1].date},e[1].date),o.a.createElement("div",{key:"".concat(e[0],"-options-wrapper")},o.a.createElement("span",{className:"sprite-info-title bold",key:"".concat(e[0],"-options")},"Animation info:"),o.a.createElement("h3",{className:"sprite-options bold",key:"".concat(e[0],"-frames-length")},"Frames:"),o.a.createElement("span",{key:"".concat(e[0],"-frames-span")},"".concat(e[1].frames.length)),o.a.createElement("h3",{className:"sprite-options bold",key:"".concat(e[0],"-fps")},"FPS:"),o.a.createElement("span",{key:"".concat(e[0],"-fps-span")},"".concat(1===e[1].frames.length?0:e[1].fps," frames per second")),o.a.createElement("h3",{className:"sprite-options bold",key:"".concat(e[0],"-time")},"The total duration:"),o.a.createElement("span",{key:"".concat(e[0],"-duration-span")},"".concat((1===e[1].frames.length?0:e[1].frames.length/e[1].fps).toFixed(1)," seconds")))))}))}}]),t}(o.a.Component)),Mt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={id:"",name:"",img:"",redirected:"",active:"",auth:!1,error:!1},e.onSuccess=e.onSuccess.bind(Object(m.a)(e)),e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("page")?this.setState({redirected:localStorage.getItem("page")}):this.setState({redirected:""})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){v()(document.body).ready(function(){window.gapi.load("client:auth2",function(){window.gapi.auth2.init({client_id:"717448332612-evijnpopt50fj6vp0d9iul50sgdout90.apps.googleusercontent.com"}).then(function(){window.gapi.signin2.render("my-signIn",{scope:"https://www.googleapis.com/auth/drive.file",width:240,height:37,longtitle:!0,onsuccess:e.onSuccess,onfailure:e.onFailure})})})})},200)}},{key:"onSuccess",value:function(e){var t=e.getBasicProfile(),a=t.getId(),n=t.getName(),o=t.getImageUrl(),c=t.getEmail();S.dispatch({type:"email",value:c}),S.dispatch({type:"userID",value:a}),localStorage.setItem("userID",a),S.dispatch({type:"name",value:n}),this.setState({id:a,name:n,img:o,auth:!0}),v()("#updateSaveButtonLoggedIn").click(),v()("#updateGoogleButtonLoggedIn").click(),localStorage.setItem("auth",!0),localStorage.getItem("page")?-1===localStorage.getItem("page").indexOf("create")&&this.setState({redirected:localStorage.getItem("page")}):(localStorage.setItem("page","user/".concat(a)),this.setState({redirected:"user/".concat(a)}),v()(document.body).css({cursor:"default"}))}},{key:"signOut",value:function(){var e=this;window.gapi.auth2.getAuthInstance().signOut().then(function(){e.setState({redirected:"",id:"",auth:!1}),localStorage.setItem("page",""),localStorage.setItem("auth",!1),S.dispatch({type:"name",value:""})})}},{key:"isRedirected",value:function(){return S.dispatch({type:"imageURL",value:this.state.img}),localStorage.getItem("page")&&this.state.redirected?o.a.createElement(h.a,{to:"/".concat(this.state.redirected)}):o.a.createElement(h.a,{to:"/"})}},{key:"addActiveClass",value:function(e){var t=e.currentTarget.getAttribute("id");this.state.active===t?this.setState({active:""}):this.setState({active:t})}},{key:"render",value:function(){var e=this;return o.a.createElement(s.a,null,o.a.createElement("div",null,o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"header-menu"},o.a.createElement("span",{className:"menu-icon"},o.a.createElement("i",{className:"fas fa-bars"})),o.a.createElement("ul",{className:"menu"},o.a.createElement("li",{className:"homepage"},o.a.createElement(s.b,{to:"/",className:"task-name",onClick:function(t){if(localStorage.getItem("auth")||e.setState({auth:!1}),localStorage.getItem("page"))if(-1!==localStorage.getItem("page").indexOf("create")){if(!0===confirm("Are you sure you want to leave?"))return e.setState({redirected:"about"}),localStorage.setItem("page","about"),void v()(document.body).css({cursor:"default"});t.preventDefault()}else e.setState({redirected:"about"}),localStorage.setItem("page","about"),v()(document.body).css({cursor:"default"})}},"Piskel-clone")),o.a.createElement("li",{className:"create menu-item"},o.a.createElement(s.b,{to:"/create-animation",className:"create-link",onClick:function(t){if(localStorage.getItem("page")&&-1!==localStorage.getItem("page").indexOf("create")){if(!0===confirm("Are you sure you want to leave?")){var a=Et();return k.dispatch({type:"piskelID",value:a}),e.setState({redirected:"create-animation/".concat(a)}),localStorage.setItem("page","create-animation/".concat(a)),localStorage.setItem("project",a),void v()(document.body).css({cursor:"default"})}t.preventDefault()}else{var n=Et();k.dispatch({type:"piskelID",value:n}),e.setState({redirected:"create-animation/".concat(n)}),localStorage.setItem("page","create-animation/".concat(n)),localStorage.setItem("project",n),v()(document.body).css({cursor:"default"})}}},"Create Animation")),o.a.createElement("li",{className:"signin"},o.a.createElement("div",{className:"menu-item ".concat(this.state.auth?"account":"hidden"),id:"list",role:"button",tabIndex:"-1",onKeyPress:void 0,onClick:function(t){localStorage.getItem("auth")?e.addActiveClass(t):v()("#signOuted").click()}},o.a.createElement("div",{className:"account-image",style:{backgroundImage:"url(".concat(this.state.img,")"),backgroundSize:"contain"}}),o.a.createElement("span",{className:"account-button"},this.state.name),o.a.createElement("i",{className:"fas fa-sort-down"}),o.a.createElement("ul",{className:"dropdown ".concat("list"===this.state.active?"active":"hidden")},o.a.createElement("li",{className:"list top ".concat("list"===this.state.active?"":"hidden")},o.a.createElement(s.b,{to:"/user/".concat(this.state.id),id:"galery",className:"account-item",onClick:function(t){if(v()("#error").removeClass("error"),v()("#success").removeClass("success"),localStorage.getItem("page"))if(-1!==localStorage.getItem("page").indexOf("create")){if(!0===confirm("Are you sure you want to leave?"))return localStorage.setItem("page","user/".concat(e.state.id)),e.setState({redirected:localStorage.getItem("page")}),void v()(document.body).css({cursor:"default"});t.preventDefault()}else localStorage.setItem("page","user/".concat(e.state.id)),e.setState({redirected:localStorage.getItem("page")}),v()(document.body).css({cursor:"default"})}},"My Galery")),o.a.createElement("li",{className:"list bottom ".concat("list"===this.state.active?"":"hidden")},o.a.createElement(s.b,{to:"/".concat(this.state.redirected),id:"logout",className:"account-item",onClick:function(t){!0===confirm("Are you sure you want to leave?")?e.signOut():t.preventDefault()}},"Log out")))),o.a.createElement("div",{id:"my-signIn",className:"".concat(this.state.auth?"hidden":"shown"),onClick:function(){},onKeyPress:function(){},role:"button",tabIndex:"-1"}),this.isRedirected()))),o.a.createElement("button",{id:"signOuted",type:"button",className:"hidden",onClick:function(){return e.setState({auth:!1,error:!0})}})),o.a.createElement("div",{className:"error-section ".concat(this.state.error?"blocked":"hidden")},o.a.createElement(xt,{state:this.state.error})),o.a.createElement("div",{className:"".concat(this.state.error?"hidden":"")},o.a.createElement(h.d,null,o.a.createElement(h.b,{path:"/",exact:!0,component:Ct}),o.a.createElement(h.b,{path:"/user/".concat(this.state.id),component:Ot}),o.a.createElement(h.b,{path:"/user/projects/*",component:Tt}),o.a.createElement(h.b,{path:"/create-animation/*",component:wt}),o.a.createElement(h.b,{path:"*",component:Ct})))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(s.a,null,o.a.createElement(Mt,null)),document.getElementById("home-page")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[41,1,2]]]);
//# sourceMappingURL=main.d30b6b4e.chunk.js.map