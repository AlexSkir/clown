{"version":3,"sources":["assets/images/bg/bg1.png","assets/images/pages/grumpy.jpg","assets/images/pages/preview-example.gif","assets/images/pages/google-icon.png","assets/images/pages/export-gif.png","assets/images/pages/private-page.png","assets/images/toolIcons/colorpicker.png","assets/images/toolIcons/bucket.png","assets/images/toolIcons/eraser.png","assets/images/toolIcons/pen.png","assets/images/pages/error.jpg","locales/index.js","store/store.js","components/functions/random.js","components/functions/navigation.js","containers/accountButton/accountButton.js","services/googleAuth/authApi.js","components/header/header.js","containers/pages/about/about.js","components/functions/toolsFunctions/buttonsClickHandlers.js","components/tooltips/tooltip.js","components/buttons/awesomeButton.js","components/functions/preview.js","components/tools/toolsDomBuilder.js","components/functions/toolsFunctions/cursorShadow.js","components/functions/toolsFunctions/drawing.js","components/screens/frames/frameDomBuilder.js","components/functions/canvasManager.js","components/functions/toolsFunctions/paint.js","components/functions/colors.js","components/screens/canvas/canvasDomBuilder.js","components/screens/preview/previewDomBuilder.js","components/menuComponents/layers-list/layers-list.js","components/buttons/paletteSampleButton.js","components/menuComponents/palettes/palettes.js","components/menuComponents/settings/settings.js","components/menuComponents/resize/resizeCanvas.js","firebase/firebase.js","components/functions/requestToDB.js","services/jsgif-master/NeuQuant.js","services/jsgif-master/LZWEncoder.js","services/jsgif-master/GIFEncoder.js","components/functions/menuFunctions/fromCanvasToFile.js","services/jsgif-master/b64.js","components/functions/menuFunctions/saveProject.js","components/menuComponents/save/save.js","services/google-uploader/googleUploader.js","components/functions/menuFunctions/exportToGoogle.js","components/menuComponents/export/export.js","components/menuComponents/import/import.js","containers/menu/optionsDomBuilder.js","components/functions/menuFunctions/fromImageToCanvas.js","containers/pages/localSaves/localSaves.js","containers/pages/create/create.js","containers/pages/error/error.js","components/functions/animation.js","components/projectCards/projectCard.js","containers/pages/user/user.js","containers/pages/projectPage/project.js","app.js","serviceWorker.js","ConnectedIntlProvider.js","index.js"],"names":["module","exports","ru","en","initialState","locales","locale","localStorage","getItem","messages","page","indexOf","userData","JSON","parse","info","id","name","image","isAuthed","error","toolState","currentTool","currentColor","backColor","settings","currentBG","bg1","customWidth","projectID","project","gif","frames","title","description","date","time","fps","currentCanvas","googleLinks","palette","showLocalSaves","localProjects","allProjects","framesArray","store","createStore","state","action","type","setItem","value","Object","assign","stringify","Array","key","$","val","obj","array","push","projects","framesID","length","undefined","copy","forEach","item","i","splice","stateObj","delete","update","frameSRC","src","drag","target","dragged","every","map","makeRandomNumber","from","to","Math","ceil","random","makeRandomId","x","j","String","fromCharCode","join","pageNavigator","e","projectId","window","confirm","dispatch","document","body","css","cursor","preventDefault","AccountButton","active","clicked","currentTarget","getAttribute","this","setState","className","props","role","tabIndex","onKeyPress","onClick","addActiveClass","onBlur","setTimeout","style","backgroundImage","backgroundSize","gapi","auth2","getAuthInstance","signOut","then","React","Component","connect","Header","click","previewExampleGif","alt","googleIcon","exportIcon","privatePage","toolButtonsClickHandler","activeTool","show","bucket","hide","picker","pen","eraser","useStylesBootstrap","makeStyles","theme","arrow","position","fontSize","content","margin","display","width","height","borderStyle","popper","color","top","left","marginTop","borderWidth","borderColor","bottom","marginBottom","marginLeft","right","marginRight","tooltip","backgroundColor","border","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","BootstrapTooltip","classes","useState","arrowRef","setArrowRef","Tooltip","PopperProps","popperOptions","modifiers","enabled","Boolean","element","Fragment","ref","CustomizedTooltips","placement","AwesomeButton","mouseEnter","enterDelay","buttonClass","buttonId","onMouseEnter","mouseIn","onMouseLeave","mouseOut","onClickHandler","iconClass","defaultProps","text","ToolsPanel","mounted","tool","activeToolSetter","current","back","defaultValue","onChange","subscribe","getState","anim","newWindow","count","animate","clearTimeout","children","makeImage","framesSrcUpdate","toDataURL","fullSizePreview","close","open","newPreview","clone","appendTo","newFps","newCount","ready","newAnimate","endX","endY","mouseOverX","mouseOverY","mouseDownX","mouseDownY","startX","startY","lastX","lastY","radius","FramesWrapper","activeFrame","hovered","updateImagePreview","frame","frameID","newFrameID","oldID","newID","imageData","get","getContext","getImageData","putImageData","canvas","openCanvasHandler","last","split","sortable","disableSelection","draggedFrom","draggedFrame","background","bg","onMouseEnterHandler","onMouseLeaveHandler","removeFrameHandler","onMouseDown","dragFrameOnClick","onMouseUp","dragOffOnClick","copyFrameHandler","addNewFrameHandler","clearCanvas","ctx","clearRect","endStroke","rect","querySelector","getBoundingClientRect","floor","clientX","y","clientY","canvasSize","drawCtx","globalCompositeOperation","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","sqrt","arc","PI","mouseup","off","getColorAtPixel","data","r","g","b","a","setColorAtPixel","colorMatch","paintIt","num","curCanv","rgbColor","hexColor","result","exec","parseInt","hexToRGB","col","fillStyle","round","newColor","stack","baseColor","pop","goDown","goUp","goLeft","goRight","floodFill","CanvasWrapper","size","draw","lines","canvasWidth","innerWidth","innerHeight","curCanvas","fillRect","startDraw","mousemove","startStroke","is","hexR","toString","hexG","hexB","rgbaToHex","mouseMoveX","mouseMoveY","endDraw","endCursorMove","mouseDownHandler","onMouseOver","createCursorShadow","curColor","onMouseMove","mouseMoveHandler","mouseUpHandler","onFocus","PreviewBlock","hoverIn","hoverOut","Layers","popHintOnMouseOver","SampleButton","Palettes","changed","hex","nums","rgbToHex","addPalettesOnClick","choosePalettesOnClick","editPalettesOnClick","colorSamples","changeCurColor","Settings","addActiveOnClick","ResizeCanvas","maxWidth","newWidth","min","resizeCanvasOnClickHandler","firebase","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","appId","writeUserData","userId","database","set","NeuQuant","alphadec","thepicture","lengthcount","samplefac","network","netsize","prime1","prime2","prime3","prime4","minpicturebytes","maxnetpos","netbiasshift","ncycles","intbiasshift","intbias","gammashift","betashift","beta","betagamma","initrad","radiusbiasshift","radiusbias","initradius","radiusdec","alphabiasshift","initalpha","radbiasshift","radbias","alpharadbshift","alpharadbias","netindex","bias","freq","radpower","thepic","len","sample","p","colorMap","index","k","l","inxbuild","smallpos","smallval","q","previouscol","startpos","learn","rad","alpha","step","delta","samplepixels","pix","lim","contest","altersingle","alterneigh","unbiasnet","dist","bestd","best","process","lo","hi","m","n","biasdist","betafreq","bestpos","bestbiaspos","bestbiasd","apply","arguments","LZWEncoder","imgW","imgH","pixAry","initCodeSize","remaining","curPixel","n_bits","maxcode","g_init_bits","ClearCode","EOFCode","a_count","EOF","BITS","HSIZE","maxbits","maxmaxcode","htab","codetab","hsize","free_ent","clear_flg","cur_accum","cur_bits","masks","accum","pixels","color_depth","max","char_out","c","outs","flush_char","cl_block","cl_hash","output","compress","init_bits","fcode","ent","disp","hsize_reg","hshift","MAXCODE","nextPixel","outer_loop","encode","os","writeByte","writeBytes","code","GIFEncoder","chr","ByteArray","bin","prototype","getData","v","writeUTFBytes","string","charCodeAt","offset","transIndex","out","indexedPixels","colorDepth","colorTab","transparent","repeat","delay","started","usedEntry","palSize","dispose","closeStream","firstFrame","sizeSet","comment","reset","setDelay","ms","setDispose","setRepeat","iter","setTransparent","setComment","addFrame","im","is_imageData","Error","ok","ImageData","setSize","Uint8ClampedArray","console","log","getImagePixels","analyzePixels","writeLSD","writePalette","writeNetscapeExt","writeGraphicCtrlExt","writeCommentExt","writeImageDesc","writePixels","download","filename","endsWith","templink","createElement","href","URL","createObjectURL","Blob","Uint8Array","upload","attr","replace","finish","setFrameRate","setQuality","quality","w","h","start","cont","nPix","nq","findClosest","minpos","dmin","dr","dg","db","d","transp","WriteShort","pValue","stream","setProperties","has_start","is_first","saveAsGif","encoder","map2","newArr","slice","fixedNewArray","newImage","uploadToUrl","binaryGif","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","encode64","makeObjectToSave","newTitle","newDescription","dataUrl","Date","day","getDate","month","getMonth","hour","getHours","minutes","getMinutes","getFullYear","getTime","saveLocally","storage","totalSaves","currentProject","keys","entries","some","newStorage","SaveOptions","isFull","isSaved","localSaves","updatedAllProjects","userID","saves","user","objForDB","projectName","projectItems","saveToGalery","rows","cols","saveLocallyHandler","saveToGaleryHandler","Uploader","UploaderForGoogleDrive","RetryHandler","interval","maxInterval","retry","fn","nextInterval_","getRandomInt_","MediaUploader","options","noop","file","contentType","metadata","mimeType","token","currentUser","getAuthResponse","access_token","onComplete","onProgress","onError","chunkSize","retryHandler","url","params","uploadType","buildUrl_","fileId","baseUrl","httpMethod","xhr","XMLHttpRequest","setRequestHeader","onload","status","location","getResponseHeader","sendFile_","onUploadError_","bind","onerror","send","end","addEventListener","onContentUploadSuccess_","onContentUploadError_","resume_","extractRange_","range","match","response","buildQuery_","encodeURIComponent","query","pUploaderForGoogleDrive","Promise","resolve","reject","uploadToGoogle","client","setApiKey","load","err","googleUrl","urlToGif","drive","permissions","create","resource","ExportOptions","links","showExportOptions","base64URL","win","heigh","debugBase64","rel","downloadPng","overflow","ancor","debugBase64WithText","ImportOptions","Options","showOptionsOnClick","fromDataToCanvas","Image","drawImage","LocalSaves","sorted","sort","cellPadding","cellSpacing","CreateAnimation","showSaves","changeWidth","ErrorPage","makeAnimate","node","getElementById","duration","easing","play","errorImage","ProjectCard","infoObj","deletePiskelOnClick","User","DBitem","once","snapshot","getDBdata","projectFrames","preview","newProjectFrames","isEmpty","deletePiskel","toFixed","App","onSuccess","init","client_id","signin2","render","scope","longtitle","onsuccess","onfailure","googleUser","profile","getBasicProfile","getId","getName","getImageUrl","noImage","onSuccessHandler","path","component","About","ProjectInfo","hostname","IntlProvider","addLocaleData","ReactDOM","ConnectedIntlProvider","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.aa1c2f42.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABlBMVEXf39////8zI3BgAAAAHklEQVR4AWNghAIGCMDgjwgFCDDSw2M0PSCD0fQAACRcAgF4ciGUAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/grumpy.f2100f3b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/preview-example.e3ca5e51.gif\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/export-gif.ae1e58e5.png\";","module.exports = __webpack_public_path__ + \"static/media/private-page.d4571089.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADCSURBVDhP7dAxCwFhGMDxh00Gk4nBYDAZFIvNJ/BBDOwGiUlJklAWPov4FqSUDEqUSfyf91zdqTuv3b9+3fte3b13j1hUwxpLJPWGTRHE0cLTYw6rGtjC+7BawVf0ff0sgYyz9GX1BW3cUMUG7un6O1/r4YKy2Ynk8cAeMb0RVhdnFM1OJIsdFqhDBxtYBXeUzE4khwMmCJqTrzGmzlIKOGKA0FPdUjihgz6uaMK6IXTK+pIZ3AFap9MdIW12/35M5AUsFCcIOdPfYQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEdSURBVEhL3dU/a8JAHMbxIChYlQ52aIeCU6Gbk2+hXcV306lDofSttIvuQsGhk4uLIIiCVVF0KxQ6td9HchDkvDvSdKgPfCC55H4PJP6Jjj4tPKOwO8s4ZSzxjTb+pKSODVTSwf8sKeIVKsi85ARdaPAa2/g4k5IKetBAvexr6HFlUnKKN2jQDFcw+fU7qaIPDZighv2kLjnDANo4wiUOJVXJC7RhiAsteJIsudeCK3l84RPnWghMAyqY7s4cyeEDujkNb4HyBNvmEN5HpOhF6YfNNsDFvORmzBndqA22QTZmeAnzmI6dCS1JfjzvYNZ17I2vJDlcGcNc03FQDpXY/oDeYa7r5yU4+n48YIEVHrE/XLmFBsuNFo4hUfQDRmuR/2vYwfIAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAWZJREFUOI2t0jFI1VEUx/FPGjlki9ai0CQIDQ5pCqbNTxJdykGdWmxxsUAHXYJwqMVBNHVzKWh2EAdBTDCQFhWKrMW2aFTiyXO4f+GP/u//8dQfHLiXe+73nvs7h2tWdYX5PZhDF6rwCyeXffwZVtCIZkxgHe9wv1LYIJZwM+OsDbOYjpxf0BBmcCMnpxa/0VEONoz5MrB7+IgDwdeoBgXDh3NymvAZvXiVB3uOIkpJ7OE1GlI5rVhFndD5OzFYAf9TsHScYAMfsIl6PBA6nqlW/IvAzmIL+7greLuI21mwGvzENhawjL8pUBHvsYPu5M5bPI5VN3qukgNMYQCTQpP2EiCM4WkMVoPDyBeLaE8eKGEcL9EXg8FIBHbWiBep/Tf058Gq8D0H+AWfkvWxMHO5epIDKwnGHyVRKAerxp/kYhtuZeR8xcOksrVywLTqBMN/pKrbFQa4sxJQlh7hjTCLLVeFXUmnRmtxEV/Efn8AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAOdJREFUOI3t0zErhWEUAOCnK9Pd76a4kjALGQ0+1ySrwXgXg9WPMBjFYJMSZTGom1kppJj9BBYZGL4zfG4ZvnPv6Cxv5z29T+e8dUbkYxK72EATL/huJLEC54FcoYNTpLwC79jpuz+Jbmtjd2ijh61KrYP9DNaKfAFfFXQbe1lsDg+Yx61y/HuMDYLNRN5W/mkxDKwV9TT2iNl/7M9YGybWxAcuMR3YU5y1MVjHIVZwg7dBMDjwe7F7mMpi8IrFSr6Kiyw2gWflBixhE0dqrFM1GtHNJ0ZxjGWcKce9rguKLroYzzzujx/AVUNl5zj/7wAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/error.d70d2a0b.jpg\";","import ru from 'locales/ru.json';\r\nimport en from 'locales/en.json';\r\n\r\nexport default { ru, en };\r\n","import { createStore } from 'redux';\r\nimport messages from 'locales';\r\nimport $ from 'jquery';\r\nimport bg1 from 'assets/images/bg/bg1.png';\r\n\r\nconst initialState = {\r\n  locales: {\r\n    locale: localStorage.getItem('locale') || 'en',\r\n    messages: messages.ru,\r\n  },\r\n  page: localStorage.getItem('page')\r\n    ? localStorage.getItem('page').indexOf('projects') !== -1\r\n      ? 'user'\r\n      : localStorage.getItem('page')\r\n    : '',\r\n  userData: JSON.parse(localStorage.getItem('userData')) || {\r\n    info: {\r\n      id: 'none',\r\n      name: 'none',\r\n      image: 'none'\r\n    },\r\n    isAuthed: false\r\n  },\r\n  error: false,\r\n  toolState: {\r\n    currentTool: '',\r\n    currentColor: '#161030',\r\n    backColor: '#c0c0c0'\r\n  },\r\n  settings: {\r\n    currentBG: `url(${bg1})`,\r\n    customWidth: 33\r\n  },\r\n  projectID: localStorage.getItem('projectID') || '',\r\n  project: {\r\n    gif: '',\r\n    frames: '',\r\n    title: 'New Piskel-clone',\r\n    description: '',\r\n    date: '',\r\n    time: '',\r\n    fps: 3\r\n  },\r\n  currentCanvas: '',\r\n  googleLinks: [],\r\n  palette: [],\r\n  showLocalSaves: false,\r\n  localProjects: JSON.parse(localStorage.getItem('localProjects')) || {},\r\n  allProjects: JSON.parse(localStorage.getItem('allProjects')) || {},\r\n  framesArray: []\r\n};\r\n\r\nfunction appState(state = initialState, action) {\r\n  switch (action.type) {\r\n    case 'locale':\r\n      localStorage.setItem('locale', action.value);\r\n      return Object.assign({}, state, {\r\n        locale: action.value\r\n      });\r\n    case 'page':\r\n      localStorage.setItem('page', action.value);\r\n      return Object.assign({}, state, {\r\n        page: action.value\r\n      });\r\n    case 'userData':\r\n      const userData = {\r\n        info: {\r\n          id: action.value.id,\r\n          name: action.value.name,\r\n          image: action.value.image\r\n        },\r\n        isAuthed: action.value !== ''\r\n      }\r\n      localStorage.setItem('userData', JSON.stringify(userData));\r\n      return {\r\n        ...state,\r\n        userData\r\n      };\r\n    case 'error':\r\n      return Object.assign({}, state, {\r\n        error: action.value\r\n      });\r\n    case 'toolState':\r\n      if (action.value instanceof Array) {\r\n        for (let key in state.toolState) {\r\n          if (action.value[0] === key) {\r\n            state.toolState[key] = action.value[1]\r\n          }\r\n          if (action.value[0] === 'currentColor') {\r\n            $('#customed1').val(action.value[1]);\r\n          } else if (action.value[0] === 'backColor') {\r\n            $('#customed2').val(action.value[1]);\r\n          }\r\n        }\r\n        return {\r\n          ...state,\r\n          ...state.toolState\r\n        };\r\n      } else {\r\n        return Object.assign({}, state, {\r\n          toolState: action.value\r\n        });\r\n      }\r\n    case 'settings':\r\n      for (let key in state.settings) {\r\n        if (action.value[0] === key) {\r\n          state.settings[key] = action.value[1]\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        ...state.settings\r\n      };\r\n    case 'projectID':\r\n      localStorage.setItem('projectID', action.value);\r\n      return Object.assign({}, state, {\r\n        projectID: action.value\r\n      });\r\n    case 'project':\r\n      if (action.value instanceof Array) {\r\n        for (let key in state.project) {\r\n          if (action.value[0] === key) {\r\n            state.project[key] = action.value[1]\r\n          }\r\n        }\r\n        return {\r\n          ...state,\r\n          ...state.project\r\n        };\r\n      } else if (action.value === 'initial') {\r\n        const obj = initialState.project;\r\n        return Object.assign({}, state, {\r\n          project: obj\r\n        });\r\n      } else {\r\n        return Object.assign({}, state, {\r\n          project: action.value\r\n        });\r\n      }\r\n    case 'currentCanvas':\r\n      return Object.assign({}, state, {\r\n        currentCanvas: action.value\r\n      });\r\n    case 'showLocalSaves':\r\n      return Object.assign({}, state, {\r\n        showLocalSaves: action.value\r\n      });\r\n    case 'googleLinks':\r\n      return Object.assign({}, state, {\r\n        googleLinks: action.value\r\n      });\r\n    case 'palette':\r\n      const array = state.palette;\r\n      if (array.indexOf(action.value) === -1) {\r\n        array.push(action.value);\r\n      }\r\n      return Object.assign({}, state, {\r\n        palette: array\r\n      });\r\n    case 'localProjects':\r\n      if (action.value instanceof Array) {\r\n        const projects = state.localProjects;\r\n        if (action.value[0] === 'delete') {\r\n          delete projects[action.value[1]];\r\n          localStorage.setItem('localProjects', JSON.stringify(projects));\r\n        }\r\n        return {\r\n          ...state,\r\n          ...projects\r\n        };\r\n      } else {\r\n        localStorage.setItem('localProjects', JSON.stringify(action.value));\r\n        return Object.assign({}, state, {\r\n          localProjects: action.value\r\n        });\r\n      }\r\n    case 'allProjects':\r\n      if (action.value instanceof Array) {\r\n        const projects = state.allProjects;\r\n        if (action.value[0] === 'delete') {\r\n          delete projects[action.value[1]][action.value[2]];\r\n          localStorage.setItem('allProjects', JSON.stringify(projects));\r\n        }\r\n        return {\r\n          ...state,\r\n          ...projects\r\n        };\r\n      } else {\r\n        localStorage.setItem('allProjects', JSON.stringify(action.value));\r\n        return Object.assign({}, state, {\r\n          allProjects: action.value\r\n        });\r\n      }\r\n    case 'framesArray':\r\n      let framesID = state.framesArray;\r\n      if (action.value instanceof Object) {\r\n        if (framesID.length >= 1) {\r\n          if (action.value.copy !== undefined) {\r\n            framesID.forEach((item, i) => {\r\n              if (item.id === action.value.copy) {\r\n                framesID.splice(i + 1, 0, action.value.stateObj);\r\n              }\r\n            });\r\n          } else if (action.value.delete !== undefined) {\r\n            framesID.forEach((item, i) => {\r\n              if (item.id === action.value.delete) {\r\n                framesID.splice(i, 1);\r\n              }\r\n            });\r\n          } else if (action.value.update !== undefined) {\r\n            framesID.forEach((item, i) => {\r\n              if (item.id === action.value.update) {\r\n                framesID[i].frameSRC = action.value.src;\r\n              }\r\n            });\r\n          } else if (action.value.drag !== undefined) {\r\n            let target = framesID[action.value.target];\r\n            let dragged = framesID[action.value.drag];\r\n            framesID[action.value.target] = dragged;\r\n            framesID[action.value.drag] = target;\r\n          } else if (action.value === null) {\r\n            return Object.assign({}, state, {\r\n              framesArray: []\r\n            });\r\n          } else {\r\n            if (framesID.every(item => item.id !== action.value.id)) {\r\n              framesID.push(action.value);\r\n            }\r\n          }\r\n        } else {\r\n          if (action.value.length > 0) {\r\n            action.value.map(item => framesID.push(item))\r\n          } else {\r\n            framesID = [{ id: action.value.id, frameSRC: action.value.frameSRC }];\r\n          }\r\n        }\r\n      } else if (action.value === null) {\r\n        return Object.assign({}, state, {\r\n          framesArray: []\r\n        });\r\n      }\r\n      return Object.assign({}, state, {\r\n        framesArray: framesID\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst store = createStore(appState);\r\n\r\nexport default store;\r\n","/* eslint-disable no-bitwise */\r\nexport function makeRandomNumber(from, to) {\r\n  const number = Math.ceil(to - (to - from) * Math.random());\r\n  return number;\r\n}\r\n\r\nexport function makeRandomId() {\r\n  const j = [];\r\n  let x;\r\n  for (let i = 0; i < 20; i += 1) {\r\n    x = [[48, 57], [65, 90], [97, 122]][(Math.random() * 3) >> 0];\r\n    j[i] = String.fromCharCode(((Math.random() * (x[1] - x[0] + 1)) >> 0) + x[0]);\r\n  }\r\n  return j.join('');\r\n}\r\n\r\nexport function getDate() {\r\n  const data = new Date();\r\n  let day = data.getDate();\r\n  if (day < 10) {\r\n    day = `0${day}`;\r\n  }\r\n  let month = data.getMonth() + 1;\r\n  if (month < 10) {\r\n    month = `0${month}`;\r\n  }\r\n  let hour = data.getHours();\r\n  if (hour < 10) {\r\n    hour = `0${hour}`;\r\n  }\r\n  let minutes = data.getMinutes();\r\n  if (minutes < 10) {\r\n    minutes = `0${minutes}`;\r\n  }\r\n  const time = new Date(`${hour}:${minutes} ${month}/${day}/${data.getFullYear()}`).getTime();\r\n  return `${hour}:${minutes} ${day}/${month}/${data.getFullYear()}  ${time}`;\r\n}\r\n","import $ from 'jquery';\r\nimport store from 'store/store';\r\nimport { makeRandomId } from 'components/functions/random';\r\n\r\nexport function pageNavigator(e, from, to, isAuthed, projectId) {\r\n  if (from.indexOf('create') !== -1) {\r\n    if (to.indexOf('user') !== -1) {\r\n      // navigate from createPage to userPage if authed\r\n      if (isAuthed) {\r\n        if (window.confirm('Are you sure you want to leave?')) {\r\n          store.dispatch({ type: 'page', value: to });\r\n          $(document.body).css({ cursor: 'default' });\r\n          return;\r\n        }\r\n        e.preventDefault();\r\n        return;\r\n      }\r\n      // navigate from createPage to userPage, if not authed redirect to erorPage\r\n      store.dispatch({ type: 'page', value: 'about' });\r\n      store.dispatch({ type: 'userData', value: '' });\r\n      store.dispatch({ type: 'error', value: true });\r\n      return;\r\n    }\r\n    // navigate from createPage to createPage - create new project\r\n    if (to === 'create') {\r\n      if (window.confirm('Are you sure you want to leave?')) {\r\n        const projectID = makeRandomId();\r\n        const page = `create-animation/${projectID}`;\r\n        store.dispatch({ type: 'page', value: page });\r\n        store.dispatch({ type: 'projectID', value: projectID });\r\n        $(document.body).css({ cursor: 'default' });\r\n        return;\r\n      }\r\n      e.preventDefault();\r\n      return;\r\n    }\r\n    // navigate from createPage to general pages\r\n    if (window.confirm('Are you sure you want to leave?')) {\r\n      store.dispatch({ type: 'page', value: to });\r\n      $(document.body).css({ cursor: 'default' });\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n    return;\r\n  }\r\n  // navigate from general pages to createPage\r\n  if (to === 'create') {\r\n    if (projectId) {\r\n      store.dispatch({ type: 'page', value: `create-animation/${projectId}` });\r\n      store.dispatch({ type: 'projectID', value: projectId });\r\n      $(document.body).css({ cursor: 'default' });\r\n      return;\r\n    }\r\n    const projectID = makeRandomId();\r\n    const page = `create-animation/${projectID}`;\r\n    store.dispatch({ type: 'page', value: page });\r\n    store.dispatch({ type: 'projectID', value: projectID });\r\n    $(document.body).css({ cursor: 'default' });\r\n    return;\r\n  }\r\n  // navigate from other pages to general pages\r\n  store.dispatch({ type: 'page', value: to });\r\n  $(document.body).css({ cursor: 'default' });\r\n}\r\n\r\nexport function toCreatePage() { }\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport store from 'store/store';\r\nimport { signOut } from 'services/googleAuth/authApi';\r\nimport 'containers/accountButton/accountButton.css';\r\nimport { pageNavigator } from 'components/functions/navigation';\r\n\r\nclass AccountButton extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      active: ''\r\n    };\r\n  }\r\n\r\n  addActiveClass(e) {\r\n    const clicked = e.currentTarget.getAttribute('id');\r\n    if (this.state.active === clicked) {\r\n      this.setState({ active: '' });\r\n    } else {\r\n      this.setState({ active: clicked });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`menu-item ${this.props.userData.isAuthed ? 'account flexed' : 'hidden'}`}\r\n        id=\"list\"\r\n        role=\"button\"\r\n        tabIndex=\"-1\"\r\n        onKeyPress={undefined}\r\n        onClick={e => {\r\n          if (!localStorage.getItem('userData')) {\r\n            pageNavigator(e, this.props.page, 'about', false);\r\n            store.dispatch({ type: 'userData', value: '' });\r\n            store.dispatch({ type: 'error', value: true });\r\n            return;\r\n          }\r\n          this.addActiveClass(e);\r\n        }}\r\n        onBlur={() => {\r\n          setTimeout(() => {\r\n            this.setState({ active: '' });\r\n\r\n          }, 300);\r\n        }}\r\n      >\r\n        <div\r\n          className=\"account-image\"\r\n          style={{\r\n            backgroundImage: `url(${this.props.userData.info.image})`,\r\n            backgroundSize: 'contain'\r\n          }}\r\n        />\r\n        <span className=\"account-button\">{this.props.userData.info.name}</span>\r\n        <i className=\"fas fa-sort-down\" />\r\n        <ul className={`dropdown ${this.state.active === 'list' ? 'active flexed' : 'hidden'}`}>\r\n          <li className={`list top ${this.state.active === 'list' ? 'flexed' : 'hidden'}`}>\r\n            <div\r\n              className=\"account-item\"\r\n              onClick={e => pageNavigator(\r\n                e, this.props.page,\r\n                `user/${this.props.userData.info.id}`,\r\n                this.props.userData.isAuthed\r\n              )}\r\n            >\r\n              My Galery\r\n            </div>\r\n          </li>\r\n          <li className={`list bottom ${this.state.active === 'list' ? 'flexed' : 'hidden'}`}>\r\n            <div\r\n              className=\"account-item\"\r\n              onClick={e => {\r\n                if (window.confirm('Are you sure you want to leave?') === true) {\r\n                  pageNavigator(e, this.props.page, 'about', this.props.userData.isAuthed)\r\n                  signOut();\r\n                } else {\r\n                  e.preventDefault();\r\n                }\r\n              }}\r\n            >\r\n              Log out\r\n            </div>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nAccountButton.propTypes = {\r\n  userData: PropTypes.object.isRequired,\r\n  page: PropTypes.string.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  userData: state.userData,\r\n  page: state.page\r\n});\r\n\r\nexport default connect(mapStateToProps)(AccountButton);\r\n","import $ from 'jquery';\r\nimport store from 'store/store';\r\nimport noImage from 'assets/images/pages/grumpy.jpg';\r\n\r\nexport function authenticate() {\r\n  return window.gapi.auth2\r\n    .getAuthInstance()\r\n    .signIn({\r\n      scope: 'https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file'\r\n    })\r\n    .then(\r\n      () => {\r\n        console.log('Sign-in successful');\r\n      },\r\n      err => {\r\n        console.error('Error signing in', err);\r\n      }\r\n    );\r\n}\r\n\r\nexport function loadClient() {\r\n  window.gapi.client.setApiKey('AIzaSyD8p3NmO-jrbUeGpC9EYDHzH8FWOl3ivss');\r\n  return window.gapi.client\r\n    .load('https://content.googleapis.com/discovery/v1/apis/drive/v3/rest')\r\n    .then(\r\n      () => {\r\n        console.log('GAPI client loaded for API');\r\n      },\r\n      err => {\r\n        console.error('Error loading GAPI client for API', err);\r\n      }\r\n    );\r\n}\r\n\r\n// Make sure the client is loaded and sign-in is complete before calling this method.\r\nexport function execute() {\r\n  return window.gapi.client.drive.permissions\r\n    .create({\r\n      resource: {\r\n        role: '',\r\n        type: ''\r\n      }\r\n    })\r\n    .then(\r\n      response => {\r\n        // Handle the results here (response.result has the parsed body).\r\n        console.log('Response', response);\r\n      },\r\n      err => {\r\n        console.error('Execute error', err);\r\n      }\r\n    );\r\n}\r\n\r\nexport function onSuccessHandler(googleUser) {\r\n  const profile = googleUser.getBasicProfile();\r\n  const userData = {\r\n    id: profile.getId(),\r\n    name: profile.getName(),\r\n    image: profile.getImageUrl() || noImage\r\n  };\r\n  $(document.body).css({ cursor: 'default' });\r\n  return userData;\r\n}\r\n\r\nexport function googleAuth(onSuccess) {\r\n  window.gapi.load('client:auth2', () => {\r\n    window.gapi.auth2\r\n      .init({\r\n        client_id: '842905832916-kcnptlm4pbd6ji1lpqbka2p6jpdr5i0q.apps.googleusercontent.com'\r\n      })\r\n      .then(() => {\r\n        window.gapi.signin2.render('my-signIn', {\r\n          scope: 'https://www.googleapis.com/auth/drive.file',\r\n          width: 'auto',\r\n          height: 37,\r\n          longtitle: true,\r\n          onsuccess: onSuccess,\r\n          onfailure: Error('try again')\r\n        });\r\n      });\r\n  });\r\n}\r\n\r\nexport function signOut() {\r\n  const auth2 = window.gapi.auth2.getAuthInstance();\r\n  auth2.signOut().then(() => {\r\n    store.dispatch({ type: 'userData', value: '' });\r\n    store.dispatch({ type: 'page', value: '' });\r\n  });\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'components/header/header.css';\r\nimport AccountButton from 'containers/accountButton/accountButton';\r\nimport { pageNavigator } from 'components/functions/navigation';\r\n\r\nexport default function Header(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <ul className=\"header-menu\">\r\n        <li className=\"logo\">\r\n          <div\r\n            className=\"logo-text\"\r\n            onClick={e => pageNavigator(e, props.page, 'about', props.isAuthed)}>\r\n            Piskel-clone\r\n          </div>\r\n        </li>\r\n        <li className=\"header-buttons\">\r\n          <div className=\"create menu-item flexed\">\r\n            <div\r\n              id=\"/create\"\r\n              to=\"/create-animation\"\r\n              className=\"create-link\"\r\n              onClick={e => pageNavigator(e, props.page, 'create', props.isAuthed)}\r\n            >\r\n              Create Animation\r\n            </div>\r\n          </div>\r\n          <div className=\"signin\">\r\n            <AccountButton />\r\n            <div id=\"my-signIn\" className={`${props.isAuthed ? 'hidden' : 'shown'}`} />\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </header>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  isAuthed: PropTypes.bool.isRequired,\r\n  page: PropTypes.string.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport $ from 'jquery';\r\nimport { pageNavigator } from 'components/functions/navigation';\r\nimport 'containers/pages/about/about.css';\r\nimport previewExampleGif from 'assets/images/pages/preview-example.gif';\r\nimport googleIcon from 'assets/images/pages/google-icon.png';\r\nimport exportIcon from 'assets/images/pages/export-gif.png';\r\nimport privatePage from 'assets/images/pages/private-page.png';\r\n\r\nfunction About(props) {\r\n  return (\r\n    <div className=\"homepage-section\">\r\n      <div className=\"about-app-wrapper\">\r\n        <div className=\"home-about\">\r\n          <h1>\r\n            <span className=\"piskel\">Piskel-clone </span>\r\n            is a free online editor for animated sprites & pixel art\r\n          </h1>\r\n          <h2>Create animations in your browser.</h2>\r\n          <h2>\r\n            <span className=\"description-link\">Try an example</span>\r\n            {', use '}\r\n            <span\r\n              role=\"button\"\r\n              tabIndex=\"-1\"\r\n              onKeyPress={undefined}\r\n              className=\"description-link\"\r\n              onClick={() => $('.abcRioButton.abcRioButtonLightBlue').click()}\r\n            >\r\n              Google sign in\r\n            </span>\r\n            {' to access your gallery or simply '}\r\n            <button\r\n              type=\"button\"\r\n              className=\"text-button\"\r\n              onClick={e => pageNavigator(e, 'about', 'create', props.isAuthed)}\r\n            >\r\n              <span className=\"description-link\">Create a new Sprite</span>\r\n            </button>\r\n          </h2>\r\n          <div className=\"home-buttons\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"login-button\"\r\n              onClick={() => $('.abcRioButton.abcRioButtonLightBlue').click()}\r\n            >\r\n              Sign in\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              className=\"create-button\"\r\n              onClick={e => pageNavigator(e, 'about', 'create', props.isAuthed)}\r\n            >\r\n              <span className=\"link\">Create Sprite</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"home-image\">\r\n          <div className=\"screen\" />\r\n          <div className=\"home-preview\" />\r\n        </div>\r\n      </div>\r\n      <div className=\"app-description-wrapper\">\r\n        <div className=\"description-item\">\r\n          <img className=\"description-image\" src={previewExampleGif} alt=\"piskel-example\" />\r\n          <div className=\"description-body\">\r\n            <h3 className=\"description-title\">\r\n              Live preview\r\n              </h3>\r\n            <p className=\"description-text\">\r\n              Check a preview of your animation in real time as you draw. Adjust the frame delay on the fly.\r\n              </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"description-item\">\r\n          <img className=\"description-image\" src={googleIcon} alt=\"google-icon\" />\r\n          <div className=\"description-body\">\r\n            <h3 className=\"description-title\">\r\n              Google Sign in\r\n              </h3>\r\n            <p className=\"description-text\">\r\n              No need to remember yet another password, just use your Google account to sign in.\r\n              </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"description-item\">\r\n          <img className=\"description-image\" src={exportIcon} alt=\"export-icon\" />\r\n          <div className=\"description-body\">\r\n            <h3 className=\"description-title\">\r\n              Export to GIF, PNG\r\n              </h3>\r\n            <p className=\"description-text\">\r\n              Several export modes supported. Animated GIFs for sharing, spritesheet PNG/ZIP for bigger projects\r\n              </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"description-item\">\r\n          <img className=\"description-image\" src={privatePage} alt=\"personal-page-icon\" />\r\n          <div className=\"description-body\">\r\n            <h3 className=\"description-title\">\r\n              Private gallery\r\n              </h3>\r\n            <p className=\"description-text\">\r\n              You can chose to make any of your sprites public or private.\r\n              Private sprites are only visible to you.\r\n              </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nAbout.propTypes = {\r\n  isAuthed: PropTypes.bool.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({ isAuthed: state.userData.isAuthed });\r\nexport default connect(mapStateToProps)(About);\r\n","import $ from 'jquery';\r\nimport picker from 'assets/images/toolIcons/colorpicker.png';\r\nimport bucket from 'assets/images/toolIcons/bucket.png';\r\nimport eraser from 'assets/images/toolIcons/eraser.png';\r\nimport pen from 'assets/images/toolIcons/pen.png';\r\n\r\nexport default function toolButtonsClickHandler(activeTool) {\r\n  $('#drawCanvas').show();\r\n  if (activeTool === 'paintBucketTool') {\r\n    $(document.body).css({ cursor: `url(${bucket}) 15 15, auto` });\r\n  } else if (activeTool === 'colorPickerTool') {\r\n    $('#drawCanvas').hide();\r\n    $(document.body).css({ cursor: `url(${picker}) 1 10, auto` });\r\n  } else if (\r\n    activeTool === 'penTool'\r\n    || activeTool === 'strokeTool'\r\n    || activeTool === 'rectangleTool'\r\n    || activeTool === 'circleTool'\r\n  ) {\r\n    $(document.body).css({ cursor: `url(${pen}) 1 18, auto` });\r\n  } else if (activeTool === 'eraserTool') {\r\n    $(document.body).css({ cursor: `url(${eraser}) 1 18, auto` });\r\n  } else {\r\n    $(document.body).css({ cursor: 'default' });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nfunction arrowGenerator(color) {\r\n  return {\r\n    '&[x-placement*=\"bottom\"] $arrow': {\r\n      top: 0,\r\n      left: 0,\r\n      marginTop: '-9px',\r\n      width: '20px',\r\n      height: '10px',\r\n      '&::before': {\r\n        borderWidth: '0 10px 10px 10px',\r\n        borderColor: `transparent transparent ${color} transparent`,\r\n      },\r\n    },\r\n    '&[x-placement*=\"top\"] $arrow': {\r\n      bottom: 0,\r\n      left: 0,\r\n      marginBottom: '-9px',\r\n      width: '20px',\r\n      height: '10px',\r\n      '&::before': {\r\n        borderWidth: '10px 10px 0 10px',\r\n        borderColor: `${color} transparent transparent transparent`,\r\n      },\r\n    },\r\n    '&[x-placement*=\"right\"] $arrow': {\r\n      left: 0,\r\n      marginLeft: '-9px',\r\n      height: '20px',\r\n      width: '10px',\r\n      '&::before': {\r\n        borderWidth: '10px 10px 10px 0',\r\n        borderColor: `transparent ${color} transparent transparent`,\r\n      },\r\n    },\r\n    '&[x-placement*=\"left\"] $arrow': {\r\n      right: 0,\r\n      marginRight: '-9px',\r\n      height: '20px',\r\n      width: '10px',\r\n      '&::before': {\r\n        borderWidth: '10px 0 10px 10px',\r\n        borderColor: `transparent transparent transparent ${color}`,\r\n      },\r\n    },\r\n  };\r\n}\r\n\r\nconst useStylesBootstrap = makeStyles(theme => ({\r\n  arrow: {\r\n    position: 'absolute',\r\n    fontSize: 6,\r\n    '&::before': {\r\n      content: '\"\"',\r\n      margin: 'auto',\r\n      display: 'block',\r\n      width: 0,\r\n      height: 0,\r\n      borderStyle: 'solid',\r\n    },\r\n  },\r\n  popper: arrowGenerator('#6bebeb'),\r\n  tooltip: {\r\n    position: 'relative',\r\n    color: 'black',\r\n    fontSize: '18px',\r\n    backgroundColor: '#6bebeb',\r\n    border: '1px solid #3c8484'\r\n  },\r\n  tooltipPlacementLeft: {\r\n    right: '-15px',\r\n    margin: '0 8px',\r\n  },\r\n  tooltipPlacementRight: {\r\n    margin: '0 8px',\r\n  },\r\n  tooltipPlacementTop: {\r\n    right: '-15px',\r\n    margin: '8px 0',\r\n  },\r\n  tooltipPlacementBottom: {\r\n    top: '5px',\r\n    margin: '8px 0',\r\n  },\r\n}));\r\n\r\nfunction BootstrapTooltip(props) {\r\n  const { arrow, ...classes } = useStylesBootstrap();\r\n  const [arrowRef, setArrowRef] = React.useState(null);\r\n\r\n  return (\r\n    <Tooltip\r\n      classes={classes}\r\n      PopperProps={{\r\n        popperOptions: {\r\n          modifiers: {\r\n            arrow: {\r\n              enabled: Boolean(arrowRef),\r\n              element: arrowRef,\r\n            },\r\n          },\r\n        },\r\n      }}\r\n      {...props}\r\n      title={\r\n        <React.Fragment>\r\n          {props.title}\r\n          <span className={arrow} ref={setArrowRef} />\r\n        </React.Fragment>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nBootstrapTooltip.propTypes = {\r\n  title: PropTypes.node,\r\n};\r\n\r\nexport default function CustomizedTooltips(props) {\r\n  return (\r\n    <BootstrapTooltip {...props} title={props.title} placement={props.placement} />\r\n  );\r\n}\r\nCustomizedTooltips.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n  placement: PropTypes.string.isRequired\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport CustomizedTooltips from 'components/tooltips/tooltip';\r\n\r\nexport default class AwesomeButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mouseEnter: false\r\n    };\r\n  }\r\n\r\n  mouseIn() {\r\n    this.setState({ mouseEnter: true });\r\n  }\r\n\r\n  mouseOut() {\r\n    this.setState({ mouseEnter: false });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <CustomizedTooltips\r\n        title={this.props.title}\r\n        placement={this.props.placement}\r\n        enterDelay={500}\r\n      >\r\n        <button\r\n          type=\"button\"\r\n          className={\r\n            `${this.props.buttonClass} ${this.state.mouseEnter || this.props.active === this.props.buttonId\r\n              ? `${this.props.buttonClass}-hovered`\r\n              : ''}`}\r\n          onMouseEnter={() => this.mouseIn()}\r\n          onMouseLeave={() => this.mouseOut()}\r\n          onClick={() => this.props.onClickHandler()}\r\n        >\r\n          <i\r\n            className={this.props.iconClass}\r\n          />\r\n        </button>\r\n      </CustomizedTooltips>\r\n    );\r\n  }\r\n}\r\n\r\nAwesomeButton.propTypes = {\r\n  buttonId: PropTypes.string,\r\n  buttonClass: PropTypes.string,\r\n  iconClass: PropTypes.string.isRequired,\r\n  onClickHandler: PropTypes.func.isRequired,\r\n  active: PropTypes.string,\r\n  title: PropTypes.string.isRequired,\r\n  placement: PropTypes.string.isRequired\r\n};\r\n\r\nAwesomeButton.defaultProps = {\r\n  buttonClass: 'awesome-button',\r\n  text: ''\r\n};\r\n","import $ from 'jquery';\r\nimport store from 'store/store';\r\n\r\nlet fps;\r\nstore.subscribe(() => {\r\n  fps = store.getState().fps || 3;\r\n});\r\nlet count = 0;\r\nlet anim;\r\n\r\nexport function animate() {\r\n  clearTimeout(anim); // stop old animation\r\n  const time = 1000 / fps; // calc animation speed\r\n  $('.preview')\r\n    .children()\r\n    .css({ display: 'none' }); // hide all canvas-images\r\n  if ($('.preview').children()[count]) {\r\n    $('.preview').children()[count].style.display = 'block'; // show only the \"count\"-th image\r\n  }\r\n  count += 1;\r\n  if (count === $('.preview').children().length) {\r\n    count = 0; // restart counting if all images were shown\r\n  }\r\n\r\n  anim = setTimeout(animate, time); // repeat animation\r\n}\r\n\r\n// make image from canvas drawing\r\nexport function makeImage(id) {\r\n  const imageSRC = $(`#canvas${id}`)[0].toDataURL('image/png');\r\n  const framesSrcUpdate = {\r\n    update: id,\r\n    src: imageSRC\r\n  }\r\n  store.dispatch({ type: 'framesArray', value: framesSrcUpdate });\r\n  if ($('.preview').children().length > 1) {\r\n    count = 0;\r\n    animate();\r\n  } else {\r\n    clearTimeout(anim);\r\n  }\r\n}\r\n\r\nlet newWindow;\r\nlet id = 0;\r\n\r\n// open new window to watch animation in full-size mode\r\nexport function fullSizePreview() {\r\n  if (newWindow) {\r\n    id += 1;\r\n    newWindow.close();\r\n  }\r\n  newWindow = window.open('about:blank', `window${id}`, 'width=300,height=300');\r\n\r\n  // cloning animation box with images to new window\r\n  const newPreview = $('.preview')\r\n    .clone()\r\n    .appendTo(newWindow.document.body)\r\n    .css({ display: 'flex', 'justify-content': 'center', 'align-items': 'center', height: '100%' });\r\n  $(newWindow.document.body).css({\r\n    display: 'flex',\r\n    'justify-content': 'center',\r\n    'align-items': 'center'\r\n  });\r\n\r\n  const newFps = fps;\r\n  let newCount = 0;\r\n\r\n  function newAnimate() {\r\n    // clearTimeout(newAnim);\r\n    const time = 1000 / newFps;\r\n    newPreview.children().css({ display: 'none' });\r\n    if (newPreview.children()[newCount]) {\r\n      newPreview.children()[newCount].style.display = 'block';\r\n    }\r\n    newCount += 1;\r\n    if (newCount === newPreview.children().length) {\r\n      newCount = 0;\r\n    }\r\n    setTimeout(newAnimate, time);\r\n  }\r\n  // when new window loaded should start animation\r\n  $(newWindow).ready(newAnimate);\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport 'components/tools/tools.css';\r\nimport toolButtonsClickHandler from 'components/functions/toolsFunctions/buttonsClickHandlers';\r\nimport store from 'store/store';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\n\r\nexport default class ToolsPanel extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      active: ''\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  activeToolSetter(tool) {\r\n    if (this.state.active === tool) {\r\n      this.setState({ active: null });\r\n      store.dispatch({ type: 'toolState', value: ['currentTool', ''] });\r\n      toolButtonsClickHandler(null);\r\n    } else {\r\n      this.setState({ active: tool });\r\n      store.dispatch({ type: 'toolState', value: ['currentTool', tool] });\r\n      toolButtonsClickHandler(tool);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div name=\"Tools\">\r\n        <div className=\"tool-panel\" id=\"tool-panel\">\r\n          <div className=\"tool-buttons-block\">\r\n            <AwesomeButton\r\n              buttonId=\"paintBucketTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('paintBucketTool')}\r\n              iconClass=\"fas fa-fill-drip\"\r\n              active={this.state.active}\r\n              title=\"Click on the area to paint it in chosen color\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"colorPickerTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('colorPickerTool')}\r\n              iconClass=\"fas fa-eye-dropper\"\r\n              active={this.state.active}\r\n              title=\"Click on any fragment to pick its color\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"penTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('penTool')}\r\n              iconClass=\"fas fa-pencil-alt\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"eraserTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('eraserTool')}\r\n              iconClass=\"fas fa-eraser\"\r\n              active={this.state.active}\r\n              title=\"Click on the area to erase it\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"strokeTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('strokeTool')}\r\n              iconClass=\"fas fa-slash\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw a line\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"rectangleTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('rectangleTool')}\r\n              iconClass=\"far fa-square\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw a rectangle\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"circleTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('circleTool')}\r\n              iconClass=\"far fa-circle\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw a circle\"\r\n              placement=\"right\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"color-panel\">\r\n          <AwesomeButton\r\n            buttonClass=\"color-switcher\"\r\n            onClickHandler={() => {\r\n              const current = this.props.toolState.currentColor;\r\n              const back = this.props.toolState.backColor;\r\n              store.dispatch({ type: 'toolState', value: ['currentColor', back] });\r\n              store.dispatch({ type: 'toolState', value: ['backColor', current] });\r\n            }}\r\n            iconClass=\"fas fa-retweet\"\r\n            title=\"Switch colors on click\"\r\n            placement=\"bottom-start\"\r\n            buttonId={null}\r\n            active={this.state.active}\r\n          />\r\n          <div className=\"color-block-upper\">\r\n            <input\r\n              type=\"color\"\r\n              name=\"colors\"\r\n              className=\"input-color\"\r\n              id=\"customed1\"\r\n              defaultValue={this.props.toolState.currentColor}\r\n              onChange={e => store.dispatch({ type: 'toolState', value: ['currentColor', $(e.target).val()] })}\r\n            />\r\n          </div>\r\n          <div className=\"color-block-under\">\r\n            <input\r\n              type=\"color\"\r\n              name=\"colors\"\r\n              className=\"input-color\"\r\n              id=\"customed2\"\r\n              defaultValue={this.props.toolState.backColor}\r\n              onChange={e => store.dispatch({ type: 'toolState', value: ['backColor', $(e.target).val()] })}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nToolsPanel.propTypes = {\r\n  toolState: PropTypes.object.isRequired\r\n};\r\n","import $ from 'jquery';\r\nimport store from 'store/store';\r\n\r\nlet customWidth;\r\nstore.subscribe(() => {\r\n  customWidth = store.getState().customWidth || 33;\r\n});\r\n\r\nlet endX;\r\nlet endY;\r\nlet mouseOverX;\r\nlet mouseOverY;\r\n\r\nexport function endCursorMove(e) {\r\n  const curCanv = document.querySelector('#drawCanvas');\r\n  const rect = curCanv.getBoundingClientRect();\r\n  const x = Math.round(e.clientX - rect.left);\r\n  const y = Math.round(e.clientY - rect.top);\r\n  const ctx = $('#drawCanvas')\r\n    .get(0)\r\n    .getContext('2d');\r\n  ctx.globalCompositeOperation = 'source-over';\r\n  ctx.fillStyle = 'gray';\r\n  ctx.strokeStyle = 'gray';\r\n  const width = $('#drawCanvas').width();\r\n  const canvasSize = Math.ceil(width / customWidth); // todo pass store as argument\r\n  endX = x;\r\n  endY = y;\r\n  const mouseMoveX = Math.floor(x / canvasSize) * canvasSize;\r\n  const mouseMoveY = Math.floor(y / canvasSize) * canvasSize;\r\n  if (mouseOverX > endX || mouseOverY > endY) {\r\n    ctx.clearRect(0, 0, width, width);\r\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\r\n  } else if (mouseOverX + canvasSize < endX || mouseOverY + canvasSize < endY) {\r\n    ctx.clearRect(0, 0, width, width);\r\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\r\n  }\r\n}\r\n\r\nexport function createCursorShadow(e) {\r\n  const width = $('#drawCanvas').width();\r\n  const curCanv = document.querySelector('#drawCanvas');\r\n  const canvasSize = Math.ceil(width / customWidth);\r\n  const rect = curCanv.getBoundingClientRect();\r\n  const x = Math.round(e.clientX - rect.left);\r\n  const y = Math.round(e.clientY - rect.top);\r\n  mouseOverX = Math.floor(x / canvasSize) * canvasSize;\r\n  mouseOverY = Math.floor(y / canvasSize) * canvasSize;\r\n  const ctx = $('#drawCanvas')\r\n    .get(0)\r\n    .getContext('2d');\r\n  ctx.globalCompositeOperation = 'source-over';\r\n  ctx.fillStyle = 'gray';\r\n  ctx.strokeStyle = 'gray';\r\n  ctx.fillRect(mouseOverX, mouseOverY, canvasSize, canvasSize);\r\n}\r\n\r\nexport function clearCanvas() {\r\n  const ctx = $('#drawCanvas')\r\n    .get(0)\r\n    .getContext('2d');\r\n  const width = $('#drawCanvas').width();\r\n  ctx.clearRect(0, 0, width, width);\r\n}\r\n","import $ from 'jquery';\r\n\r\nlet endX;\r\nlet endY;\r\nlet mouseDownX;\r\nlet mouseDownY;\r\n\r\n// drawing on mouse move\r\nexport function endDraw(e, currentCanvas, tool, customWidth, color) {\r\n  const drawCanv = document.querySelector('#drawCanvas');\r\n  const rect = drawCanv.getBoundingClientRect();\r\n  const x = Math.round(e.clientX - rect.left);\r\n  const y = Math.round(e.clientY - rect.top);\r\n  const ctx = $(`#canvas${currentCanvas}`)\r\n    .get(0)\r\n    .getContext('2d');\r\n  endX = x;\r\n  endY = y;\r\n  if (tool === 'penTool') {\r\n    ctx.fillStyle = color; // color depends on chosen color\r\n    ctx.strokeStyle = color;\r\n  } else if (tool === 'eraserTool') {\r\n    ctx.fillStyle = 'rgba(0, 0, 0, 1)';\r\n    ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\r\n  }\r\n\r\n  // calc pen size according to chosen canvas width\r\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\r\n  // calc position and size of canvas rectangles according to pen size\r\n  const mouseMoveX = Math.floor(x / canvasSize) * canvasSize;\r\n  const mouseMoveY = Math.floor(y / canvasSize) * canvasSize;\r\n  if (mouseDownX > endX || mouseDownY > endY) {\r\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\r\n  } else if (mouseDownX + canvasSize < endX || mouseDownY + canvasSize < endY) {\r\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\r\n  }\r\n}\r\n\r\n// drawing on mouse click\r\nexport function startDraw(e, currentCanvas, tool, customWidth, color) {\r\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\r\n  const drawCanv = document.querySelector('#drawCanvas');\r\n  const rect = drawCanv.getBoundingClientRect();\r\n  const x = Math.round(e.clientX - rect.left);\r\n  const y = Math.round(e.clientY - rect.top);\r\n  mouseDownX = Math.floor(x / canvasSize) * canvasSize;\r\n  mouseDownY = Math.floor(y / canvasSize) * canvasSize;\r\n  if (tool === 'penTool' || tool === 'eraserTool') {\r\n    const ctx = $(`#canvas${currentCanvas}`)\r\n      .get(0)\r\n      .getContext('2d');\r\n    if (tool === 'penTool') {\r\n      ctx.globalCompositeOperation = 'source-over';\r\n      ctx.fillStyle = color;\r\n      ctx.strokeStyle = color;\r\n    } else if (tool === 'eraserTool') {\r\n      ctx.fillStyle = 'rgba(0, 0, 0, 1)';\r\n      ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\r\n      ctx.globalCompositeOperation = 'destination-out';\r\n    }\r\n    ctx.fillRect(mouseDownX, mouseDownY, canvasSize, canvasSize);\r\n  }\r\n}\r\n\r\nlet startX;\r\nlet startY;\r\nlet lastX;\r\nlet lastY;\r\nlet radius;\r\n\r\nexport function endStroke(e, currentCanvas, tool, customWidth, color) {\r\n  const drawCanv = document.querySelector('#drawCanvas');\r\n  const rect = drawCanv.getBoundingClientRect();\r\n  const x = Math.floor(e.clientX - rect.left);\r\n  const y = Math.floor(e.clientY - rect.top);\r\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\r\n  const drawCtx = $('#drawCanvas')\r\n    .get(0)\r\n    .getContext('2d');\r\n  const width = $('#drawCanvas').width();\r\n\r\n  lastX = x;\r\n  lastY = y;\r\n  drawCtx.clearRect(0, 0, width, width);\r\n  drawCtx.globalCompositeOperation = 'source-over';\r\n  drawCtx.strokeStyle = color;\r\n  drawCtx.lineWidth = canvasSize;\r\n  drawCtx.beginPath();\r\n  if (tool === 'strokeTool') {\r\n    drawCtx.moveTo(startX, startY);\r\n    drawCtx.lineTo(lastX, lastY);\r\n    drawCtx.stroke();\r\n  } else if (tool === 'rectangleTool') {\r\n    drawCtx.moveTo(startX, startY);\r\n    drawCtx.lineTo(lastX, startY);\r\n    drawCtx.lineTo(lastX, lastY);\r\n    drawCtx.lineTo(startX, lastY);\r\n    drawCtx.lineTo(startX, startY);\r\n    drawCtx.stroke();\r\n  } else if (tool === 'circleTool') {\r\n    radius =\r\n      Math.sqrt((startX - lastX) * (startX - lastX) + (startY - lastY) * (startY - lastY)) / 2;\r\n    drawCtx.arc(startX, startY, radius, 0, 2 * Math.PI);\r\n    drawCtx.stroke();\r\n  }\r\n  $('#drawCanvas').mouseup(() => {\r\n    const ctx = $(`#canvas${currentCanvas}`)\r\n      .get(0)\r\n      .getContext('2d');\r\n    ctx.globalCompositeOperation = 'source-over';\r\n    ctx.strokeStyle = color;\r\n    ctx.lineWidth = canvasSize;\r\n    ctx.beginPath();\r\n    if (tool === 'strokeTool') {\r\n      ctx.moveTo(startX, startY);\r\n      ctx.lineTo(lastX, lastY);\r\n      ctx.stroke();\r\n      drawCtx.clearRect(0, 0, width, width);\r\n    } else if (tool === 'rectangleTool') {\r\n      ctx.moveTo(startX, startY);\r\n      ctx.lineTo(lastX, startY);\r\n      ctx.lineTo(lastX, lastY);\r\n      ctx.lineTo(startX, lastY);\r\n      ctx.lineTo(startX, startY);\r\n      ctx.stroke();\r\n      drawCtx.clearRect(0, 0, width, width);\r\n    } else if (tool === 'circleTool') {\r\n      ctx.arc(startX, startY, radius, 0, 2 * Math.PI);\r\n      ctx.stroke();\r\n      drawCtx.clearRect(0, 0, width, width);\r\n    }\r\n    $('#drawCanvas').off('mouseup')\r\n  });\r\n}\r\n\r\nexport function startStroke(e, currentCanvas, tool, customWidth, color) {\r\n  const drawCanv = document.querySelector('#drawCanvas');\r\n  const rect = drawCanv.getBoundingClientRect();\r\n  const x = Math.floor(e.clientX - rect.left);\r\n  const y = Math.floor(e.clientY - rect.top);\r\n  startX = x;\r\n  startY = y;\r\n\r\n  $('#drawCanvas').mousemove(endStroke(e, currentCanvas, tool, customWidth, color));\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport 'jquery-ui-sortable-npm';\r\nimport store from 'store/store';\r\nimport bg1 from 'assets/images/bg/bg1.png';\r\nimport { makeImage } from 'components/functions/preview';\r\nimport 'components/screens/frames/frames.css';\r\nimport { makeRandomId } from 'components/functions/random';\r\nimport * as canvas from 'components/functions/canvasManager';\r\n\r\nexport default class FramesWrapper extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      activeFrame: '',\r\n      hovered: ''\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (this.props.framesArray.length < 1) {\r\n      const id = makeRandomId();\r\n      this.setState({ activeFrame: id });\r\n      store.dispatch({ type: 'framesArray', value: { id, frameSRC: '' } });\r\n      store.dispatch({ type: 'currentCanvas', value: id });\r\n    } else {\r\n      this.setState({ activeFrame: this.props.framesArray[0].id });\r\n      store.dispatch({ type: 'currentCanvas', value: this.props.framesArray[0].id });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      this.updateImagePreview()\r\n    }, 1000);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    store.dispatch({ type: 'framesArray', value: null });\r\n  }\r\n\r\n  onMouseEnterHandler(id) {\r\n    this.setState({ hovered: id });\r\n  }\r\n\r\n  onMouseLeaveHandler() {\r\n    this.setState({ hovered: '' });\r\n  }\r\n\r\n  updateImagePreview() {\r\n    this.props.framesArray.map(item => makeImage(item.id));\r\n  }\r\n\r\n  openCanvasHandler(frame) {\r\n    this.setState({ activeFrame: frame });\r\n    store.dispatch({ type: 'currentCanvas', value: frame });\r\n    setTimeout(() => {\r\n      this.updateImagePreview();\r\n    }, 200);\r\n  }\r\n\r\n  copyFrameHandler(frameID) {\r\n    const newFrameID = makeRandomId();\r\n    const obj = {\r\n      copy: frameID,\r\n      stateObj: { id: newFrameID, frameSRC: '' }\r\n    }\r\n    store.dispatch({ type: 'framesArray', value: obj });\r\n\r\n    setTimeout(() => {\r\n      canvas.copyCanvas(frameID, newFrameID);\r\n      this.openCanvasHandler(newFrameID);\r\n    }, 200);\r\n  }\r\n\r\n  addNewFrameHandler() {\r\n    const newFrameID = makeRandomId();\r\n    this.setState({ activeFrame: newFrameID });\r\n    store.dispatch({ type: 'framesArray', value: { id: newFrameID, frameSRC: '' } });\r\n    setTimeout(() => {\r\n      this.openCanvasHandler(newFrameID);\r\n    }, 200);\r\n  }\r\n\r\n  removeFrameHandler(id) {\r\n    store.dispatch({ type: 'framesArray', value: { delete: id } });\r\n    setTimeout(() => {\r\n      this.openCanvasHandler($('.frame-list').children().last()[0].id.split('frame')[1]);\r\n    }, 200);\r\n  }\r\n\r\n  dragFrameOnClick() {\r\n    $('#sortable').sortable();\r\n    $('#sortable').sortable('option', 'disabled', false);\r\n    $('#sortable').disableSelection();\r\n  }\r\n\r\n  dragOffOnClick(id, draggedFrom) {\r\n    $('#sortable').sortable('option', 'disabled', true);\r\n    Array.from($('#sortable').children()).forEach((item, i) => {\r\n      if (item.id === `frame${id}`) {\r\n        store.dispatch({ type: 'framesArray', value: { drag: draggedFrom, target: i, draggedFrame: id } });\r\n      }\r\n    })\r\n    setTimeout(() => {\r\n      this.openCanvasHandler(id);\r\n    }, 200);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"frame-box\"\r\n      >\r\n        <ul\r\n          id=\"sortable\"\r\n          className=\"frame-list\"\r\n        >\r\n          {this.props.framesArray.map((item, i) => (\r\n            <li\r\n              key={`frame-list-item-${item.id}`}\r\n              className={`ui-state-default frame ${this.state.activeFrame === item.id ? 'activeFrame' : ''}`}\r\n              id={`frame${item.id}`}\r\n              style={{ background: this.props.bg || `url(${bg1})` }}\r\n              onMouseEnter={() => this.onMouseEnterHandler(item.id)}\r\n              onMouseLeave={() => this.onMouseLeaveHandler()}\r\n              onClick={() => this.openCanvasHandler(item.id)}\r\n            >\r\n              <img\r\n                id={`preview-box${item.id}`}\r\n                className=\"preview-box\"\r\n                src={item.frameSRC}\r\n                alt=\"\"\r\n              />\r\n              <title className=\"number\">{i + 1}</title>\r\n              <span\r\n                className={\r\n                  `removeFrame ${\r\n                  (this.props.framesArray.length !== 1 && this.state.hovered === item.id)\r\n                    || (this.state.hovered === item.id && this.props.framesArray[0].id !== item.id)\r\n                    ? '' : 'minorZ'}`}\r\n                onClick={() => this.removeFrameHandler(item.id)}>\r\n                <i className=\"fas fa-trash-alt\" />\r\n              </span>\r\n              <span\r\n                id={item.id}\r\n                className={\r\n                  `dragFrame ${\r\n                  (this.props.framesArray.length !== 1 && this.state.hovered === item.id)\r\n                    || (this.state.hovered === item.id && this.props.framesArray[0].id !== item.id)\r\n                    ? '' : 'minorZ'}`}\r\n                onMouseDown={() => this.dragFrameOnClick()}\r\n                onMouseUp={() => this.dragOffOnClick(item.id, i)}\r\n              >\r\n                <i className=\"fas fa-arrows-alt\" />\r\n              </span>\r\n              <span\r\n                className={`copyFrame ${this.state.hovered === item.id ? '' : 'minorZ'}`}\r\n                onClick={() => this.copyFrameHandler(item.id)}>\r\n                <i className=\"fas fa-copy\" />\r\n              </span>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <button\r\n          className=\"addNewFrame\"\r\n          onClick={() => this.addNewFrameHandler()}\r\n          type=\"button\"\r\n        >\r\n          Add new frame\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFramesWrapper.propTypes = {\r\n  framesArray: PropTypes.array.isRequired,\r\n  bg: PropTypes.string.isRequired\r\n};\r\n","import $ from 'jquery';\r\n\r\n// copy target frame's canvas with content if the frame was cloned\r\nexport function copyCanvas(oldID, newID) {\r\n  const originalContext = $(`#canvas${oldID}`)\r\n    .get(0)\r\n    .getContext('2d');\r\n  const imageData = originalContext.getImageData(\r\n    0,\r\n    0,\r\n    $(`#canvas${oldID}`).width(),\r\n    $(`#canvas${oldID}`).width()\r\n  );\r\n  const cloneContext = $(`#canvas${newID}`).get(0).getContext('2d');\r\n  cloneContext.putImageData(imageData, 0, 0);\r\n}\r\n\r\nexport function copyCanvasContext(n) {\r\n  const originalContext = $(`#canvas${n}`)\r\n    .get(0)\r\n    .getContext('2d');\r\n  const imageData = originalContext.getImageData(\r\n    0,\r\n    0,\r\n    $(`#canvas${n}`).width(),\r\n    $(`#canvas${n}`).width()\r\n  );\r\n  return imageData;\r\n}\r\n\r\nexport function putImage(n, imageData) {\r\n  const cloneContext = $(`#canvas${n}`)\r\n    .get(0)\r\n    .getContext('2d');\r\n  cloneContext.putImageData(imageData, 0, 0);\r\n}\r\n","import { hexToRGB } from 'components/functions/colors';\r\n\r\nfunction getColorAtPixel(imageData, x, y) {\r\n  const { width, data } = imageData;\r\n\r\n  return {\r\n    r: data[4 * (width * y + x) + 0],\r\n    g: data[4 * (width * y + x) + 1],\r\n    b: data[4 * (width * y + x) + 2],\r\n    a: data[4 * (width * y + x) + 3]\r\n  };\r\n}\r\n\r\nfunction setColorAtPixel(imageData, color, x, y) {\r\n  const { width, data } = imageData;\r\n\r\n  data[4 * (width * y + x) + 0] = color.r;\r\n  data[4 * (width * y + x) + 1] = color.g;\r\n  data[4 * (width * y + x) + 2] = color.b;\r\n  data[4 * (width * y + x) + 3] = color.a;\r\n}\r\n\r\nfunction colorMatch(a, b) {\r\n  return a.r === b.r && a.g === b.g && a.b === b.b && a.a === b.a;\r\n}\r\n\r\nfunction floodFill(imageData, newColor, x, y) {\r\n  const { width, height } = imageData;\r\n  const stack = [];\r\n  const baseColor = getColorAtPixel(imageData, x, y);\r\n  let clicked = { x, y };\r\n\r\n  // Check if base color and new color are the same\r\n  if (colorMatch(baseColor, newColor)) {\r\n    return;\r\n  }\r\n\r\n  // Add the clicked location to stack\r\n  stack.push({ x: clicked.x, y: clicked.y });\r\n\r\n  while (stack.length) {\r\n    clicked = stack.pop();\r\n    let goDown = true; // Vertical is assumed to be true\r\n    let goUp = true; // Vertical is assumed to be true\r\n    let goLeft = false;\r\n    let goRight = false;\r\n\r\n    // Move to top most goDown pixel\r\n    while (goUp && clicked.y >= 0) {\r\n      clicked.y -= 1;\r\n      goUp = colorMatch(getColorAtPixel(imageData, clicked.x, clicked.y), baseColor);\r\n    }\r\n\r\n    // Move downward\r\n    while (goDown && clicked.y < height) {\r\n      setColorAtPixel(imageData, newColor, clicked.x, clicked.y);\r\n\r\n      // Check left\r\n      if (\r\n        clicked.x - 1 >= 0 &&\r\n        colorMatch(getColorAtPixel(imageData, clicked.x - 1, clicked.y), baseColor)\r\n      ) {\r\n        if (!goLeft) {\r\n          goLeft = true;\r\n          stack.push({ x: clicked.x - 1, y: clicked.y });\r\n        }\r\n      } else {\r\n        goLeft = false;\r\n      }\r\n\r\n      // Check right\r\n      if (\r\n        clicked.x + 1 < width &&\r\n        colorMatch(getColorAtPixel(imageData, clicked.x + 1, clicked.y), baseColor)\r\n      ) {\r\n        if (!goRight) {\r\n          stack.push({ x: clicked.x + 1, y: clicked.y });\r\n          goRight = true;\r\n        }\r\n      } else {\r\n        goRight = false;\r\n      }\r\n\r\n      clicked.y += 1;\r\n      goDown = colorMatch(getColorAtPixel(imageData, clicked.x, clicked.y), baseColor);\r\n    }\r\n  }\r\n}\r\n\r\nexport default function paintIt(e, num, color) {\r\n  const curCanv = document.querySelector(`#canvas${num}`);\r\n  const ctx = curCanv.getContext('2d');\r\n  const rgbColor = hexToRGB(color);\r\n  const col = { r: rgbColor.r, g: rgbColor.g, b: rgbColor.b, a: 255 };\r\n  ctx.fillStyle = color;\r\n  ctx.strokeStyle = color;\r\n  const rect = curCanv.getBoundingClientRect();\r\n  const x = Math.round(e.clientX - rect.left);\r\n  const y = Math.round(e.clientY - rect.top);\r\n  const imageData = ctx.getImageData(0, 0, curCanv.width, curCanv.height);\r\n  floodFill(imageData, col, x, y);\r\n  ctx.putImageData(imageData, 0, 0);\r\n}\r\n","export function rgbaToHex(r, g, b) {\r\n  let hexR = r.toString(16);\r\n  let hexG = g.toString(16);\r\n  let hexB = b.toString(16);\r\n  if (hexR.length < 2) {\r\n    hexR = `0${hexR}`;\r\n  }\r\n  if (hexG.length < 2) {\r\n    hexG = `0${hexG}`;\r\n  }\r\n  if (hexB.length < 2) {\r\n    hexB = `0${hexB}`;\r\n  }\r\n  return `#${hexR}${hexG}${hexB}`;\r\n}\r\n\r\nexport function rgbToHex(color) {\r\n  const hex = `${color}`;\r\n\r\n  const nums = /(.*?)rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/i.exec(hex);\r\n  const r = parseInt(nums[2], 10).toString(16);\r\n  const g = parseInt(nums[3], 10).toString(16);\r\n  const b = parseInt(nums[4], 10).toString(16);\r\n\r\n  return `#${r.length === 1 ? `0${r}` : r}${g.length === 1 ? `0${g}` : g}${\r\n    b.length === 1 ? `0${b}` : b\r\n    }`;\r\n}\r\n\r\nexport function hexToRGB(hexColor) {\r\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hexColor);\r\n  return result ? {\r\n    r: parseInt(result[1], 16),\r\n    g: parseInt(result[2], 16),\r\n    b: parseInt(result[3], 16)\r\n  } : null;\r\n}","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport store from 'store/store';\r\nimport 'components/screens/canvas/canvasDomBuilder.css';\r\nimport bg1 from 'assets/images/bg/bg1.png';\r\nimport { createCursorShadow, clearCanvas, endCursorMove } from 'components/functions/toolsFunctions/cursorShadow';\r\nimport { startDraw, endDraw, startStroke, endStroke } from 'components/functions/toolsFunctions/drawing';\r\nimport { makeImage } from 'components/functions/preview';\r\nimport paintIt from 'components/functions/toolsFunctions/paint';\r\nimport { rgbaToHex } from 'components/functions/colors';\r\n\r\nexport default class CanvasWrapper extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      size: '',\r\n      draw: false,\r\n      lines: false\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentWillMount() {\r\n    const canvasWidth =\r\n      window.innerWidth - 500 < window.innerHeight - 155\r\n        ? window.innerWidth - 500\r\n        : window.innerHeight - 155;\r\n    this.setState({ size: canvasWidth > 350 ? canvasWidth : 350 });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  mouseDownHandler(e) {\r\n    const tool = this.props.toolState.currentTool;\r\n    const curCanvas = this.props.currentCanvas;\r\n    const customWidth = this.props.settings.customWidth;\r\n    const color = this.props.toolState.currentColor;\r\n    if (tool === 'penTool' || tool === 'eraserTool') {\r\n      this.setState({ draw: true });\r\n      clearCanvas();\r\n      startDraw(e, curCanvas, tool, customWidth, color);\r\n      store.dispatch({ type: 'palette', value: color });\r\n    } else if (tool === 'strokeTool' || tool === 'rectangleTool' || tool === 'circleTool') {\r\n      this.setState({ lines: true });\r\n      clearCanvas();\r\n      startStroke(e, curCanvas, tool, customWidth, color);\r\n      store.dispatch({ type: 'palette', value: color });\r\n    } else if (tool === 'colorPickerTool') {\r\n      if ($(e.target).is('.canvas')) {\r\n        const curCanv = document.querySelector(`#canvas${curCanvas}`);\r\n        const rect = curCanv.getBoundingClientRect();\r\n        const x = Math.round(e.clientX - rect.left);\r\n        const y = Math.round(e.clientY - rect.top);\r\n        const ctx = curCanv.getContext('2d').getImageData(x, y, 1, 1).data;\r\n        if (ctx[3] > 0) {\r\n          const hexColor = rgbaToHex(ctx[0], ctx[1], ctx[2]);\r\n          store.dispatch({ type: 'toolState', value: ['currentColor', hexColor] });\r\n          store.dispatch({ type: 'palette', value: hexColor });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  mouseMoveHandler(e) {\r\n    const tool = this.props.toolState.currentTool;\r\n    const curCanvas = this.props.currentCanvas;\r\n    const customWidth = this.props.settings.customWidth;\r\n    const color = this.props.toolState.currentColor;\r\n    if (tool) {\r\n      if (this.state.draw === true) {\r\n        endDraw(e, curCanvas, tool, customWidth, color);\r\n      } else {\r\n        endCursorMove(e);\r\n      }\r\n      if (this.state.lines === true) {\r\n        endStroke(e, curCanvas, tool, customWidth, color);\r\n      }\r\n    }\r\n  }\r\n\r\n  mouseUpHandler() {\r\n    const tool = this.props.toolState.currentTool;\r\n    const curCanvas = this.props.currentCanvas;\r\n    this.setState({ draw: false, lines: false });\r\n    if (!tool) {\r\n      return;\r\n    }\r\n    clearCanvas();\r\n    setTimeout(() => {\r\n      makeImage(curCanvas);\r\n    }, 500);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"canvas-wrapper\">\r\n        <div id=\"canvas-block\" className=\"canvas-block\">\r\n          {this.props.framesArray.length >= 1 ? this.props.framesArray.map((item, i) => {\r\n            return (\r\n              <canvas\r\n                key={item.id}\r\n                id={`canvas${item.id}`}\r\n                className={`canvas ${this.props.currentCanvas === item.id ? '' : 'hidden'}`}\r\n                style={{ background: this.props.settings.currentBG || `url(${bg1}) repeat` }}\r\n                width={this.state.size}\r\n                height={this.state.size}\r\n                onClick={e => this.mouseDownHandler(e)}\r\n              />\r\n            )\r\n          }) :\r\n            (\r\n              <canvas\r\n                id={this.props.currentCanvas}\r\n                className='canvas'\r\n                style={{ background: `url(${bg1}) repeat` }}\r\n                width={this.state.size}\r\n                height={this.state.size}\r\n                onClick={e => this.mouseDownHandler(e)}\r\n              />\r\n            )\r\n          }\r\n        </div>\r\n        <canvas\r\n          id=\"drawCanvas\"\r\n          className=\"drawCanvas\"\r\n          onMouseOver={e => {\r\n            if (this.props.toolState.currentTool) {\r\n              if (this.state.draw === false) {\r\n                createCursorShadow(e);\r\n              }\r\n            }\r\n          }}\r\n          onClick={e => {\r\n            if (this.props.toolState.currentTool === 'paintBucketTool') {\r\n              const curColor = this.props.toolState.currentColor;\r\n              paintIt(e, this.props.currentCanvas, curColor);\r\n              store.dispatch({ type: 'palette', value: curColor });\r\n            }\r\n          }}\r\n          onMouseDown={e => this.mouseDownHandler(e)}\r\n          onMouseMove={e => this.mouseMoveHandler(e)}\r\n          onMouseLeave={() => {\r\n            if (this.state.draw === false) {\r\n              clearCanvas();\r\n            }\r\n          }}\r\n          onMouseUp={e => this.mouseUpHandler(e)}\r\n          onFocus={() => undefined}\r\n          width={this.state.size}\r\n          height={this.state.size}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCanvasWrapper.propTypes = {\r\n  toolState: PropTypes.object.isRequired,\r\n  currentCanvas: PropTypes.string.isRequired,\r\n  settings: PropTypes.object.isRequired,\r\n  framesArray: PropTypes.array.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'components/screens/preview/preview.css';\r\nimport { fullSizePreview } from 'components/functions/preview';\r\n\r\nexport default class PreviewBlock extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      active: ''\r\n    };\r\n  }\r\n\r\n  hoverIn() {\r\n    if (this.mounted) {\r\n      this.setState({ active: true });\r\n    }\r\n  }\r\n\r\n  hoverOut() {\r\n    if (this.mounted) {\r\n      this.setState({ active: false });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        id=\"preview-area\"\r\n        className=\"preview-area\"\r\n        onMouseEnter={() => this.hoverIn()}\r\n        onMouseLeave={() => this.hoverOut()}\r\n      >\r\n        <div className=\"preview\">\r\n          {this.props.framesArray.map(item => (\r\n            <img\r\n              key={`image${item.id}`}\r\n              id={`imagePreview${item.id}`}\r\n              src={item.frameSRC}\r\n              style={{ width: '100%' }}\r\n              alt=\"\"\r\n            />\r\n          ))}\r\n        </div>\r\n        <div\r\n          className={`preview-open ${this.state.active ? '' : 'hidden'}`}\r\n          id=\"preview-open\"\r\n          role=\"button\"\r\n          tabIndex=\"-1\"\r\n          onKeyPress={undefined}\r\n          onClick={fullSizePreview}\r\n        >\r\n          <i className=\"fas fa-external-link-alt\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPreviewBlock.propTypes = {\r\n  framesArray: PropTypes.array.isRequired\r\n};","import React from 'react';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\nimport 'components/menuComponents/layers-list/layers-list.css';\r\n\r\nclass Layers extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      hovered: '',\r\n      mouseEnter: false\r\n    };\r\n  }\r\n\r\n  popHintOnMouseOver(e) {\r\n    const hovered = e.target.getAttribute('id');\r\n    if (this.state.hovered === hovered) {\r\n      this.setState({ hovered: '' });\r\n    } else {\r\n      this.setState({ hovered });\r\n    }\r\n  }\r\n\r\n  mouseIn() {\r\n    this.setState({ mouseEnter: true });\r\n  }\r\n\r\n  mouseOut() {\r\n    this.setState({ mouseEnter: false });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"layers-box\"\r\n        onMouseOver={e => this.popHintOnMouseOver(e)}\r\n        onFocus={() => undefined}\r\n      >\r\n        <div className=\"layer-outlet\">\r\n          <span className=\"layer-title\">Layers</span>\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button layer-preview\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-eye\"\r\n            active={null}\r\n            title=\"Preview all layers\"\r\n            placement=\"top-end\"\r\n          />\r\n        </div>\r\n        <div className=\"layer-buttons-box\">\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-plus\"\r\n            active={null}\r\n            title=\"Create a layer\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-arrow-up\"\r\n            active={null}\r\n            title=\"Move layer up\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-arrow-down\"\r\n            active={null}\r\n            title=\"Move layer down\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-pen\"\r\n            active={null}\r\n            title=\"Edit layer name\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-compress\"\r\n            active={null}\r\n            title=\"Merge with layer below\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-times\"\r\n            active={null}\r\n            title=\"Delete selected layer\"\r\n            placement=\"top-end\"\r\n          />\r\n        </div>\r\n        <ul className=\"layer-list\">\r\n          <li className=\"layer-item\">Layer 1</li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Layers;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class SampleButton extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        style={{ background: this.props.color }}\r\n        className={`palette-sample ${\r\n          this.props.state === this.props.color ? 'active-palette-sample' : ''\r\n          }`}\r\n        onClick={this.props.onClickHandler}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nSampleButton.propTypes = {\r\n  color: PropTypes.string.isRequired,\r\n  state: PropTypes.string.isRequired,\r\n  onClickHandler: PropTypes.func.isRequired\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\nimport SampleButton from 'components/buttons/paletteSampleButton';\r\nimport 'components/menuComponents/palettes/palettes.css';\r\nimport store from 'store/store';\r\nimport { rgbToHex } from 'components/functions/colors';\r\n\r\nclass Palettes extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      hovered: '',\r\n      mouseEnter: false,\r\n      color: [],\r\n      changed: false\r\n    };\r\n  }\r\n\r\n  addPalettesOnClick() { }\r\n\r\n  editPalettesOnClick() { }\r\n\r\n  choosePalettesOnClick() { }\r\n\r\n  changeCurColor(e) {\r\n    const color = $(e.target).css('background-color');\r\n    const hexColor = rgbToHex(color)\r\n    store.dispatch({ type: 'toolState', value: ['currentColor', hexColor] });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"palettes-box\">\r\n        <div className=\"palettes-outlet\">\r\n          <span className=\"palettes-title\">Palettes</span>\r\n        </div>\r\n        <div className=\"palettes-buttons-box\">\r\n          <AwesomeButton\r\n            buttonClass=\"palettes-button\"\r\n            onClickHandler={() => this.addPalettesOnClick()}\r\n            iconClass=\"fas fa-plus\"\r\n            active={null}\r\n            title=\"Create a new palette\"\r\n            placement=\"top-end\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            id=\"palettes-dropdown-list\"\r\n            className=\"palettes-button colors-list\"\r\n            onMouseEnter={() => this.setState({ hovered: true })}\r\n            onMouseLeave={() => this.setState({ hovered: false })}\r\n            onClick={() => this.choosePalettesOnClick()}\r\n          >\r\n            Current colors\r\n            <i\r\n              className={`colors-list-arrow fas fa-sort-down ${\r\n                this.state.hovered ? 'colors-list-arrow-hovered' : ''\r\n                }`}\r\n            />\r\n          </button>\r\n          <AwesomeButton\r\n            buttonClass=\"palettes-button\"\r\n            onClickHandler={() => this.editPalettesOnClick()}\r\n            iconClass=\"fas fa-pen\"\r\n            active={null}\r\n            title=\"Palette options\"\r\n            placement=\"top-end\"\r\n          />\r\n        </div>\r\n        <ul className=\"palettes-list\">\r\n          <span className={`palette-colors-isempty ${this.props.colorSamples.length > 0 ? 'hidden' : ''}`}>\r\n            No colors in this palette yet\r\n          </span>\r\n          {this.props.colorSamples.map(item => (\r\n            <li key={item} id={item} className=\"palette-sample-list\">\r\n              <SampleButton\r\n                color={item}\r\n                state={this.props.toolState.currentColor}\r\n                onClickHandler={e => this.changeCurColor(e)}\r\n              />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPalettes.propTypes = {\r\n  colorSamples: PropTypes.array.isRequired,\r\n  toolState: PropTypes.object.isRequired\r\n}\r\n\r\nexport default Palettes;\r\n","import React from 'react';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/settings/settings.css';\r\nimport PropTypes from 'prop-types';\r\nimport store from 'store/store';\r\n\r\nexport default class Settings extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      active: 'bg1'\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  addActiveOnClick(e) {\r\n    const clicked = e.target.getAttribute('id');\r\n    const bg = $(e.target).css('background-image');\r\n    this.setState({ active: clicked });\r\n    store.dispatch({ type: 'settings', value: ['currentBG', bg] });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`general-settings-block ${this.props.active === 'settings' ? 'flexed' : 'hidden'}`}\r\n      >\r\n        <div className=\"current-bg\">\r\n          <span className=\"default-bg bold\">Background</span>\r\n          <div className=\"general-settings-buttons-area\">\r\n            {['bg1', 'bg2', 'bg3', 'bg4'].map(item => (\r\n              <button\r\n                key={item}\r\n                type=\"button\"\r\n                id={item}\r\n                onClick={e => this.addActiveOnClick(e)}\r\n                className={`general-settings-button ${item} ${\r\n                  this.state.active === item ? 'active-button' : 'not-active-button'\r\n                  }`}\r\n              />\r\n            ))}\r\n          </div>\r\n          <p>Set default background</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSettings.propTypes = {\r\n  active: PropTypes.string.isRequired\r\n}\r\n","import React from 'react';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/resize/resize.css';\r\nimport store from 'store/store';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class ResizeCanvas extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      customWidth: 33,\r\n      maxWidth: '',\r\n      newWidth: '',\r\n      error: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ maxWidth: $('#drawCanvas').width() });\r\n  }\r\n\r\n  resizeCanvasOnClickHandler() {\r\n    const newWidth = this.state.newWidth;\r\n    if (newWidth > 0 && newWidth < this.state.maxWidth) {\r\n      this.setState({ customWidth: newWidth });\r\n      store.dispatch({ type: 'settings', value: ['customWidth', newWidth] });\r\n    } else {\r\n      this.setState({ error: true });\r\n    }\r\n    $('#resize-input').val('');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`resize-canvas-block ${\r\n          this.props.active === 'resize-settings' ? 'flexed' : 'hidden'\r\n          }`}\r\n      >\r\n        <div className=\"current-size\">\r\n          <span className=\"default-size bold\">current size</span>\r\n          <p>\r\n            {`Width `}\r\n            <span className=\"default-width bold\" id=\"current-width\">\r\n              {this.state.customWidth}\r\n            </span>\r\n            px\r\n          </p>\r\n          <p>\r\n            Height\r\n            <span className=\"default-width bold\" id=\"current-height\">\r\n              {this.state.customWidth}\r\n            </span>\r\n            px\r\n          </p>\r\n        </div>\r\n        <div className=\"resize-canvas\">\r\n          <span className=\"resize bold\">resize</span>\r\n          <p className=\"new-width-block\">\r\n            <span>1 - </span>\r\n            <span id=\"new-width\" className=\"canvas-width\">\r\n              {this.state.maxWidth}\r\n            </span>\r\n            <span>px</span>\r\n            <input\r\n              type=\"number\"\r\n              className=\"resize-input\"\r\n              id=\"resize-input\"\r\n              min=\"1\"\r\n              onKeyPress={e => {\r\n                if (e.key === 'Enter') {\r\n                  this.resizeCanvasOnClickHandler(e);\r\n                }\r\n              }}\r\n              onChange={e => this.setState({ newWidth: e.target.value })}\r\n            />\r\n          </p>\r\n          <p id=\"error-message\" className={`error-message ${this.state.error ? '' : 'hidden'}`}>\r\n            {`Size can be from 1 to ${this.state.maxWidth} px`}\r\n          </p>\r\n          <button\r\n            id=\"resize-button\"\r\n            className=\"resize-button\"\r\n            type=\"button\"\r\n            onClick={() => this.resizeCanvasOnClickHandler()}\r\n          >\r\n            Change canvas size\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nResizeCanvas.propTypes = {\r\n  active: PropTypes.string.isRequired,\r\n  currentCanvas: PropTypes.string.isRequired\r\n}\r\n","import * as firebase from 'firebase';\r\n\r\nconst config = {\r\n  apiKey: 'AIzaSyB7L9YDQre3TEMDbonPKJh9oiT0LB8MPME',\r\n  authDomain: 'piskel-clone-1561243542927.firebaseapp.com',\r\n  databaseURL: 'https://piskel-clone-1561243542927.firebaseio.com',\r\n  projectId: 'piskel-clone-1561243542927',\r\n  storageBucket: '',\r\n  messagingSenderId: '842905832916',\r\n  appId: '1:842905832916:web:bd7859a38165e1b7'\r\n};\r\n\r\nfirebase.initializeApp(config);\r\n\r\nexport default firebase;\r\n","import firebase from '../../firebase/firebase';\r\nimport store from 'store/store';\r\n\r\nexport function writeUserData(userId, project, frames, gif, date, time, title, description, fps) {\r\n  firebase\r\n    .database()\r\n    .ref(`users/${userId}/${project}`)\r\n    .set({\r\n      frames,\r\n      gif,\r\n      date,\r\n      time,\r\n      title,\r\n      description,\r\n      fps\r\n    });\r\n}\r\n\r\nexport function deleteFromDB(DBitem) {\r\n  firebase\r\n    .database()\r\n    .ref(DBitem)\r\n    .set(null);\r\n}\r\n\r\nexport function getDBdata(DBitem) {\r\n  let projects = {};\r\n  projects[DBitem] = {}\r\n  firebase\r\n    .database()\r\n    .ref(`/users/${DBitem}`)\r\n    .once('value')\r\n    .then(snapshot => {\r\n      projects[DBitem] = snapshot.val();\r\n      store.dispatch({ type: 'allProjects', value: projects });\r\n    });\r\n}\r\n","/* eslint-disable import/prefer-default-export */\r\n/* eslint-disable func-names */\r\n/* eslint-disable no-bitwise */\r\n/* eslint-disable prefer-rest-params */\r\n/* eslint-disable no-empty */\r\n/* eslint-disable no-var */\r\n/* eslint-disable no-use-before-define */\r\n/* eslint-disable no-lonely-if */\r\n/* eslint-disable eqeqeq */\r\n/* eslint-disable no-plusplus */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-multi-assign */\r\n/* eslint-disable no-shadow */\r\n/* eslint-disable prefer-const */\r\n/*\r\n * NeuQuant Neural-Net Quantization Algorithm\r\n * ------------------------------------------\r\n *\r\n * Copyright (c) 1994 Anthony Dekker\r\n *\r\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\r\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\r\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\r\n * the algorithm.\r\n *\r\n * Any party obtaining a copy of these files from the author, directly or\r\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\r\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\r\n * this software and documentation files (the \"Software\"), including without\r\n * limitation the rights to use, copy, modify, merge, publish, distribute,\r\n * sublicense, and/or sell copies of the Software, and to permit persons who\r\n * receive copies from any such party to do so, with the only requirement being\r\n * that this copyright notice remain intact.\r\n */\r\n\r\n/*\r\n * This class handles Neural-Net quantization algorithm\r\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\r\n * @author Thibault Imbert (AS3 version - bytearray.org)\r\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\r\n * @version 0.1 AS3 implementation\r\n */\r\n\r\nconst NeuQuant = function () {\r\n  let exports = {};\r\n  let netsize = 256; /* number of colours used */\r\n\r\n  /* four primes near 500 - assume no image has a length so large */\r\n  /* that it is divisible by all four primes */\r\n\r\n  let prime1 = 499;\r\n  let prime2 = 491;\r\n  let prime3 = 487;\r\n  let prime4 = 503;\r\n  let minpicturebytes = 3 * prime4; /* minimum size for input image */\r\n\r\n  /*\r\n   * Program Skeleton ---------------- [select samplefac in range 1..30] [read\r\n   * image from input file] pic = (unsigned char*) malloc(3*width*height);\r\n   * initnet(pic,3*width*height,samplefac); learn(); unbiasnet(); [write output\r\n   * image header, using writecolourmap(f)] inxbuild(); write output image using\r\n   * inxsearch(b,g,r)\r\n   */\r\n\r\n  /*\r\n   * Network Definitions -------------------\r\n   */\r\n\r\n  let maxnetpos = netsize - 1;\r\n  let netbiasshift = 4; /* bias for colour values */\r\n  let ncycles = 100; /* no. of learning cycles */\r\n\r\n  /* defs for freq and bias */\r\n  let intbiasshift = 16; /* bias for fractions */\r\n  let intbias = 1 << intbiasshift;\r\n  let gammashift = 10; /* gamma = 1024 */\r\n  let gamma = 1 << gammashift;\r\n  let betashift = 10;\r\n  let beta = intbias >> betashift; /* beta = 1/1024 */\r\n  let betagamma = intbias << (gammashift - betashift);\r\n\r\n  /* defs for decreasing radius factor */\r\n  let initrad = netsize >> 3; /* for 256 cols, radius starts */\r\n  let radiusbiasshift = 6; /* at 32.0 biased by 6 bits */\r\n  let radiusbias = 1 << radiusbiasshift;\r\n  let initradius = initrad * radiusbias; /* and decreases by a */\r\n  let radiusdec = 30; /* factor of 1/30 each cycle */\r\n\r\n  /* defs for decreasing alpha factor */\r\n  let alphabiasshift = 10; /* alpha starts at 1.0 */\r\n  let initalpha = 1 << alphabiasshift;\r\n  let alphadec; /* biased by 10 bits */\r\n\r\n  /* radbias and alpharadbias used for radpower calculation */\r\n  let radbiasshift = 8;\r\n  let radbias = 1 << radbiasshift;\r\n  let alpharadbshift = alphabiasshift + radbiasshift;\r\n  let alpharadbias = 1 << alpharadbshift;\r\n\r\n  /*\r\n   * Types and Global Variables --------------------------\r\n   */\r\n\r\n  let thepicture; /* the input image itself */\r\n  let lengthcount; /* lengthcount = H*W*3 */\r\n  let samplefac; /* sampling factor 1..30 */\r\n\r\n  // typedef int pixel[4]; /* BGRc */\r\n  let network; /* the network itself - [netsize][4] */\r\n  let netindex = [];\r\n\r\n  /* for network lookup - really 256 */\r\n  let bias = [];\r\n\r\n  /* bias and freq arrays for learning */\r\n  let freq = [];\r\n  let radpower = [];\r\n\r\n  let NeuQuant = (exports.NeuQuant = function NeuQuant(thepic, len, sample) {\r\n    let i;\r\n    let p;\r\n\r\n    thepicture = thepic;\r\n    lengthcount = len;\r\n    samplefac = sample;\r\n\r\n    network = new Array(netsize);\r\n\r\n    for (i = 0; i < netsize; i++) {\r\n      network[i] = new Array(4);\r\n      p = network[i];\r\n      p[0] = p[1] = p[2] = (i << (netbiasshift + 8)) / netsize;\r\n      freq[i] = intbias / netsize; /* 1/netsize */\r\n      bias[i] = 0;\r\n    }\r\n  });\r\n\r\n  let colorMap = function colorMap() {\r\n    let map = [];\r\n    let index = new Array(netsize);\r\n\r\n    for (let i = 0; i < netsize; i++) index[network[i][3]] = i;\r\n\r\n    let k = 0;\r\n    for (let l = 0; l < netsize; l++) {\r\n      let j = index[l];\r\n      map[k++] = network[j][0];\r\n      map[k++] = network[j][1];\r\n      map[k++] = network[j][2];\r\n    }\r\n\r\n    return map;\r\n  };\r\n\r\n  /*\r\n   * Insertion sort of network and building of netindex[0..255] (to do after\r\n   * unbias)\r\n   * -------------------------------------------------------------------------------\r\n   */\r\n\r\n  let inxbuild = function inxbuild() {\r\n    let i;\r\n    let j;\r\n    let smallpos;\r\n    let smallval;\r\n    let p;\r\n    let q;\r\n    let previouscol;\r\n    let startpos;\r\n\r\n    previouscol = 0;\r\n    startpos = 0;\r\n    for (i = 0; i < netsize; i++) {\r\n      p = network[i];\r\n      smallpos = i;\r\n      smallval = p[1]; /* index on g */\r\n\r\n      /* find smallest in i..netsize-1 */\r\n      for (j = i + 1; j < netsize; j++) {\r\n        q = network[j];\r\n        if (q[1] < smallval) {\r\n          /* index on g */\r\n          smallpos = j;\r\n          smallval = q[1]; /* index on g */\r\n        }\r\n      }\r\n      q = network[smallpos];\r\n\r\n      /* swap p (i) and q (smallpos) entries */\r\n      if (i != smallpos) {\r\n        j = q[0];\r\n        q[0] = p[0];\r\n        p[0] = j;\r\n        j = q[1];\r\n        q[1] = p[1];\r\n        p[1] = j;\r\n        j = q[2];\r\n        q[2] = p[2];\r\n        p[2] = j;\r\n        j = q[3];\r\n        q[3] = p[3];\r\n        p[3] = j;\r\n      }\r\n\r\n      /* smallval entry is now in position i */\r\n\r\n      if (smallval != previouscol) {\r\n        netindex[previouscol] = (startpos + i) >> 1;\r\n\r\n        for (j = previouscol + 1; j < smallval; j++) netindex[j] = i;\r\n\r\n        previouscol = smallval;\r\n        startpos = i;\r\n      }\r\n    }\r\n\r\n    netindex[previouscol] = (startpos + maxnetpos) >> 1;\r\n    for (j = previouscol + 1; j < 256; j++) netindex[j] = maxnetpos; /* really 256 */\r\n  };\r\n\r\n  /*\r\n   * Main Learning Loop ------------------\r\n   */\r\n\r\n  let learn = function learn() {\r\n    let i;\r\n    let j;\r\n    let b;\r\n    let g;\r\n    let r;\r\n    let radius;\r\n    let rad;\r\n    let alpha;\r\n    let step;\r\n    let delta;\r\n    let samplepixels;\r\n    let p;\r\n    let pix;\r\n    let lim;\r\n\r\n    if (lengthcount < minpicturebytes) samplefac = 1;\r\n\r\n    alphadec = 30 + (samplefac - 1) / 3;\r\n    p = thepicture;\r\n    pix = 0;\r\n    lim = lengthcount;\r\n    samplepixels = lengthcount / (3 * samplefac);\r\n    delta = (samplepixels / ncycles) | 0;\r\n    alpha = initalpha;\r\n    radius = initradius;\r\n\r\n    rad = radius >> radiusbiasshift;\r\n    if (rad <= 1) rad = 0;\r\n\r\n    for (i = 0; i < rad; i++) radpower[i] = alpha * (((rad * rad - i * i) * radbias) / (rad * rad));\r\n\r\n    if (lengthcount < minpicturebytes) step = 3;\r\n    else if (lengthcount % prime1 !== 0) step = 3 * prime1;\r\n    else {\r\n      if (lengthcount % prime2 !== 0) step = 3 * prime2;\r\n      else if ((lengthcount % prime3) !== 0) step = 3 * prime3;\r\n      else step = 3 * prime4;\r\n    }\r\n\r\n    i = 0;\r\n    while (i < samplepixels) {\r\n      b = (p[pix + 0] & 0xff) << netbiasshift;\r\n      g = (p[pix + 1] & 0xff) << netbiasshift;\r\n      r = (p[pix + 2] & 0xff) << netbiasshift;\r\n      j = contest(b, g, r);\r\n\r\n      altersingle(alpha, j, b, g, r);\r\n      if (rad !== 0) alterneigh(rad, j, b, g, r); /* alter neighbours */\r\n\r\n      pix += step;\r\n      if (pix >= lim) pix -= lengthcount;\r\n\r\n      i++;\r\n\r\n      if (delta === 0) delta = 1;\r\n\r\n      if (i % delta === 0) {\r\n        alpha -= alpha / alphadec;\r\n        radius -= radius / radiusdec;\r\n        rad = radius >> radiusbiasshift;\r\n\r\n        if (rad <= 1) rad = 0;\r\n\r\n        for (j = 0; j < rad; j++)\r\n          radpower[j] = alpha * (((rad * rad - j * j) * radbias) / (rad * rad));\r\n      }\r\n    }\r\n  };\r\n\r\n  /*\r\n   ** Search for BGR values 0..255 (after net is unbiased) and return colour\r\n   * index\r\n   * ----------------------------------------------------------------------------\r\n   */\r\n\r\n  let map = (exports.map = function map(b, g, r) {\r\n    let i;\r\n    let j;\r\n    let dist;\r\n    let a;\r\n    let bestd;\r\n    let p;\r\n    let best;\r\n\r\n    bestd = 1000; /* biggest possible dist is 256*3 */\r\n    best = -1;\r\n    i = netindex[g]; /* index on g */\r\n    j = i - 1; /* start at netindex[g] and work outwards */\r\n\r\n    while (i < netsize || j >= 0) {\r\n      if (i < netsize) {\r\n        p = network[i];\r\n        dist = p[1] - g; /* inx key */\r\n\r\n        if (dist >= bestd) i = netsize;\r\n        /* stop iter */ else {\r\n          i++;\r\n          if (dist < 0) dist = -dist;\r\n          a = p[0] - b;\r\n          if (a < 0) a = -a;\r\n          dist += a;\r\n\r\n          if (dist < bestd) {\r\n            a = p[2] - r;\r\n            if (a < 0) a = -a;\r\n            dist += a;\r\n\r\n            if (dist < bestd) {\r\n              bestd = dist;\r\n              best = p[3];\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (j >= 0) {\r\n        p = network[j];\r\n        dist = g - p[1]; /* inx key - reverse dif */\r\n\r\n        if (dist >= bestd) j = -1;\r\n        /* stop iter */ else {\r\n          j--;\r\n          if (dist < 0) dist = -dist;\r\n          a = p[0] - b;\r\n          if (a < 0) a = -a;\r\n          dist += a;\r\n\r\n          if (dist < bestd) {\r\n            a = p[2] - r;\r\n            if (a < 0) a = -a;\r\n            dist += a;\r\n            if (dist < bestd) {\r\n              bestd = dist;\r\n              best = p[3];\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return best;\r\n  });\r\n\r\n  let process = (exports.process = function process() {\r\n    learn();\r\n    unbiasnet();\r\n    inxbuild();\r\n    return colorMap();\r\n  });\r\n\r\n  /*\r\n   * Unbias network to give byte values 0..255 and record position i to prepare\r\n   * for sort\r\n   * -----------------------------------------------------------------------------------\r\n   */\r\n\r\n  var unbiasnet = function unbiasnet() {\r\n    let i;\r\n    let j;\r\n\r\n    for (i = 0; i < netsize; i++) {\r\n      network[i][0] >>= netbiasshift;\r\n      network[i][1] >>= netbiasshift;\r\n      network[i][2] >>= netbiasshift;\r\n      network[i][3] = i; /* record colour no */\r\n    }\r\n  };\r\n\r\n  /*\r\n   * Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2)) in\r\n   * radpower[|i-j|]\r\n   * ---------------------------------------------------------------------------------\r\n   */\r\n\r\n  var alterneigh = function alterneigh(rad, i, b, g, r) {\r\n    let j;\r\n    let k;\r\n    let lo;\r\n    let hi;\r\n    let a;\r\n    let m;\r\n    let p;\r\n\r\n    lo = i - rad;\r\n    if (lo < -1) lo = -1;\r\n\r\n    hi = i + rad;\r\n    if (hi > netsize) hi = netsize;\r\n\r\n    j = i + 1;\r\n    k = i - 1;\r\n    m = 1;\r\n\r\n    while (j < hi || k > lo) {\r\n      a = radpower[m++];\r\n\r\n      if (j < hi) {\r\n        p = network[j++];\r\n\r\n        try {\r\n          p[0] -= (a * (p[0] - b)) / alpharadbias;\r\n          p[1] -= (a * (p[1] - g)) / alpharadbias;\r\n          p[2] -= (a * (p[2] - r)) / alpharadbias;\r\n        } catch (e) { } // prevents 1.3 miscompilation\r\n      }\r\n\r\n      if (k > lo) {\r\n        p = network[k--];\r\n\r\n        try {\r\n          p[0] -= (a * (p[0] - b)) / alpharadbias;\r\n          p[1] -= (a * (p[1] - g)) / alpharadbias;\r\n          p[2] -= (a * (p[2] - r)) / alpharadbias;\r\n        } catch (e) { }\r\n      }\r\n    }\r\n  };\r\n\r\n  /*\r\n   * Move neuron i towards biased (b,g,r) by factor alpha\r\n   * ----------------------------------------------------\r\n   */\r\n\r\n  var altersingle = function altersingle(alpha, i, b, g, r) {\r\n    /* alter hit neuron */\r\n    let n = network[i];\r\n    n[0] -= (alpha * (n[0] - b)) / initalpha;\r\n    n[1] -= (alpha * (n[1] - g)) / initalpha;\r\n    n[2] -= (alpha * (n[2] - r)) / initalpha;\r\n  };\r\n\r\n  /*\r\n   * Search for biased BGR values ----------------------------\r\n   */\r\n\r\n  var contest = function contest(b, g, r) {\r\n    /* finds closest neuron (min dist) and updates freq */\r\n    /* finds best neuron (min dist-bias) and returns position */\r\n    /* for frequently chosen neurons, freq[i] is high and bias[i] is negative */\r\n    /* bias[i] = gamma*((1/netsize)-freq[i]) */\r\n\r\n    let i;\r\n    let dist;\r\n    let a;\r\n    let biasdist;\r\n    let betafreq;\r\n    let bestpos;\r\n    let bestbiaspos;\r\n    let bestd;\r\n    let bestbiasd;\r\n    let n;\r\n\r\n    bestd = ~(1 << 31);\r\n    bestbiasd = bestd;\r\n    bestpos = -1;\r\n    bestbiaspos = bestpos;\r\n\r\n    for (i = 0; i < netsize; i++) {\r\n      n = network[i];\r\n      dist = n[0] - b;\r\n      if (dist < 0) dist = -dist;\r\n      a = n[1] - g;\r\n      if (a < 0) a = -a;\r\n      dist += a;\r\n      a = n[2] - r;\r\n      if (a < 0) a = -a;\r\n      dist += a;\r\n\r\n      if (dist < bestd) {\r\n        bestd = dist;\r\n        bestpos = i;\r\n      }\r\n\r\n      biasdist = dist - (bias[i] >> (intbiasshift - netbiasshift));\r\n\r\n      if (biasdist < bestbiasd) {\r\n        bestbiasd = biasdist;\r\n        bestbiaspos = i;\r\n      }\r\n\r\n      betafreq = freq[i] >> betashift;\r\n      freq[i] -= betafreq;\r\n      bias[i] += betafreq << gammashift;\r\n    }\r\n\r\n    freq[bestpos] += beta;\r\n    bias[bestpos] -= betagamma;\r\n    return bestbiaspos;\r\n  };\r\n\r\n  NeuQuant.apply(this, arguments);\r\n  return exports;\r\n};\r\n\r\nexport { NeuQuant };\r\n","/* eslint-disable import/prefer-default-export */\r\n/* eslint-disable no-continue */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable prefer-rest-params */\r\n/* eslint-disable func-names */\r\n/* eslint-disable camelcase */\r\n/* eslint-disable no-bitwise */\r\n/* eslint-disable no-shadow */\r\n/* eslint-disable eqeqeq */\r\n/* eslint-disable no-labels */\r\n/* eslint-disable no-cond-assign */\r\n/* eslint-disable no-restricted-syntax */\r\n/* eslint-disable no-use-before-define */\r\n/* eslint-disable no-multi-assign */\r\n/* eslint-disable no-plusplus */\r\n/* eslint-disable no-var */\r\n/* eslint-disable prefer-const */\r\n/**\r\n * This class handles LZW encoding\r\n * Adapted from Jef Poskanzer's Java port by way of J. M. G. Elliott.\r\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\r\n * @author Thibault Imbert (AS3 version - bytearray.org)\r\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\r\n * @version 0.1 AS3 implementation\r\n */\r\n\r\nconst LZWEncoder = function() {\r\n  let exports = {};\r\n  let EOF = -1;\r\n  let imgW;\r\n  let imgH;\r\n  let pixAry;\r\n  let initCodeSize;\r\n  let remaining;\r\n  let curPixel;\r\n\r\n  // GIFCOMPR.C - GIF Image compression routines\r\n  // Lempel-Ziv compression based on 'compress'. GIF modifications by\r\n  // David Rowley (mgardi@watdcsu.waterloo.edu)\r\n  // General DEFINEs\r\n\r\n  let BITS = 12;\r\n  let HSIZE = 5003; // 80% occupancy\r\n\r\n  // GIF Image compression - modified 'compress'\r\n  // Based on: compress.c - File compression ala IEEE Computer, June 1984.\r\n  // By Authors: Spencer W. Thomas (decvax!harpo!utah-cs!utah-gr!thomas)\r\n  // Jim McKie (decvax!mcvax!jim)\r\n  // Steve Davies (decvax!vax135!petsd!peora!srd)\r\n  // Ken Turkowski (decvax!decwrl!turtlevax!ken)\r\n  // James A. Woods (decvax!ihnp4!ames!jaw)\r\n  // Joe Orost (decvax!vax135!petsd!joe)\r\n\r\n  let n_bits; // number of bits/code\r\n  let maxbits = BITS; // user settable max # bits/code\r\n  let maxcode; // maximum code, given n_bits\r\n  let maxmaxcode = 1 << BITS; // should NEVER generate this code\r\n  let htab = [];\r\n  let codetab = [];\r\n  let hsize = HSIZE; // for dynamic table sizing\r\n  let free_ent = 0; // first unused entry\r\n\r\n  // block compression parameters -- after all codes are used up,\r\n  // and compression rate changes, start over.\r\n\r\n  let clear_flg = false;\r\n\r\n  // Algorithm: use open addressing double hashing (no chaining) on the\r\n  // prefix code / next character combination. We do a variant of Knuth's\r\n  // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime\r\n  // secondary probe. Here, the modular division first probe is gives way\r\n  // to a faster exclusive-or manipulation. Also do block compression with\r\n  // an adaptive reset, whereby the code table is cleared when the compression\r\n  // ratio decreases, but after the table fills. The variable-length output\r\n  // codes are re-sized at this point, and a special CLEAR code is generated\r\n  // for the decompressor. Late addition: construct the table according to\r\n  // file size for noticeable speed improvement on small files. Please direct\r\n  // questions about this implementation to ames!jaw.\r\n\r\n  let g_init_bits;\r\n  let ClearCode;\r\n  let EOFCode;\r\n\r\n  // output\r\n  // Output the given code.\r\n  // Inputs:\r\n  // code: A n_bits-bit integer. If == -1, then EOF. This assumes\r\n  // that n_bits =< wordsize - 1.\r\n  // Outputs:\r\n  // Outputs code to the file.\r\n  // Assumptions:\r\n  // Chars are 8 bits long.\r\n  // Algorithm:\r\n  // Maintain a BITS character long buffer (so that 8 codes will\r\n  // fit in it exactly). Use the VAX insv instruction to insert each\r\n  // code in turn. When the buffer fills up empty it and start over.\r\n\r\n  let cur_accum = 0;\r\n  let cur_bits = 0;\r\n  let masks = [\r\n    0x0000,\r\n    0x0001,\r\n    0x0003,\r\n    0x0007,\r\n    0x000f,\r\n    0x001f,\r\n    0x003f,\r\n    0x007f,\r\n    0x00ff,\r\n    0x01ff,\r\n    0x03ff,\r\n    0x07ff,\r\n    0x0fff,\r\n    0x1fff,\r\n    0x3fff,\r\n    0x7fff,\r\n    0xffff\r\n  ];\r\n\r\n  // Number of characters so far in this 'packet'\r\n  let a_count;\r\n\r\n  // Define the storage for the packet accumulator\r\n  let accum = [];\r\n\r\n  let LZWEncoder = (exports.LZWEncoder = function LZWEncoder(width, height, pixels, color_depth) {\r\n    imgW = width;\r\n    imgH = height;\r\n    pixAry = pixels;\r\n    initCodeSize = Math.max(2, color_depth);\r\n  });\r\n\r\n  // Add a character to the end of the current packet, and if it is 254\r\n  // characters, flush the packet to disk.\r\n  let char_out = function char_out(c, outs) {\r\n    accum[a_count++] = c;\r\n    if (a_count >= 254) flush_char(outs);\r\n  };\r\n\r\n  // Clear out the hash table\r\n  // table clear for block compress\r\n\r\n  let cl_block = function cl_block(outs) {\r\n    cl_hash(hsize);\r\n    free_ent = ClearCode + 2;\r\n    clear_flg = true;\r\n    output(ClearCode, outs);\r\n  };\r\n\r\n  // reset code table\r\n  var cl_hash = function cl_hash(hsize) {\r\n    for (let i = 0; i < hsize; ++i) htab[i] = -1;\r\n  };\r\n\r\n  let compress = (exports.compress = function compress(init_bits, outs) {\r\n    let fcode;\r\n    let i; /* = 0 */\r\n    let c;\r\n    let ent;\r\n    let disp;\r\n    let hsize_reg;\r\n    let hshift;\r\n\r\n    // Set up the globals: g_init_bits - initial number of bits\r\n    g_init_bits = init_bits;\r\n\r\n    // Set up the necessary values\r\n    clear_flg = false;\r\n    n_bits = g_init_bits;\r\n    maxcode = MAXCODE(n_bits);\r\n\r\n    ClearCode = 1 << (init_bits - 1);\r\n    EOFCode = ClearCode + 1;\r\n    free_ent = ClearCode + 2;\r\n\r\n    a_count = 0; // clear packet\r\n\r\n    ent = nextPixel();\r\n\r\n    hshift = 0;\r\n    for (fcode = hsize; fcode < 65536; fcode *= 2) ++hshift;\r\n    hshift = 8 - hshift; // set hash code range bound\r\n\r\n    hsize_reg = hsize;\r\n    cl_hash(hsize_reg); // clear hash table\r\n\r\n    output(ClearCode, outs);\r\n\r\n    outer_loop: while ((c = nextPixel()) != EOF) {\r\n      fcode = (c << maxbits) + ent;\r\n      i = (c << hshift) ^ ent; // xor hashing\r\n\r\n      if (htab[i] == fcode) {\r\n        ent = codetab[i];\r\n        continue;\r\n      } else if (htab[i] >= 0) {\r\n        // non-empty slot\r\n\r\n        disp = hsize_reg - i; // secondary hash (after G. Knott)\r\n        if (i === 0) disp = 1;\r\n\r\n        do {\r\n          if ((i -= disp) < 0) i += hsize_reg;\r\n\r\n          if (htab[i] == fcode) {\r\n            ent = codetab[i];\r\n            continue outer_loop;\r\n          }\r\n        } while (htab[i] >= 0);\r\n      }\r\n\r\n      output(ent, outs);\r\n      ent = c;\r\n      if (free_ent < maxmaxcode) {\r\n        codetab[i] = free_ent++; // code -> hashtable\r\n        htab[i] = fcode;\r\n      } else cl_block(outs);\r\n    }\r\n\r\n    // Put out the final code.\r\n    output(ent, outs);\r\n    output(EOFCode, outs);\r\n  });\r\n\r\n  // ----------------------------------------------------------------------------\r\n  let encode = (exports.encode = function encode(os) {\r\n    os.writeByte(initCodeSize); // write \"initial code size\" byte\r\n    remaining = imgW * imgH; // reset navigation variables\r\n    curPixel = 0;\r\n    compress(initCodeSize + 1, os); // compress and write the pixel data\r\n    os.writeByte(0); // write block terminator\r\n  });\r\n\r\n  // Flush the packet to disk, and reset the accumulator\r\n  var flush_char = function flush_char(outs) {\r\n    if (a_count > 0) {\r\n      outs.writeByte(a_count);\r\n      outs.writeBytes(accum, 0, a_count);\r\n      a_count = 0;\r\n    }\r\n  };\r\n\r\n  var MAXCODE = function MAXCODE(n_bits) {\r\n    return (1 << n_bits) - 1;\r\n  };\r\n\r\n  // ----------------------------------------------------------------------------\r\n  // Return the next pixel from the image\r\n  // ----------------------------------------------------------------------------\r\n\r\n  var nextPixel = function nextPixel() {\r\n    if (remaining === 0) return EOF;\r\n    --remaining;\r\n    let pix = pixAry[curPixel++];\r\n    return pix & 0xff;\r\n  };\r\n\r\n  var output = function output(code, outs) {\r\n    cur_accum &= masks[cur_bits];\r\n\r\n    if (cur_bits > 0) cur_accum |= code << cur_bits;\r\n    else cur_accum = code;\r\n\r\n    cur_bits += n_bits;\r\n\r\n    while (cur_bits >= 8) {\r\n      char_out(cur_accum & 0xff, outs);\r\n      cur_accum >>= 8;\r\n      cur_bits -= 8;\r\n    }\r\n\r\n    // If the next entry is going to be too big for the code size,\r\n    // then increase it, if possible.\r\n\r\n    if (free_ent > maxcode || clear_flg) {\r\n      if (clear_flg) {\r\n        maxcode = MAXCODE((n_bits = g_init_bits));\r\n        clear_flg = false;\r\n      } else {\r\n        ++n_bits;\r\n        if (n_bits == maxbits) maxcode = maxmaxcode;\r\n        else maxcode = MAXCODE(n_bits);\r\n      }\r\n    }\r\n\r\n    if (code == EOFCode) {\r\n      // At EOF, write the rest of the buffer.\r\n      while (cur_bits > 0) {\r\n        char_out(cur_accum & 0xff, outs);\r\n        cur_accum >>= 8;\r\n        cur_bits -= 8;\r\n      }\r\n\r\n      flush_char(outs);\r\n    }\r\n  };\r\n\r\n  LZWEncoder.apply(this, arguments);\r\n  return exports;\r\n};\r\n\r\nexport { LZWEncoder };\r\n","/* eslint-disable consistent-return */\r\n/* eslint-disable no-console */\r\n/* eslint-disable func-names */\r\n/* eslint-disable import/prefer-default-export */\r\n/* eslint-disable no-useless-concat */\r\n/* eslint-disable no-bitwise */\r\n/* eslint-disable no-return-assign */\r\n/* eslint-disable no-nested-ternary */\r\n/* eslint-disable no-param-reassign */\r\n/* eslint-disable no-empty */\r\n/* eslint-disable eqeqeq */\r\n/* eslint-disable no-use-before-define */\r\n/* eslint-disable camelcase */\r\n/* eslint-disable no-multi-assign */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable block-scoped-var */\r\n/* eslint-disable no-shadow */\r\n/* eslint-disable no-plusplus */\r\n/* eslint-disable no-var */\r\n/* eslint-disable vars-on-top */\r\n/**\r\n * This class lets you encode animated GIF files\r\n * Base class :  http://www.java2s.com/Code/Java/2D-Graphics-GUI/AnimatedGifEncoder.htm\r\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\r\n * @author Thibault Imbert (AS3 version - bytearray.org)\r\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\r\n * @version 0.1 AS3 implementation\r\n */\r\nimport $ from 'jquery';\r\nimport { NeuQuant } from './NeuQuant';\r\nimport { LZWEncoder } from './LZWEncoder';\r\n\r\nconst GIFEncoder = function() {\r\n  for (var i = 0, chr = {}; i < 256; i++) chr[i] = String.fromCharCode(i);\r\n\r\n  function ByteArray() {\r\n    this.bin = [];\r\n  }\r\n\r\n  ByteArray.prototype.getData = function() {\r\n    for (var v = '', l = this.bin.length, i = 0; i < l; i++) v += chr[this.bin[i]];\r\n    return v;\r\n  };\r\n\r\n  ByteArray.prototype.writeByte = function(val) {\r\n    this.bin.push(val);\r\n  };\r\n\r\n  ByteArray.prototype.writeUTFBytes = function(string) {\r\n    for (let l = string.length, i = 0; i < l; i++) this.writeByte(string.charCodeAt(i));\r\n  };\r\n\r\n  ByteArray.prototype.writeBytes = function(array, offset, length) {\r\n    for (let l = length || array.length, i = offset || 0; i < l; i++) this.writeByte(array[i]);\r\n  };\r\n\r\n  const exports = {};\r\n  let width; // image size\r\n  let height;\r\n  let transparent = null; // transparent color if given\r\n  let transIndex; // transparent index in color table\r\n  let repeat = -1; // no repeat\r\n  let delay = 0; // frame delay (hundredths)\r\n  let started = false; // ready to output frames\r\n  let out;\r\n  let image; // current frame\r\n  let pixels; // BGR byte array from frame\r\n  let indexedPixels; // converted frame indexed to palette\r\n  let colorDepth; // number of bit planes\r\n  let colorTab; // RGB palette\r\n  const usedEntry = []; // active palette entries\r\n  let palSize = 7; // color table size (bits-1)\r\n  let dispose = -1; // disposal code (-1 = use default)\r\n  let closeStream = false; // close stream when finished\r\n  let firstFrame = true;\r\n  let sizeSet = false; // if false, get size from first frame\r\n  let sample = 10; // default sample interval for quantizer\r\n  let comment = 'Generated by jsgif (https://github.com/antimatter15/jsgif/)'; // default comment for generated gif\r\n\r\n  /**\r\n   * Sets the delay time between each frame, or changes it for subsequent frames\r\n   * (applies to last frame added)\r\n   * int delay time in milliseconds\r\n   * @param ms\r\n   */\r\n\r\n  const setDelay = (exports.setDelay = function setDelay(ms) {\r\n    delay = Math.round(ms / 10);\r\n  });\r\n\r\n  /**\r\n   * Sets the GIF frame disposal code for the last added frame and any\r\n   *\r\n   * subsequent frames. Default is 0 if no transparent color has been set,\r\n   * otherwise 2.\r\n   * @param code\r\n   * int disposal code.\r\n   */\r\n\r\n  const setDispose = (exports.setDispose = function setDispose(code) {\r\n    if (code >= 0) dispose = code;\r\n  });\r\n\r\n  /**\r\n   * Sets the number of times the set of GIF frames should be played. Default is\r\n   * 1; 0 means play indefinitely. Must be invoked before the first image is\r\n   * added.\r\n   *\r\n   * @param iter\r\n   * int number of iterations.\r\n   * @return\r\n   */\r\n\r\n  const setRepeat = (exports.setRepeat = function setRepeat(iter) {\r\n    if (iter >= 0) repeat = iter;\r\n  });\r\n\r\n  /**\r\n   * Sets the transparent color for the last added frame and any subsequent\r\n   * frames. Since all colors are subject to modification in the quantization\r\n   * process, the color in the final palette for each frame closest to the given\r\n   * color becomes the transparent color for that frame. May be set to null to\r\n   * indicate no transparent color.\r\n   * @param\r\n   * Color to be treated as transparent on display.\r\n   */\r\n\r\n  const setTransparent = (exports.setTransparent = function setTransparent(c) {\r\n    transparent = c;\r\n  });\r\n\r\n  /**\r\n   * Sets the comment for the block comment\r\n   * @param\r\n   * string to be insterted as comment\r\n   */\r\n\r\n  const setComment = (exports.setComment = function setComment(c) {\r\n    comment = c;\r\n  });\r\n\r\n  /**\r\n   * The addFrame method takes an incoming BitmapData object to create each frames\r\n   * @param\r\n   * BitmapData object to be treated as a GIF's frame\r\n   */\r\n\r\n  const addFrame = (exports.addFrame = function addFrame(im, is_imageData) {\r\n    if (im === null || !started || out === null) {\r\n      throw new Error('Please call start method before calling addFrame');\r\n    }\r\n\r\n    let ok = true;\r\n\r\n    try {\r\n      if (!is_imageData) {\r\n        image = im.getImageData(0, 0, im.canvas.width, im.canvas.height).data;\r\n        if (!sizeSet) setSize(im.canvas.width, im.canvas.height);\r\n      } else if (im instanceof ImageData) {\r\n        image = im.data;\r\n        if (width != im.width || height != im.height) {\r\n          setSize(im.width, im.height);\r\n        } else {\r\n        }\r\n      } else if (im instanceof Uint8ClampedArray) {\r\n        if (im.length == width * height * 4) {\r\n          image = im;\r\n        } else {\r\n          console.log('Please set the correct size: ImageData length mismatch');\r\n          ok = false;\r\n        }\r\n      } else {\r\n        console.log('Please provide correct input');\r\n        ok = false;\r\n      }\r\n      getImagePixels(); // convert to correct format if necessary\r\n      analyzePixels(); // build color table & map pixels\r\n\r\n      if (firstFrame) {\r\n        writeLSD(); // logical screen descriptior\r\n        writePalette(); // global color table\r\n        if (repeat >= 0) {\r\n          // use NS app extension to indicate reps\r\n          writeNetscapeExt();\r\n        }\r\n      }\r\n\r\n      writeGraphicCtrlExt(); // write graphic control extension\r\n      if (comment !== '') {\r\n        writeCommentExt(); // write comment extension\r\n      }\r\n      writeImageDesc(); // image descriptor\r\n      if (!firstFrame) writePalette(); // local color table\r\n      writePixels(); // encode and write pixel data\r\n      firstFrame = false;\r\n    } catch (e) {\r\n      ok = false;\r\n    }\r\n\r\n    return ok;\r\n  });\r\n\r\n  /**\r\n   * @description: Downloads the encoded gif with the given name\r\n   * No need of any conversion from the stream data (out) to base64\r\n   * Solves the issue of large file sizes when there are more frames\r\n   * and does not involve in creation of any temporary data in the process\r\n   * so no wastage of memory, and speeds up the process of downloading\r\n   * to just calling this function.\r\n   * @parameter {String} filename filename used for downloading the gif\r\n   */\r\n\r\n  const download = (exports.download = function download(filename) {\r\n    if (out === null || closeStream == false) {\r\n      console.log(\r\n        'Please call start method and add frames and call finish method before calling download'\r\n      );\r\n    } else {\r\n      filename =\r\n        filename !== undefined ? (filename.endsWith('.gif') ? filename : filename) : 'download.gif';\r\n      const templink = document.createElement('a');\r\n      templink.download = filename;\r\n      templink.href = URL.createObjectURL(\r\n        new Blob([new Uint8Array(out.bin)], { type: 'image/gif' })\r\n      );\r\n      templink.click();\r\n    }\r\n  });\r\n\r\n  const upload = (exports.upload = function upload(filename) {\r\n    if (out === null || closeStream == false) {\r\n      console.log(\r\n        'Please call start method and add frames and call finish method before calling download'\r\n      );\r\n    } else {\r\n      filename =\r\n        filename !== undefined ? (filename.endsWith('.gif') ? filename : filename) : 'download.gif';\r\n      const templink = document.createElement('a');\r\n      templink.target = '_blank';\r\n      templink.href = URL.createObjectURL(\r\n        new Blob([new Uint8Array(out.bin)], { type: 'image/gif' })\r\n      );\r\n      const link = $(templink)\r\n        .attr('href')\r\n        .replace('blob:', '');\r\n      return new Uint8Array(out.bin);\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Adds final trailer to the GIF stream, if you don't call the finish method\r\n   * the GIF stream will not be valid.\r\n   */\r\n\r\n  const finish = (exports.finish = function finish() {\r\n    if (!started) return false;\r\n\r\n    let ok = true;\r\n    started = false;\r\n\r\n    try {\r\n      out.writeByte(0x3b); // gif trailer\r\n      closeStream = true;\r\n    } catch (e) {\r\n      ok = false;\r\n    }\r\n\r\n    return ok;\r\n  });\r\n\r\n  /**\r\n   * Resets some members so that a new stream can be started.\r\n   * This method is actually called by the start method\r\n   */\r\n\r\n  const reset = function reset() {\r\n    // reset for subsequent use\r\n    transIndex = 0;\r\n    image = null;\r\n    pixels = null;\r\n    indexedPixels = null;\r\n    colorTab = null;\r\n    closeStream = false;\r\n    firstFrame = true;\r\n  };\r\n\r\n  /**\r\n   * * Sets frame rate in frames per second. Equivalent to\r\n   * <code>setDelay(1000/fps)</code>.\r\n   * @param fps\r\n   * float frame rate (frames per second)\r\n   */\r\n\r\n  const setFrameRate = (exports.setFrameRate = function setFrameRate(fps) {\r\n    if (fps != 0xf) delay = Math.round(100 / fps);\r\n  });\r\n\r\n  /**\r\n   * Sets quality of color quantization (conversion of images to the maximum 256\r\n   * colors allowed by the GIF specification). Lower values (minimum = 1)\r\n   * produce better colors, but slow processing significantly. 10 is the\r\n   * default, and produces good color mapping at reasonable speeds. Values\r\n   * greater than 20 do not yield significant improvements in speed.\r\n   * @param quality\r\n   * int greater than 0.\r\n   * @return\r\n   */\r\n\r\n  const setQuality = (exports.setQuality = function setQuality(quality) {\r\n    if (quality < 1) quality = 1;\r\n    sample = quality;\r\n  });\r\n\r\n  /**\r\n   * Sets the GIF frame size. The default size is the size of the first frame\r\n   * added if this method is not invoked.\r\n   * @param w\r\n   * int frame width.\r\n   * @param h\r\n   * int frame width.\r\n   */\r\n\r\n  var setSize = (exports.setSize = function setSize(w, h) {\r\n    if (started && !firstFrame) return;\r\n    width = w;\r\n    height = h;\r\n    if (width < 1) width = 320;\r\n    if (height < 1) height = 240;\r\n    sizeSet = true;\r\n  });\r\n\r\n  /**\r\n   * Initiates GIF file creation on the given stream.\r\n   * @param os\r\n   * OutputStream on which GIF images are written.\r\n   * @return false if initial write failed.\r\n   */\r\n\r\n  const start = (exports.start = function start() {\r\n    reset();\r\n    let ok = true;\r\n    closeStream = false;\r\n    out = new ByteArray();\r\n    try {\r\n      out.writeUTFBytes('GIF89a'); // header\r\n    } catch (e) {\r\n      ok = false;\r\n    }\r\n\r\n    return (started = ok);\r\n  });\r\n\r\n  const cont = (exports.cont = function cont() {\r\n    reset();\r\n    const ok = true;\r\n    closeStream = false;\r\n    out = new ByteArray();\r\n\r\n    return (started = ok);\r\n  });\r\n\r\n  /**\r\n   * Analyzes image colors and creates color map.\r\n   */\r\n\r\n  var analyzePixels = function analyzePixels() {\r\n    const len = pixels.length;\r\n    const nPix = len / 3;\r\n    indexedPixels = [];\r\n    const nq = new NeuQuant(pixels, len, sample);\r\n\r\n    // initialize quantizer\r\n    colorTab = nq.process(); // create reduced palette\r\n\r\n    // map image pixels to new palette\r\n    let k = 0;\r\n    for (let j = 0; j < nPix; j++) {\r\n      const index = nq.map(pixels[k++] & 0xff, pixels[k++] & 0xff, pixels[k++] & 0xff);\r\n      usedEntry[index] = true;\r\n      indexedPixels[j] = index;\r\n    }\r\n\r\n    pixels = null;\r\n    colorDepth = 8;\r\n    palSize = 7;\r\n\r\n    // get closest match to transparent color if specified\r\n    if (transparent !== null) {\r\n      transIndex = findClosest(transparent);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Returns index of palette color closest to c\r\n   */\r\n\r\n  var findClosest = function findClosest(c) {\r\n    if (colorTab === null) return -1;\r\n    const r = (c & 0xff0000) >> 16;\r\n    const g = (c & 0x00ff00) >> 8;\r\n    const b = c & 0x0000ff;\r\n    let minpos = 0;\r\n    let dmin = 256 * 256 * 256;\r\n    const len = colorTab.length;\r\n\r\n    for (let i = 0; i < len; ) {\r\n      const dr = r - (colorTab[i++] & 0xff);\r\n      const dg = g - (colorTab[i++] & 0xff);\r\n      const db = b - (colorTab[i] & 0xff);\r\n      const d = dr * dr + dg * dg + db * db;\r\n      const index = i / 3;\r\n      if (usedEntry[index] && d < dmin) {\r\n        dmin = d;\r\n        minpos = index;\r\n      }\r\n      i++;\r\n    }\r\n    return minpos;\r\n  };\r\n\r\n  /**\r\n   * Extracts image pixels into byte array \"pixels\r\n   */\r\n\r\n  var getImagePixels = function getImagePixels() {\r\n    const w = width;\r\n    const h = height;\r\n    pixels = [];\r\n    const data = image;\r\n    let count = 0;\r\n\r\n    for (let i = 0; i < h; i++) {\r\n      for (let j = 0; j < w; j++) {\r\n        const b = i * w * 4 + j * 4;\r\n        pixels[count++] = data[b];\r\n        pixels[count++] = data[b + 1];\r\n        pixels[count++] = data[b + 2];\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Writes Graphic Control Extension\r\n   */\r\n\r\n  var writeGraphicCtrlExt = function writeGraphicCtrlExt() {\r\n    out.writeByte(0x21); // extension introducer\r\n    out.writeByte(0xf9); // GCE label\r\n    out.writeByte(4); // data block size\r\n    let transp;\r\n    let disp;\r\n    if (transparent === null) {\r\n      transp = 0;\r\n      disp = 0; // dispose = no action\r\n    } else {\r\n      transp = 1;\r\n      disp = 2; // force clear if using transparent color\r\n    }\r\n    if (dispose >= 0) {\r\n      disp = dispose & 7; // user override\r\n    }\r\n    disp <<= 2;\r\n    // packed fields\r\n    out.writeByte(\r\n      0 | // 1:3 reserved\r\n      disp | // 4:6 disposal\r\n      0 | // 7 user input - 0 = none\r\n        transp\r\n    ); // 8 transparency flag\r\n\r\n    WriteShort(delay); // delay x 1/100 sec\r\n    out.writeByte(transIndex); // transparent color index\r\n    out.writeByte(0); // block terminator\r\n  };\r\n\r\n  /**\r\n   * Writes Comment Extention\r\n   */\r\n\r\n  var writeCommentExt = function writeCommentExt() {\r\n    out.writeByte(0x21); // extension introducer\r\n    out.writeByte(0xfe); // comment label\r\n    out.writeByte(comment.length); // Block Size (s)\r\n    out.writeUTFBytes(comment);\r\n    out.writeByte(0); // block terminator\r\n  };\r\n\r\n  /**\r\n   * Writes Image Descriptor\r\n   */\r\n\r\n  var writeImageDesc = function writeImageDesc() {\r\n    out.writeByte(0x2c); // image separator\r\n    WriteShort(0); // image position x,y = 0,0\r\n    WriteShort(0);\r\n    WriteShort(width); // image size\r\n    WriteShort(height);\r\n\r\n    // packed fields\r\n    if (firstFrame) {\r\n      // no LCT - GCT is used for first (or only) frame\r\n      out.writeByte(0);\r\n    } else {\r\n      // specify normal LCT\r\n      out.writeByte(\r\n        0x80 | // 1 local color table 1=yes\r\n        0 | // 2 interlace - 0=no\r\n        0 | // 3 sorted - 0=no\r\n        0 | // 4-5 reserved\r\n          palSize\r\n      ); // 6-8 size of color table\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Writes Logical Screen Descriptor\r\n   */\r\n\r\n  var writeLSD = function writeLSD() {\r\n    // logical screen size\r\n    WriteShort(width);\r\n    WriteShort(height);\r\n    // packed fields\r\n    out.writeByte(\r\n      0x80 | // 1 : global color table flag = 1 (gct used)\r\n      0x70 | // 2-4 : color resolution = 7\r\n      0x00 | // 5 : gct sort flag = 0\r\n        palSize\r\n    ); // 6-8 : gct size\r\n\r\n    out.writeByte(0); // background color index\r\n    out.writeByte(0); // pixel aspect ratio - assume 1:1\r\n  };\r\n\r\n  /**\r\n   * Writes Netscape application extension to define repeat count.\r\n   */\r\n\r\n  var writeNetscapeExt = function writeNetscapeExt() {\r\n    out.writeByte(0x21); // extension introducer\r\n    out.writeByte(0xff); // app extension label\r\n    out.writeByte(11); // block size\r\n    out.writeUTFBytes('NETSCAPE' + '2.0'); // app id + auth code\r\n    out.writeByte(3); // sub-block size\r\n    out.writeByte(1); // loop sub-block id\r\n    WriteShort(repeat); // loop count (extra iterations, 0=repeat forever)\r\n    out.writeByte(0); // block terminator\r\n  };\r\n\r\n  /**\r\n   * Writes color table\r\n   */\r\n\r\n  var writePalette = function writePalette() {\r\n    out.writeBytes(colorTab);\r\n    const n = 3 * 256 - colorTab.length;\r\n    for (let i = 0; i < n; i++) out.writeByte(0);\r\n  };\r\n\r\n  var WriteShort = function WriteShort(pValue) {\r\n    out.writeByte(pValue & 0xff);\r\n    out.writeByte((pValue >> 8) & 0xff);\r\n  };\r\n\r\n  /**\r\n   * Encodes and writes pixel data\r\n   */\r\n\r\n  var writePixels = function writePixels() {\r\n    const myencoder = new LZWEncoder(width, height, indexedPixels, colorDepth);\r\n    myencoder.encode(out);\r\n  };\r\n\r\n  /**\r\n   * Retrieves the GIF stream\r\n   */\r\n\r\n  const stream = (exports.stream = function stream() {\r\n    return out;\r\n  });\r\n\r\n  const setProperties = (exports.setProperties = function setProperties(has_start, is_first) {\r\n    started = has_start;\r\n    firstFrame = is_first;\r\n  });\r\n\r\n  return exports;\r\n};\r\n\r\nexport { GIFEncoder };\r\n","import $ from 'jquery';\r\nimport { GIFEncoder } from 'services/jsgif-master/GIFEncoder';\r\nimport encode64 from 'services/jsgif-master/b64';\r\n\r\nexport function debugBase64(base64URL) {\r\n  const win = window.open();\r\n  $(win.document.body).css({\r\n    display: 'flex',\r\n    width: '100vw',\r\n    heigh: '100vh',\r\n    'justify-content': 'center',\r\n    'align-items': 'center',\r\n    background: 'whitesmoke'\r\n  });\r\n  $('<img></img>', {\r\n    src: base64URL\r\n  }).appendTo(win.document.body);\r\n}\r\n\r\nexport function debugBase64WithText(array, base64URL) {\r\n  const win = window.open();\r\n  $(win.document.body).css({\r\n    display: 'flex',\r\n    'flex-direction': 'column',\r\n    width: '100vw',\r\n    height: '100vh',\r\n    'align-items': 'center',\r\n    background: 'whitesmoke',\r\n    overflow: 'hidden'\r\n  });\r\n  const ancor = $('<div></div>', {\r\n    id: 'ancor',\r\n    width: '100%',\r\n    height: '50%'\r\n  })\r\n    .appendTo(win.document.body)\r\n    .css({\r\n      width: '80%',\r\n      height: '50%',\r\n      background: 'white',\r\n      'overflow-y': 'scroll',\r\n      'margin-bottom': '25px',\r\n      border: '1px solid black'\r\n    });\r\n  for (let i = 0; i < array.length; i += 1) {\r\n    $('<img></img>', {\r\n      src: array[i],\r\n      width: '25%'\r\n    })\r\n      .appendTo(ancor)\r\n      .css({ border: '1px solid black' });\r\n  }\r\n  $('<div></div>', {\r\n    text: base64URL\r\n  })\r\n    .appendTo(win.document.body)\r\n    .css({\r\n      display: 'flex',\r\n      'flex-wrap': 'wrap',\r\n      width: '80%',\r\n      height: '40%',\r\n      'overflow-y': 'scroll',\r\n      'word-break': 'break-word'\r\n    });\r\n}\r\n\r\nexport function saveAsGif(upload, fps, filename, frames) {\r\n  const delay = 1000 / fps;\r\n  const encoder = new GIFEncoder();\r\n  encoder.setRepeat(0);\r\n  encoder.setDelay(delay);\r\n  encoder.start();\r\n\r\n  frames.forEach(item => {\r\n    const curCanv = document.querySelector(`#canvas${frames[0].id}`);\r\n    const originalContext = $(`#canvas${item.id}`)\r\n      .get(0)\r\n      .getContext('2d');\r\n    const imageData = originalContext.getImageData(\r\n      0,\r\n      0,\r\n      $(`#canvas${item.id}`).width(),\r\n      $(`#canvas${item.id}`).width()\r\n    );\r\n    let len = imageData.data.length;\r\n    const newArr = [];\r\n    let map1;\r\n    let map2;\r\n    let count = 0;\r\n    while (len > 0) {\r\n      map1 = imageData.data.slice(count, count + 4);\r\n      map2 = map1;\r\n      if (map2.every(item => item === 0)) {\r\n        map2 = map2.map(() => 255);\r\n      }\r\n      newArr.push(...map2);\r\n      count += 4;\r\n      len -= 4;\r\n    }\r\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\r\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\r\n    encoder.setSize(curCanv.height, curCanv.width);\r\n    encoder.addFrame(newImage, true);\r\n  });\r\n  encoder.finish();\r\n  filename = filename || 'New Piskel-clone';\r\n  if (upload) {\r\n    return encoder.upload(`${filename}.gif`);\r\n  }\r\n  return encoder.download(`${filename}.gif`);\r\n}\r\n\r\nexport function uploadToUrl(fps, frames) {\r\n  const delay = 1000 / fps;\r\n  const encoder = new GIFEncoder();\r\n  encoder.setRepeat(0);\r\n  encoder.setDelay(delay);\r\n  encoder.start();\r\n\r\n  frames.forEach(item => {\r\n    const curCanv = document.querySelector(`#canvas${frames[0].id}`);\r\n    const originalContext = $(`#canvas${item.id}`)\r\n      .get(0)\r\n      .getContext('2d');\r\n    const imageData = originalContext.getImageData(\r\n      0,\r\n      0,\r\n      $(`#canvas${item.id}`).width(),\r\n      $(`#canvas${item.id}`).width()\r\n    );\r\n    let len = imageData.data.length;\r\n    const newArr = [];\r\n    let map1;\r\n    let map2;\r\n    let count = 0;\r\n    while (len > 0) {\r\n      map1 = imageData.data.slice(count, count + 4);\r\n      map2 = map1;\r\n      if (map2.every(item => item === 0)) {\r\n        map2 = map2.map(() => 255);\r\n      }\r\n      newArr.push(...map2);\r\n      count += 4;\r\n      len -= 4;\r\n    }\r\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\r\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\r\n    encoder.setSize(curCanv.height, curCanv.width);\r\n    encoder.addFrame(newImage, true);\r\n  });\r\n  encoder.finish();\r\n  const binaryGif = encoder.stream().getData();\r\n  const dataUrl = `data:image/gif;base64,${encode64(binaryGif)}`;\r\n  return dataUrl;\r\n}\r\n\r\nexport function downloadPng(currentCanvas, fps, filename) {\r\n  const delay = 1000 / fps;\r\n  const i = currentCanvas;\r\n  const encoder = new GIFEncoder();\r\n  encoder.setRepeat(0);\r\n  encoder.setDelay(delay);\r\n  encoder.start();\r\n  const width = $(`#canvas${i}`).width();\r\n  const originalContext = $(`#canvas${i}`)\r\n    .get(0)\r\n    .getContext('2d');\r\n  const imageData = originalContext.getImageData(0, 0, width, width);\r\n  let len = imageData.data.length;\r\n  const newArr = [];\r\n  let map1;\r\n  let map2;\r\n  let count = 0;\r\n  while (len > 0) {\r\n    map1 = imageData.data.slice(count, count + 4);\r\n    map2 = map1;\r\n    if (map2.every(item => item === 0)) {\r\n      map2 = map2.map(() => 255);\r\n    }\r\n    newArr.push(...map2);\r\n    count += 4;\r\n    len -= 4;\r\n  }\r\n  const fixedNewArray = Uint8ClampedArray.from(newArr);\r\n  const newImage = new ImageData(fixedNewArray, width, width);\r\n  encoder.setSize(width, width);\r\n  encoder.addFrame(newImage, true);\r\n  encoder.finish();\r\n  filename = filename || 'New Piskel-clone';\r\n  encoder.download(`${filename}.png`);\r\n}\r\n","/* eslint-disable no-multi-assign */\r\n/* eslint-disable no-restricted-globals */\r\n/* eslint-disable no-bitwise */\r\n/* eslint-disable no-plusplus */\r\nexport default function encode64(input) {\r\n  let output = '';\r\n  let i = 0;\r\n  const l = input.length;\r\n  const key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n  let chr1;\r\n  let chr2;\r\n  let chr3;\r\n  let enc1;\r\n  let enc2;\r\n  let enc3;\r\n  let enc4;\r\n  while (i < l) {\r\n    chr1 = input.charCodeAt(i++);\r\n    chr2 = input.charCodeAt(i++);\r\n    chr3 = input.charCodeAt(i++);\r\n    enc1 = chr1 >> 2;\r\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n    enc4 = chr3 & 63;\r\n    if (isNaN(chr2)) enc3 = enc4 = 64;\r\n    else if (isNaN(chr3)) enc4 = 64;\r\n    output = output + key.charAt(enc1) + key.charAt(enc2) + key.charAt(enc3) + key.charAt(enc4);\r\n  }\r\n  return output;\r\n}\r\n","/* eslint-disable no-restricted-syntax */\r\n/* eslint-disable guard-for-in */\r\nimport { writeUserData } from 'components/functions/requestToDB';\r\nimport { uploadToUrl } from 'components/functions/menuFunctions/fromCanvasToFile';\r\nimport { getDate } from 'components/functions/random';\r\nimport store from 'store/store';\r\n\r\nexport function makeObjectToSave(newTitle, newDescription, fps, frames) {\r\n  const dataUrl = uploadToUrl(fps, frames);\r\n  const date = getDate().split('  ');\r\n  const project = {\r\n    gif: dataUrl,\r\n    frames,\r\n    title: newTitle || 'New Piskel-clone',\r\n    description: newDescription,\r\n    date: date[0],\r\n    time: date[1],\r\n    fps: fps\r\n  };\r\n  store.dispatch({ type: 'project', value: project });\r\n  return project;\r\n}\r\n\r\nexport function saveLocally(storage, projectID, newTitle, newDescription, fps, frames) {\r\n  const currentProject = makeObjectToSave(newTitle, newDescription, fps, frames);\r\n  // restrict saving piskels locally more than 20\r\n  let totalSaves;\r\n  if (storage) {\r\n    if (Object.keys(storage).length < 20) {\r\n      totalSaves = true;\r\n    } else if (\r\n      Object.entries(storage).some(item => item[0] === projectID)\r\n    ) {\r\n      totalSaves = true;\r\n    } else {\r\n      totalSaves = false;\r\n    }\r\n  } else {\r\n    totalSaves = true;\r\n  }\r\n  // update local projects\r\n  let newStorage = storage;\r\n  if (newStorage) {\r\n    if (Object.keys(newStorage).length === 0) {\r\n      newStorage[projectID] = currentProject;\r\n    } else {\r\n      for (const project in newStorage) {\r\n        if (project === projectID) {\r\n          newStorage[project] = currentProject;\r\n        } else {\r\n          newStorage[projectID] = currentProject;\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    newStorage = {};\r\n    newStorage[projectID] = currentProject;\r\n  }\r\n  return [totalSaves, newStorage];\r\n}\r\n\r\nexport function saveToGalery(storage, projectID, newTitle, newDescription, fps, frames, userID, allProjects) {\r\n  const saves = saveLocally(storage, projectID, newTitle, newDescription, fps, frames)\r\n  let updatedAllProjects = allProjects;\r\n  if (updatedAllProjects) {\r\n    if (Object.keys(updatedAllProjects).length === 0) {\r\n      updatedAllProjects[userID] = saves[1];\r\n    } else {\r\n      for (const user in updatedAllProjects) {\r\n        if (user === userID) {\r\n          updatedAllProjects[user] = saves[1];\r\n        } else {\r\n          updatedAllProjects[userID] = saves[1];\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    updatedAllProjects = {};\r\n    updatedAllProjects[userID] = saves[1];\r\n  }\r\n  // send user projects to firebase Realtime Database\r\n  const objForDB = Object.entries(updatedAllProjects[userID]);\r\n  for (let i = 0; i < objForDB.length; i += 1) {\r\n    const projectName = objForDB[i][0];\r\n    const projectItems = objForDB[i][1];\r\n    if (projectName === projectID) {\r\n      writeUserData(\r\n        userID,\r\n        projectName,\r\n        projectItems.frames,\r\n        projectItems.gif,\r\n        projectItems.date,\r\n        projectItems.time,\r\n        projectItems.title,\r\n        projectItems.description,\r\n        projectItems.fps\r\n      );\r\n    }\r\n  }\r\n  return [saves[0], updatedAllProjects];\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/save/save.css';\r\nimport store from 'store/store';\r\nimport { saveLocally, saveToGalery } from 'components/functions/menuFunctions/saveProject';\r\n\r\nexport default class SaveOptions extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      isFull: false,\r\n      isSaved: false,\r\n      newTitle: false,\r\n      newDescription: false\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n    this.setState(null);\r\n  }\r\n\r\n  saveLocallyHandler() {\r\n    const storage = this.props.state.localProjects;\r\n    const localSaves = saveLocally(\r\n      storage,\r\n      this.props.state.projectID,\r\n      this.state.newTitle || this.props.state.project.title,\r\n      this.state.newDescription || this.props.state.project.description,\r\n      this.props.state.project.fps,\r\n      this.props.state.framesArray\r\n    );\r\n    store.dispatch({ type: 'localProjects', value: localSaves[1] });\r\n    if (localSaves[0]) {\r\n      this.setState({ isSaved: true });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isSaved: false });\r\n        }\r\n      }, 5000);\r\n    } else {\r\n      this.setState({ isFull: 'local' });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isFull: false });\r\n        }\r\n      }, 5000);\r\n      return;\r\n    }\r\n  }\r\n\r\n  saveToGaleryHandler() {\r\n    if (!this.props.state.userData.isAuthed) {\r\n      $('#signOuted').click();\r\n      return;\r\n    }\r\n    const storage = this.props.state.allProjects[this.props.state.userData.info.id];\r\n    const allProjects = this.props.state.allProjects;\r\n    const updatedAllProjects = saveToGalery(\r\n      storage,\r\n      this.props.state.projectID,\r\n      this.state.newTitle || this.props.state.project.title,\r\n      this.state.newDescription || this.props.state.project.description,\r\n      this.props.state.project.fps,\r\n      this.props.state.framesArray,\r\n      this.props.state.userData.info.id,\r\n      allProjects\r\n    )\r\n    store.dispatch({ type: 'allProjects', value: updatedAllProjects[1] });\r\n    if (updatedAllProjects[0]) {\r\n      this.setState({ isSaved: true });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isSaved: false });\r\n        }\r\n      }, 5000);\r\n    } else {\r\n      this.setState({ isFull: 'personal' });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isFull: false });\r\n        }\r\n      }, 5000);\r\n      return;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`save-settings-block ${\r\n          this.props.active === 'save-settings' ? 'flexed' : 'hidden'\r\n          }`}\r\n      >\r\n        <div className=\"sprite-info-block\">\r\n          <span className=\"sprite-info bold\">Sprite information</span>\r\n          <span className=\"label-title\">Title:</span>\r\n          <input\r\n            className=\"title-input\"\r\n            id=\"title-input\"\r\n            defaultValue={this.props.state.project.title}\r\n            onChange={e => this.setState({ newTitle: $(e.target).val() })}\r\n          />\r\n          <span className=\"label-description\">Description:</span>\r\n          <textarea\r\n            rows=\"1\"\r\n            cols=\"6\"\r\n            className=\"description-input\"\r\n            id=\"description-input\"\r\n            defaultValue={this.props.state.project.description}\r\n            onChange={e => this.setState({ newDescription: $(e.target).val() })}\r\n          />\r\n        </div>\r\n        <div className=\"save-online-block\">\r\n          <span className=\"save-online bold\">Save online</span>\r\n          <button\r\n            id=\"save-locally-button\"\r\n            className=\"save-online-button\"\r\n            type=\"button\"\r\n            onClick={() => this.saveLocallyHandler()}\r\n          >\r\n            Save locally\r\n          </button>\r\n          <p className=\"save-online-info\">\r\n            Your piskel will be saved and available only from this browser\r\n          </p>\r\n          <button\r\n            id=\"save-gallery-button\"\r\n            className={`save-online-button ${this.mounted && this.props.state.userData.isAuthed ? '' : 'hidden'}`}\r\n            type=\"button\"\r\n            onClick={() => this.saveToGaleryHandler()}\r\n          >\r\n            Save to your gallery\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              $('.abcRioButton.abcRioButtonLightBlue').click();\r\n            }}\r\n            className={`save-online-button ${this.mounted && this.props.state.userData.isAuthed ? 'hidden' : ''}`}\r\n          >\r\n            Sign in to save to your gallery\r\n          </button>\r\n          <p className=\"save-online-info\">Your piskel will be stored online in your gallery</p>\r\n          <p\r\n            id=\"error\"\r\n            className={`${this.mounted && this.state.isFull ? 'storage-warning error' : 'hidden'}`}\r\n          >\r\n            {`Your ${this.state.isFull} storage is full, please delete old piskels`}\r\n          </p>\r\n          <p\r\n            id=\"success\"\r\n            className={`${\r\n              this.mounted && this.state.isSaved ? 'storage-warning success' : 'hidden'\r\n              }`}\r\n          >\r\n            Your animation successfully saved!\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSaveOptions.propTypes = {\r\n  active: PropTypes.string.isRequired,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","/* eslint-disable import/prefer-default-export */\r\n/* eslint-disable no-multi-assign */\r\n/* eslint-disable func-names */\r\n/* eslint-disable no-param-reassign */\r\n/* eslint-disable eqeqeq */\r\n/* eslint-disable no-unused-vars */\r\n/* eslint-disable no-console */\r\n/* eslint-disable no-underscore-dangle */\r\n// upload.js, from https://github.com/googledrive/cors-upload-sample\r\n// Contributors Steve Bazyl, Mike Procopio, Jeffrey Posnick, Renaud Sauvain\r\n// License: Apache 2.0 http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Implements Resumable Upload for Google Drive as described by\r\n// https://developers.google.com/drive/v3/web/resumable-upload\r\n//\r\n// Modified by Paul Brewer, Economic and Financial Technology Consulting LLC\r\n// Nov. 1 2017\r\n//  1. use Google Drive API V3 instead of V2\r\n//  2. wrap code in a \"use strict\" IIFE, only exposing MediaUploader\r\n//  3. explicitly export MediaUploader as window.UploaderForGoogleDrive\r\n//  4. if options.token undefined, get access token from existing window.gapi instance, if any\r\n//\r\n// Nov. 7, 2017\r\n//  5. Change file metadata \"title\" to \"name\" in line with Drive API v2-->v3 migration advisory\r\n//  6. export promise wrapper as window.pUploaderForGoogleDrive\r\n\r\n// jshint browser:true, strict:true\r\n\r\nconst Uploader = window.UploaderForGoogleDrive = (function () {\r\n\r\n\r\n  /**\r\n   * Helper for implementing retries with backoff. Initial retry\r\n   * delay is 1 second, increasing by 2x (+jitter) for subsequent retries\r\n   *\r\n   * @constructor\r\n   */\r\n\r\n  const RetryHandler = function () {\r\n    this.interval = 1000; // Start at one second\r\n    this.maxInterval = 60 * 1000; // Don't wait longer than a minute\r\n  };\r\n\r\n  /**\r\n   * Invoke the function after waiting\r\n   *\r\n   * @param {function} fn Function to invoke\r\n   */\r\n  RetryHandler.prototype.retry = function (fn) {\r\n    setTimeout(fn, this.interval);\r\n    this.interval = this.nextInterval_();\r\n  };\r\n\r\n  /**\r\n   * Reset the counter (e.g. after successful request.)\r\n   */\r\n  RetryHandler.prototype.reset = function () {\r\n    this.interval = 1000;\r\n  };\r\n\r\n  /**\r\n   * Calculate the next wait time.\r\n   * @return {number} Next wait interval, in milliseconds\r\n   *\r\n   * @private\r\n   */\r\n  RetryHandler.prototype.nextInterval_ = function () {\r\n    const interval = this.interval * 2 + this.getRandomInt_(0, 1000);\r\n    return Math.min(interval, this.maxInterval);\r\n  };\r\n\r\n  /**\r\n   * Get a random int in the range of min to max. Used to add jitter to wait times.\r\n   *\r\n   * @param {number} min Lower bounds\r\n   * @param {number} max Upper bounds\r\n   * @private\r\n   */\r\n  RetryHandler.prototype.getRandomInt_ = function (min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n  };\r\n\r\n  /**\r\n   * Helper class for resumable uploads using XHR/CORS. Can upload any Blob-like item, whether\r\n   * files or in-memory constructs.\r\n   *\r\n   * @example\r\n   * var content = new Blob([\"Hello world\"], {\"type\": \"text/plain\"});\r\n   * var uploader = new MediaUploader({\r\n   *   file: content,\r\n   *   token: accessToken,\r\n   *   onComplete: function(data) { ... }\r\n   *   onError: function(data) { ... }\r\n   * });\r\n   * uploader.upload();\r\n   *\r\n   * @constructor\r\n   * @param {object} options Hash of options\r\n   * @param {string} options.token Access token\r\n   * @param {blob} options.file Blob-like item to upload\r\n   * @param {string} [options.fileId] ID of file if replacing\r\n   * @param {object} [options.params] Additional query parameters\r\n   * @param {string} [options.contentType] Content-type, if overriding the type of the blob.\r\n   * @param {object} [options.metadata] File metadata\r\n   * @param {function} [options.onComplete] Callback for when upload is complete\r\n   * @param {function} [options.onProgress] Callback for status for the in-progress upload\r\n   * @param {function} [options.onError] Callback if upload fails\r\n   */\r\n  const MediaUploader = function (options) {\r\n    const noop = function () { };\r\n    this.file = options.file;\r\n    this.contentType = options.contentType || this.file.type || 'application/octet-stream';\r\n    this.metadata = options.metadata || {\r\n      name: this.file.name,\r\n      mimeType: this.contentType\r\n    };\r\n    // if options.token omitted, get access_token from existing window.gapi instance, if any : PJB 2017-11-01\r\n    // see https://developers.google.com/api-client-library/javascript/reference/referencedocs\r\n    if (options.token) {\r\n      this.token = options.token;\r\n    } else {\r\n      try {\r\n        this.token = window.gapi.auth2\r\n          .getAuthInstance()\r\n          .currentUser.get()\r\n          .getAuthResponse(true).access_token;\r\n      } catch (e) {\r\n        console.log(e);\r\n        throw new Error('Uploader: missing Google OAuth2 access_token');\r\n      }\r\n    }\r\n    // end access_token patch -- PJB 2017-11-01\r\n    this.onComplete = options.onComplete || noop;\r\n    this.onProgress = options.onProgress || noop;\r\n    this.onError = options.onError || noop;\r\n    this.offset = options.offset || 0;\r\n    this.chunkSize = options.chunkSize || 0;\r\n    this.retryHandler = new RetryHandler();\r\n\r\n    this.url = options.url;\r\n    if (!this.url) {\r\n      const params = options.params || {};\r\n      params.uploadType = 'resumable';\r\n      this.url = this.buildUrl_(options.fileId, params, options.baseUrl);\r\n    }\r\n    // PJB 2018.01.22 Change \"update/replace\" method from \"PUT\" to \"PATCH\"\r\n    //   per https://developers.google.com/drive/v3/reference/files/update\r\n    this.httpMethod = options.fileId ? 'PATCH' : 'POST';\r\n  };\r\n\r\n  /**\r\n   * Initiate the upload.\r\n   */\r\n  MediaUploader.prototype.upload = function () {\r\n    const self = this;\r\n    const xhr = new XMLHttpRequest();\r\n\r\n    xhr.open(this.httpMethod, this.url, true);\r\n    xhr.setRequestHeader('Authorization', `Bearer ${this.token}`);\r\n    xhr.setRequestHeader('Content-Type', 'application/json');\r\n    xhr.setRequestHeader('X-Upload-Content-Length', this.file.size);\r\n    xhr.setRequestHeader('X-Upload-Content-Type', this.contentType);\r\n    xhr.setRequestHeader('writersCanShare', true);\r\n\r\n    xhr.onload = function (e) {\r\n      if (e.target.status < 400) {\r\n        const location = e.target.getResponseHeader('Location');\r\n        this.url = location;\r\n        this.sendFile_();\r\n      } else {\r\n        this.onUploadError_(e);\r\n      }\r\n    }.bind(this);\r\n    xhr.onerror = this.onUploadError_.bind(this);\r\n    xhr.send(JSON.stringify(this.metadata));\r\n  };\r\n\r\n  /**\r\n   * Send the actual file content.\r\n   *\r\n   * @private\r\n   */\r\n  MediaUploader.prototype.sendFile_ = function () {\r\n    let content = this.file;\r\n    let end = this.file.size;\r\n\r\n    if (this.offset || this.chunkSize) {\r\n      // Only bother to slice the file if we're either resuming or uploading in chunks\r\n      if (this.chunkSize) {\r\n        end = Math.min(this.offset + this.chunkSize, this.file.size);\r\n      }\r\n      content = content.slice(this.offset, end);\r\n    }\r\n\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('PUT', this.url, true);\r\n    xhr.setRequestHeader('Content-Type', this.contentType);\r\n    xhr.setRequestHeader(\r\n      'Content-Range',\r\n      `bytes ${this.offset}-${end - 1}/${this.file.size}`\r\n    );\r\n    xhr.setRequestHeader('X-Upload-Content-Type', this.file.type);\r\n    xhr.setRequestHeader('writersCanShare', true);\r\n    if (xhr.upload) {\r\n      xhr.upload.addEventListener('progress', this.onProgress);\r\n    }\r\n    xhr.onload = this.onContentUploadSuccess_.bind(this);\r\n    xhr.onerror = this.onContentUploadError_.bind(this);\r\n    xhr.send(content);\r\n  };\r\n\r\n  /**\r\n   * Query for the state of the file for resumption.\r\n   *\r\n   * @private\r\n   */\r\n  MediaUploader.prototype.resume_ = function () {\r\n    const xhr = new XMLHttpRequest();\r\n    xhr.open('PUT', this.url, true);\r\n    xhr.setRequestHeader('Content-Range', `bytes */${this.file.size}`);\r\n    xhr.setRequestHeader('X-Upload-Content-Type', this.file.type);\r\n    xhr.setRequestHeader('writersCanShare', true);\r\n    if (xhr.upload) {\r\n      xhr.upload.addEventListener('progress', this.onProgress);\r\n    }\r\n    xhr.onload = this.onContentUploadSuccess_.bind(this);\r\n    xhr.onerror = this.onContentUploadError_.bind(this);\r\n    xhr.send();\r\n  };\r\n\r\n  /**\r\n   * Extract the last saved range if available in the request.\r\n   *\r\n   * @param {XMLHttpRequest} xhr Request object\r\n   */\r\n  MediaUploader.prototype.extractRange_ = function (xhr) {\r\n    const range = xhr.getResponseHeader('Range');\r\n    if (range) {\r\n      this.offset = parseInt(range.match(/\\d+/g).pop(), 10) + 1;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handle successful responses for uploads. Depending on the context,\r\n   * may continue with uploading the next chunk of the file or, if complete,\r\n   * invokes the caller's callback.\r\n   *\r\n   * @private\r\n   * @param {object} e XHR event\r\n   */\r\n  MediaUploader.prototype.onContentUploadSuccess_ = function (e) {\r\n    if (e.target.status == 200 || e.target.status == 201) {\r\n      this.onComplete(e.target.response);\r\n    } else if (e.target.status == 308) {\r\n      this.extractRange_(e.target);\r\n      this.retryHandler.reset();\r\n      this.sendFile_();\r\n    } else {\r\n      this.onContentUploadError_(e);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handles errors for uploads. Either retries or aborts depending\r\n   * on the error.\r\n   *\r\n   * @private\r\n   * @param {object} e XHR event\r\n   */\r\n  MediaUploader.prototype.onContentUploadError_ = function (e) {\r\n    if (e.target.status && e.target.status < 500) {\r\n      this.onError(e.target.response);\r\n    } else {\r\n      this.retryHandler.retry(this.resume_.bind(this));\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Handles errors for the initial request.\r\n   *\r\n   * @private\r\n   * @param {object} e XHR event\r\n   */\r\n  MediaUploader.prototype.onUploadError_ = function (e) {\r\n    this.onError(e.target.response); // TODO - Retries for initial upload\r\n  };\r\n\r\n  /**\r\n   * Construct a query string from a hash/object\r\n   *\r\n   * @private\r\n   * @param {object} [params] Key/value pairs for query string\r\n   * @return {string} query string\r\n   */\r\n  MediaUploader.prototype.buildQuery_ = function (params) {\r\n    params = params || {};\r\n    return Object.keys(params)\r\n      .map(function (key) {\r\n        return `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`;\r\n      })\r\n      .join('&');\r\n  };\r\n\r\n  /**\r\n   * Build the drive upload URL\r\n   *\r\n   * @private\r\n   * @param {string} [id] File ID if replacing\r\n   * @param {object} [params] Query parameters\r\n   * @return {string} URL\r\n   */\r\n  MediaUploader.prototype.buildUrl_ = function (id, params, baseUrl) {\r\n    // modified next line to use v3, not v2 -- PJB, 2017-11-01\r\n    let url = baseUrl || 'https://www.googleapis.com/upload/drive/v3/files/';\r\n    if (id) {\r\n      url += id;\r\n    }\r\n    const query = this.buildQuery_(params);\r\n    if (query) {\r\n      url += `?${query}`;\r\n    }\r\n    return url;\r\n  };\r\n\r\n  return MediaUploader;\r\n})();\r\n\r\nwindow.pUploaderForGoogleDrive = function (options) {\r\n\r\n\r\n  return new Promise(function (resolve, reject) {\r\n    options.onComplete = function (r) {\r\n      let response;\r\n      try {\r\n        response = typeof r === 'string' ? JSON.parse(r) : r;\r\n      } catch (e) {\r\n        response = r;\r\n      }\r\n      resolve(response);\r\n    };\r\n    options.onError = function (e) {\r\n      reject(e);\r\n    };\r\n    const uploader = new window.UploaderForGoogleDrive(options);\r\n    uploader.upload();\r\n  });\r\n};\r\n\r\nexport { Uploader };\r\n","import { saveAsGif } from 'components/functions/menuFunctions/fromCanvasToFile';\r\nimport { Uploader } from 'services/google-uploader/googleUploader';\r\nimport store from 'store/store';\r\n\r\nconst apikey = 'AIzaSyD8p3NmO-jrbUeGpC9EYDHzH8FWOl3ivss';\r\n\r\nexport function loadClient() {\r\n  window.gapi.client.setApiKey(apikey);\r\n  return window.gapi.client\r\n    .load('https://content.googleapis.com/discovery/v1/apis/drive/v3/rest')\r\n    .then(\r\n      () => {\r\n        console.log('GAPI client loaded for API');\r\n      },\r\n      err => {\r\n        console.error('Error loading GAPI client for API', err);\r\n      }\r\n    );\r\n}\r\n\r\nexport function uploadToGoogle(filename, fps, frames) {\r\n  loadClient();\r\n  const content = new Blob([saveAsGif('upload', fps, filename, frames)], { type: 'image/gif' });\r\n  const uploader = new Uploader({\r\n    file: content,\r\n    metadata: {\r\n      name: filename\r\n    },\r\n    onComplete(data) {\r\n      const info = JSON.parse(data);\r\n      const fileId = info.id;\r\n      const googleUrl = `https://drive.google.com/open?id=${fileId}`;\r\n      const urlToGif = `https://drive.google.com/thumbnail?id=${fileId}`;\r\n      store.dispatch({ type: 'googleLinks', value: [googleUrl, urlToGif] });\r\n      window.gapi.client.drive.permissions\r\n        .create({\r\n          fileId: `${fileId}`,\r\n          resource: {\r\n            role: 'reader',\r\n            type: 'anyone'\r\n          }\r\n        })\r\n        .then(\r\n          response => {\r\n            // Handle the results here (response.result has the parsed body).\r\n            console.log('Response', response);\r\n          },\r\n          err => {\r\n            console.error('Execute error', err);\r\n          }\r\n        );\r\n    },\r\n    onError(data) {\r\n      console.log(data);\r\n    }\r\n  });\r\n  uploader.upload();\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/export/export.css';\r\nimport {\r\n  saveAsGif,\r\n  uploadToUrl,\r\n  downloadPng,\r\n  debugBase64,\r\n  debugBase64WithText\r\n} from 'components/functions/menuFunctions/fromCanvasToFile';\r\nimport { uploadToGoogle } from 'components/functions/menuFunctions/exportToGoogle';\r\nimport { pageNavigator } from 'components/functions/navigation';\r\n\r\nexport default class ExportOptions extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      active: 'show-gif-block',\r\n      dataUrl: '',\r\n      links: false\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  showExportOptions(e) {\r\n    const clicked = e.target.getAttribute('id');\r\n    this.setState({ active: clicked });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`export-settings-block ${\r\n          this.props.active === 'export-settings' ? 'flexed' : 'hidden'\r\n          }`}\r\n      >\r\n        <span className=\"export-info bold\">Export</span>\r\n        <div className=\"file-format-buttons\">\r\n          <button\r\n            id=\"show-gif-block\"\r\n            className={`show-gif-block ${\r\n              this.state.active === 'show-gif-block'\r\n                ? 'active-show-button'\r\n                : 'not-active-show-button'\r\n              }`}\r\n            type=\"button\"\r\n            onClick={e => this.showExportOptions(e)}\r\n          >\r\n            GIF\r\n          </button>\r\n          <button\r\n            id=\"show-png-block\"\r\n            className={`show-png-block ${\r\n              this.state.active === 'show-png-block'\r\n                ? 'active-show-button'\r\n                : 'not-active-show-button'\r\n              }`}\r\n            type=\"button\"\r\n            onClick={e => this.showExportOptions(e)}\r\n          >\r\n            PNG\r\n          </button>\r\n        </div>\r\n        <div\r\n          className={`gif-block ${this.state.active === 'show-gif-block' ? 'flexed' : 'hidden'}`}\r\n        >\r\n          <span className=\"gif-title\">Convert your sprite to an animated GIF</span>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"download-gif\"\r\n              className=\"gif-button\"\r\n              type=\"button\"\r\n              onClick={\r\n                () => saveAsGif(\r\n                  null,\r\n                  this.props.state.project.fps,\r\n                  this.props.state.project.title,\r\n                  this.props.state.framesArray\r\n                )}\r\n            >\r\n              Download\r\n            </button>\r\n            <span className=\"download-gif-title\">Download as an animated GIF</span>\r\n          </div>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"upload-gif\"\r\n              className=\"gif-button\"\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const dataUrl = uploadToUrl(this.props.state.project.fps, this.props.state.framesArray);\r\n                this.setState({ dataUrl, links: false });\r\n                setTimeout(() => {\r\n                  if (this.mounted) {\r\n                    this.setState({ dataUrl: '' });\r\n                  }\r\n                }, 150000);\r\n              }}\r\n            >\r\n              Open in new tab\r\n            </button>\r\n            <span className=\"upload-gif-title\">Watch an animated GIF in new tab</span>\r\n            <div className={`link-to-gif ${this.state.dataUrl ? '' : 'hidden'}`}>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  debugBase64(this.state.dataUrl);\r\n                  this.setState({ dataUrl: '' });\r\n                }}\r\n              >\r\n                your animation file\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"upload-google\"\r\n              className={`gif-button ${this.props.state.userData.isAuthed ? '' : 'hidden'}`}\r\n              type=\"button\"\r\n              onClick={() => {\r\n                if (!this.props.state.userData.isAuthed) {\r\n                  pageNavigator(null, 'create', 'about', false);\r\n                  $('#signOuted').click();\r\n                  return;\r\n                }\r\n                uploadToGoogle(\r\n                  this.props.state.project.title,\r\n                  this.props.state.project.fps,\r\n                  this.props.state.framesArray);\r\n                this.setState({ dataUrl: '' });\r\n                setTimeout(() => {\r\n                  if (this.props.state.googleLinks.length > 0) {\r\n                    this.setState({ links: true });\r\n                  }\r\n                }, 3000);\r\n                setTimeout(() => {\r\n                  if (this.mounted) {\r\n                    this.setState({ links: false });\r\n                  }\r\n                }, 150000);\r\n              }}\r\n            >\r\n              Get link\r\n            </button>\r\n            <span className={`upload-gif-google ${this.props.state.userData.isAuthed ? 'blocked' : 'hidden'}`}>\r\n              Save your animation to Google disk to share\r\n            </span>\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                $('.abcRioButton.abcRioButtonLightBlue').click();\r\n              }}\r\n              className={`save-online-button ${this.props.state.userData.isAuthed ? 'hidden' : ''}`}\r\n            >\r\n              Sign in to save to Google disk\r\n            </button>\r\n\r\n            <div className={`link-to-gif ${this.state.links ? '' : 'hidden'}`}>\r\n              <span>Click the link</span>\r\n              <a\r\n                className=\"google-link\"\r\n                id=\"google-link\"\r\n                rel=\"noopener noreferrer\"\r\n                target=\"_blank\"\r\n                href={this.props.state.googleLinks[0]}\r\n              >\r\n                {'Link to file on Google disk'}\r\n              </a>\r\n              <a\r\n                className=\"google-link\"\r\n                id=\"span-link\"\r\n                rel=\"noopener noreferrer\"\r\n                target=\"_blank\"\r\n                href={this.props.state.googleLinks[1]}\r\n              >\r\n                {'Direct link to your GIF'}\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className={`png-block ${this.state.active === 'show-png-block' ? 'flexed' : 'hidden'}`}\r\n        >\r\n          <span className=\"png-title\">Export your animation as a PNG file</span>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"download-png\"\r\n              className=\"png-button\"\r\n              type=\"button\"\r\n              onClick={() =>\r\n                downloadPng(\r\n                  this.props.state.currentCanvas,\r\n                  this.props.state.project.fps,\r\n                  this.props.state.project.title\r\n                )}\r\n            >\r\n              Download\r\n            </button>\r\n            <span className=\"download-png-title\">Download selected frame as PNG file</span>\r\n          </div>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"open-png\"\r\n              className=\"png-button\"\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const array = [];\r\n                for (let i = 0; i < $('.preview').children().length; i += 1) {\r\n                  array.push($('.preview').children()[i].src);\r\n                }\r\n                const dataUrl = uploadToUrl(this.props.state.project.fps, this.props.state.framesArray);\r\n                debugBase64WithText(array, dataUrl);\r\n              }}\r\n            >\r\n              Open\r\n            </button>\r\n            <span className=\"open-png-title\">Open the spritesheet as a data uri</span>\r\n          </div>\r\n        </div>\r\n        <div id=\"hidden\" className=\"hidden\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nExportOptions.propTypes = {\r\n  active: PropTypes.string.isRequired,\r\n  state: PropTypes.object.isRequired\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'components/menuComponents/import/import.css';\r\nimport store from 'store/store';\r\n\r\nexport default function ImportOptions(props) {\r\n  return (\r\n    <div\r\n      className={`general-settings-block ${\r\n        props.active === 'import-settings' ? 'flexed' : 'hidden'\r\n        }`}\r\n    >\r\n      <div className=\"current-bg\">\r\n        <span className=\"default-bg bold\">Load from browser</span>\r\n        <p>Load your animation saved in this browser</p>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => store.dispatch({ type: 'showLocalSaves', value: true })}\r\n          className=\"browse-local-piskels-button\"\r\n        >\r\n          Browse local saves\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nImportOptions.propTypes = {\r\n  active: PropTypes.string.isRequired\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'containers/menu/optionsDomBuilder.css';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\nimport store from 'store/store';\r\nimport Layers from 'components/menuComponents/layers-list/layers-list';\r\nimport Palettes from 'components/menuComponents/palettes/palettes';\r\nimport Settings from 'components/menuComponents/settings/settings';\r\nimport ResizeCanvas from 'components/menuComponents/resize/resizeCanvas';\r\nimport SaveOptions from 'components/menuComponents/save/save';\r\nimport ExportOptions from 'components/menuComponents/export/export';\r\nimport ImportOptions from 'components/menuComponents/import/import';\r\n\r\nexport default class Options extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      fps: 3,\r\n      active: 'none'\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n    this.setState({ fps: this.props.state.project.fps });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  showOptionsOnClick(id) {\r\n    if (this.mounted) {\r\n      if (this.state.active === id) {\r\n        this.setState({ active: 'none' });\r\n      } else {\r\n        this.setState({ active: id });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"optionsBox\" id=\"optionsBox\">\r\n        <div className=\"fps-options\">\r\n          <span id=\"display-fps\" className=\"display-fps\">\r\n            {`${this.state.fps} FPS`}\r\n          </span>\r\n          <input\r\n            type=\"range\"\r\n            min=\"1\"\r\n            max=\"24\"\r\n            step=\"1\"\r\n            defaultValue={this.state.fps}\r\n            id=\"fps-bar\"\r\n            className=\"fps-bar\"\r\n            onChange={e => {\r\n              store.dispatch({ type: 'project', value: ['fps', e.target.value] });\r\n              this.setState({ fps: e.target.value });\r\n            }}\r\n          />\r\n        </div>\r\n        <Layers />\r\n        <Palettes colorSamples={this.props.state.palette} toolState={this.props.state.toolState} />\r\n        <div className={`options-blocks-area ${this.state.active === 'none' ? '' : 'slide'}`}>\r\n          <Settings active={this.state.active} />\r\n          <ResizeCanvas\r\n            active={this.state.active}\r\n            currentCanvas={this.props.state.currentCanvas} />\r\n          <SaveOptions\r\n            active={this.state.active}\r\n            state={this.props.state}\r\n          />\r\n          <ExportOptions\r\n            active={this.state.active}\r\n            state={this.props.state}\r\n          />\r\n          <ImportOptions active={this.state.active} />\r\n        </div>\r\n        <div\r\n          className={`settings-buttons ${\r\n            this.state.active && this.state.active === 'none' ? '' : 'slide'\r\n            }`}\r\n        >\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('settings')}\r\n            iconClass=\"fas fa-cog\"\r\n            active={this.state.active}\r\n            buttonId=\"settings\"\r\n            title=\"Settings\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('resize-settings')}\r\n            iconClass=\"fas fa-crop\"\r\n            active={this.state.active}\r\n            buttonId=\"resize-settings\"\r\n            title=\"Resize the drawing area\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('save-settings')}\r\n            iconClass=\"fas fa-save\"\r\n            active={this.state.active}\r\n            buttonId=\"save-settings\"\r\n            title=\"Save to your galery\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('export-settings')}\r\n            iconClass=\"fas fa-file-download\"\r\n            active={this.state.active}\r\n            buttonId=\"export-settings\"\r\n            title=\"Export as image or animated gif\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('import-settings')}\r\n            iconClass=\"fas fa-file-upload\"\r\n            active={this.state.active}\r\n            buttonId=\"import-settings\"\r\n            title=\"Import your animation\"\r\n            placement=\"left\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nOptions.propTypes = {\r\n  state: PropTypes.object.isRequired\r\n}\r\n","import $ from 'jquery';\r\nimport { GIFEncoder } from 'services/jsgif-master/GIFEncoder';\r\n\r\nexport function fromImageToCanvas() {\r\n  const newCanv = $('<canvas></canvas>', {\r\n    id: 'canvasSave1',\r\n    width: '421px',\r\n    height: '421px'\r\n  })\r\n    .appendTo('#hidden')\r\n    .attr('width', 421)\r\n    .attr('height', 421)\r\n    .css({ width: '421px', height: '421px' });\r\n\r\n  const originalContext = $(newCanv)\r\n    .get(0)\r\n    .getContext('2d');\r\n  originalContext.scale(1, 1);\r\n  const image = new Image();\r\n  image.onload = () => {\r\n    originalContext.drawImage(image, 0, 0, 421, 421);\r\n    image.style.display = 'none';\r\n  };\r\n}\r\n\r\nexport function makeFgif() {\r\n  const delay = 1000 / 3;\r\n  const encoder = new GIFEncoder();\r\n  encoder.setRepeat(0);\r\n  encoder.setDelay(delay);\r\n  encoder.start();\r\n\r\n  for (let i = 0; i < $('#hidden').children().length; i += 1) {\r\n    const curCanv = $('#hidden').children()[i];\r\n    const originalContext = $(curCanv)\r\n      .get(0)\r\n      .getContext('2d');\r\n    const imageData = originalContext.getImageData(0, 0, curCanv.width, curCanv.height);\r\n    let len = imageData.data.length;\r\n    const newArr = [];\r\n    let map1;\r\n    let map2;\r\n    let count = 0;\r\n    while (len > 0) {\r\n      map1 = imageData.data.slice(count, count + 4);\r\n      map2 = map1;\r\n      if (map2.every(item => item === 0)) {\r\n        map2 = map2.map(() => 255);\r\n      }\r\n      newArr.push(...map2);\r\n      count += 4;\r\n      len -= 4;\r\n    }\r\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\r\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\r\n    encoder.setSize(curCanv.height, curCanv.width);\r\n    encoder.addFrame(newImage, true);\r\n  }\r\n  encoder.finish();\r\n  const filename = 'New Piskel-clone';\r\n  encoder.download(`${filename}.gif`);\r\n}\r\n\r\nexport function fromDataToCanvas(frames) {\r\n  const width = $('#drawCanvas').width();\r\n  frames.forEach(item => {\r\n    if ($('#canvas-block')) {\r\n      const ctx = $(`#canvas${item.id}`)\r\n        .get(0)\r\n        .getContext('2d');\r\n      const image = new Image();\r\n      image.src = item.frameSRC;\r\n      setTimeout(() => {\r\n        ctx.drawImage(image, 0, 0, width, width);\r\n      }, 200);\r\n    }\r\n  });\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport store from 'store/store';\r\nimport { fromDataToCanvas } from 'components/functions/menuFunctions/fromImageToCanvas';\r\nimport { pageNavigator } from 'components/functions/navigation';\r\n\r\nexport default function LocalSaves(props) {\r\n  const sorted = Object.entries(props.localProjects).sort((a, b) => b[1].time - a[1].time);\r\n  return (\r\n    <div className=\"local-saves-block\">\r\n      <div>\r\n        <span className=\"local-saves-title\">Browse local piskels</span>\r\n        <i\r\n          className=\"far fa-window-close local-saves-button\"\r\n          onClick={() => store.dispatch({ type: 'showLocalSaves', value: false })}\r\n          onKeyPress={undefined}\r\n          tabIndex=\"-1\"\r\n          role=\"button\"\r\n        />\r\n      </div>\r\n      <div className=\"table-wrapper\">\r\n        <table className=\"table-local-saves\" cellPadding=\"20\" cellSpacing=\"10\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"table-title\">Name</th>\r\n              <th className=\"table-title\">Date</th>\r\n              <th className=\"table-title\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {sorted.map(item => (\r\n              <tr key={item[0]}>\r\n                <td className=\"table-data\">\r\n                  {item[1].title}\r\n                </td>\r\n                <td className=\"table-data\">\r\n                  {item[1].date}\r\n                </td>\r\n                <td className=\"table-data table-data-buttons\">\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"table-button\"\r\n                    onClick={() => {\r\n                      store.dispatch({ type: 'projectID', value: item[0] });\r\n                      store.dispatch({ type: 'project', value: item[1] });\r\n                      store.dispatch({ type: 'framesArray', value: null });\r\n                      store.dispatch({ type: 'framesArray', value: item[1].frames });\r\n                      store.dispatch({ type: 'currentCanvas', value: item[1].frames[0].id });\r\n                      store.dispatch({ type: 'showLocalSaves', value: false });\r\n                      pageNavigator(null, 'general', 'create', null, item[0]);\r\n                      setTimeout(() => {\r\n                        fromDataToCanvas(item[1].frames);\r\n                      }, 500);\r\n                    }}\r\n                  >\r\n                    Load\r\n                    </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"table-button\"\r\n                    onClick={() => store.dispatch({ type: 'localProjects', value: ['delete', item[0]] })}\r\n                  >\r\n                    Delete\r\n                    </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nLocalSaves.propTypes = {\r\n  localProjects: PropTypes.object.isRequired\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport ToolsPanel from 'components/tools/toolsDomBuilder';\r\nimport FramesWrapper from 'components/screens/frames/frameDomBuilder';\r\nimport CanvasWrapper from 'components/screens/canvas/canvasDomBuilder';\r\nimport PreviewBlock from 'components/screens/preview/previewDomBuilder';\r\nimport Options from 'containers/menu/optionsDomBuilder';\r\nimport LocalSaves from 'containers/pages/localSaves/localSaves';\r\nimport 'containers/pages/create/create.css';\r\nimport store from 'store/store';\r\n\r\nclass CreateAnimation extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      showSaves: false,\r\n      size: '',\r\n      changeWidth: ''\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentWillMount() {\r\n    const canvasWidth =\r\n      window.innerWidth - 500 < window.innerHeight - 155\r\n        ? window.innerWidth - 500\r\n        : window.innerHeight - 155;\r\n    this.setState({ size: canvasWidth > 350 ? canvasWidth : 350, changeWidth: canvasWidth });\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n    $(window).bind('beforeunload', () => 'are you sure you want to leave?');\r\n    $(window).bind('resize', () => {\r\n      const changeWidth =\r\n        window.innerWidth - 500 < window.innerHeight - 155\r\n          ? window.innerWidth - 500\r\n          : window.innerHeight - 155;\r\n      this.setState({ changeWidth });\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n    store.dispatch({ type: 'project', value: 'initial' });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"container\" className=\"create-page-wrapper\">\r\n        <section className=\"tool-pannel\" id=\"tool-pannel\">\r\n          <ToolsPanel toolState={this.props.state.toolState} />\r\n        </section>\r\n        <section className=\"frame-area\" id=\"frame-area\">\r\n          <FramesWrapper\r\n            framesArray={this.props.state.framesArray}\r\n            bg={this.props.state.settings.currentBG}\r\n          />\r\n        </section>\r\n        <section\r\n          className=\"canvas-area\"\r\n          id=\"canvas-area\"\r\n          style={{ overflow: `${this.state.size > this.state.changeWidth ? 'scroll' : ''}` }}\r\n        >\r\n          <CanvasWrapper\r\n            currentCanvas={this.props.state.currentCanvas}\r\n            toolState={this.props.state.toolState}\r\n            settings={this.props.state.settings}\r\n            framesArray={this.props.state.framesArray} />\r\n        </section>\r\n        <div className=\"right-side-panel\">\r\n          <section className=\"preview-area noselect\" id=\"preview-area\">\r\n            <PreviewBlock\r\n              framesArray={this.props.state.framesArray}\r\n            />\r\n          </section>\r\n          <section className=\"options-area\" id=\"options-area\">\r\n            <Options state={this.props.state} />\r\n          </section>\r\n        </div>\r\n        <div className={`local-saves-page ${this.mounted && this.props.state.showLocalSaves ? '' : 'hidden'}`}>\r\n          <div className=\"local-saves-background\" />\r\n          <LocalSaves localProjects={this.props.state.localProjects} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCreateAnimation.propTypes = {\r\n  state: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  state: state\r\n});\r\n\r\nexport default connect(mapStateToProps)(CreateAnimation);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport makeAnimate from 'components/functions/animation';\r\nimport errorImage from 'assets/images/pages/error.jpg';\r\nimport 'containers/pages/error/error.css';\r\n\r\n\r\nexport default function ErrorPage(props) {\r\n  if (props.error) {\r\n    makeAnimate();\r\n  }\r\n  return (\r\n    <div className={`error-section ${props.error ? 'error-page' : 'hidden'}`}>\r\n      <div className=\"error-image-wrapper\" id=\"error-image-wrapper\">\r\n        <img src={errorImage} alt=\"Oops! Somthing went wrong\" />\r\n      </div>\r\n      <div className=\"error-text-wrapper\">\r\n        <span>Oops! Something went wrong :(</span>\r\n        <span>Please refresh the Webpage!</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nErrorPage.propTypes = {\r\n  error: PropTypes.bool.isRequired\r\n};\r\n","import { makeRandomNumber } from 'components/functions/random';\r\n\r\nexport default function makeAnimate() {\r\n  const width = 100 - (480 * 100) / window.innerWidth;\r\n  const height = 100 - (375 * 100) / window.innerHeight;\r\n  const top = (55 * 100) / window.innerHeight;\r\n  const bottom = window.innerHeight - 370;\r\n  const node = document.getElementById('error-image-wrapper');\r\n  if (node) {\r\n    const animation = node.animate(\r\n      [\r\n        { top: '55px', left: '0' }, // 0\r\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 10%\r\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 20%\r\n        { top: `${bottom}px`, left: `${makeRandomNumber(width / 2, width)}%` }, // 30%\r\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(width / 2, width)}%` }, // 40%\r\n        { top: '55px', left: `${width}%` }, // 50%\r\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(width / 2, width)}%` }, // 60%\r\n        { top: `${bottom}px`, left: `${makeRandomNumber(width / 2, width)}%` }, // 70%\r\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 80%\r\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 90%\r\n        { top: '55px', left: '0' } // 100%\r\n      ],\r\n      {\r\n        duration: 30000,\r\n        delay: 0,\r\n        easing: 'linear'\r\n      }\r\n    );\r\n    animation.play();\r\n    setTimeout(() => {\r\n      makeAnimate();\r\n    }, 30000);\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'components/projectCards/projectCard.css';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\n\r\nexport default class ProjectCard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      active: ''\r\n    };\r\n  }\r\n\r\n  hoverIn(e) {\r\n    this.setState({ active: e.currentTarget.id });\r\n  }\r\n\r\n  hoverOut() {\r\n    this.setState({ active: false });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"preview-wrapper\"\r\n        id={this.props.infoObj[0]}\r\n        onMouseEnter={e => this.hoverIn(e)}\r\n        onMouseLeave={() => this.hoverOut()}\r\n      >\r\n        <img className=\"preview-gif\" src={this.props.infoObj[1].gif} alt=\"preview\" />\r\n        <span className=\"preview-gif-title\">\r\n          {this.props.infoObj[1].title}\r\n        </span>\r\n        <span className=\"preview-gif-date\">\r\n          {this.props.infoObj[1].date}\r\n        </span>\r\n        <div className={`piskel-preview-button-block ${\r\n          this.state.active === this.props.infoObj[0] ? '' : 'hidden'\r\n          }`}>\r\n          <AwesomeButton\r\n            buttonClass='piskel-preview-button'\r\n            onClickHandler={() => this.props.deletePiskelOnClick(this.props.infoObj[0])}\r\n            iconClass='fas fa-trash-alt'\r\n            title='Delete piskel'\r\n            placement='bottom'\r\n          />\r\n          <AwesomeButton\r\n            buttonClass='piskel-preview-button'\r\n            onClickHandler={() =>\r\n              this.props.onClickHandler(this.props.infoObj[0], this.props.infoObj[1].frames, this.props.infoObj[1])}\r\n            iconClass='fas fa-pencil-alt'\r\n            title='Edit piskel'\r\n            placement='bottom'\r\n          />\r\n          <AwesomeButton\r\n            buttonClass='piskel-preview-button'\r\n            onClickHandler={() =>\r\n              this.props.onClickHandler(false, this.props.infoObj[1].frames, this.props.infoObj[1])}\r\n            iconClass='fas fa-copy'\r\n            title='Copy piskel'\r\n            placement='bottom'\r\n          />\r\n          <AwesomeButton\r\n            buttonClass='piskel-preview-button'\r\n            onClickHandler={() => this.props.onClickHandler(this.props.infoObj[0], false, this.props.infoObj)}\r\n            iconClass='fas fa-eye'\r\n            title='Preview piskel details'\r\n            placement='bottom'\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nProjectCard.propTypes = {\r\n  onClickHandler: PropTypes.func.isRequired,\r\n  deletePiskelOnClick: PropTypes.func.isRequired,\r\n  infoObj: PropTypes.array.isRequired,\r\n  isAuthed: PropTypes.bool.isRequired\r\n};\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport { getDBdata, deleteFromDB } from 'components/functions/requestToDB';\r\nimport { fromDataToCanvas } from 'components/functions/menuFunctions/fromImageToCanvas';\r\nimport { pageNavigator } from 'components/functions/navigation';\r\nimport ProjectCard from 'components/projectCards/projectCard';\r\nimport 'containers/pages/user/user.css';\r\nimport store from 'store/store';\r\nimport { makeRandomId } from 'components/functions/random';\r\n\r\nclass User extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      height: '',\r\n      projects: {}\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (!this.props.allProjects !== {} && !this.props.allProjects[this.props.userData.info.id]) {\r\n      getDBdata(this.props.userData.info.id);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({\r\n      height: window.innerHeight,\r\n      projects: this.props.allProjects[this.props.userData.info.id]\r\n    });\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  onClickHandler(projectId, projectFrames, preview) {\r\n    if (projectFrames) {\r\n      if (projectId) {\r\n        // edit piskel with projectID\r\n        pageNavigator(null, 'user', 'create', this.props.userData.isAuthed, projectId);\r\n      } else {\r\n        // copy piskel\r\n        pageNavigator(null, 'user', 'create', this.props.userData.isAuthed)\r\n      }\r\n      if (projectFrames.some(item => (item instanceof Object && !item.id) || !(item instanceof Object))) {\r\n        const newProjectFrames = [];\r\n        projectFrames.forEach((item, i) => {\r\n          newProjectFrames.push({\r\n            id: makeRandomId(),\r\n            frameSRC: item,\r\n          })\r\n        });\r\n        projectFrames = newProjectFrames;\r\n      }\r\n      store.dispatch({ type: 'project', value: preview });\r\n      store.dispatch({ type: 'framesArray', value: projectFrames });\r\n      setTimeout(() => {\r\n        fromDataToCanvas(projectFrames);\r\n      }, 200);\r\n    } else if (preview) {\r\n      // preview & details of piskel\r\n      store.dispatch({ type: 'project', value: preview[1] });\r\n      store.dispatch({ type: 'projectID', value: preview[0] });\r\n      pageNavigator(\r\n        null,\r\n        'user',\r\n        `projects/user${this.props.userData.info.id}/${preview[0]}`,\r\n        this.props.userData.isAuthed\r\n      );\r\n    }\r\n  }\r\n\r\n  deletePiskel(item) {\r\n    if (!this.props.userData.isAuthed) {\r\n      this.setState({ isEmpty: true });\r\n      pageNavigator(null, this.props.page, 'about', false);\r\n      $('#signOuted').click();\r\n      return;\r\n    }\r\n    const projects = Object.entries(this.props.allProjects[this.props.userData.info.id]);\r\n    for (let i = 0; i < projects.length; i += 1) {\r\n      if (projects[i][0] === item) {\r\n        deleteFromDB(`users/${this.props.userData.info.id}/${projects[i][0]}`);\r\n        store.dispatch({ type: 'allProjects', value: ['delete', this.props.userData.info.id, item] });\r\n        this.setState({ projects: this.props.allProjects[this.props.userData.info.id] })\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"user-page\" style={{ height: this.state.height - 110 }}>\r\n        <div\r\n          className=\"user-image\"\r\n          style={{\r\n            backgroundImage: `url(${this.props.userData.info.image})`,\r\n            backgroundSize: 'contain'\r\n          }}\r\n        />\r\n        <h2 className=\"user-name\">{this.props.userData.info.name}</h2>\r\n        <ul className=\"piskel-list\">\r\n          <li>all</li>\r\n          <li>public</li>\r\n          <li>private</li>\r\n          <li>deleted</li>\r\n        </ul>\r\n        <div id=\"user-piskel-preview-area\" className=\"user-piskel-preview-area\">\r\n          <div className=\"user-preview-piskel-block flexed\">\r\n            {\r\n              !this.props.allProjects[this.props.userData.info.id]\r\n                || ((this.props.allProjects instanceof Object)\r\n                  ? Object.entries(this.props.allProjects[this.props.userData.info.id]).length === 0\r\n                  : false)\r\n                ? <span>No piskel available in &#39;all&#39; category.</span>\r\n                : Object.entries(this.props.allProjects[this.props.userData.info.id])\r\n                  .sort((a, b) => b[1].time - a[1].time)\r\n                  .map(item => (\r\n                    <ProjectCard\r\n                      key={item[0]}\r\n                      infoObj={item}\r\n                      onClickHandler={(...args) => this.onClickHandler(...args)}\r\n                      deletePiskelOnClick={(...args) => this.deletePiskel(...args)}\r\n                      isAuthed={this.props.userData.isAuthed}\r\n                    />\r\n                  ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nUser.propTypes = {\r\n  userData: PropTypes.object.isRequired,\r\n  page: PropTypes.string.isRequired,\r\n  allProjects: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  userData: state.userData,\r\n  page: state.page,\r\n  allProjects: state.allProjects\r\n});\r\n\r\nexport default connect(mapStateToProps)(User);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport 'containers/pages/projectPage/project.css';\r\n\r\nfunction ProjectInfo(props) {\r\n  return (\r\n    <div className=\"project-section\">\r\n      <div className=\"project-wrapper\">\r\n        <div className=\"piskel-page-gif-wrapper\">\r\n          <img src={props.project.gif} alt=\"preview-gif\" />\r\n        </div>\r\n        <div className=\"piskel-page-info-wrapper\">\r\n          <span className=\"sprite-info-title bold\">\r\n            Title\r\n              </span>\r\n          <h3 className=\"sprite-title\">\r\n            {props.project.title}\r\n          </h3>\r\n          <span className=\"sprite-info-title bold\">\r\n            Description\r\n              </span>\r\n          <h3 className=\"sprite-description\">\r\n            {`${props.project.description || 'no-description yet'}`}\r\n          </h3>\r\n          <span className=\"sprite-info-title bold\">\r\n            Created:\r\n              </span>\r\n          <h3 className=\"sprite-date bold\">\r\n            {props.project.date}\r\n          </h3>\r\n          <div>\r\n            <span className=\"sprite-info-title bold\">\r\n              Animation info:\r\n                </span>\r\n            <h3 className=\"sprite-options bold\">\r\n              Frames:\r\n                </h3>\r\n            <span>{props.project.frames.length ? props.project.frames.length : 0}</span>\r\n            <h3 className=\"sprite-options bold\">\r\n              FPS:\r\n                </h3>\r\n            <span>\r\n              {`${props.project.frames.length && props.project.frames.length === 1\r\n                ? 0\r\n                : props.project.fps} frames per second`}\r\n            </span>\r\n            <h3 className=\"sprite-options bold\">\r\n              The total duration:\r\n                </h3>\r\n            <span>\r\n              {`${(props.project.frames.length && props.project.frames.length === 1\r\n                ? 0\r\n                : props.project.frames.length / props.project.fps\r\n              ).toFixed(1)} seconds`}\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nProjectInfo.propTypes = {\r\n  project: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  project: state.project\r\n});\r\n\r\nexport default connect(mapStateToProps)(ProjectInfo);","import React from 'react';\r\nimport { Route, HashRouter, Redirect } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport Header from 'components/header/header';\r\nimport About from 'containers/pages/about/about';\r\nimport CreateAnimation from 'containers/pages/create/create';\r\nimport ErrorPage from 'containers/pages/error/error';\r\nimport User from 'containers/pages/user/user';\r\nimport ProjectInfo from 'containers/pages/projectPage/project';\r\nimport store from 'store/store';\r\nimport { googleAuth, onSuccessHandler } from 'services/googleAuth/authApi';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userData: {},\r\n      error: false\r\n    };\r\n    this.onSuccess = this.onSuccess.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(() => {\r\n      googleAuth(this.onSuccess);\r\n    }, 200);\r\n  }\r\n\r\n  onSuccess(googleUser) {\r\n    const userData = onSuccessHandler(googleUser);\r\n    store.dispatch({ type: 'userData', value: userData });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.setState(null);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <HashRouter>\r\n        <Header isAuthed={this.props.userData.isAuthed} page={this.props.page} />\r\n        <ErrorPage error={this.props.error} />\r\n        <div className={`${this.props.error ? 'hidden' : 'page-wrapper'}`}>\r\n          <Route path={`/${this.props.locale}/about`} component={About} />\r\n          <Route path={`/${this.props.locale}/user/*`} component={User} />\r\n          <Route path={`/${this.props.locale}/create-animation/*`} component={CreateAnimation} />\r\n          <Route path={`/${this.props.locale}/projects/*`} component={ProjectInfo} />\r\n          <Route path={`*`}>\r\n            {this.props.locale && this.props.page !== ''\r\n              ? this.props.page === 'user'\r\n                ? this.props.userData.isAuthed\r\n                  ? <Redirect to={`/${this.props.locale}/user/${this.props.userData.info.id}`} />\r\n                  : <Redirect to={`/${this.props.locale}/about`} />\r\n                : <Redirect to={`/${this.props.locale}/${this.props.page}`} />\r\n              : <Redirect to={`/${this.props.locale}/about`} />}\r\n          </Route>\r\n        </div>\r\n      </HashRouter>\r\n    );\r\n  }\r\n}\r\n\r\nApp.propTypes = {\r\n  locale: PropTypes.string.isRequired,\r\n  userData: PropTypes.object.isRequired,\r\n  page: PropTypes.string.isRequired,\r\n  error: PropTypes.bool.isRequired,\r\n  project: PropTypes.object.isRequired\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  locale: state.locales.locale,\r\n  userData: state.userData,\r\n  page: state.page,\r\n  error: state.error,\r\n  project: state.project\r\n});\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-console */\n/* eslint-disable no-use-before-define */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { connect } from 'react-redux';\r\nimport { IntlProvider } from 'react-intl';\r\n\r\nfunction mapStateToProps(state) {\r\n  const { locale, messages } = state.locales;\r\n  return { key: locale, locale: locale, messages };\r\n}\r\n\r\nexport default connect(mapStateToProps)(IntlProvider);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { addLocaleData } from 'react-intl';\r\nimport en from 'react-intl/locale-data/en';\r\nimport ru from 'react-intl/locale-data/ru';\r\nimport App from 'app';\r\nimport store from 'store/store';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport ConnectedIntlProvider from './ConnectedIntlProvider';\r\nimport 'index.css';\r\nimport 'reset.css';\r\n\r\naddLocaleData([...en, ...ru]);\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ConnectedIntlProvider>\r\n      <App />\r\n    </ConnectedIntlProvider>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}