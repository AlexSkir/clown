{"version":3,"sources":["components/tools/images/colorpicker.png","components/tools/images/bucket.png","components/tools/images/pen.png","components/tools/images/eraser.png","store/store.js","components/tools/color-picker.js","components/tools/toolsDomBuilder.js","components/tools/paintBucket.js","components/tools/pen.js","components/tools/eraser.js","screens/canvas/resizeWindow.js","screens/canvas/drawing.js","screens/canvas/paint.js","screens/preview/preview.js","screens/canvas/canvasDomBuilder.js","components/frames-list/frameDomBuilder.js","components/frames-list/canvasManager.js","components/frames-list/framesManager.js","components/menu/palettes/palettes.js","screens/preview/previewDomBuilder.js","components/menu/layers-list/layers-list.js","components/menu/settings/settings.js","components/menu/resize/resizeCanvas.js","components/menu/export/fromCanvasToFile.js","components/menu/save/save.js","components/gifModule/jsgif-master/NeuQuant.js","components/gifModule/jsgif-master/LZWEncoder.js","components/gifModule/jsgif-master/GIFEncoder.js","components/gifModule/jsgif-master/b64.js","components/menu/export/export.js","components/menu/optionsDomBuilder.js","mainpage/user/user.js","mainpage/create/create.js","mainpage/about/about.js","mainpage/home.js","serviceWorker.js","index.js"],"names":["module","exports","preview","createStore","state","arguments","length","undefined","action","type","Object","assign","gif","value","frames","piskelID","store","currentPage","currentColor","backColor","currentTool","fps","customWidth","settings","setBg","title","canvas","currentCanvas","user","name","imageURL","options","optionsBlock","palette","addColor","customedColorOnChange","id","newValue","$","concat","val","customedColor","match","map","v","parseInt","join","dispatch","css","background-color","attr","toolState","currentColorState","backColorState","subscribe","getState","Tools","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","tool","active","value1","value2","pickedColor","mounted","_this2","document","click","e","colorPickerHandleClick","setState","curColorValue","backColorValue","target","is","curCanv","querySelector","rect","getBoundingClientRect","x","Math","round","clientX","left","y","clientY","top","ctx","getContext","getImageData","data","rgbColor","hexColor","r","g","b","hexR","toString","hexG","hexB","rgbaToHex","children","removeClass","_this3","react_default","a","createElement","className","onMouseEnter","buttonOnHoverIn","onMouseLeave","buttonOnHoverOut","onClick","find","addClass","focus","body","cursor","paintBucketIcon","blur","colorPicker","penIcon","erserIcon","hex","color","nums","exec","rgbToHex","role","switchColorsOnClick","onFocus","onKeyPress","tabIndex","onChange","React","Component","canvasWidth","window","innerWidth","innerHeight","bind","i","imageData","get","changeWidth","putImageData","text","width","endX","endY","mouseDownX","mouseDownY","end","offsetX","offsetY","fillStyle","strokeStyle","canvasSize","ceil","mouseMoveX","floor","mouseMoveY","fillRect","start","globalCompositeOperation","mousemove","getColorAtPixel","setColorAtPixel","colorMatch","paintIt","newColor","rgb","col","height","stack","baseColor","clicked","push","pop","goDown","goUp","goLeft","goRight","floodFill","dataURL","toDataURL","background","background-size","anim","newWindow","count","animate","clearTimeout","time","display","style","setTimeout","makeImage","n","canvasImage","Image","insertBefore","next","remove","appendTo","fullSizePreview","close","open","newPreview","clone","justify-content","align-items","newFps","newCount","ready","newAnimate","Canvas","size","curCanvas","penHandleClick","unbind","mousedown","mouseup","off","openCanvas","num","toggleClass","copyCanvasContext","putImage","hoverIn","hasClass","hoverOut","updateId","dragFrame","sortable","disableSelection","dragOff","dragged","currentTarget","parent","draggedImage","removeFrame","copyFrame","insertAfter","hover","cloneWrapper","copyCanvas","addNewFrame","first","last","class","newCanvas","Frames","Preview","Layers","hovered","mouseEnter","getAttribute","onMouseOver","popHintOnMouseOver","mouseIn","mouseOut","Palettes","changed","indexOf","item","key","changeCurColor","addNewColor","Settings","bg","addActiveOnClick","delay","filename","ResizeCanvas","inputVal","maxSize","min","resizeCanvasOnClickHandler","NeuQuant","alphadec","thepicture","lengthcount","samplefac","network","netindex","bias","freq","radpower","thepic","len","sample","p","Array","netbiasshift","intbias","unbiasnet","j","dist","bestd","best","process","radius","rad","alpha","step","delta","samplepixels","pix","lim","initrad","contest","altersingle","alterneigh","learn","smallpos","smallval","q","previouscol","startpos","netsize","inxbuild","index","k","l","colorMap","lo","hi","m","alphabiasshift","biasdist","betafreq","bestpos","bestbiaspos","bestbiasd","intbiasshift","apply","LZWEncoder","imgW","imgH","pixAry","initCodeSize","remaining","curPixel","n_bits","maxcode","g_init_bits","ClearCode","EOFCode","a_count","htab","codetab","free_ent","clear_flg","cur_accum","cur_bits","masks","accum","pixels","color_depth","max","char_out","c","outs","flush_char","cl_block","cl_hash","output","hsize","compress","init_bits","fcode","ent","disp","hshift","MAXCODE","nextPixel","outer_loop","encode","os","writeByte","writeBytes","code","GIFEncoder","chr","String","fromCharCode","ByteArray","bin","prototype","getData","writeUTFBytes","string","charCodeAt","array","offset","transIndex","out","image","indexedPixels","colorDepth","colorTab","transparent","repeat","started","usedEntry","palSize","dispose","closeStream","firstFrame","sizeSet","comment","reset","setDelay","ms","setDispose","setRepeat","iter","setTransparent","setComment","addFrame","im","is_imageData","Error","ok","ImageData","setSize","Uint8ClampedArray","console","log","getImagePixels","analyzePixels","writeLSD","writePalette","writeNetscapeExt","writeGraphicCtrlExt","writeCommentExt","writeImageDesc","writePixels","download","endsWith","templink","href","URL","createObjectURL","Blob","Uint8Array","finish","setFrameRate","setQuality","quality","w","h","cont","nPix","nq","findClosest","minpos","dmin","dr","dg","db","d","transp","WriteShort","pValue","stream","setProperties","has_start","is_first","uploadToUrl","encoder","newArr","map2","slice","every","toConsumableArray","fixedNewArray","from","newImage","binaryGif","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","encode64","SaveOptions","isLogin","src","dataUrl","random","defaultValue","rows","cols","onChangeHandler","updateState","ExportOptions","showExportOptions","saveAsGif","base64URL","win","heigh","debugBase64","downloadPng","flex-direction","overflow","ancor","overflow-y","margin-bottom","border","flex-wrap","word-break","debugBase64WithText","img","Options","fpsOnChangeHandler","layers_list_layers_list","palettes_palettes","menu_settings_settings","resizeCanvas","save_save","menu_export_export","showOptionsOnClick","CreateAnimation","redirected","localStorage","setItem","react_router","to","toolsDomBuilder","frameDomBuilder","canvasDomBuilder","previewDomBuilder","optionsDomBuilder","isRedirected","projects","project1","projectsJson","JSON","stringify","parse","getItem","User","isEmpty","backgroundImage","backgroundSize","alt","adoptGif","About","react_router_dom","path","component","AppRouter","onSuccess","assertThisInitialized","gapi","load","auth2","init","client_id","then","signin2","render","scope","longtitle","onsuccess","onfailure","onFailure","googleUser","profile","getBasicProfile","ID","getId","fullName","getName","getImageUrl","confirm","getAuthInstance","signOut","_this4","preventDefault","addActiveClass","exact","Boolean","location","hostname","ReactDOM","mainpage_home","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.2126d1d1.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADCSURBVDhP7dAxCwFhGMDxh00Gk4nBYDAZFIvNJ/BBDOwGiUlJklAWPov4FqSUDEqUSfyf91zdqTuv3b9+3fte3b13j1hUwxpLJPWGTRHE0cLTYw6rGtjC+7BawVf0ff0sgYyz9GX1BW3cUMUG7un6O1/r4YKy2Ynk8cAeMb0RVhdnFM1OJIsdFqhDBxtYBXeUzE4khwMmCJqTrzGmzlIKOGKA0FPdUjihgz6uaMK6IXTK+pIZ3AFap9MdIW12/35M5AUsFCcIOdPfYQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEdSURBVEhL3dU/a8JAHMbxIChYlQ52aIeCU6Gbk2+hXcV306lDofSttIvuQsGhk4uLIIiCVVF0KxQ6td9HchDkvDvSdKgPfCC55H4PJP6Jjj4tPKOwO8s4ZSzxjTb+pKSODVTSwf8sKeIVKsi85ARdaPAa2/g4k5IKetBAvexr6HFlUnKKN2jQDFcw+fU7qaIPDZighv2kLjnDANo4wiUOJVXJC7RhiAsteJIsudeCK3l84RPnWghMAyqY7s4cyeEDujkNb4HyBNvmEN5HpOhF6YfNNsDFvORmzBndqA22QTZmeAnzmI6dCS1JfjzvYNZ17I2vJDlcGcNc03FQDpXY/oDeYa7r5yU4+n48YIEVHrE/XLmFBsuNFo4hUfQDRmuR/2vYwfIAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAOdJREFUOI3t0zErhWEUAOCnK9Pd76a4kjALGQ0+1ySrwXgXg9WPMBjFYJMSZTGom1kppJj9BBYZGL4zfG4ZvnPv6Cxv5z29T+e8dUbkYxK72EATL/huJLEC54FcoYNTpLwC79jpuz+Jbmtjd2ijh61KrYP9DNaKfAFfFXQbe1lsDg+Yx61y/HuMDYLNRN5W/mkxDKwV9TT2iNl/7M9YGybWxAcuMR3YU5y1MVjHIVZwg7dBMDjwe7F7mMpi8IrFSr6Kiyw2gWflBixhE0dqrFM1GtHNJ0ZxjGWcKce9rguKLroYzzzujx/AVUNl5zj/7wAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAWZJREFUOI2t0jFI1VEUx/FPGjlki9ai0CQIDQ5pCqbNTxJdykGdWmxxsUAHXYJwqMVBNHVzKWh2EAdBTDCQFhWKrMW2aFTiyXO4f+GP/u//8dQfHLiXe+73nvs7h2tWdYX5PZhDF6rwCyeXffwZVtCIZkxgHe9wv1LYIJZwM+OsDbOYjpxf0BBmcCMnpxa/0VEONoz5MrB7+IgDwdeoBgXDh3NymvAZvXiVB3uOIkpJ7OE1GlI5rVhFndD5OzFYAf9TsHScYAMfsIl6PBA6nqlW/IvAzmIL+7greLuI21mwGvzENhawjL8pUBHvsYPu5M5bPI5VN3qukgNMYQCTQpP2EiCM4WkMVoPDyBeLaE8eKGEcL9EXg8FIBHbWiBep/Tf058Gq8D0H+AWfkvWxMHO5epIDKwnGHyVRKAerxp/kYhtuZeR8xcOksrVywLTqBMN/pKrbFQa4sxJQlh7hjTCLLVeFXUmnRmtxEV/Efn8AAAAASUVORK5CYII=\"","import { createStore } from 'redux';\n\nfunction appState(state = {}, action) {\n  switch (action.type) {\n    case 'currentPage':\n      return Object.assign({}, state, {\n        currentPage: action.value\n      });\n    case 'currentColor':\n      return Object.assign({}, state, {\n        currentColor: action.value\n      });\n    case 'backColor':\n      return Object.assign({}, state, {\n        backColor: action.value\n      });\n    case 'currentTool':\n      return Object.assign({}, state, {\n        currentTool: action.value\n      });\n    case 'fps':\n      return Object.assign({}, state, {\n        fps: action.value\n      });\n    case 'customWidth':\n      return Object.assign({}, state, {\n        customWidth: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction settingsState(state = {}, action) {\n  switch (action.type) {\n    case 'setBg':\n      return Object.assign({}, state, {\n        setBg: action.value\n      });\n    case 'title':\n      return Object.assign({}, state, {\n        title: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction previewState(state = {}, action) {\n  switch (action.type) {\n    case 'gif':\n      return Object.assign({}, state, {\n        gif: action.value\n      });\n    case 'frames':\n      return Object.assign({}, state, {\n        frames: action.value\n      });\n    case 'piskelID':\n      return Object.assign({}, state, {\n        piskelID: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction canvasState(state = {}, action) {\n  switch (action.type) {\n    case 'currentCanvas':\n      return Object.assign({}, state, {\n        currentCanvas: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction userState(state = {}, action) {\n  switch (action.type) {\n    case 'name':\n      return Object.assign({}, state, {\n        name: action.value\n      });\n    case 'imageURL':\n      return Object.assign({}, state, {\n        imageURL: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction optionsState(state = {}, action) {\n  switch (action.type) {\n    case 'optionsBlock':\n      return Object.assign({}, state, {\n        optionsBlock: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction paletteState(state = {}, action) {\n  switch (action.type) {\n    case 'addColor':\n      return Object.assign({}, state, {\n        addColor: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nconst preview = createStore(previewState);\nconst store = createStore(appState);\nconst settings = createStore(settingsState);\nconst canvas = createStore(canvasState);\nconst user = createStore(userState);\nconst options = createStore(optionsState);\nconst palette = createStore(paletteState);\n\nexport { store, settings, canvas, user, options, palette, preview };\n","import $ from 'jquery';\nimport colorPicker from './images/colorpicker.png';\nimport { store } from '../../store/store';\n\n// chose color from pop out panel of colors and bind it to current color box\nfunction customedColorOnChange(id) {\n  const newValue = $(`#${id}`).val();\n  const customedColor = `rgb(${$(`#${id}`)\n    .val()\n    .match(/[A-Za-z0-9]{2}/g)\n    .map(v => {\n      return parseInt(v, 16);\n    })\n    .join(', ')})`;\n  if (id === 'customed1') {\n    store.dispatch({ type: 'currentColor', value: customedColor });\n    $('#currentColor').css({ 'background-color': customedColor });\n  }\n  if (id === 'customed2') {\n    store.dispatch({ type: 'backColor', value: customedColor });\n    $('#backColor').css({ 'background-color': customedColor });\n  }\n\n  $(`#${id}`).attr('value', newValue);\n}\n\n// change style of tool button\nfunction colorPickerOnClick() {\n  if (store.getState().currentTool !== 'colorPickerTool') {\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    $('#color-picker').addClass('hovered');\n    store.dispatch({ type: 'currentTool', value: 'colorPickerTool' });\n    $('#color-picker').focus();\n    $(document.body).css({ cursor: `url(${colorPicker}) 1 10, auto` });\n  } else if (store.getState().currentTool === 'colorPickerTool') {\n    store.dispatch({ type: 'currentTool', value: 'none' });\n    $('#color-picker').removeClass('hovered');\n    $('#color-picker').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n\nfunction rgbaToHex(r, g, b) {\n  let hexR = r.toString(16);\n  let hexG = g.toString(16);\n  let hexB = b.toString(16);\n  if (hexR.length < 2) {\n    hexR = `0${hexR}`;\n  }\n  if (hexG.length < 2) {\n    hexG = `0${hexG}`;\n  }\n  if (hexB.length < 2) {\n    hexB = `0${hexB}`;\n  }\n  return `#${hexR}${hexG}${hexB}`;\n}\n\nfunction rgbToHex(color) {\n  const hex = `${color}`;\n\n  const nums = /(.*?)rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/i.exec(hex);\n  const r = parseInt(nums[2], 10).toString(16);\n  const g = parseInt(nums[3], 10).toString(16);\n  const b = parseInt(nums[4], 10).toString(16);\n\n  return `#${r.length === 1 ? `0${r}` : r}${g.length === 1 ? `0${g}` : g}${\n    b.length === 1 ? `0${b}` : b\n  }`;\n}\n\nexport { customedColorOnChange, colorPickerOnClick, rgbaToHex, rgbToHex };\n","import React from 'react';\nimport $ from 'jquery';\nimport './tools.css';\nimport { colorPickerOnClick, customedColorOnChange, rgbaToHex, rgbToHex } from './color-picker';\nimport paintBucketOnClick from './paintBucket';\nimport penOnClick from './pen';\nimport eraserOnClick from './eraser';\nimport { store, canvas } from '../../store/store';\n\nlet toolState;\nlet currentColorState;\nlet backColorState;\nstore.subscribe(() => {\n  toolState = store.getState().currentTool;\n  currentColorState = store.getState().currentColor;\n  backColorState = store.getState().backColor;\n});\nlet currentCanvas;\ncanvas.subscribe(() => {\n  currentCanvas = canvas.getState().currentCanvas;\n});\nclass Tools extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      tool: '',\n      active: '',\n      value1: '#161030',\n      value2: '#c0c0c0',\n      pickedColor: ''\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    $(document).click(e => this.colorPickerHandleClick(e));\n  }\n\n  componentDidMount() {\n    const currentColor = $('#currentColor').css('background-color');\n    const backColor = $('#backColor').css('background-color');\n    store.dispatch({ type: 'currentColor', value: currentColor });\n    store.dispatch({ type: 'backColor', value: backColor });\n    this.mounted = true;\n    if (this.mounted === true) {\n      this.setState({ pickedColor: currentColor });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  switchColorsOnClick() {\n    store.dispatch({ type: 'currentColor', value: backColorState });\n    store.dispatch({ type: 'backColor', value: this.state.pickedColor });\n    const curColorValue = $('#customed1').val();\n    const backColorValue = $('#customed2').val();\n    $('#currentColor').css({ 'background-color': currentColorState });\n    $('#backColor').css({ 'background-color': backColorState });\n    this.setState({\n      value1: backColorValue,\n      value2: curColorValue,\n      pickedColor: currentColorState\n    });\n  }\n\n  colorPickerHandleClick(e) {\n    if (this.state.tool === 'colorPickerTool') {\n      if ($(e.target).is('.canvas')) {\n        const curCanv = document.querySelector(`#canvas${currentCanvas}`);\n        const rect = curCanv.getBoundingClientRect();\n        const x = Math.round(e.clientX - rect.left);\n        const y = Math.round(e.clientY - rect.top);\n        const ctx = curCanv.getContext('2d').getImageData(x, y, 1, 1).data;\n        const rgbColor = `rgba(${ctx[0]}, ${ctx[1]}, ${ctx[2]})`;\n        if (ctx[3] > 0) {\n          const hexColor = rgbaToHex(ctx[0], ctx[1], ctx[2]);\n          store.dispatch({ type: 'currentColor', value: rgbColor });\n          $('#currentColor').css({ 'background-color': rgbColor });\n          this.setState({\n            value1: hexColor,\n            pickedColor: rgbColor\n          });\n        }\n      }\n    }\n  }\n\n  buttonOnHoverIn(e) {\n    const id = $(e.target).attr('id');\n    if (this.mounted) {\n      this.setState({ active: id });\n    }\n  }\n\n  buttonOnHoverOut(e) {\n    $(e.target)\n      .children()\n      .removeClass('fas-hovered');\n    if (this.mounted) {\n      this.setState({ active: 'false' });\n    }\n  }\n\n  render() {\n    return (\n      <div name=\"Tools\">\n        <div className=\"palette\" id=\"palette-tool-area\">\n          <div className=\"palette-block\">\n            <button\n              id=\"paint-bucket\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                paintBucketOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`fas fa-fill-drip ${\n                  this.state.active === 'paint-bucket' ? 'fas-hovered' : ''\n                }`}\n              />\n            </button>\n          </div>\n          <div className=\"palette-block\">\n            <button\n              id=\"color-picker\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                colorPickerOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`fas fa-eye-dropper ${\n                  this.state.active === 'color-picker' ? 'fas-hovered' : ''\n                }`}\n              />\n            </button>\n          </div>\n          <div className=\"palette-block\">\n            <button\n              id=\"pen\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                penOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`fas fa-pencil-alt ${this.state.active === 'pen' ? 'fas-hovered' : ''}`}\n              />\n            </button>\n          </div>\n          <div className=\"palette-block\">\n            <button\n              id=\"eraser\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                eraserOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`fas fa-eraser ${this.state.active === 'eraser' ? 'fas-hovered' : ''}`}\n              />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"color\">\n          <div className=\"color-block hidden\">\n            <div className=\"radiobutton current\" id=\"currentColor\" />\n            <div className=\"radiobutton back\" id=\"backColor\" />\n            <button\n              type=\"button\"\n              id=\"switchHexValue\"\n              onClick={() => {\n                const hex = rgbToHex(currentColorState);\n                this.setState({ value1: hex });\n              }}\n            />\n          </div>\n          <div\n            className=\"switcher\"\n            role=\"button\"\n            onClick={() => this.switchColorsOnClick()}\n            onFocus={() => undefined}\n            onKeyPress={() => undefined}\n            tabIndex=\"-1\"\n          >\n            <i className=\"fas fa-retweet\" />\n          </div>\n          <div className=\"color-block-upper\">\n            <input\n              type=\"color\"\n              name=\"colors\"\n              className=\"input-color\"\n              id=\"customed1\"\n              value={this.state.value1}\n              onChange={() => {\n                customedColorOnChange('customed1');\n                this.setState({ value1: $('#customed1').val(), pickedColor: currentColorState });\n              }}\n            />\n          </div>\n          <div className=\"color-block-under\">\n            <input\n              type=\"color\"\n              name=\"colors\"\n              className=\"input-color\"\n              id=\"customed2\"\n              value={this.state.value2}\n              onChange={() => {\n                customedColorOnChange('customed2');\n                this.setState({ value2: $('#customed2').val() });\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Tools;\n","import $ from 'jquery';\nimport { store } from '../../store/store';\nimport paintBucketIcon from './images/bucket.png';\n\n// change tool-button style, tool does not work yet\nexport default function paintBucketOnClick() {\n  if (store.getState().currentTool !== 'paintBucketTool') {\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    $('#paint-bucket').addClass('hovered');\n    store.dispatch({ type: 'currentTool', value: 'paintBucketTool' });\n    $('#paint-bucket').focus();\n    $(document.body).css({ cursor: `url(${paintBucketIcon}) 15 15, auto` });\n  } else if (store.getState().currentTool === 'paintBucketTool') {\n    store.dispatch({ type: 'currentTool', value: '' });\n    $('#paint-bucket').removeClass('hovered');\n    $('#paint-bucket').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n","import $ from 'jquery';\nimport './tools.css';\nimport { store } from '../../store/store';\nimport penIcon from './images/pen.png';\n\n// change button-tool style if clicked\nexport default function penOnClick() {\n  if (store.getState().currentTool !== 'penTool') {\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    store.dispatch({ type: 'currentTool', value: 'penTool' });\n    $('#pen').addClass('hovered');\n    $('#pen').focus();\n    $(document.body).css({ cursor: `url(${penIcon}) 1 18, auto` });\n  } else if (store.getState().currentTool === 'penTool') {\n    store.dispatch({ type: 'currentTool', value: '' });\n    $('#pen').removeClass('hovered');\n    $('#pen').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n","import $ from 'jquery';\nimport './tools.css';\nimport { store } from '../../store/store';\nimport erserIcon from './images/eraser.png';\n\n// change button-tool style if clicked\nexport default function eraserOnClick() {\n  if (store.getState().currentTool !== 'eraserTool') {\n    store.dispatch({ type: 'currentTool', value: 'eraserTool' });\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    $('#eraser').addClass('hovered');\n    $('#eraser').focus();\n    $(document.body).css({ cursor: `url(${erserIcon}) 1 18, auto` });\n  } else if (store.getState().currentTool === 'eraserTool') {\n    store.dispatch({ type: 'currentTool', value: '' });\n    $('#eraser').removeClass('hovered');\n    $('#eraser').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n","import $ from 'jquery';\n\nconst canvasWidth =\n  window.innerWidth - 450 < window.innerHeight - 155\n    ? window.innerWidth - 450\n    : window.innerHeight - 155;\n\n$(window).bind('resize', () => {\n  for (let i = 0; i < $('.canvas-area').children().length; i += 1) {\n    // get context before resizing\n    const imageData = $(`#canvas${i + 1}`)\n      .get(0)\n      .getContext('2d')\n      .getImageData(0, 0, canvasWidth, canvasWidth);\n\n    // calc new canvas width on resize the window\n    const changeWidth =\n      window.innerWidth - 450 < window.innerHeight - 155\n        ? window.innerWidth - 450\n        : window.innerHeight - 155;\n\n    $(`#canvas${i + 1}`)\n      .attr('width', changeWidth)\n      .attr('height', changeWidth); // all canvases will resize\n\n    // put context after resizing\n    $(`#canvas${i + 1}`)\n      .get(0)\n      .getContext('2d')\n      .putImageData(imageData, 0, 0);\n  }\n  $('#new-width').text($('#canvas1').width()); // change resize options\n  $('#resize-input').attr('max', $('#canvas1').width());\n});\n","import $ from 'jquery';\nimport { store, canvas, palette } from '../../store/store';\n\nlet currentCanvas;\nlet customWidth;\nlet tool;\ncanvas.subscribe(() => {\n  currentCanvas = canvas.getState().currentCanvas;\n});\nstore.subscribe(() => {\n  customWidth = store.getState().customWidth || 33;\n  tool = store.getState().currentTool;\n});\n\nlet endX;\nlet endY;\nlet mouseDownX;\nlet mouseDownY;\n\n// drawing on mouse move\nfunction end(e) {\n  const ctx = $(`#canvas${currentCanvas}`)\n    .get(0)\n    .getContext('2d');\n  endX = e.offsetX;\n  endY = e.offsetY;\n  if (tool === 'penTool') {\n    ctx.fillStyle = $('#currentColor').css('background-color'); // color depends on chosen color\n    ctx.strokeStyle = $('#currentColor').css('background-color');\n  } else if (tool === 'eraserTool') {\n    ctx.fillStyle = 'rgba(0, 0, 0, 1)';\n    ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\n  }\n  // calc pen size according to chosen canvas width\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n  // calc position and size of canvas rectangles according to pen size\n  const mouseMoveX = Math.floor(e.offsetX / canvasSize) * canvasSize;\n  const mouseMoveY = Math.floor(e.offsetY / canvasSize) * canvasSize;\n  if (mouseDownX > endX || mouseDownY > endY) {\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  } else if (mouseDownX + canvasSize < endX || mouseDownY + canvasSize < endY) {\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  }\n}\n\n// drawing on mouse click\nfunction start(e) {\n  if (tool === 'penTool' || tool === 'eraserTool') {\n    const ctx = $(`#canvas${currentCanvas}`)\n      .get(0)\n      .getContext('2d');\n    const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n    if (tool === 'penTool') {\n      ctx.globalCompositeOperation = 'source-over';\n      ctx.fillStyle = $('#currentColor').css('background-color');\n      ctx.strokeStyle = $('#currentColor').css('background-color');\n    } else if (tool === 'eraserTool') {\n      ctx.fillStyle = 'rgba(0, 0, 0, 1)';\n      ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\n      ctx.globalCompositeOperation = 'destination-out';\n    }\n    mouseDownX = Math.floor(e.offsetX / canvasSize) * canvasSize;\n    mouseDownY = Math.floor(e.offsetY / canvasSize) * canvasSize;\n    ctx.fillRect(mouseDownX, mouseDownY, canvasSize, canvasSize);\n    $(`#canvas${currentCanvas}`).mousemove(end);\n    palette.dispatch({ type: 'addColor', value: $('#currentColor').css('background-color') });\n    $('#addColorButton').click();\n  }\n}\n\nexport { start, end };\n","import $ from 'jquery';\nimport { store, canvas, palette } from '../../store/store';\n\nlet currentCanvas;\ncanvas.subscribe(() => {\n  currentCanvas = canvas.getState().currentCanvas;\n});\n\nlet tool;\nstore.subscribe(() => {\n  tool = store.getState().currentTool;\n});\n\nfunction getColorAtPixel(imageData, x, y) {\n  const { width, data } = imageData;\n\n  return {\n    r: data[4 * (width * y + x) + 0],\n    g: data[4 * (width * y + x) + 1],\n    b: data[4 * (width * y + x) + 2],\n    a: data[4 * (width * y + x) + 3]\n  };\n}\n\nfunction setColorAtPixel(imageData, color, x, y) {\n  const { width, data } = imageData;\n\n  data[4 * (width * y + x) + 0] = color.r;\n  data[4 * (width * y + x) + 1] = color.g;\n  data[4 * (width * y + x) + 2] = color.b;\n  data[4 * (width * y + x) + 3] = color.a;\n}\nfunction colorMatch(a, b) {\n  return a.r === b.r && a.g === b.g && a.b === b.b && a.a === b.a;\n}\n\nfunction floodFill(imageData, newColor, x, y) {\n  const { width, height } = imageData;\n  const stack = [];\n  const baseColor = getColorAtPixel(imageData, x, y);\n  let clicked = { x, y };\n\n  // Check if base color and new color are the same\n  if (colorMatch(baseColor, newColor)) {\n    return;\n  }\n\n  // Add the clicked location to stack\n  stack.push({ x: clicked.x, y: clicked.y });\n\n  while (stack.length) {\n    clicked = stack.pop();\n    let goDown = true; // Vertical is assumed to be true\n    let goUp = true; // Vertical is assumed to be true\n    let goLeft = false;\n    let goRight = false;\n\n    // Move to top most goDown pixel\n    while (goUp && clicked.y >= 0) {\n      clicked.y -= 1;\n      goUp = colorMatch(getColorAtPixel(imageData, clicked.x, clicked.y), baseColor);\n    }\n\n    // Move downward\n    while (goDown && clicked.y < height) {\n      setColorAtPixel(imageData, newColor, clicked.x, clicked.y);\n\n      // Check left\n      if (\n        clicked.x - 1 >= 0 &&\n        colorMatch(getColorAtPixel(imageData, clicked.x - 1, clicked.y), baseColor)\n      ) {\n        if (!goLeft) {\n          goLeft = true;\n          stack.push({ x: clicked.x - 1, y: clicked.y });\n        }\n      } else {\n        goLeft = false;\n      }\n\n      // Check right\n      if (\n        clicked.x + 1 < width &&\n        colorMatch(getColorAtPixel(imageData, clicked.x + 1, clicked.y), baseColor)\n      ) {\n        if (!goRight) {\n          stack.push({ x: clicked.x + 1, y: clicked.y });\n          goRight = true;\n        }\n      } else {\n        goRight = false;\n      }\n\n      clicked.y += 1;\n      goDown = colorMatch(getColorAtPixel(imageData, clicked.x, clicked.y), baseColor);\n    }\n  }\n}\n\nexport default function paintIt(e) {\n  if (tool === 'paintBucketTool') {\n    const curCanv = document.querySelector(`#canvas${currentCanvas}`);\n    const ctx = curCanv.getContext('2d');\n    const newColor = $('#currentColor').css('background-color');\n    const rgb = newColor.match(/([0-9]+\\.?[0-9]*)/g);\n    const col = { r: +rgb[0], g: +rgb[1], b: +rgb[2], a: 255 };\n    ctx.fillStyle = newColor;\n    ctx.strokeStyle = newColor;\n    const rect = curCanv.getBoundingClientRect();\n    const x = Math.round(e.clientX - rect.left);\n    const y = Math.round(e.clientY - rect.top);\n    const imageData = ctx.getImageData(0, 0, curCanv.width, curCanv.height);\n    floodFill(imageData, col, x, y);\n    ctx.putImageData(imageData, 0, 0);\n\n    palette.dispatch({ type: 'addColor', value: $('#currentColor').css('background-color') });\n    $('#addColorButton').click();\n    // put canvas image in preview-box\n    const dataURL = $(`#canvas${currentCanvas}`)[0].toDataURL('image/png');\n\n    $(`#frame${currentCanvas}`)\n      .find('.preview-box')\n      .css({\n        background: `url(${dataURL})`,\n        'background-size': 'contain'\n      });\n  }\n}\n","import $ from 'jquery';\nimport { store } from '../../store/store';\n\nlet fps;\nstore.subscribe(() => {\n  fps = store.getState().fps || 3;\n});\nlet count = 0;\nlet anim;\nfunction animate() {\n  clearTimeout(anim); // stop old animation\n  const time = 1000 / fps; // calc animation speed\n  $('.preview')\n    .children()\n    .css({ display: 'none' }); // hide all canvas-images\n  if ($('.preview').children()[count]) {\n    $('.preview').children()[count].style.display = 'block'; // show only the \"count\"-th image\n  }\n  count += 1;\n  if (count === $('.preview').children().length) {\n    count = 0; // restart counting if all images were shown\n  }\n\n  anim = setTimeout(animate, time); // repeat animation\n}\n\n// make image from canvas drawing\nfunction makeImage(n) {\n  const canvasImage = new Image();\n  if ($(`#canvas${n}`)[0]) {\n    $(canvasImage)\n      .attr('id', `canvasImage${n}`)\n      .css({ width: '100%' })\n      .attr('src', $(`#canvas${n}`)[0].toDataURL('image/png'));\n  }\n  // if the image is from the same canvas should update the image\n  if ($(`#canvasImage${n}`).length) {\n    $(canvasImage)\n      .insertBefore(`#canvasImage${n}`)\n      .next()\n      .remove();\n  } else {\n    // if new canvas was made should append new image\n    $(canvasImage).appendTo('.preview');\n  }\n  if ($('.preview').children().length > 1) {\n    count = 0;\n    animate();\n  } else {\n    clearTimeout(anim);\n  }\n}\n\nlet newWindow;\nlet id = 0;\n// open new window to watch animation in full-size mode\nfunction fullSizePreview() {\n  if (newWindow) {\n    id += 1;\n    newWindow.close();\n  }\n  newWindow = window.open('about:blank', `window${id}`, 'width=300,height=300');\n\n  // cloning animation box with images to new window\n  const newPreview = $('.preview')\n    .clone()\n    .appendTo(newWindow.document.body)\n    .css({ display: 'flex', 'justify-content': 'center', 'align-items': 'center', height: '100%' });\n  $(newWindow.document.body).css({\n    display: 'flex',\n    'justify-content': 'center',\n    'align-items': 'center'\n  });\n\n  const newFps = fps;\n  let newCount = 0;\n\n  function newAnimate() {\n    // clearTimeout(newAnim);\n    const time = 1000 / newFps;\n    newPreview.children().css({ display: 'none' });\n    if (newPreview.children()[newCount]) {\n      newPreview.children()[newCount].style.display = 'block';\n    }\n    newCount += 1;\n    if (newCount === newPreview.children().length) {\n      newCount = 0;\n    }\n    setTimeout(newAnimate, time);\n  }\n  // when new window loaded should start animation\n  $(newWindow).ready(newAnimate);\n}\n\nexport { makeImage, animate, fullSizePreview };\n","import React from 'react';\nimport $ from 'jquery';\nimport './resizeWindow';\nimport './canvas.css';\nimport { canvas } from '../../store/store';\nimport { start } from './drawing';\nimport paintIt from './paint';\nimport { makeImage } from '../preview/preview';\n\nlet currentCanvas;\ncanvas.subscribe(() => {\n  currentCanvas = canvas.getState().currentCanvas;\n});\n\nclass Canvas extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      size: '',\n      curCanvas: ''\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    const canvasWidth =\n      window.innerWidth - 450 < window.innerHeight - 155\n        ? window.innerWidth - 450\n        : window.innerHeight - 155;\n    this.setState({ size: canvasWidth });\n\n    $(document).click(() => this.penHandleClick());\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    if (this.mounted) {\n      this.setState({ curCanvas: currentCanvas });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  penHandleClick() {\n    if (this.mounted) {\n      this.setState({ curCanvas: currentCanvas });\n    }\n\n    // remove old events\n    $(`#canvas${this.state.curCanvas}`)\n      .unbind('mousedown')\n      .unbind('mouseup')\n      .unbind('click');\n    // initialize new events\n    $(`#canvas${this.state.curCanvas}`).click(paintIt);\n    $(`#canvas${this.state.curCanvas}`).mousedown(start);\n    $(`#canvas${this.state.curCanvas}`).mouseup(() => {\n      $(`#canvas${this.state.curCanvas}`).off('mousemove');\n      // create canvas-image url\n      const dataURL = $(`#canvas${this.state.curCanvas}`)[0].toDataURL('image/png');\n      // put canvas image in preview-box\n      $(`#frame${this.state.curCanvas}`)\n        .find('.preview-box')\n        .css({\n          background: `url(${dataURL})`,\n          'background-size': 'contain'\n        });\n      // create image for animation preview\n      setTimeout(() => {\n        makeImage(this.state.curCanvas);\n      }, 500);\n    });\n  }\n\n  render() {\n    return (\n      <canvas\n        id=\"canvas1\"\n        className=\"canvas hidden\"\n        width={this.state.size}\n        height={this.state.size}\n      />\n    );\n  }\n}\n\nexport default Canvas;\n","import React from 'react';\nimport $ from 'jquery';\nimport './frames.css';\nimport {\n  hoverIn,\n  hoverOut,\n  addNewFrame,\n  removeFrame,\n  copyFrame,\n  dragFrame,\n  dragOff\n} from './framesManager';\nimport { openCanvas } from './canvasManager';\nimport { store } from '../../store/store';\n\nlet customWidth;\nstore.subscribe(() => {\n  customWidth = store.getState().customWidth;\n});\n\nclass Frames extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidMount() {\n    $('.frame')\n      .hover(hoverIn, hoverOut)\n      .click(openCanvas);\n    $('.removeFrame').click(removeFrame);\n    $('.copyFrame').click(copyFrame);\n    $('.dragFrame')\n      .mousedown(dragFrame)\n      .mouseup(dragOff);\n\n    // make the first frame active\n    $('#frame1')\n      .click(openCanvas)\n      .click();\n\n    // calculating canvas resize options\n    $('#current-width').text(customWidth);\n    $('#current-height').text(customWidth);\n    $('#new-width').text($('#canvas1').width());\n    $('#resize-input').attr('max', $('#canvas1').width());\n  }\n\n  render() {\n    return (\n      <div className=\"frame-box\">\n        <ul id=\"sortable\" className=\"frame-list\">\n          <li className=\"ui-state-default frame activeFrame\" id=\"frame1\">\n            <p id=\"preview-box\" className=\"preview-box\" />\n            <title className=\"number\">1</title>\n            <span className=\"removeFrame minorZ\">\n              <i className=\"fas fa-trash-alt\" />\n            </span>\n            <span className=\"dragFrame minorZ\">\n              <i className=\"fas fa-arrows-alt\" />\n            </span>\n            <span className=\"copyFrame minorZ\">\n              <i className=\"fas fa-copy\" />\n            </span>\n          </li>\n        </ul>\n        <button className=\"addNewFrame\" onClick={addNewFrame} type=\"button\">\n          Add new frame\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default Frames;\n","import $ from 'jquery';\nimport { makeImage } from '../../screens/preview/preview';\nimport { canvas } from '../../store/store';\n\n// show canvas according to active frame, hide other canvas\nfunction openCanvas() {\n  const num = $(this)\n    .find('.number')\n    .text(); // calc target frame ID\n  canvas.dispatch({ type: 'currentCanvas', value: +num });\n  $('.canvas').addClass('hidden'); // hide all canvas\n  $(`#canvas${num}`).removeClass('hidden'); // show current canvas\n  if ($('.activeFrame')) {\n    $('.activeFrame').removeClass('activeFrame');\n  }\n  $(this).toggleClass('activeFrame'); // make current frame active\n  setTimeout(() => {\n    makeImage(+num); // automatically make image of current canvas for animation\n  }, 200);\n}\n\n// create new canvas if new frame was created\nfunction newCanvas(n) {\n  const canvasWidth =\n    window.innerWidth - 450 < window.innerHeight - 155\n      ? window.innerWidth - 450\n      : window.innerHeight - 155;\n  const newCanvasEl = $('<canvas/>', {\n    class: 'canvas hidden',\n    id: `canvas${n}`\n  })\n    .attr('width', canvasWidth)\n    .attr('height', canvasWidth);\n  newCanvasEl.appendTo('.canvas-area');\n}\n\n// copy target frame's canvas with content if the frame was cloned\nfunction copyCanvas(n) {\n  const cloneWrapper = $(`#canvas${n}`)\n    .clone()\n    .attr('id', `canvas${+n + 1}`)\n    .attr('width', $(`#canvas${n}`).width())\n    .attr('height', $(`#canvas${n}`).width())\n    .insertAfter(`#canvas${n}`);\n  const originalContext = $(`#canvas${n}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(\n    0,\n    0,\n    $(`#canvas${n}`).width(),\n    $(`#canvas${n}`).width()\n  );\n  const cloneContext = cloneWrapper.get(0).getContext('2d');\n  cloneContext.putImageData(imageData, 0, 0);\n}\nfunction copyCanvasContext(n) {\n  const originalContext = $(`#canvas${n}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(\n    0,\n    0,\n    $(`#canvas${n}`).width(),\n    $(`#canvas${n}`).width()\n  );\n  return imageData;\n}\n\nfunction putImage(n, imageData) {\n  const cloneContext = $(`#canvas${n}`)\n    .get(0)\n    .getContext('2d');\n  cloneContext.putImageData(imageData, 0, 0);\n}\n\nexport { copyCanvas, newCanvas, openCanvas, copyCanvasContext, putImage };\n","import $ from 'jquery';\nimport 'jquery-ui-sortable-npm';\nimport { makeImage } from '../../screens/preview/preview';\nimport { openCanvas, newCanvas, copyCanvas, copyCanvasContext, putImage } from './canvasManager';\n\n// show/hide frame buttons\nfunction hoverIn() {\n  const children = $(this).find('span');\n  if (children.hasClass('minorZ')) {\n    children.removeClass('minorZ');\n    if ($('#sortable').children().length === 1) {\n      $('#frame1')\n        .find('.removeFrame')\n        .addClass('minorZ');\n      $('#frame1')\n        .find('.dragFrame')\n        .addClass('minorZ');\n    }\n  }\n}\nfunction hoverOut() {\n  const children = $(this).find('span');\n  if (!children.hasClass('minorZ')) {\n    children.addClass('minorZ');\n  }\n  if ($('#sortable').children().length === 1) {\n    $('#frame1')\n      .find('.copyFrame')\n      .addClass('minorZ');\n    $('#frame1')\n      .find('.dragFrame')\n      .addClass('minorZ');\n  }\n}\n// update IDs after adding/removing elements\nfunction updateId() {\n  for (let i = 0; i < $('#sortable').children().length; i += 1) {\n    $('#sortable').children()[i].id = `frame${i + 1}`;\n    const child = $($('#sortable').children()[i]);\n    child.find('.number').text(i + 1);\n    makeImage(i + 1);\n  }\n  for (let i = 0; i < $('#canvas-area').children().length; i += 1) {\n    $('#canvas-area').children()[i].id = `canvas${i + 1}`;\n  }\n  for (let i = 0; i < $('.preview').children().length; i += 1) {\n    $('.preview').children()[i].id = `canvasImage${i + 1}`;\n  }\n}\n\nfunction dragFrame() {\n  $('#sortable').sortable();\n  $('#sortable').sortable('option', 'disabled', false);\n  $('#sortable').disableSelection();\n}\n\nfunction dragOff(e) {\n  $('#sortable').sortable('option', 'disabled', true);\n  setTimeout(() => {\n    const dragged = $(e.currentTarget)\n      .parent()\n      .find('.number')\n      .text();\n    updateId();\n    const target = $(e.currentTarget)\n      .parent()\n      .find('.number')\n      .text();\n    $(e.currentTarget)\n      .parent()\n      .click();\n    const draggedImage = copyCanvasContext(dragged);\n    const targetImage = copyCanvasContext(target);\n    putImage(dragged, targetImage);\n    putImage(target, draggedImage);\n    updateId();\n  }, 200);\n}\n\nfunction removeFrame() {\n  // calculating target's ID\n  const num = $(this)\n    .parent()\n    .find('.number')\n    .text();\n  // remove all related elements\n  $(`#frame${num}`).remove();\n  $(`#canvasImage${num}`).remove();\n  $(`#canvas${num}`).remove();\n  updateId();\n  $(`#frame${+num - 1}`).click(); // make previous frame active\n}\n\nfunction copyFrame() {\n  // calculating target's ID\n  const num = $(this)\n    .parent()\n    .find('.number')\n    .text();\n  // cloning target frame\n  $(`#frame${num}`)\n    .clone()\n    .insertAfter(`#frame${num}`)\n    .attr('id', `frame${+num + 1}`)\n    .removeClass('activeFrame')\n    .hover(hoverIn, hoverOut)\n    .click(openCanvas);\n  // cloning target canvas image\n  copyCanvas(num);\n  // bind frame events\n  $(`#frame${+num + 1}`)\n    .find('.removeFrame')\n    .click(removeFrame);\n  $(`#frame${+num + 1}`)\n    .find('.copyFrame')\n    .click(copyFrame);\n  $(`#frame${+num + 1}`)\n    .find('.dragFrame')\n    .mousedown(dragFrame)\n    .mouseup(dragOff);\n  // make copied frame active\n  setTimeout(() => {\n    $(`#frame${+num + 1}`).click();\n  }, 100);\n  updateId();\n  // cloning target frame preview image\n  const dataURL = $(`#canvas${num}`)[0].toDataURL('image/png');\n  if (dataURL) {\n    $(`#frame${+num + 1}`)\n      .find('.preview-box')\n      .css({\n        background: `url(${dataURL})`,\n        'background-size': 'contain'\n      });\n  }\n  // update frame images and animation\n  for (let i = 0; i < $('.frame-list').children().length; i += 1) {\n    makeImage(i + 1);\n  }\n}\n\nfunction addNewFrame() {\n  const count = $('.frame-list').children().length + 1; // calc ID for new frame\n  $('.frame')\n    .first()\n    .clone()\n    .appendTo('.frame-list')\n    .attr('id', `frame${count}`)\n    .removeClass('activeFrame')\n    .hover(hoverIn, hoverOut)\n    .click(openCanvas)\n    .find('.preview-box')\n    .css({ background: 'none' }); // clear preview-box background from first frame\n  $('.number')\n    .last()\n    .text(count); // update number of frame\n  newCanvas(count);\n  $(`#frame${count}`)\n    .find('.removeFrame')\n    .click(removeFrame);\n  $(`#frame${count}`)\n    .find('.copyFrame')\n    .click(copyFrame);\n  $(`#frame${count}`)\n    .find('.dragFrame')\n    .mousedown(dragFrame)\n    .mouseup(dragOff);\n  setTimeout(() => {\n    $(`#frame${count}`).click(); // make new frame active\n  }, 100);\n}\n\nexport { hoverIn, hoverOut, addNewFrame, removeFrame, copyFrame, dragFrame, dragOff, updateId };\n","import React from 'react';\nimport $ from 'jquery';\nimport './palettes.css';\nimport { palette, store } from '../../../store/store';\n\nlet newColor;\npalette.subscribe(() => {\n  newColor = palette.getState().addColor;\n});\n\nclass Palettes extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      hovered: '',\n      mouseEnter: false,\n      color: [],\n      changed: false,\n      active: ''\n    };\n  }\n\n  popHintOnMouseOver(e) {\n    const hovered = e.target.getAttribute('id');\n    if (this.state.hovered === hovered) {\n      this.setState({ hovered: '' });\n    } else {\n      this.setState({ hovered });\n    }\n  }\n\n  mouseIn() {\n    this.setState({ mouseEnter: true });\n  }\n\n  mouseOut() {\n    this.setState({ mouseEnter: false });\n  }\n\n  addNewColor() {\n    if (this.state.color.indexOf(newColor) === -1) {\n      this.state.color.push(newColor);\n      this.setState({ changed: true, active: newColor });\n    }\n  }\n\n  changeCurColor(e) {\n    const color = $(e.target).css('background-color');\n    this.setState({ active: color });\n    $('#currentColor').css({ background: color });\n    store.dispatch({ type: 'currentColor', value: color });\n    $('#switchHexValue').click();\n  }\n\n  render() {\n    return (\n      <div\n        className=\"palettes-box\"\n        onMouseOver={e => this.popHintOnMouseOver(e)}\n        onFocus={() => undefined}\n      >\n        <div className=\"palettes-outlet\">\n          <span className=\"palettes-title\">Palettes</span>\n        </div>\n        <div className=\"palettes-buttons-box\">\n          <button\n            type=\"button\"\n            className=\"palettes-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"palettes-plus\" className=\"fas fa-plus\" />\n          </button>\n          <button type=\"button\" id=\"palettes-dropdown-list\" className=\"palettes-button colors-list\">\n            Current colors\n            <i\n              className={`colors-list-arrow fas fa-sort-down ${\n                this.state.hovered === 'palettes-dropdown-list' ? 'colors-list-arrow-hovered' : ''\n              }`}\n            />\n          </button>\n          <button\n            type=\"button\"\n            className=\"palettes-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"palettes-edit\" className=\"fas fa-pen\" />\n          </button>\n          <p\n            className={`hint palettes-plus ${\n              this.state.mouseEnter === true && this.state.hovered === 'palettes-plus'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Create a new palette\n            <i className=\"palettes-plus-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`hint palettes-edit ${\n              this.state.mouseEnter === true && this.state.hovered === 'palettes-edit'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Palette options\n            <i className=\"palettes-edit-arrow fas fa-sort-down\" />\n          </p>\n        </div>\n        <ul className=\"palettes-list\">\n          <span className={`palette-colors-isempty ${this.state.changed === true ? 'hidden' : ''}`}>\n            No colors in this palette yet\n          </span>\n          {this.state.color.map(item => (\n            <li key={item} id={item} className=\"palette-sample-list\">\n              <div\n                style={{ background: item }}\n                className={`palette-sample ${\n                  this.state.active === item ? 'active-palette-sample' : ''\n                }`}\n                onClick={e => this.changeCurColor(e)}\n                tabIndex=\"-1\"\n                onKeyPress={() => undefined}\n                onFocus={() => undefined}\n                role=\"button\"\n              />\n            </li>\n          ))}\n        </ul>\n        <button\n          id=\"addColorButton\"\n          className=\"hidden\"\n          type=\"button\"\n          onClick={() => this.addNewColor()}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Palettes;\n","import React from 'react';\nimport './preview.css';\nimport { fullSizePreview } from './preview';\n\nclass Preview extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: ''\n    };\n    this.mounted = false;\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  hoverIn() {\n    if (this.mounted) {\n      this.setState({ active: true });\n    }\n  }\n\n  hoverOut() {\n    if (this.mounted) {\n      this.setState({ active: false });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        id=\"preview-area\"\n        className=\"preview-area\"\n        onMouseEnter={() => this.hoverIn()}\n        onMouseLeave={() => this.hoverOut()}\n      >\n        <div\n          className={`preview-open ${this.state.active ? '' : 'hidden'}`}\n          id=\"preview-open\"\n          role=\"button\"\n          tabIndex=\"-1\"\n          onKeyPress={undefined}\n          onClick={fullSizePreview} // open animation in full size mode\n        >\n          <i className=\"fas fa-external-link-alt\" />\n        </div>\n        <div className=\"preview\" />\n      </div>\n    );\n  }\n}\n\nexport default Preview;\n","import React from 'react';\nimport './layers-list.css';\n\nclass Layers extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      hovered: '',\n      mouseEnter: false\n    };\n  }\n\n  popHintOnMouseOver(e) {\n    const hovered = e.target.getAttribute('id');\n    if (this.state.hovered === hovered) {\n      this.setState({ hovered: '' });\n    } else {\n      this.setState({ hovered });\n    }\n  }\n\n  mouseIn() {\n    this.setState({ mouseEnter: true });\n  }\n\n  mouseOut() {\n    this.setState({ mouseEnter: false });\n  }\n\n  render() {\n    return (\n      <div\n        className=\"layers-box\"\n        onMouseOver={e => this.popHintOnMouseOver(e)}\n        onFocus={() => undefined}\n      >\n        <div className=\"layer-outlet\">\n          <span className=\"layer-title\">Layers</span>\n          <i\n            id=\"layers-preview\"\n            className=\"fas fa-eye\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          />\n          <p\n            className={`hint layers-preview ${\n              this.state.hovered === 'layers-preview' ? '' : 'hidden'\n            }`}\n          >\n            Preview all layers\n            <i className=\"layers-preview-arrow fas fa-sort-down\" />\n          </p>\n        </div>\n        <div className=\"layer-buttons-box\">\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-plus\" className=\"fas fa-plus\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-up\" className=\"fas fa-arrow-up\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-down\" className=\"fas fa-arrow-down\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-edit-name\" className=\"fas fa-pen\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-merge\" className=\"fas fa-compress\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-remove\" className=\"fas fa-times\" />\n          </button>\n          <p\n            className={`hint layers-plus ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-plus' ? '' : 'hidden'\n            }`}\n          >\n            Create a layer\n            <i className=\"layers-plus-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`hint layers-up ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-up' ? '' : 'hidden'\n            }`}\n          >\n            Move layer up\n            <i className=\"layers-up-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`hint layers-down ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-down' ? '' : 'hidden'\n            }`}\n          >\n            Move layer down\n            <i className=\"layers-down-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`hint layers-edit-name ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-edit-name'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Edit layer name\n            <i className=\"layers-edit-name-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`big hint layers-merge ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-merge'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Merge with layer below\n            <i className=\"layers-merge-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`big hint layers-remove ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-remove'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Delete selected layer\n            <i className=\"layers-remove-arrow fas fa-sort-down\" />\n          </p>\n        </div>\n        <ul className=\"layer-list\">\n          <li className=\"layer-item\">Layer 1</li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default Layers;\n","import React from 'react';\nimport $ from 'jquery';\nimport './settings.css';\nimport { options } from '../../../store/store';\n\n// let customWidth;\nlet optionsBlock;\noptions.subscribe(() => {\n  // customWidth = store.getState().customWidth || 33;\n  optionsBlock = options.getState().optionsBlock;\n});\n\nfunction setBG(background) {\n  $('.frame').css({ background });\n  $('.canvas').css({ background });\n}\nclass Settings extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: ''\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  addActiveOnClick(e) {\n    const clicked = e.target.getAttribute('id');\n    const bg = $(e.target).css('background-image');\n    setBG(bg);\n    this.setState({ active: clicked });\n  }\n\n  render() {\n    return (\n      <div\n        className={`general-settings-block ${optionsBlock === 'settings' ? 'flexed' : 'hidden'}`}\n      >\n        <div className=\"current-bg\">\n          <span className=\"default-bg bold\">Background</span>\n          <div className=\"general-settings-buttons-area\">\n            <button\n              type=\"button\"\n              id=\"bg1\"\n              onClick={e => this.addActiveOnClick(e)}\n              className={`general-settings-button bg1 ${\n                this.state.active === 'bg1' ? 'active-button' : 'not-active-button'\n              }`}\n            />\n            <button\n              type=\"button\"\n              id=\"bg2\"\n              onClick={e => this.addActiveOnClick(e)}\n              className={`general-settings-button bg2 ${\n                this.state.active === 'bg2' ? 'active-button' : 'not-active-button'\n              }`}\n            />\n            <button\n              type=\"button\"\n              id=\"bg3\"\n              onClick={e => this.addActiveOnClick(e)}\n              className={`general-settings-button bg3 ${\n                this.state.active === 'bg3' ? 'active-button' : 'not-active-button'\n              }`}\n            />\n            <button\n              type=\"button\"\n              id=\"bg4\"\n              onClick={e => this.addActiveOnClick(e)}\n              className={`general-settings-button bg4 ${\n                this.state.active === 'bg4' ? 'active-button' : 'not-active-button'\n              }`}\n            />\n          </div>\n          <p>Set default background</p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Settings;\n","import React from 'react';\nimport $ from 'jquery';\nimport './resize.css';\nimport { store, options } from '../../../store/store';\n\nlet customWidth;\nlet optionsBlock;\nstore.subscribe(() => {\n  customWidth = store.getState().customWidth || 33;\n});\noptions.subscribe(() => {\n  optionsBlock = options.getState().optionsBlock;\n});\nclass ResizeCanvas extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      customWidth: ''\n    };\n  }\n\n  componentDidMount() {\n    // calculating canvas resize options\n    $('#current-width').text(customWidth);\n    $('#current-height').text(customWidth);\n    $('#new-width').text($('#canvas1').width());\n    $('#resize-input').attr('max', `${$('#canvas1').width()}`);\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  resizeCanvasOnClickHandler() {\n    if ($('#resize-input').val()) {\n      const inputVal = +$('#resize-input').val();\n      const maxSize = +$('#resize-input').attr('max');\n      if (inputVal > 0 && inputVal < maxSize) {\n        store.dispatch({ type: 'customWidth', value: inputVal });\n        if (this.mounted) {\n          this.setState({ customWidth });\n        }\n        $('#resize-input').val('');\n        $('#error-message').text('');\n      } else {\n        $('#error-message').text(\n          `Size can be from ${$('#resize-input').attr('min')} to ${$('#resize-input').attr(\n            'max'\n          )} px`\n        );\n        $('#resize-input').val('');\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={`resize-canvas-block ${\n          optionsBlock === 'resize-settings' ? 'flexed' : 'hidden'\n        }`}\n      >\n        <div className=\"current-size\">\n          <span className=\"default-size bold\">current size</span>\n          <p>\n            {`Width `}\n            <span className=\"default-width bold\" id=\"current-width\">\n              {this.state.customWidth}\n            </span>\n            px\n          </p>\n          <p>\n            Height\n            <span className=\"default-width bold\" id=\"current-height\">\n              {this.state.customWidth}\n            </span>\n            px\n          </p>\n        </div>\n        <div className=\"resize-canvas\">\n          <span className=\"resize bold\">resize</span>\n          <p className=\"new-width-block\">\n            <span>1 - </span>\n            <span id=\"new-width\" className=\"canvas-width\" />\n            <span>px</span>\n            <input\n              type=\"number\"\n              className=\"resize-input\"\n              id=\"resize-input\"\n              min=\"1\"\n              onKeyPress={e => {\n                if (e.key === 'Enter') {\n                  this.resizeCanvasOnClickHandler();\n                }\n              }}\n            />\n          </p>\n          <p id=\"error-message\" className=\"error-message\" />\n          <button\n            id=\"resize-button\"\n            className=\"resize-button\"\n            type=\"button\"\n            onClick={() => this.resizeCanvasOnClickHandler()}\n          >\n            Change canvas size\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ResizeCanvas;\n","import $ from 'jquery';\nimport { GIFEncoder } from '../../gifModule/jsgif-master/GIFEncoder';\nimport encode64 from '../../gifModule/jsgif-master/b64';\nimport { store, canvas, settings } from '../../../store/store';\n\nlet delay;\nstore.subscribe(() => {\n  const fps = store.getState().fps || 3;\n  delay = 1000 / fps;\n});\nlet currentCanvas;\ncanvas.subscribe(() => {\n  currentCanvas = canvas.getState().currentCanvas;\n});\nlet filename;\nsettings.subscribe(() => {\n  filename = settings.getState().title;\n});\n\nfunction debugBase64(base64URL) {\n  const win = window.open();\n  $(win.document.body).css({\n    display: 'flex',\n    width: '100vw',\n    heigh: '100vh',\n    'justify-content': 'center',\n    'align-items': 'center',\n    background: 'whitesmoke'\n  });\n  $('<img></img>', {\n    src: base64URL\n  }).appendTo(win.document.body);\n}\n\nfunction debugBase64WithText(array, base64URL) {\n  const win = window.open();\n  $(win.document.body).css({\n    display: 'flex',\n    'flex-direction': 'column',\n    width: '100vw',\n    height: '100vh',\n    'align-items': 'center',\n    background: 'whitesmoke',\n    overflow: 'hidden'\n  });\n  const ancor = $('<div></div>', {\n    id: 'ancor',\n    width: '100%',\n    height: '50%'\n  })\n    .appendTo(win.document.body)\n    .css({\n      width: '80%',\n      height: '50%',\n      background: 'white',\n      'overflow-y': 'scroll',\n      'margin-bottom': '25px',\n      border: '1px solid black'\n    });\n  for (let i = 0; i < array.length; i += 1) {\n    $('<img></img>', {\n      src: array[i],\n      width: '25%'\n    })\n      .appendTo(ancor)\n      .css({ border: '1px solid black' });\n  }\n  $('<div></div>', {\n    text: base64URL\n  })\n    .appendTo(win.document.body)\n    .css({\n      display: 'flex',\n      'flex-wrap': 'wrap',\n      width: '80%',\n      height: '40%',\n      'overflow-y': 'scroll',\n      'word-break': 'break-word'\n    });\n}\n\nfunction saveAsGif() {\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  for (let i = 0; i < $('#canvas-area').children().length; i += 1) {\n    const curCanv = document.querySelector(`#canvas${i + 1}`);\n    const originalContext = $(`#canvas${i + 1}`)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(\n      0,\n      0,\n      $(`#canvas${i + 1}`).width(),\n      $(`#canvas${i + 1}`).width()\n    );\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  }\n  encoder.finish();\n  filename = filename || 'New Piskel-clone';\n  encoder.download(`${filename}.gif`);\n}\n\nfunction uploadToUrl() {\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  for (let i = 0; i < $('#canvas-area').children().length; i += 1) {\n    const curCanv = document.querySelector(`#canvas${i + 1}`);\n    const originalContext = $(`#canvas${i + 1}`)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(\n      0,\n      0,\n      $(`#canvas${i + 1}`).width(),\n      $(`#canvas${i + 1}`).width()\n    );\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  }\n  encoder.finish();\n  const binaryGif = encoder.stream().getData(); // notice this is different from the as3gif package!\n  const dataUrl = `data:image/gif;base64,${encode64(binaryGif)}`;\n  return dataUrl;\n}\n\nfunction downloadPng() {\n  const i = currentCanvas;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n  const width = $(`#canvas${i}`).width();\n  const originalContext = $(`#canvas${i}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(0, 0, width, width);\n  let len = imageData.data.length;\n  const newArr = [];\n  let map1;\n  let map2;\n  let count = 0;\n  while (len > 0) {\n    map1 = imageData.data.slice(count, count + 4);\n    map2 = map1;\n    if (map2.every(item => item === 0)) {\n      map2 = map2.map(() => 255);\n    }\n    newArr.push(...map2);\n    count += 4;\n    len -= 4;\n  }\n  const fixedNewArray = Uint8ClampedArray.from(newArr);\n  const newImage = new ImageData(fixedNewArray, width, width);\n  encoder.setSize(width, width);\n  encoder.addFrame(newImage, true);\n  encoder.finish();\n  filename = filename || 'New Piskel-clone';\n  encoder.download(`${filename}.png`);\n}\n\nexport { saveAsGif, uploadToUrl, downloadPng, debugBase64, debugBase64WithText };\n","import React from 'react';\nimport $ from 'jquery';\nimport './save.css';\nimport { options, settings, preview, user } from '../../../store/store';\nimport { uploadToUrl } from '../export/fromCanvasToFile';\n\nlet optionsBlock;\noptions.subscribe(() => {\n  optionsBlock = options.getState().optionsBlock;\n});\nlet name;\nuser.subscribe(() => {\n  name = user.getState().name;\n});\nclass SaveOptions extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      value: 'New Piskel',\n      isLogin: false\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    settings.dispatch({ type: 'title', value: $('#title-input').val() });\n    if (name) {\n      this.setState({ isLogin: true });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onChangeHandler() {\n    const newValue = $('#title-input').val();\n    this.setState({ value: newValue });\n    settings.dispatch({ type: 'title', value: newValue });\n    const array = [];\n    for (let i = 0; i < $('.preview').children().length; i += 1) {\n      array.push($('.preview').children()[i].src);\n    }\n    const dataUrl = uploadToUrl();\n    preview.dispatch({ type: 'gif', value: dataUrl });\n    preview.dispatch({ type: 'frames', value: array });\n    const j = [];\n    let x;\n    for (let i = 0; i < 20; i += 1) {\n      x = [[48, 57], [65, 90], [97, 122], [1040, 1103]][(Math.random() * 4) >> 0];\n      j[i] = String.fromCharCode(((Math.random() * (x[1] - x[0] + 1)) >> 0) + x[0]);\n    }\n    const piskelID = j.join('');\n    preview.dispatch({ type: 'piskelID', value: piskelID });\n    $('#userAddPiskel').click();\n  }\n\n  updateState() {\n    if (name) {\n      this.setState({ isLogin: true });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={`save-settings-block ${optionsBlock === 'save-settings' ? 'flexed' : 'hidden'}`}\n      >\n        <div className=\"sprite-info-block\">\n          <span className=\"sprite-info bold\">Sprite information</span>\n          <span className=\"label-title\">Title:</span>\n          <input className=\"title-input\" id=\"title-input\" defaultValue={this.state.value} />\n          <span className=\"label-description\">Description:</span>\n          <textarea rows=\"1\" cols=\"6\" className=\"description-input\" id=\"description-input\" />\n        </div>\n        <div className=\"save-online-block\">\n          <span className=\"save-online bold\">Save online</span>\n          <button\n            id=\"save-online\"\n            className={`save-online-button ${this.state.isLogin ? '' : 'hidden'}`}\n            type=\"button\"\n            onClick={() => this.onChangeHandler()}\n          >\n            Save to your gallery\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => {\n              $('.abcRioButton.abcRioButtonLightBlue').click();\n            }}\n            className={`save-online-button ${this.state.isLogin ? 'hidden' : ''}`}\n          >\n            Sign in to save to your gallery\n          </button>\n          <p className=\"save-online-info\">Your piskel will be stored online in your gallery</p>\n          <button\n            type=\"button\"\n            className=\"hidden\"\n            id=\"updateSaveButtonLoggedIn\"\n            onClick={() => this.updateState()}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SaveOptions;\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable prettier/prettier */\n/* eslint-disable func-names */\n/* eslint-disable no-bitwise */\n/* eslint-disable prefer-rest-params */\n/* eslint-disable no-empty */\n/* eslint-disable no-var */\n/* eslint-disable no-use-before-define */\n/* eslint-disable no-lonely-if */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-shadow */\n/* eslint-disable prefer-const */\n/*\n * NeuQuant Neural-Net Quantization Algorithm\n * ------------------------------------------\n *\n * Copyright (c) 1994 Anthony Dekker\n *\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\n * the algorithm.\n *\n * Any party obtaining a copy of these files from the author, directly or\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\n * this software and documentation files (the \"Software\"), including without\n * limitation the rights to use, copy, modify, merge, publish, distribute,\n * sublicense, and/or sell copies of the Software, and to permit persons who\n * receive copies from any such party to do so, with the only requirement being\n * that this copyright notice remain intact.\n */\n\n/*\n * This class handles Neural-Net quantization algorithm\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\n\nconst NeuQuant = function () {\n  let exports = {};\n  let netsize = 256; /* number of colours used */\n\n  /* four primes near 500 - assume no image has a length so large */\n  /* that it is divisible by all four primes */\n\n  let prime1 = 499;\n  let prime2 = 491;\n  let prime3 = 487;\n  let prime4 = 503;\n  let minpicturebytes = 3 * prime4; /* minimum size for input image */\n\n  /*\n   * Program Skeleton ---------------- [select samplefac in range 1..30] [read\n   * image from input file] pic = (unsigned char*) malloc(3*width*height);\n   * initnet(pic,3*width*height,samplefac); learn(); unbiasnet(); [write output\n   * image header, using writecolourmap(f)] inxbuild(); write output image using\n   * inxsearch(b,g,r)\n   */\n\n  /*\n   * Network Definitions -------------------\n   */\n\n  let maxnetpos = netsize - 1;\n  let netbiasshift = 4; /* bias for colour values */\n  let ncycles = 100; /* no. of learning cycles */\n\n  /* defs for freq and bias */\n  let intbiasshift = 16; /* bias for fractions */\n  let intbias = 1 << intbiasshift;\n  let gammashift = 10; /* gamma = 1024 */\n  let gamma = 1 << gammashift;\n  let betashift = 10;\n  let beta = intbias >> betashift; /* beta = 1/1024 */\n  let betagamma = intbias << (gammashift - betashift);\n\n  /* defs for decreasing radius factor */\n  let initrad = netsize >> 3; /* for 256 cols, radius starts */\n  let radiusbiasshift = 6; /* at 32.0 biased by 6 bits */\n  let radiusbias = 1 << radiusbiasshift;\n  let initradius = initrad * radiusbias; /* and decreases by a */\n  let radiusdec = 30; /* factor of 1/30 each cycle */\n\n  /* defs for decreasing alpha factor */\n  let alphabiasshift = 10; /* alpha starts at 1.0 */\n  let initalpha = 1 << alphabiasshift;\n  let alphadec; /* biased by 10 bits */\n\n  /* radbias and alpharadbias used for radpower calculation */\n  let radbiasshift = 8;\n  let radbias = 1 << radbiasshift;\n  let alpharadbshift = alphabiasshift + radbiasshift;\n  let alpharadbias = 1 << alpharadbshift;\n\n  /*\n   * Types and Global Variables --------------------------\n   */\n\n  let thepicture; /* the input image itself */\n  let lengthcount; /* lengthcount = H*W*3 */\n  let samplefac; /* sampling factor 1..30 */\n\n  // typedef int pixel[4]; /* BGRc */\n  let network; /* the network itself - [netsize][4] */\n  let netindex = [];\n\n  /* for network lookup - really 256 */\n  let bias = [];\n\n  /* bias and freq arrays for learning */\n  let freq = [];\n  let radpower = [];\n\n  let NeuQuant = (exports.NeuQuant = function NeuQuant(thepic, len, sample) {\n    let i;\n    let p;\n\n    thepicture = thepic;\n    lengthcount = len;\n    samplefac = sample;\n\n    network = new Array(netsize);\n\n    for (i = 0; i < netsize; i++) {\n      network[i] = new Array(4);\n      p = network[i];\n      p[0] = p[1] = p[2] = (i << (netbiasshift + 8)) / netsize;\n      freq[i] = intbias / netsize; /* 1/netsize */\n      bias[i] = 0;\n    }\n  });\n\n  let colorMap = function colorMap() {\n    let map = [];\n    let index = new Array(netsize);\n\n    for (let i = 0; i < netsize; i++) index[network[i][3]] = i;\n\n    let k = 0;\n    for (let l = 0; l < netsize; l++) {\n      let j = index[l];\n      map[k++] = network[j][0];\n      map[k++] = network[j][1];\n      map[k++] = network[j][2];\n    }\n\n    return map;\n  };\n\n  /*\n   * Insertion sort of network and building of netindex[0..255] (to do after\n   * unbias)\n   * -------------------------------------------------------------------------------\n   */\n\n  let inxbuild = function inxbuild() {\n    let i;\n    let j;\n    let smallpos;\n    let smallval;\n    let p;\n    let q;\n    let previouscol;\n    let startpos;\n\n    previouscol = 0;\n    startpos = 0;\n    for (i = 0; i < netsize; i++) {\n      p = network[i];\n      smallpos = i;\n      smallval = p[1]; /* index on g */\n\n      /* find smallest in i..netsize-1 */\n      for (j = i + 1; j < netsize; j++) {\n        q = network[j];\n        if (q[1] < smallval) {\n          /* index on g */\n          smallpos = j;\n          smallval = q[1]; /* index on g */\n        }\n      }\n      q = network[smallpos];\n\n      /* swap p (i) and q (smallpos) entries */\n      if (i != smallpos) {\n        j = q[0];\n        q[0] = p[0];\n        p[0] = j;\n        j = q[1];\n        q[1] = p[1];\n        p[1] = j;\n        j = q[2];\n        q[2] = p[2];\n        p[2] = j;\n        j = q[3];\n        q[3] = p[3];\n        p[3] = j;\n      }\n\n      /* smallval entry is now in position i */\n\n      if (smallval != previouscol) {\n        netindex[previouscol] = (startpos + i) >> 1;\n\n        for (j = previouscol + 1; j < smallval; j++) netindex[j] = i;\n\n        previouscol = smallval;\n        startpos = i;\n      }\n    }\n\n    netindex[previouscol] = (startpos + maxnetpos) >> 1;\n    for (j = previouscol + 1; j < 256; j++) netindex[j] = maxnetpos; /* really 256 */\n  };\n\n  /*\n   * Main Learning Loop ------------------\n   */\n\n  let learn = function learn() {\n    let i;\n    let j;\n    let b;\n    let g;\n    let r;\n    let radius;\n    let rad;\n    let alpha;\n    let step;\n    let delta;\n    let samplepixels;\n    let p;\n    let pix;\n    let lim;\n\n    if (lengthcount < minpicturebytes) samplefac = 1;\n\n    alphadec = 30 + (samplefac - 1) / 3;\n    p = thepicture;\n    pix = 0;\n    lim = lengthcount;\n    samplepixels = lengthcount / (3 * samplefac);\n    delta = (samplepixels / ncycles) | 0;\n    alpha = initalpha;\n    radius = initradius;\n\n    rad = radius >> radiusbiasshift;\n    if (rad <= 1) rad = 0;\n\n    for (i = 0; i < rad; i++) radpower[i] = alpha * (((rad * rad - i * i) * radbias) / (rad * rad));\n\n    if (lengthcount < minpicturebytes) step = 3;\n    else if (lengthcount % prime1 !== 0) step = 3 * prime1;\n    else {\n      if (lengthcount % prime2 !== 0) step = 3 * prime2;\n      else if ((lengthcount % prime3) !== 0) step = 3 * prime3;\n      else step = 3 * prime4;\n    }\n\n    i = 0;\n    while (i < samplepixels) {\n      b = (p[pix + 0] & 0xff) << netbiasshift;\n      g = (p[pix + 1] & 0xff) << netbiasshift;\n      r = (p[pix + 2] & 0xff) << netbiasshift;\n      j = contest(b, g, r);\n\n      altersingle(alpha, j, b, g, r);\n      if (rad !== 0) alterneigh(rad, j, b, g, r); /* alter neighbours */\n\n      pix += step;\n      if (pix >= lim) pix -= lengthcount;\n\n      i++;\n\n      if (delta === 0) delta = 1;\n\n      if (i % delta === 0) {\n        alpha -= alpha / alphadec;\n        radius -= radius / radiusdec;\n        rad = radius >> radiusbiasshift;\n\n        if (rad <= 1) rad = 0;\n\n        for (j = 0; j < rad; j++)\n          radpower[j] = alpha * (((rad * rad - j * j) * radbias) / (rad * rad));\n      }\n    }\n  };\n\n  /*\n   ** Search for BGR values 0..255 (after net is unbiased) and return colour\n   * index\n   * ----------------------------------------------------------------------------\n   */\n\n  let map = (exports.map = function map(b, g, r) {\n    let i;\n    let j;\n    let dist;\n    let a;\n    let bestd;\n    let p;\n    let best;\n\n    bestd = 1000; /* biggest possible dist is 256*3 */\n    best = -1;\n    i = netindex[g]; /* index on g */\n    j = i - 1; /* start at netindex[g] and work outwards */\n\n    while (i < netsize || j >= 0) {\n      if (i < netsize) {\n        p = network[i];\n        dist = p[1] - g; /* inx key */\n\n        if (dist >= bestd) i = netsize;\n        /* stop iter */ else {\n          i++;\n          if (dist < 0) dist = -dist;\n          a = p[0] - b;\n          if (a < 0) a = -a;\n          dist += a;\n\n          if (dist < bestd) {\n            a = p[2] - r;\n            if (a < 0) a = -a;\n            dist += a;\n\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n\n      if (j >= 0) {\n        p = network[j];\n        dist = g - p[1]; /* inx key - reverse dif */\n\n        if (dist >= bestd) j = -1;\n        /* stop iter */ else {\n          j--;\n          if (dist < 0) dist = -dist;\n          a = p[0] - b;\n          if (a < 0) a = -a;\n          dist += a;\n\n          if (dist < bestd) {\n            a = p[2] - r;\n            if (a < 0) a = -a;\n            dist += a;\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n    }\n\n    return best;\n  });\n\n  let process = (exports.process = function process() {\n    learn();\n    unbiasnet();\n    inxbuild();\n    return colorMap();\n  });\n\n  /*\n   * Unbias network to give byte values 0..255 and record position i to prepare\n   * for sort\n   * -----------------------------------------------------------------------------------\n   */\n\n  var unbiasnet = function unbiasnet() {\n    let i;\n    let j;\n\n    for (i = 0; i < netsize; i++) {\n      network[i][0] >>= netbiasshift;\n      network[i][1] >>= netbiasshift;\n      network[i][2] >>= netbiasshift;\n      network[i][3] = i; /* record colour no */\n    }\n  };\n\n  /*\n   * Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2)) in\n   * radpower[|i-j|]\n   * ---------------------------------------------------------------------------------\n   */\n\n  var alterneigh = function alterneigh(rad, i, b, g, r) {\n    let j;\n    let k;\n    let lo;\n    let hi;\n    let a;\n    let m;\n    let p;\n\n    lo = i - rad;\n    if (lo < -1) lo = -1;\n\n    hi = i + rad;\n    if (hi > netsize) hi = netsize;\n\n    j = i + 1;\n    k = i - 1;\n    m = 1;\n\n    while (j < hi || k > lo) {\n      a = radpower[m++];\n\n      if (j < hi) {\n        p = network[j++];\n\n        try {\n          p[0] -= (a * (p[0] - b)) / alpharadbias;\n          p[1] -= (a * (p[1] - g)) / alpharadbias;\n          p[2] -= (a * (p[2] - r)) / alpharadbias;\n        } catch (e) { } // prevents 1.3 miscompilation\n      }\n\n      if (k > lo) {\n        p = network[k--];\n\n        try {\n          p[0] -= (a * (p[0] - b)) / alpharadbias;\n          p[1] -= (a * (p[1] - g)) / alpharadbias;\n          p[2] -= (a * (p[2] - r)) / alpharadbias;\n        } catch (e) { }\n      }\n    }\n  };\n\n  /*\n   * Move neuron i towards biased (b,g,r) by factor alpha\n   * ----------------------------------------------------\n   */\n\n  var altersingle = function altersingle(alpha, i, b, g, r) {\n    /* alter hit neuron */\n    let n = network[i];\n    n[0] -= (alpha * (n[0] - b)) / initalpha;\n    n[1] -= (alpha * (n[1] - g)) / initalpha;\n    n[2] -= (alpha * (n[2] - r)) / initalpha;\n  };\n\n  /*\n   * Search for biased BGR values ----------------------------\n   */\n\n  var contest = function contest(b, g, r) {\n    /* finds closest neuron (min dist) and updates freq */\n    /* finds best neuron (min dist-bias) and returns position */\n    /* for frequently chosen neurons, freq[i] is high and bias[i] is negative */\n    /* bias[i] = gamma*((1/netsize)-freq[i]) */\n\n    let i;\n    let dist;\n    let a;\n    let biasdist;\n    let betafreq;\n    let bestpos;\n    let bestbiaspos;\n    let bestd;\n    let bestbiasd;\n    let n;\n\n    bestd = ~(1 << 31);\n    bestbiasd = bestd;\n    bestpos = -1;\n    bestbiaspos = bestpos;\n\n    for (i = 0; i < netsize; i++) {\n      n = network[i];\n      dist = n[0] - b;\n      if (dist < 0) dist = -dist;\n      a = n[1] - g;\n      if (a < 0) a = -a;\n      dist += a;\n      a = n[2] - r;\n      if (a < 0) a = -a;\n      dist += a;\n\n      if (dist < bestd) {\n        bestd = dist;\n        bestpos = i;\n      }\n\n      biasdist = dist - (bias[i] >> (intbiasshift - netbiasshift));\n\n      if (biasdist < bestbiasd) {\n        bestbiasd = biasdist;\n        bestbiaspos = i;\n      }\n\n      betafreq = freq[i] >> betashift;\n      freq[i] -= betafreq;\n      bias[i] += betafreq << gammashift;\n    }\n\n    freq[bestpos] += beta;\n    bias[bestpos] -= betagamma;\n    return bestbiaspos;\n  };\n\n  NeuQuant.apply(this, arguments);\n  return exports;\n};\n\nexport { NeuQuant };\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-continue */\n/* eslint-disable no-unused-vars */\n/* eslint-disable prefer-rest-params */\n/* eslint-disable func-names */\n/* eslint-disable camelcase */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-shadow */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-labels */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-use-before-define */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-var */\n/* eslint-disable prefer-const */\n/**\n * This class handles LZW encoding\n * Adapted from Jef Poskanzer's Java port by way of J. M. G. Elliott.\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\n\nconst LZWEncoder = function() {\n  let exports = {};\n  let EOF = -1;\n  let imgW;\n  let imgH;\n  let pixAry;\n  let initCodeSize;\n  let remaining;\n  let curPixel;\n\n  // GIFCOMPR.C - GIF Image compression routines\n  // Lempel-Ziv compression based on 'compress'. GIF modifications by\n  // David Rowley (mgardi@watdcsu.waterloo.edu)\n  // General DEFINEs\n\n  let BITS = 12;\n  let HSIZE = 5003; // 80% occupancy\n\n  // GIF Image compression - modified 'compress'\n  // Based on: compress.c - File compression ala IEEE Computer, June 1984.\n  // By Authors: Spencer W. Thomas (decvax!harpo!utah-cs!utah-gr!thomas)\n  // Jim McKie (decvax!mcvax!jim)\n  // Steve Davies (decvax!vax135!petsd!peora!srd)\n  // Ken Turkowski (decvax!decwrl!turtlevax!ken)\n  // James A. Woods (decvax!ihnp4!ames!jaw)\n  // Joe Orost (decvax!vax135!petsd!joe)\n\n  let n_bits; // number of bits/code\n  let maxbits = BITS; // user settable max # bits/code\n  let maxcode; // maximum code, given n_bits\n  let maxmaxcode = 1 << BITS; // should NEVER generate this code\n  let htab = [];\n  let codetab = [];\n  let hsize = HSIZE; // for dynamic table sizing\n  let free_ent = 0; // first unused entry\n\n  // block compression parameters -- after all codes are used up,\n  // and compression rate changes, start over.\n\n  let clear_flg = false;\n\n  // Algorithm: use open addressing double hashing (no chaining) on the\n  // prefix code / next character combination. We do a variant of Knuth's\n  // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime\n  // secondary probe. Here, the modular division first probe is gives way\n  // to a faster exclusive-or manipulation. Also do block compression with\n  // an adaptive reset, whereby the code table is cleared when the compression\n  // ratio decreases, but after the table fills. The variable-length output\n  // codes are re-sized at this point, and a special CLEAR code is generated\n  // for the decompressor. Late addition: construct the table according to\n  // file size for noticeable speed improvement on small files. Please direct\n  // questions about this implementation to ames!jaw.\n\n  let g_init_bits;\n  let ClearCode;\n  let EOFCode;\n\n  // output\n  // Output the given code.\n  // Inputs:\n  // code: A n_bits-bit integer. If == -1, then EOF. This assumes\n  // that n_bits =< wordsize - 1.\n  // Outputs:\n  // Outputs code to the file.\n  // Assumptions:\n  // Chars are 8 bits long.\n  // Algorithm:\n  // Maintain a BITS character long buffer (so that 8 codes will\n  // fit in it exactly). Use the VAX insv instruction to insert each\n  // code in turn. When the buffer fills up empty it and start over.\n\n  let cur_accum = 0;\n  let cur_bits = 0;\n  let masks = [\n    0x0000,\n    0x0001,\n    0x0003,\n    0x0007,\n    0x000f,\n    0x001f,\n    0x003f,\n    0x007f,\n    0x00ff,\n    0x01ff,\n    0x03ff,\n    0x07ff,\n    0x0fff,\n    0x1fff,\n    0x3fff,\n    0x7fff,\n    0xffff\n  ];\n\n  // Number of characters so far in this 'packet'\n  let a_count;\n\n  // Define the storage for the packet accumulator\n  let accum = [];\n\n  let LZWEncoder = (exports.LZWEncoder = function LZWEncoder(width, height, pixels, color_depth) {\n    imgW = width;\n    imgH = height;\n    pixAry = pixels;\n    initCodeSize = Math.max(2, color_depth);\n  });\n\n  // Add a character to the end of the current packet, and if it is 254\n  // characters, flush the packet to disk.\n  let char_out = function char_out(c, outs) {\n    accum[a_count++] = c;\n    if (a_count >= 254) flush_char(outs);\n  };\n\n  // Clear out the hash table\n  // table clear for block compress\n\n  let cl_block = function cl_block(outs) {\n    cl_hash(hsize);\n    free_ent = ClearCode + 2;\n    clear_flg = true;\n    output(ClearCode, outs);\n  };\n\n  // reset code table\n  var cl_hash = function cl_hash(hsize) {\n    for (let i = 0; i < hsize; ++i) htab[i] = -1;\n  };\n\n  let compress = (exports.compress = function compress(init_bits, outs) {\n    let fcode;\n    let i; /* = 0 */\n    let c;\n    let ent;\n    let disp;\n    let hsize_reg;\n    let hshift;\n\n    // Set up the globals: g_init_bits - initial number of bits\n    g_init_bits = init_bits;\n\n    // Set up the necessary values\n    clear_flg = false;\n    n_bits = g_init_bits;\n    maxcode = MAXCODE(n_bits);\n\n    ClearCode = 1 << (init_bits - 1);\n    EOFCode = ClearCode + 1;\n    free_ent = ClearCode + 2;\n\n    a_count = 0; // clear packet\n\n    ent = nextPixel();\n\n    hshift = 0;\n    for (fcode = hsize; fcode < 65536; fcode *= 2) ++hshift;\n    hshift = 8 - hshift; // set hash code range bound\n\n    hsize_reg = hsize;\n    cl_hash(hsize_reg); // clear hash table\n\n    output(ClearCode, outs);\n\n    outer_loop: while ((c = nextPixel()) != EOF) {\n      fcode = (c << maxbits) + ent;\n      i = (c << hshift) ^ ent; // xor hashing\n\n      if (htab[i] == fcode) {\n        ent = codetab[i];\n        continue;\n      } else if (htab[i] >= 0) {\n        // non-empty slot\n\n        disp = hsize_reg - i; // secondary hash (after G. Knott)\n        if (i === 0) disp = 1;\n\n        do {\n          if ((i -= disp) < 0) i += hsize_reg;\n\n          if (htab[i] == fcode) {\n            ent = codetab[i];\n            continue outer_loop;\n          }\n        } while (htab[i] >= 0);\n      }\n\n      output(ent, outs);\n      ent = c;\n      if (free_ent < maxmaxcode) {\n        codetab[i] = free_ent++; // code -> hashtable\n        htab[i] = fcode;\n      } else cl_block(outs);\n    }\n\n    // Put out the final code.\n    output(ent, outs);\n    output(EOFCode, outs);\n  });\n\n  // ----------------------------------------------------------------------------\n  let encode = (exports.encode = function encode(os) {\n    os.writeByte(initCodeSize); // write \"initial code size\" byte\n    remaining = imgW * imgH; // reset navigation variables\n    curPixel = 0;\n    compress(initCodeSize + 1, os); // compress and write the pixel data\n    os.writeByte(0); // write block terminator\n  });\n\n  // Flush the packet to disk, and reset the accumulator\n  var flush_char = function flush_char(outs) {\n    if (a_count > 0) {\n      outs.writeByte(a_count);\n      outs.writeBytes(accum, 0, a_count);\n      a_count = 0;\n    }\n  };\n\n  var MAXCODE = function MAXCODE(n_bits) {\n    return (1 << n_bits) - 1;\n  };\n\n  // ----------------------------------------------------------------------------\n  // Return the next pixel from the image\n  // ----------------------------------------------------------------------------\n\n  var nextPixel = function nextPixel() {\n    if (remaining === 0) return EOF;\n    --remaining;\n    let pix = pixAry[curPixel++];\n    return pix & 0xff;\n  };\n\n  var output = function output(code, outs) {\n    cur_accum &= masks[cur_bits];\n\n    if (cur_bits > 0) cur_accum |= code << cur_bits;\n    else cur_accum = code;\n\n    cur_bits += n_bits;\n\n    while (cur_bits >= 8) {\n      char_out(cur_accum & 0xff, outs);\n      cur_accum >>= 8;\n      cur_bits -= 8;\n    }\n\n    // If the next entry is going to be too big for the code size,\n    // then increase it, if possible.\n\n    if (free_ent > maxcode || clear_flg) {\n      if (clear_flg) {\n        maxcode = MAXCODE((n_bits = g_init_bits));\n        clear_flg = false;\n      } else {\n        ++n_bits;\n        if (n_bits == maxbits) maxcode = maxmaxcode;\n        else maxcode = MAXCODE(n_bits);\n      }\n    }\n\n    if (code == EOFCode) {\n      // At EOF, write the rest of the buffer.\n      while (cur_bits > 0) {\n        char_out(cur_accum & 0xff, outs);\n        cur_accum >>= 8;\n        cur_bits -= 8;\n      }\n\n      flush_char(outs);\n    }\n  };\n\n  LZWEncoder.apply(this, arguments);\n  return exports;\n};\n\nexport { LZWEncoder };\n","/* eslint-disable no-console */\n/* eslint-disable func-names */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-useless-concat */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-return-assign */\n/* eslint-disable no-nested-ternary */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-empty */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-use-before-define */\n/* eslint-disable camelcase */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-unused-vars */\n/* eslint-disable block-scoped-var */\n/* eslint-disable no-shadow */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-var */\n/* eslint-disable vars-on-top */\n/**\n * This class lets you encode animated GIF files\n * Base class :  http://www.java2s.com/Code/Java/2D-Graphics-GUI/AnimatedGifEncoder.htm\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\nimport { NeuQuant } from './NeuQuant';\nimport { LZWEncoder } from './LZWEncoder';\n\nconst GIFEncoder = function() {\n  for (var i = 0, chr = {}; i < 256; i++) chr[i] = String.fromCharCode(i);\n\n  function ByteArray() {\n    this.bin = [];\n  }\n\n  ByteArray.prototype.getData = function() {\n    for (var v = '', l = this.bin.length, i = 0; i < l; i++) v += chr[this.bin[i]];\n    return v;\n  };\n\n  ByteArray.prototype.writeByte = function(val) {\n    this.bin.push(val);\n  };\n\n  ByteArray.prototype.writeUTFBytes = function(string) {\n    for (let l = string.length, i = 0; i < l; i++) this.writeByte(string.charCodeAt(i));\n  };\n\n  ByteArray.prototype.writeBytes = function(array, offset, length) {\n    for (let l = length || array.length, i = offset || 0; i < l; i++) this.writeByte(array[i]);\n  };\n\n  const exports = {};\n  let width; // image size\n  let height;\n  let transparent = null; // transparent color if given\n  let transIndex; // transparent index in color table\n  let repeat = -1; // no repeat\n  let delay = 0; // frame delay (hundredths)\n  let started = false; // ready to output frames\n  let out;\n  let image; // current frame\n  let pixels; // BGR byte array from frame\n  let indexedPixels; // converted frame indexed to palette\n  let colorDepth; // number of bit planes\n  let colorTab; // RGB palette\n  const usedEntry = []; // active palette entries\n  let palSize = 7; // color table size (bits-1)\n  let dispose = -1; // disposal code (-1 = use default)\n  let closeStream = false; // close stream when finished\n  let firstFrame = true;\n  let sizeSet = false; // if false, get size from first frame\n  let sample = 10; // default sample interval for quantizer\n  let comment = 'Generated by jsgif (https://github.com/antimatter15/jsgif/)'; // default comment for generated gif\n\n  /**\n   * Sets the delay time between each frame, or changes it for subsequent frames\n   * (applies to last frame added)\n   * int delay time in milliseconds\n   * @param ms\n   */\n\n  const setDelay = (exports.setDelay = function setDelay(ms) {\n    delay = Math.round(ms / 10);\n  });\n\n  /**\n   * Sets the GIF frame disposal code for the last added frame and any\n   *\n   * subsequent frames. Default is 0 if no transparent color has been set,\n   * otherwise 2.\n   * @param code\n   * int disposal code.\n   */\n\n  const setDispose = (exports.setDispose = function setDispose(code) {\n    if (code >= 0) dispose = code;\n  });\n\n  /**\n   * Sets the number of times the set of GIF frames should be played. Default is\n   * 1; 0 means play indefinitely. Must be invoked before the first image is\n   * added.\n   *\n   * @param iter\n   * int number of iterations.\n   * @return\n   */\n\n  const setRepeat = (exports.setRepeat = function setRepeat(iter) {\n    if (iter >= 0) repeat = iter;\n  });\n\n  /**\n   * Sets the transparent color for the last added frame and any subsequent\n   * frames. Since all colors are subject to modification in the quantization\n   * process, the color in the final palette for each frame closest to the given\n   * color becomes the transparent color for that frame. May be set to null to\n   * indicate no transparent color.\n   * @param\n   * Color to be treated as transparent on display.\n   */\n\n  const setTransparent = (exports.setTransparent = function setTransparent(c) {\n    transparent = c;\n  });\n\n  /**\n   * Sets the comment for the block comment\n   * @param\n   * string to be insterted as comment\n   */\n\n  const setComment = (exports.setComment = function setComment(c) {\n    comment = c;\n  });\n\n  /**\n   * The addFrame method takes an incoming BitmapData object to create each frames\n   * @param\n   * BitmapData object to be treated as a GIF's frame\n   */\n\n  const addFrame = (exports.addFrame = function addFrame(im, is_imageData) {\n    if (im === null || !started || out === null) {\n      throw new Error('Please call start method before calling addFrame');\n    }\n\n    let ok = true;\n\n    try {\n      if (!is_imageData) {\n        image = im.getImageData(0, 0, im.canvas.width, im.canvas.height).data;\n        if (!sizeSet) setSize(im.canvas.width, im.canvas.height);\n      } else if (im instanceof ImageData) {\n        image = im.data;\n        if (width != im.width || height != im.height) {\n          setSize(im.width, im.height);\n        } else {\n        }\n      } else if (im instanceof Uint8ClampedArray) {\n        if (im.length == width * height * 4) {\n          image = im;\n        } else {\n          console.log('Please set the correct size: ImageData length mismatch');\n          ok = false;\n        }\n      } else {\n        console.log('Please provide correct input');\n        ok = false;\n      }\n      getImagePixels(); // convert to correct format if necessary\n      analyzePixels(); // build color table & map pixels\n\n      if (firstFrame) {\n        writeLSD(); // logical screen descriptior\n        writePalette(); // global color table\n        if (repeat >= 0) {\n          // use NS app extension to indicate reps\n          writeNetscapeExt();\n        }\n      }\n\n      writeGraphicCtrlExt(); // write graphic control extension\n      if (comment !== '') {\n        writeCommentExt(); // write comment extension\n      }\n      writeImageDesc(); // image descriptor\n      if (!firstFrame) writePalette(); // local color table\n      writePixels(); // encode and write pixel data\n      firstFrame = false;\n    } catch (e) {\n      ok = false;\n    }\n\n    return ok;\n  });\n\n  /**\n   * @description: Downloads the encoded gif with the given name\n   * No need of any conversion from the stream data (out) to base64\n   * Solves the issue of large file sizes when there are more frames\n   * and does not involve in creation of any temporary data in the process\n   * so no wastage of memory, and speeds up the process of downloading\n   * to just calling this function.\n   * @parameter {String} filename filename used for downloading the gif\n   */\n\n  const download = (exports.download = function download(filename) {\n    if (out === null || closeStream == false) {\n      console.log(\n        'Please call start method and add frames and call finish method before calling download'\n      );\n    } else {\n      filename =\n        filename !== undefined ? (filename.endsWith('.gif') ? filename : filename) : 'download.gif';\n      const templink = document.createElement('a');\n      templink.download = filename;\n      templink.href = URL.createObjectURL(\n        new Blob([new Uint8Array(out.bin)], { type: 'image/gif' })\n      );\n      templink.click();\n    }\n  });\n\n  /**\n   * Adds final trailer to the GIF stream, if you don't call the finish method\n   * the GIF stream will not be valid.\n   */\n\n  const finish = (exports.finish = function finish() {\n    if (!started) return false;\n\n    let ok = true;\n    started = false;\n\n    try {\n      out.writeByte(0x3b); // gif trailer\n      closeStream = true;\n    } catch (e) {\n      ok = false;\n    }\n\n    return ok;\n  });\n\n  /**\n   * Resets some members so that a new stream can be started.\n   * This method is actually called by the start method\n   */\n\n  const reset = function reset() {\n    // reset for subsequent use\n    transIndex = 0;\n    image = null;\n    pixels = null;\n    indexedPixels = null;\n    colorTab = null;\n    closeStream = false;\n    firstFrame = true;\n  };\n\n  /**\n   * * Sets frame rate in frames per second. Equivalent to\n   * <code>setDelay(1000/fps)</code>.\n   * @param fps\n   * float frame rate (frames per second)\n   */\n\n  const setFrameRate = (exports.setFrameRate = function setFrameRate(fps) {\n    if (fps != 0xf) delay = Math.round(100 / fps);\n  });\n\n  /**\n   * Sets quality of color quantization (conversion of images to the maximum 256\n   * colors allowed by the GIF specification). Lower values (minimum = 1)\n   * produce better colors, but slow processing significantly. 10 is the\n   * default, and produces good color mapping at reasonable speeds. Values\n   * greater than 20 do not yield significant improvements in speed.\n   * @param quality\n   * int greater than 0.\n   * @return\n   */\n\n  const setQuality = (exports.setQuality = function setQuality(quality) {\n    if (quality < 1) quality = 1;\n    sample = quality;\n  });\n\n  /**\n   * Sets the GIF frame size. The default size is the size of the first frame\n   * added if this method is not invoked.\n   * @param w\n   * int frame width.\n   * @param h\n   * int frame width.\n   */\n\n  var setSize = (exports.setSize = function setSize(w, h) {\n    if (started && !firstFrame) return;\n    width = w;\n    height = h;\n    if (width < 1) width = 320;\n    if (height < 1) height = 240;\n    sizeSet = true;\n  });\n\n  /**\n   * Initiates GIF file creation on the given stream.\n   * @param os\n   * OutputStream on which GIF images are written.\n   * @return false if initial write failed.\n   */\n\n  const start = (exports.start = function start() {\n    reset();\n    let ok = true;\n    closeStream = false;\n    out = new ByteArray();\n    try {\n      out.writeUTFBytes('GIF89a'); // header\n    } catch (e) {\n      ok = false;\n    }\n\n    return (started = ok);\n  });\n\n  const cont = (exports.cont = function cont() {\n    reset();\n    const ok = true;\n    closeStream = false;\n    out = new ByteArray();\n\n    return (started = ok);\n  });\n\n  /**\n   * Analyzes image colors and creates color map.\n   */\n\n  var analyzePixels = function analyzePixels() {\n    const len = pixels.length;\n    const nPix = len / 3;\n    indexedPixels = [];\n    const nq = new NeuQuant(pixels, len, sample);\n\n    // initialize quantizer\n    colorTab = nq.process(); // create reduced palette\n\n    // map image pixels to new palette\n    let k = 0;\n    for (let j = 0; j < nPix; j++) {\n      const index = nq.map(pixels[k++] & 0xff, pixels[k++] & 0xff, pixels[k++] & 0xff);\n      usedEntry[index] = true;\n      indexedPixels[j] = index;\n    }\n\n    pixels = null;\n    colorDepth = 8;\n    palSize = 7;\n\n    // get closest match to transparent color if specified\n    if (transparent !== null) {\n      transIndex = findClosest(transparent);\n    }\n  };\n\n  /**\n   * Returns index of palette color closest to c\n   */\n\n  var findClosest = function findClosest(c) {\n    if (colorTab === null) return -1;\n    const r = (c & 0xff0000) >> 16;\n    const g = (c & 0x00ff00) >> 8;\n    const b = c & 0x0000ff;\n    let minpos = 0;\n    let dmin = 256 * 256 * 256;\n    const len = colorTab.length;\n\n    for (let i = 0; i < len; ) {\n      const dr = r - (colorTab[i++] & 0xff);\n      const dg = g - (colorTab[i++] & 0xff);\n      const db = b - (colorTab[i] & 0xff);\n      const d = dr * dr + dg * dg + db * db;\n      const index = i / 3;\n      if (usedEntry[index] && d < dmin) {\n        dmin = d;\n        minpos = index;\n      }\n      i++;\n    }\n    return minpos;\n  };\n\n  /**\n   * Extracts image pixels into byte array \"pixels\n   */\n\n  var getImagePixels = function getImagePixels() {\n    const w = width;\n    const h = height;\n    pixels = [];\n    const data = image;\n    let count = 0;\n\n    for (let i = 0; i < h; i++) {\n      for (let j = 0; j < w; j++) {\n        const b = i * w * 4 + j * 4;\n        pixels[count++] = data[b];\n        pixels[count++] = data[b + 1];\n        pixels[count++] = data[b + 2];\n      }\n    }\n  };\n\n  /**\n   * Writes Graphic Control Extension\n   */\n\n  var writeGraphicCtrlExt = function writeGraphicCtrlExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xf9); // GCE label\n    out.writeByte(4); // data block size\n    let transp;\n    let disp;\n    if (transparent === null) {\n      transp = 0;\n      disp = 0; // dispose = no action\n    } else {\n      transp = 1;\n      disp = 2; // force clear if using transparent color\n    }\n    if (dispose >= 0) {\n      disp = dispose & 7; // user override\n    }\n    disp <<= 2;\n    // packed fields\n    out.writeByte(\n      0 | // 1:3 reserved\n      disp | // 4:6 disposal\n      0 | // 7 user input - 0 = none\n        transp\n    ); // 8 transparency flag\n\n    WriteShort(delay); // delay x 1/100 sec\n    out.writeByte(transIndex); // transparent color index\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes Comment Extention\n   */\n\n  var writeCommentExt = function writeCommentExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xfe); // comment label\n    out.writeByte(comment.length); // Block Size (s)\n    out.writeUTFBytes(comment);\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes Image Descriptor\n   */\n\n  var writeImageDesc = function writeImageDesc() {\n    out.writeByte(0x2c); // image separator\n    WriteShort(0); // image position x,y = 0,0\n    WriteShort(0);\n    WriteShort(width); // image size\n    WriteShort(height);\n\n    // packed fields\n    if (firstFrame) {\n      // no LCT - GCT is used for first (or only) frame\n      out.writeByte(0);\n    } else {\n      // specify normal LCT\n      out.writeByte(\n        0x80 | // 1 local color table 1=yes\n        0 | // 2 interlace - 0=no\n        0 | // 3 sorted - 0=no\n        0 | // 4-5 reserved\n          palSize\n      ); // 6-8 size of color table\n    }\n  };\n\n  /**\n   * Writes Logical Screen Descriptor\n   */\n\n  var writeLSD = function writeLSD() {\n    // logical screen size\n    WriteShort(width);\n    WriteShort(height);\n    // packed fields\n    out.writeByte(\n      0x80 | // 1 : global color table flag = 1 (gct used)\n      0x70 | // 2-4 : color resolution = 7\n      0x00 | // 5 : gct sort flag = 0\n        palSize\n    ); // 6-8 : gct size\n\n    out.writeByte(0); // background color index\n    out.writeByte(0); // pixel aspect ratio - assume 1:1\n  };\n\n  /**\n   * Writes Netscape application extension to define repeat count.\n   */\n\n  var writeNetscapeExt = function writeNetscapeExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xff); // app extension label\n    out.writeByte(11); // block size\n    out.writeUTFBytes('NETSCAPE' + '2.0'); // app id + auth code\n    out.writeByte(3); // sub-block size\n    out.writeByte(1); // loop sub-block id\n    WriteShort(repeat); // loop count (extra iterations, 0=repeat forever)\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes color table\n   */\n\n  var writePalette = function writePalette() {\n    out.writeBytes(colorTab);\n    const n = 3 * 256 - colorTab.length;\n    for (let i = 0; i < n; i++) out.writeByte(0);\n  };\n\n  var WriteShort = function WriteShort(pValue) {\n    out.writeByte(pValue & 0xff);\n    out.writeByte((pValue >> 8) & 0xff);\n  };\n\n  /**\n   * Encodes and writes pixel data\n   */\n\n  var writePixels = function writePixels() {\n    const myencoder = new LZWEncoder(width, height, indexedPixels, colorDepth);\n    myencoder.encode(out);\n  };\n\n  /**\n   * Retrieves the GIF stream\n   */\n\n  const stream = (exports.stream = function stream() {\n    return out;\n  });\n\n  const setProperties = (exports.setProperties = function setProperties(has_start, is_first) {\n    started = has_start;\n    firstFrame = is_first;\n  });\n\n  return exports;\n};\n\nexport { GIFEncoder };\n","/* eslint-disable no-multi-assign */\n/* eslint-disable no-restricted-globals */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-plusplus */\nexport default function encode64(input) {\n  let output = '';\n  let i = 0;\n  const l = input.length;\n  const key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  let chr1;\n  let chr2;\n  let chr3;\n  let enc1;\n  let enc2;\n  let enc3;\n  let enc4;\n  while (i < l) {\n    chr1 = input.charCodeAt(i++);\n    chr2 = input.charCodeAt(i++);\n    chr3 = input.charCodeAt(i++);\n    enc1 = chr1 >> 2;\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    enc4 = chr3 & 63;\n    if (isNaN(chr2)) enc3 = enc4 = 64;\n    else if (isNaN(chr3)) enc4 = 64;\n    output = output + key.charAt(enc1) + key.charAt(enc2) + key.charAt(enc3) + key.charAt(enc4);\n  }\n  return output;\n}\n","import React from 'react';\nimport $ from 'jquery';\nimport './export.css';\nimport { options } from '../../../store/store';\nimport {\n  saveAsGif,\n  uploadToUrl,\n  downloadPng,\n  debugBase64,\n  debugBase64WithText\n} from './fromCanvasToFile';\n\nlet optionsBlock;\noptions.subscribe(() => {\n  optionsBlock = options.getState().optionsBlock;\n});\nclass ExportOptions extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: 'show-gif-block',\n      dataUrl: ''\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  showExportOptions(e) {\n    const clicked = e.target.getAttribute('id');\n    this.setState({ active: clicked });\n  }\n\n  render() {\n    return (\n      <div\n        className={`export-settings-block ${\n          optionsBlock === 'export-settings' ? 'flexed' : 'hidden'\n        }`}\n      >\n        <span className=\"export-info bold\">Export</span>\n        <div className=\"file-format-buttons\">\n          <button\n            id=\"show-gif-block\"\n            className={`show-gif-block ${\n              this.state.active === 'show-gif-block'\n                ? 'active-show-button'\n                : 'not-active-show-button'\n            }`}\n            type=\"button\"\n            onClick={e => this.showExportOptions(e)}\n          >\n            GIF\n          </button>\n          <button\n            id=\"show-png-block\"\n            className={`show-png-block ${\n              this.state.active === 'show-png-block'\n                ? 'active-show-button'\n                : 'not-active-show-button'\n            }`}\n            type=\"button\"\n            onClick={e => this.showExportOptions(e)}\n          >\n            PNG\n          </button>\n        </div>\n        <div\n          className={`gif-block ${this.state.active === 'show-gif-block' ? 'flexed' : 'hidden'}`}\n        >\n          <span className=\"gif-title\">Convert your sprite to an animated GIF</span>\n          <div className=\"download-block\">\n            <button\n              id=\"download-gif\"\n              className=\"gif-button\"\n              type=\"button\"\n              onClick={() => saveAsGif()}\n            >\n              Download\n            </button>\n            <span className=\"download-gif-title\">Download as an animated GIF</span>\n          </div>\n          <div className=\"download-block\">\n            <button\n              id=\"upload-gif\"\n              className=\"gif-button\"\n              type=\"button\"\n              onClick={() => {\n                const dataUrl = uploadToUrl();\n                this.setState({ dataUrl });\n              }}\n            >\n              Open in new tab\n            </button>\n            <span className=\"upload-gif-title\">Watch an animated GIF in new tab</span>\n            <div className={`link-to-gif ${this.state.dataUrl ? '' : 'hidden'}`}>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  debugBase64(this.state.dataUrl);\n                  this.setState({ dataUrl: '' });\n                }}\n              >\n                your animation file\n              </button>\n            </div>\n          </div>\n        </div>\n        <div\n          className={`png-block ${this.state.active === 'show-png-block' ? 'flexed' : 'hidden'}`}\n        >\n          <span className=\"png-title\">Export selected frame as a PNG file</span>\n          <div className=\"download-block\">\n            <button\n              id=\"download-png\"\n              className=\"png-button\"\n              type=\"button\"\n              onClick={() => downloadPng()}\n            >\n              Download\n            </button>\n            <span className=\"download-png-title\">Spritesheet file export</span>\n          </div>\n          <div className=\"download-block\">\n            <button\n              id=\"open-png\"\n              className=\"png-button\"\n              type=\"button\"\n              onClick={() => {\n                const array = [];\n                for (let i = 0; i < $('.preview').children().length; i += 1) {\n                  array.push($('.preview').children()[i].src);\n                }\n                const dataUrl = uploadToUrl();\n                debugBase64WithText(array, dataUrl);\n              }}\n            >\n              Open\n            </button>\n            <span className=\"open-png-title\">Open the spritesheet as a data uri</span>\n          </div>\n        </div>\n        <div id=\"hidden\" className=\"hidden\" />\n      </div>\n    );\n  }\n}\n\nexport default ExportOptions;\n","import React from 'react';\nimport $ from 'jquery';\nimport './menu.css';\nimport { store, options } from '../../store/store';\nimport Layers from './layers-list/layers-list';\nimport Palettes from './palettes/palettes';\nimport Settings from './settings/settings';\nimport ResizeCanvas from './resize/resizeCanvas';\nimport SaveOptions from './save/save';\nimport ExportOptions from './export/export';\n\nlet fps;\nstore.subscribe(() => {\n  fps = store.getState().fps;\n});\nclass Options extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      fps: 3,\n      hovered: '',\n      active: 'none',\n      mouseEnter: false\n    };\n    this.mounted = false;\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fpsOnChangeHandler() {\n    store.dispatch({ type: 'fps', value: $('#fps-bar').val() });\n    this.setState({ fps });\n  }\n\n  popHintOnMouseOver(e) {\n    const hovered = e.target.getAttribute('id');\n    if (this.state.hovered === hovered) {\n      this.setState({ hovered: '' });\n    } else {\n      this.setState({ hovered });\n    }\n  }\n\n  mouseIn() {\n    this.setState({ mouseEnter: true });\n  }\n\n  mouseOut() {\n    this.setState({ mouseEnter: false });\n  }\n\n  showOptionsOnClick(e) {\n    const clicked =\n      $(e.target).attr('id') ||\n      $(e.target)\n        .find('i')\n        .attr('id');\n    if (this.state.active === clicked) {\n      this.setState({ active: 'none' });\n      options.dispatch({ type: 'optionsBlock', value: 'none' });\n    } else {\n      this.setState({ active: clicked });\n      options.dispatch({ type: 'optionsBlock', value: clicked });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"optionsBox\" id=\"optionsBox\">\n        <div className=\"fps-options\">\n          <span id=\"display-fps\" className=\"display-fps\">\n            {`${this.state.fps} FPS`}\n          </span>\n          <input\n            type=\"range\"\n            min=\"1\"\n            max=\"24\"\n            step=\"1\"\n            defaultValue={this.state.fps}\n            id=\"fps-bar\"\n            className=\"fps-bar\"\n            onChange={() => this.fpsOnChangeHandler()}\n          />\n        </div>\n        <Layers />\n        <Palettes />\n        <div className={`options-blocks-area ${this.state.active === 'none' ? '' : 'slide'}`}>\n          <Settings />\n          <ResizeCanvas />\n          <SaveOptions />\n          <ExportOptions />\n        </div>\n        <div\n          className={`settings-buttons ${this.state.active === 'none' ? '' : 'slide'}`}\n          onMouseOver={e => this.popHintOnMouseOver(e)}\n          onFocus={() => undefined}\n        >\n          <button\n            type=\"button\"\n            className=\"settings-button\"\n            onFocus={() => undefined}\n            onClick={e => this.showOptionsOnClick(e)}\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i\n              id=\"settings\"\n              className={`fas fa-cog ${this.state.hovered === 'settings' ? 'fas-hovered' : ''} ${\n                this.state.active === 'settings' ? 'fas-hovered' : ''\n              }`}\n            />\n          </button>\n          <button\n            type=\"button\"\n            className=\"settings-button\"\n            onFocus={() => undefined}\n            onClick={e => this.showOptionsOnClick(e)}\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i\n              id=\"resize-settings\"\n              className={`fas fa-crop ${\n                this.state.hovered === 'resize-settings' ? 'fas-hovered' : ''\n              } ${this.state.active === 'resize-settings' ? 'fas-hovered' : ''}`}\n            />\n          </button>\n          <button\n            type=\"button\"\n            className=\"settings-button\"\n            onFocus={() => undefined}\n            onClick={e => this.showOptionsOnClick(e)}\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i\n              id=\"save-settings\"\n              className={`fas fa-save ${\n                this.state.hovered === 'save-settings' ? 'fas-hovered' : ''\n              } ${this.state.active === 'save-settings' ? 'fas-hovered' : ''}`}\n            />\n          </button>\n          <button\n            type=\"button\"\n            className=\"settings-button\"\n            onFocus={() => undefined}\n            onClick={e => this.showOptionsOnClick(e)}\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i\n              id=\"export-settings\"\n              className={`fas fa-file-download ${\n                this.state.hovered === 'export-settings' ? 'fas-hovered' : ''\n              } ${this.state.active === 'export-settings' ? 'fas-hovered' : ''}`}\n            />\n          </button>\n\n          <p\n            className={`hint settings-button-cog ${\n              this.state.mouseEnter === true && this.state.hovered === 'settings' ? '' : 'hidden'\n            }`}\n          >\n            Settings\n            <i className=\"settings-button-cog-arrow fas fa-caret-right\" />\n          </p>\n          <p\n            className={`big hint resize-settings ${\n              this.state.mouseEnter === true && this.state.hovered === 'resize-settings'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Resize the drawing area\n            <i className=\"resize-settings-arrow fas fa-caret-right\" />\n          </p>\n          <p\n            className={`hint save-settings ${\n              this.state.mouseEnter === true && this.state.hovered === 'save-settings'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Save to your galery\n            <i className=\"save-settings-arrow fas fa-caret-right\" />\n          </p>\n          <p\n            className={`big hint export-settings ${\n              this.state.mouseEnter === true && this.state.hovered === 'export-settings'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Export as image or animated gif\n            <i className=\"export-settings-arrow fas fa-caret-right\" />\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Options;\n","import React from 'react';\nimport $ from 'jquery';\n// import { Route, Link } from 'react-router-dom';\nimport './user.css';\nimport { user, preview, settings } from '../../store/store';\n\nlet name;\nlet img;\nuser.subscribe(() => {\n  name = user.getState().name;\n  img = user.getState().imageURL;\n});\nlet gif;\nlet frames;\nlet piskelID;\npreview.subscribe(() => {\n  gif = preview.getState().gif;\n  frames = preview.getState().frames;\n  piskelID = preview.getState().piskelID;\n});\nlet title;\nsettings.subscribe(() => {\n  title = settings.getState().title;\n});\n\nconst projects = {\n  project1: {\n    id: piskelID,\n    gif,\n    frames\n  }\n};\nconst projectsJson = JSON.stringify(projects);\nlocalStorage.setItem('myProjects', projectsJson);\n$(document).ready(() => {\n  const returnProjects = JSON.parse(localStorage.getItem('myProjects'));\n});\n\nclass User extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      img: '',\n      name: '',\n      height: '',\n      isEmpty: true,\n      gif: '',\n      frames: [],\n      title: ''\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    this.setState({ height: window.innerHeight, img, name });\n    if (gif && frames) {\n      this.setState({ isEmpty: false, gif, frames, title });\n      localStorage.setItem('isEmpty', false);\n      localStorage.setItem('gif', gif);\n      localStorage.setItem('frames', frames);\n      localStorage.setItem('title', title);\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  adoptGif() {\n    if (this.state.color.gif === '') {\n      this.setState({ isEmpty: false, gif });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"user-page\" style={{ height: this.state.height - 110 }}>\n        <div\n          className=\"user-image\"\n          style={{\n            backgroundImage: `url(${this.state.img})`,\n            backgroundSize: 'contain'\n          }}\n        />\n        <h2 className=\"user-name\">{this.state.name}</h2>\n        <ul className=\"piskel-list\">\n          <li>all</li>\n          <li>public</li>\n          <li>private</li>\n          <li>deleted</li>\n        </ul>\n        <div id=\"user-piskel-preview-area\" className=\"user-piskel-preview-area\">\n          <span className={`${this.state.isEmpty ? '' : 'hidden'}`}>\n            No piskel available in &#39;all&#39; category.\n          </span>\n          <div className={`user-preview-piskel-block ${this.state.isEmpty ? 'hidden' : 'flexed'}`}>\n            <div className=\"preview-wrapper\">\n              <img className=\"preview-gif\" src={this.state.gif} alt=\"preview\" />\n              <span className=\"preview-gif-title\">{this.state.title}</span>\n              <div id=\"user-piskel-hidden\" className=\"hidden\">\n                {this.state.frames.map(item => (\n                  <img key={item} src={item} alt=\"img\" />\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"hidden\">\n          <button id=\"userAddPiskel\" type=\"button\" onClick={() => this.adoptGif()} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default User;\n","/* eslint-disable no-alert */\n/* eslint-disable no-restricted-globals */\nimport React from 'react';\nimport { BrowserRouter as Router, Redirect, Route, Link, Switch } from 'react-router-dom';\nimport $ from 'jquery';\nimport Tools from '../../components/tools/toolsDomBuilder';\nimport Canvas from '../../screens/canvas/canvasDomBuilder';\nimport Frames from '../../components/frames-list/frameDomBuilder';\nimport Preview from '../../screens/preview/previewDomBuilder';\nimport Options from '../../components/menu/optionsDomBuilder';\n\nclass CreateAnimation extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      redirected: false\n    };\n  }\n\n  componentDidMount() {\n    $(window).bind('beforeunload', () => {\n      localStorage.setItem('page', '/');\n      this.setState({ redirected: true });\n    });\n  }\n\n  isRedirected() {\n    if (this.state.redirected === true) {\n      return <Redirect to=\"/clown/piskel-clown/build/\" />;\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <div id=\"container\" className=\"container\">\n          <section className=\"tool-pannel\" id=\"tool-pannel\">\n            <Tools />\n          </section>\n          <section className=\"frame-area\" id=\"frame-area\">\n            <Frames />\n          </section>\n          <section className=\"canvas-area\" id=\"canvas-area\">\n            <Canvas />\n          </section>\n          <section className=\"preview-area noselect\" id=\"preview-area\">\n            <Preview />\n          </section>\n          <section className=\"options-area\" id=\"options-area\">\n            <Options />\n          </section>\n          {this.isRedirected()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CreateAnimation;\n","import React from 'react';\nimport $ from 'jquery';\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Link,\n  Switch,\n  HashRouter\n} from 'react-router-dom';\n// import { store } from '../../store/store';\nimport CreateAnimation from '../create/create';\n\nclass About extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <HashRouter>\n        <div className=\"homepage-section\">\n          <div className=\"home-about\">\n            <h1>\n              <span className=\"piskel\">Piskel-clone </span>\n              is a free online editor for animated sprites & pixel art\n            </h1>\n            <h2>Create animations in your browser.</h2>\n            <h2>\n              <span className=\"description-link\">Try an example</span>\n              {', use '}\n              <span\n                role=\"button\"\n                tabIndex=\"-1\"\n                onKeyPress={undefined}\n                className=\"description-link\"\n                onClick={() => $('.abcRioButton.abcRioButtonLightBlue').click()}\n              >\n                Google sign in\n              </span>\n              {' to access your gallery or simply '}\n              <Link\n                to=\"/clown/piskel-clown/build/create-animation\"\n                onClick={() => {\n                  localStorage.setItem('page', 'create-animation');\n                  localStorage.setItem('auth', false);\n                  $(document.body).css({ cursor: 'default' });\n                }}\n                className=\"description-link\"\n              >\n                create a new sprite.\n              </Link>\n            </h2>\n            <div className=\"home-buttons\">\n              <button\n                type=\"button\"\n                className=\"login-button\"\n                onClick={() => $('.abcRioButton.abcRioButtonLightBlue').click()}\n              >\n                Sign in\n              </button>\n              <button type=\"button\" className=\"create-button\">\n                <Link\n                  to=\"/clown/piskel-clown/build/create-animation\"\n                  onClick={() => {\n                    localStorage.setItem('page', 'create-animation');\n                    localStorage.setItem('auth', false);\n                    $(document.body).css({ cursor: 'default' });\n                  }}\n                  className=\"link\"\n                >\n                  Create Sprite\n                </Link>\n              </button>\n            </div>\n          </div>\n\n          <div className=\"home-image\">\n            <div className=\"screen\" />\n            <div className=\"home-preview\" />\n          </div>\n\n          <Route path=\"/clown/piskel-clown/build/create-animation\" component={CreateAnimation} />\n        </div>\n      </HashRouter>\n    );\n  }\n}\n\nexport default About;\n","/* eslint-disable no-alert */\nimport React from 'react';\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Link,\n  Switch,\n  HashRouter\n} from 'react-router-dom';\nimport './home.css';\nimport $ from 'jquery';\nimport CreateAnimation from './create/create';\nimport User from './user/user';\nimport About from './about/about';\nimport { user } from '../store/store';\n\nclass AppRouter extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      id: '',\n      name: '',\n      img: '',\n      redirected: '',\n      active: ''\n    };\n    this.onSuccess = this.onSuccess.bind(this);\n  }\n\n  componentWillMount() {\n    if (!localStorage.getItem('page')) {\n      this.setState({ redirected: '' });\n    }\n  }\n\n  componentDidMount() {\n    $(window).bind('beforeunload', () => {\n      localStorage.setItem('page', '/');\n      console.log(localStorage.getItem('page'));\n      this.setState({ redirected: '/' });\n      return 'are you sure you want to leave?';\n    });\n    $(document.body).ready(() => {\n      window.gapi.load('auth2', () => {\n        window.gapi.auth2\n          .init({\n            client_id: '717448332612-evijnpopt50fj6vp0d9iul50sgdout90.apps.googleusercontent.com'\n          })\n          .then(() => {\n            window.gapi.signin2.render('my-signIn', {\n              scope: 'profile email',\n              width: 240,\n              height: 37,\n              longtitle: true,\n              onsuccess: this.onSuccess,\n              onfailure: this.onFailure\n            });\n          });\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.setState({ redirected: '/' });\n  }\n\n  onSuccess(googleUser) {\n    const profile = googleUser.getBasicProfile();\n    const ID = profile.getId();\n    const fullName = profile.getName();\n    const imageURL = profile.getImageUrl();\n\n    user.dispatch({ type: 'name', value: fullName });\n    this.setState({ id: ID, name: fullName, img: imageURL });\n    $('#updateSaveButtonLoggedIn').click();\n    if (localStorage.getItem('page') === 'create-animation') {\n      // eslint-disable-next-line no-restricted-globals\n      if (confirm('Are you sure you want to leave?') === true) {\n        localStorage.setItem('auth', true);\n        localStorage.setItem('page', `user/${ID}`);\n        this.setState({ redirected: `user/${ID}` });\n        $(document.body).css({ cursor: 'default' });\n      }\n    }\n  }\n\n  signOut() {\n    const auth2 = window.gapi.auth2.getAuthInstance();\n    auth2.signOut().then(() => {\n      this.setState({ redirected: '', id: '' });\n      localStorage.setItem('page', '');\n      localStorage.setItem('auth', false);\n      user.dispatch({ type: 'name', value: '' });\n    });\n  }\n\n  isRedirected() {\n    user.dispatch({ type: 'imageURL', value: this.state.img });\n    if (!localStorage.getItem('page')) {\n      return <Redirect to=\"/clown/piskel-clown/build/\" />;\n    }\n    if (this.state.redirected) {\n      return <Redirect to={`/clown/piskel-clown/build/${this.state.redirected}`} />;\n    }\n    return <Redirect to={`/clown/piskel-clown/build/${localStorage.getItem('page')}`} />;\n  }\n\n  addActiveClass(e) {\n    const clicked = e.currentTarget.getAttribute('id');\n    if (this.state.active === clicked) {\n      this.setState({ active: '' });\n    } else {\n      this.setState({ active: clicked });\n    }\n  }\n\n  render() {\n    return (\n      <HashRouter>\n        <div>\n          <header className=\"header\">\n            <div className=\"header-menu\">\n              <span className=\"menu-icon\">\n                <i className=\"fas fa-bars\" />\n              </span>\n              <ul className=\"menu\">\n                <li className=\"homepage\">\n                  <Link\n                    to=\"/clown/piskel-clown/build/\"\n                    className=\"task-name\"\n                    onClick={e => {\n                      if (localStorage.getItem('page') === 'create-animation') {\n                        // eslint-disable-next-line no-restricted-globals\n                        if (confirm('Are you sure you want to leave?') === true) {\n                          this.setState({ redirected: '/' });\n                          localStorage.setItem('page', '/');\n                          localStorage.setItem('auth', true);\n                          $(document.body).css({ cursor: 'default' });\n                        }\n                        e.preventDefault();\n                      }\n                    }}\n                  >\n                    Piskel-clone\n                  </Link>\n                </li>\n                <li className=\"create menu-item\">\n                  <Link\n                    to=\"/clown/piskel-clown/build/create-animation\"\n                    id=\"create-animation\"\n                    className=\"create-link\"\n                    onClick={() => {\n                      this.setState({ redirected: 'create-animation' });\n                      localStorage.setItem('page', 'create-animation');\n                      localStorage.setItem('auth', false);\n                      $(document.body).css({ cursor: 'default' });\n                    }}\n                  >\n                    Create Animation\n                  </Link>\n                </li>\n                <li className=\"signin\">\n                  <div\n                    className={`menu-item ${this.state.id ? 'account' : 'hidden'}`}\n                    id=\"list\"\n                    role=\"button\"\n                    tabIndex=\"-1\"\n                    onKeyPress={undefined}\n                    onClick={e => {\n                      this.addActiveClass(e);\n                    }}\n                  >\n                    <div\n                      className=\"account-image\"\n                      style={{\n                        backgroundImage: `url(${this.state.img})`,\n                        backgroundSize: 'contain'\n                      }}\n                    />\n                    <span className=\"account-button\">{this.state.name}</span>\n                    <i className=\"fas fa-sort-down\" />\n                    <ul\n                      className={`dropdown ${this.state.active === 'list' ? 'active' : 'hidden'}`}\n                    >\n                      <li className={`list top ${this.state.active === 'list' ? '' : 'hidden'}`}>\n                        <Link\n                          to={`/clown/piskel-clown/build/user/${this.state.id}`}\n                          id=\"galery\"\n                          className=\"account-item\"\n                          onClick={e => {\n                            if (localStorage.getItem('page') === 'create-animation') {\n                              // eslint-disable-next-line no-restricted-globals\n                              if (confirm('Are you sure you want to leave?') === true) {\n                                localStorage.setItem('auth', true);\n                                localStorage.setItem('page', `user/${this.state.id}`);\n                                this.setState({ redirected: localStorage.getItem('page') });\n                                $(document.body).css({ cursor: 'default' });\n                              }\n                              e.preventDefault();\n                            }\n                          }}\n                        >\n                          My Galery\n                        </Link>\n                      </li>\n                      <li className={`list bottom ${this.state.active === 'list' ? '' : 'hidden'}`}>\n                        <Link\n                          to={`/clown/piskel-clown/build/${\n                            this.state.redirected ? this.state.redirected : ''\n                          }`}\n                          id=\"logout\"\n                          className=\"account-item\"\n                          onClick={() => {\n                            // eslint-disable-next-line no-restricted-globals\n                            if (confirm('Are you sure you want to leave?') === true) {\n                              this.signOut();\n                            }\n                          }}\n                        >\n                          Log out\n                        </Link>\n                      </li>\n                    </ul>\n                  </div>\n                  <div\n                    id=\"my-signIn\"\n                    className={`${this.state.id ? 'hidden' : 'shown'}`}\n                    onClick={() => {\n                      localStorage.setItem('auth', true);\n                    }}\n                    onKeyPress={() => undefined}\n                    role=\"button\"\n                    tabIndex=\"-1\"\n                  />\n                  {this.isRedirected()}\n                </li>\n              </ul>\n            </div>\n          </header>\n          <Switch>\n            <Route path=\"/clown/piskel-clown/build/\" exact component={About} />\n            <Route path={`/clown/piskel-clown/build/user/${this.state.id}`} component={User} />\n            <Route path=\"/clown/piskel-clown/build/create-animation\" component={CreateAnimation} />\n            <Route path=\"*\" component={About} />\n          </Switch>\n        </div>\n      </HashRouter>\n    );\n  }\n}\n\nexport default AppRouter;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-console */\n/* eslint-disable no-use-before-define */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport './index.css';\nimport AppRouter from './mainpage/home';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <HashRouter>\n    <AppRouter />\n  </HashRouter>,\n  document.getElementById('home-page')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}