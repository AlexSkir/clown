(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAOdJREFUOI3t0zErhWEUAOCnK9Pd76a4kjALGQ0+1ySrwXgXg9WPMBjFYJMSZTGom1kppJj9BBYZGL4zfG4ZvnPv6Cxv5z29T+e8dUbkYxK72EATL/huJLEC54FcoYNTpLwC79jpuz+Jbmtjd2ijh61KrYP9DNaKfAFfFXQbe1lsDg+Yx61y/HuMDYLNRN5W/mkxDKwV9TT2iNl/7M9YGybWxAcuMR3YU5y1MVjHIVZwg7dBMDjwe7F7mMpi8IrFSr6Kiyw2gWflBixhE0dqrFM1GtHNJ0ZxjGWcKce9rguKLroYzzzujx/AVUNl5zj/7wAAAABJRU5ErkJggg=="},,,function(e,t,a){},,,,,,,,,,function(e,t,a){},,,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADCSURBVDhP7dAxCwFhGMDxh00Gk4nBYDAZFIvNJ/BBDOwGiUlJklAWPov4FqSUDEqUSfyf91zdqTuv3b9+3fte3b13j1hUwxpLJPWGTRHE0cLTYw6rGtjC+7BawVf0ff0sgYyz9GX1BW3cUMUG7un6O1/r4YKy2Ynk8cAeMb0RVhdnFM1OJIsdFqhDBxtYBXeUzE4khwMmCJqTrzGmzlIKOGKA0FPdUjihgz6uaMK6IXTK+pIZ3AFap9MdIW12/35M5AUsFCcIOdPfYQAAAABJRU5ErkJggg=="},,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEdSURBVEhL3dU/a8JAHMbxIChYlQ52aIeCU6Gbk2+hXcV306lDofSttIvuQsGhk4uLIIiCVVF0KxQ6td9HchDkvDvSdKgPfCC55H4PJP6Jjj4tPKOwO8s4ZSzxjTb+pKSODVTSwf8sKeIVKsi85ARdaPAa2/g4k5IKetBAvexr6HFlUnKKN2jQDFcw+fU7qaIPDZighv2kLjnDANo4wiUOJVXJC7RhiAsteJIsudeCK3l84RPnWghMAyqY7s4cyeEDujkNb4HyBNvmEN5HpOhF6YfNNsDFvORmzBndqA22QTZmeAnzmI6dCS1JfjzvYNZ17I2vJDlcGcNc03FQDpXY/oDeYa7r5yU4+n48YIEVHrE/XLmFBsuNFo4hUfQDRmuR/2vYwfIAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAWZJREFUOI2t0jFI1VEUx/FPGjlki9ai0CQIDQ5pCqbNTxJdykGdWmxxsUAHXYJwqMVBNHVzKWh2EAdBTDCQFhWKrMW2aFTiyXO4f+GP/u//8dQfHLiXe+73nvs7h2tWdYX5PZhDF6rwCyeXffwZVtCIZkxgHe9wv1LYIJZwM+OsDbOYjpxf0BBmcCMnpxa/0VEONoz5MrB7+IgDwdeoBgXDh3NymvAZvXiVB3uOIkpJ7OE1GlI5rVhFndD5OzFYAf9TsHScYAMfsIl6PBA6nqlW/IvAzmIL+7greLuI21mwGvzENhawjL8pUBHvsYPu5M5bPI5VN3qukgNMYQCTQpP2EiCM4WkMVoPDyBeLaE8eKGEcL9EXg8FIBHbWiBep/Tf058Gq8D0H+AWfkvWxMHO5epIDKwnGHyVRKAerxp/kYhtuZeR8xcOksrVywLTqBMN/pKrbFQa4sxJQlh7hjTCLLVeFXUmnRmtxEV/Efn8AAAAASUVORK5CYII="},,,,function(e,t,a){e.exports=a.p+"static/media/error.d70d2a0b.jpg"},function(e,t,a){e.exports=a(79)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(32),c=a.n(r),s=a(13),i=(a(46),a(3)),l=a(4),u=a(6),d=a(5),m=a(22),h=a(7),v=a(14),p=(a(47),a(1)),f=a.n(p),g=(a(20),a(33)),b=a.n(g),y=a(15);var w=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gif":return Object.assign({},e,{gif:t.value});case"frames":return Object.assign({},e,{frames:t.value});case"piskelID":return Object.assign({},e,{piskelID:t.value});case"projects":return Object.assign({},e,{projects:t.value});default:return e}}),k=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"currentPage":return Object.assign({},e,{currentPage:t.value});case"currentColor":return Object.assign({},e,{currentColor:t.value});case"backColor":return Object.assign({},e,{backColor:t.value});case"currentTool":return Object.assign({},e,{currentTool:t.value});case"fps":return Object.assign({},e,{fps:t.value});case"customWidth":return Object.assign({},e,{customWidth:t.value});default:return e}}),E=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setBg":return Object.assign({},e,{setBg:t.value});case"title":return Object.assign({},e,{title:t.value});default:return e}}),N=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"currentCanvas":return Object.assign({},e,{currentCanvas:t.value});default:return e}}),C=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"name":return Object.assign({},e,{name:t.value});case"userID":return Object.assign({},e,{userID:t.value});case"imageURL":return Object.assign({},e,{imageURL:t.value});case"email":return Object.assign({},e,{email:t.value});case"token":return Object.assign({},e,{token:t.value});case"googleUrl":return Object.assign({},e,{googleUrl:t.value});case"urlToGif":return Object.assign({},e,{urlToGif:t.value});default:return e}}),S=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"optionsBlock":return Object.assign({},e,{optionsBlock:t.value});default:return e}}),O=Object(y.a)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addColor":return Object.assign({},e,{addColor:t.value});default:return e}});function A(e){var t=f()("#".concat(e)).val(),a="rgb(".concat(f()("#".concat(e)).val().match(/[A-Za-z0-9]{2}/g).map(function(e){return parseInt(e,16)}).join(", "),")");"customed1"===e&&(k.dispatch({type:"currentColor",value:a}),f()("#currentColor").css({"background-color":a})),"customed2"===e&&(k.dispatch({type:"backColor",value:a}),f()("#backColor").css({"background-color":a})),f()("#".concat(e)).attr("value",t)}var j=a(35),I=a.n(j);var x=a(17),T=a.n(x);var M,B,U,P,D=a(36),L=a.n(D);k.subscribe(function(){M=k.getState().currentTool,B=k.getState().currentColor,U=k.getState().backColor}),N.subscribe(function(){P=N.getState().currentCanvas});var R,F=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={tool:"",active:"",value1:"#161030",value2:"#c0c0c0",pickedColor:""},e.mounted=!1,e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;f()(document).click(function(t){return e.colorPickerHandleClick(t)})}},{key:"componentDidMount",value:function(){var e=f()("#currentColor").css("background-color"),t=f()("#backColor").css("background-color");k.dispatch({type:"currentColor",value:e}),k.dispatch({type:"backColor",value:t}),this.mounted=!0,!0===this.mounted&&this.setState({pickedColor:e})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"switchColorsOnClick",value:function(){k.dispatch({type:"currentColor",value:U}),k.dispatch({type:"backColor",value:this.state.pickedColor});var e=f()("#customed1").val(),t=f()("#customed2").val();f()("#currentColor").css({"background-color":B}),f()("#backColor").css({"background-color":U}),this.setState({value1:t,value2:e,pickedColor:B})}},{key:"colorPickerHandleClick",value:function(e){if("colorPickerTool"===this.state.tool&&f()(e.target).is(".canvas")){var t=document.querySelector("#canvas".concat(P)),a=t.getBoundingClientRect(),n=Math.round(e.clientX-a.left),o=Math.round(e.clientY-a.top),r=t.getContext("2d").getImageData(n,o,1,1).data,c="rgba(".concat(r[0],", ").concat(r[1],", ").concat(r[2],")");if(r[3]>0){var s=function(e,t,a){var n=e.toString(16),o=t.toString(16),r=a.toString(16);return n.length<2&&(n="0".concat(n)),o.length<2&&(o="0".concat(o)),r.length<2&&(r="0".concat(r)),"#".concat(n).concat(o).concat(r)}(r[0],r[1],r[2]);k.dispatch({type:"currentColor",value:c}),f()("#currentColor").css({"background-color":c}),this.setState({value1:s,pickedColor:c})}}}},{key:"buttonOnHoverIn",value:function(e){var t=f()(e.target).attr("id");this.mounted&&this.setState({active:t})}},{key:"buttonOnHoverOut",value:function(e){f()(e.target).children().removeClass("fas-hovered"),this.mounted&&this.setState({active:"false"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{name:"Tools"},o.a.createElement("div",{className:"palette",id:"palette-tool-area"},o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"paint-bucket",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"paintBucketTool"!==k.getState().currentTool?(f()("#palette-tool-area").find("button").removeClass("hovered"),f()("#paint-bucket").addClass("hovered"),k.dispatch({type:"currentTool",value:"paintBucketTool"}),f()("#paint-bucket").focus(),f()(document.body).css({cursor:"url(".concat(I.a,") 15 15, auto")})):"paintBucketTool"===k.getState().currentTool&&(k.dispatch({type:"currentTool",value:""}),f()("#paint-bucket").removeClass("hovered"),f()("#paint-bucket").blur(),f()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"fas fa-fill-drip ".concat("paint-bucket"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"color-picker",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"colorPickerTool"!==k.getState().currentTool?(f()("#palette-tool-area").find("button").removeClass("hovered"),f()("#color-picker").addClass("hovered"),k.dispatch({type:"currentTool",value:"colorPickerTool"}),f()("#color-picker").focus(),f()(document.body).css({cursor:"url(".concat(b.a,") 1 10, auto")})):"colorPickerTool"===k.getState().currentTool&&(k.dispatch({type:"currentTool",value:"none"}),f()("#color-picker").removeClass("hovered"),f()("#color-picker").blur(),f()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"fas fa-eye-dropper ".concat("color-picker"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"pen",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"penTool"!==k.getState().currentTool?(f()("#palette-tool-area").find("button").removeClass("hovered"),k.dispatch({type:"currentTool",value:"penTool"}),f()("#pen").addClass("hovered"),f()("#pen").focus(),f()(document.body).css({cursor:"url(".concat(T.a,") 1 18, auto")})):"penTool"===k.getState().currentTool&&(k.dispatch({type:"currentTool",value:""}),f()("#pen").removeClass("hovered"),f()("#pen").blur(),f()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"fas fa-pencil-alt ".concat("pen"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"eraser",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"eraserTool"!==k.getState().currentTool?(k.dispatch({type:"currentTool",value:"eraserTool"}),f()("#palette-tool-area").find("button").removeClass("hovered"),f()("#eraser").addClass("hovered"),f()("#eraser").focus(),f()(document.body).css({cursor:"url(".concat(L.a,") 1 18, auto")})):"eraserTool"===k.getState().currentTool&&(k.dispatch({type:"currentTool",value:""}),f()("#eraser").removeClass("hovered"),f()("#eraser").blur(),f()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"fas fa-eraser ".concat("eraser"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"stroke",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"strokeTool"!==k.getState().currentTool?(k.dispatch({type:"currentTool",value:"strokeTool"}),f()("#palette-tool-area").find("button").removeClass("hovered"),f()("#stroke").addClass("hovered"),f()("#stroke").focus(),f()(document.body).css({cursor:"url(".concat(T.a,") 1 18, auto")})):"strokeTool"===k.getState().currentTool&&(k.dispatch({type:"currentTool",value:""}),f()("#stroke").removeClass("hovered"),f()("#stroke").blur(),f()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"fas fa-slash ".concat("stroke"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"rectangle",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"rectangleTool"!==k.getState().currentTool?(k.dispatch({type:"currentTool",value:"rectangleTool"}),f()("#palette-tool-area").find("button").removeClass("hovered"),f()("#rectangle").addClass("hovered"),f()("#rectangle").focus(),f()(document.body).css({cursor:"url(".concat(T.a,") 1 18, auto")})):"rectangleTool"===k.getState().currentTool&&(k.dispatch({type:"currentTool",value:""}),f()("#rectangle").removeClass("hovered"),f()("#rectangle").blur(),f()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"far fa-square ".concat("rectangle"===this.state.active?"fas-hovered":"")}))),o.a.createElement("div",{className:"palette-block"},o.a.createElement("button",{id:"circle",className:"palette-button",type:"button",onMouseEnter:function(t){return e.buttonOnHoverIn(t)},onMouseLeave:function(t){return e.buttonOnHoverOut(t)},onClick:function(){"circleTool"!==k.getState().currentTool?(k.dispatch({type:"currentTool",value:"circleTool"}),f()("#palette-tool-area").find("button").removeClass("hovered"),f()("#circle").addClass("hovered"),f()("#circle").focus(),f()(document.body).css({cursor:"url(".concat(T.a,") 1 18, auto")})):"circleTool"===k.getState().currentTool&&(k.dispatch({type:"currentTool",value:""}),f()("#circle").removeClass("hovered"),f()("#circle").blur(),f()(document.body).css({cursor:"default"})),e.mounted&&e.setState({tool:M})}},o.a.createElement("i",{className:"far fa-circle ".concat("circle"===this.state.active?"fas-hovered":"")})))),o.a.createElement("div",{className:"color"},o.a.createElement("div",{className:"color-block hidden"},o.a.createElement("div",{className:"radiobutton current",id:"currentColor"}),o.a.createElement("div",{className:"radiobutton back",id:"backColor"}),o.a.createElement("button",{type:"button",id:"switchHexValue",onClick:function(){var t=function(e){var t="".concat(e),a=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(t),n=parseInt(a[2],10).toString(16),o=parseInt(a[3],10).toString(16),r=parseInt(a[4],10).toString(16);return"#".concat(1===n.length?"0".concat(n):n).concat(1===o.length?"0".concat(o):o).concat(1===r.length?"0".concat(r):r)}(B);e.setState({value1:t})}})),o.a.createElement("div",{className:"switcher",role:"button",onClick:function(){return e.switchColorsOnClick()},onFocus:function(){},onKeyPress:function(){},tabIndex:"-1"},o.a.createElement("i",{className:"fas fa-retweet"})),o.a.createElement("div",{className:"color-block-upper"},o.a.createElement("input",{type:"color",name:"colors",className:"input-color",id:"customed1",value:this.state.value1,onChange:function(){A("customed1"),e.setState({value1:f()("#customed1").val(),pickedColor:B})}})),o.a.createElement("div",{className:"color-block-under"},o.a.createElement("input",{type:"color",name:"colors",className:"input-color",id:"customed2",value:this.state.value2,onChange:function(){A("customed2"),e.setState({value2:f()("#customed2").val()})}}))))}}]),t}(o.a.Component),H=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155;f()(window).bind("resize",function(){for(var e=0;e<f()("#canvas-block").children().length;e+=1){var t=f()("#canvas".concat(e+1)).get(0).getContext("2d").getImageData(0,0,H,H);R=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155,f()("#canvas".concat(e+1)).attr("width",R).attr("height",R),f()("#canvas".concat(e+1)).get(0).getContext("2d").putImageData(t,0,0)}f()("#drawCanvas").attr("width",R).attr("height",R),f()("#new-width").text(f()("#canvas1").width()),f()("#resize-input").attr("max",f()("#canvas1").width())});var z,W,G,Y,J,K,q;a(49);function V(e){var t=f()("#canvas".concat(z)).get(0).getContext("2d");Y=e.offsetX,J=e.offsetY,"penTool"===G?(t.fillStyle=f()("#currentColor").css("background-color"),t.strokeStyle=f()("#currentColor").css("background-color")):"eraserTool"===G&&(t.fillStyle="rgba(0, 0, 0, 1)",t.strokeStyle="rgba(0, 0, 0, 1)");var a=Math.ceil(f()("#canvas".concat(z)).width()/W),n=Math.floor(e.offsetX/a)*a,o=Math.floor(e.offsetY/a)*a;K>Y||q>J?t.fillRect(n,o,a,a):(K+a<Y||q+a<J)&&t.fillRect(n,o,a,a)}function Q(e){var t=Math.ceil(f()("#canvas".concat(z)).width()/W);if(K=Math.floor(e.offsetX/t)*t,q=Math.floor(e.offsetY/t)*t,"penTool"===G||"eraserTool"===G){var a=f()("#canvas".concat(z)).get(0).getContext("2d");"penTool"===G?(a.globalCompositeOperation="source-over",a.fillStyle=f()("#currentColor").css("background-color"),a.strokeStyle=f()("#currentColor").css("background-color")):"eraserTool"===G&&(a.fillStyle="rgba(0, 0, 0, 1)",a.strokeStyle="rgba(0, 0, 0, 1)",a.globalCompositeOperation="destination-out"),a.fillRect(K,q,t,t),f()("#drawCanvas").mousemove(V),O.dispatch({type:"addColor",value:f()("#currentColor").css("background-color")}),f()("#addColorButton").click()}}N.subscribe(function(){z=N.getState().currentCanvas}),k.subscribe(function(){W=k.getState().customWidth||33,G=k.getState().currentTool});var X,Z,_,$,ee=0,te=0,ae=0,ne=0;function oe(e){var t=Math.ceil(f()("#canvas".concat(z)).width()/W),a=f()("#drawCanvas").get(0).getContext("2d"),n=f()("#drawCanvas").width();ae=e.pageX-this.offsetLeft,ne=e.pageY-this.offsetTop,a.clearRect(0,0,n,n),a.globalCompositeOperation="source-over",a.strokeStyle=f()("#currentColor").css("background-color"),a.lineWidth=t,a.beginPath(),"strokeTool"===G?(a.moveTo(ee,te),a.lineTo(ae,ne),a.stroke()):"rectangleTool"===G?(a.moveTo(ee,te),a.lineTo(ae,te),a.lineTo(ae,ne),a.lineTo(ee,ne),a.lineTo(ee,te),a.stroke()):"circleTool"===G&&(X=Math.sqrt((ee-ae)*(ee-ae)+(te-ne)*(te-ne))/2,a.arc(ee,te,X,0,2*Math.PI),a.stroke()),f()("#drawCanvas").mouseup(function(){t=Math.ceil(f()("#canvas".concat(z)).width()/W);var e=f()("#canvas".concat(z)).get(0).getContext("2d");e.globalCompositeOperation="source-over",e.strokeStyle=f()("#currentColor").css("background-color"),e.lineWidth=t,e.beginPath(),"strokeTool"===G?(e.moveTo(ee,te),e.lineTo(ae,ne),e.stroke(),a.clearRect(0,0,n,n)):"rectangleTool"===G?(e.moveTo(ee,te),e.lineTo(ae,te),e.lineTo(ae,ne),e.lineTo(ee,ne),e.lineTo(ee,te),e.stroke(),a.clearRect(0,0,n,n)):"circleTool"===G&&(e.arc(ee,te,X,0,2*Math.PI),e.stroke(),a.clearRect(0,0,n,n))})}function re(e){ee=e.pageX-this.offsetLeft,te=e.pageY-this.offsetTop,f()("#drawCanvas").mousemove(oe),O.dispatch({type:"addColor",value:f()("#currentColor").css("background-color")}),f()("#addColorButton").click()}function ce(e,t,a){var n=e.width,o=e.data;return{r:o[4*(n*a+t)+0],g:o[4*(n*a+t)+1],b:o[4*(n*a+t)+2],a:o[4*(n*a+t)+3]}}function se(e,t,a,n){var o=e.width,r=e.data;r[4*(o*n+a)+0]=t.r,r[4*(o*n+a)+1]=t.g,r[4*(o*n+a)+2]=t.b,r[4*(o*n+a)+3]=t.a}function ie(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}function le(e){if("paintBucketTool"===_){var t=document.querySelector("#canvas".concat(Z)),a=t.getContext("2d"),n=f()("#currentColor").css("background-color"),o=n.match(/([0-9]+\.?[0-9]*)/g),r={r:+o[0],g:+o[1],b:+o[2],a:255};a.fillStyle=n,a.strokeStyle=n;var c=t.getBoundingClientRect(),s=Math.round(e.clientX-c.left),i=Math.round(e.clientY-c.top),l=a.getImageData(0,0,t.width,t.height);!function(e,t,a,n){var o=e.width,r=e.height,c=[],s=ce(e,a,n),i={x:a,y:n};if(!ie(s,t))for(c.push({x:i.x,y:i.y});c.length;){i=c.pop();for(var l=!0,u=!0,d=!1,m=!1;u&&i.y>=0;)i.y-=1,u=ie(ce(e,i.x,i.y),s);for(;l&&i.y<r;)se(e,t,i.x,i.y),i.x-1>=0&&ie(ce(e,i.x-1,i.y),s)?d||(d=!0,c.push({x:i.x-1,y:i.y})):d=!1,i.x+1<o&&ie(ce(e,i.x+1,i.y),s)?m||(c.push({x:i.x+1,y:i.y}),m=!0):m=!1,i.y+=1,l=ie(ce(e,i.x,i.y),s)}}(l,r,s,i),a.putImageData(l,0,0),O.dispatch({type:"addColor",value:f()("#currentColor").css("background-color")}),f()("#addColorButton").click();var u=f()("#canvas".concat(Z))[0].toDataURL("image/png");f()("#frame".concat(Z)).find(".preview-box").css({background:"url(".concat(u,")"),"background-size":"contain"})}}N.subscribe(function(){Z=N.getState().currentCanvas}),k.subscribe(function(){_=k.getState().currentTool}),k.subscribe(function(){$=k.getState().fps||3});var ue,de,me=0;function he(){clearTimeout(ue);var e=1e3/$;f()(".preview").children().css({display:"none"}),f()(".preview").children()[me]&&(f()(".preview").children()[me].style.display="block"),(me+=1)===f()(".preview").children().length&&(me=0),ue=setTimeout(he,e)}function ve(e){var t=new Image;f()("#canvas".concat(e))[0]&&f()(t).attr("id","canvasImage".concat(e)).css({width:"100%"}).attr("src",f()("#canvas".concat(e))[0].toDataURL("image/png")),f()("#canvasImage".concat(e)).length?f()(t).insertBefore("#canvasImage".concat(e)).next().remove():f()(t).appendTo(".preview"),f()(".preview").children().length>1?(me=0,he()):clearTimeout(ue)}var pe,fe=0;function ge(){de&&(fe+=1,de.close()),de=window.open("about:blank","window".concat(fe),"width=300,height=300");var e=f()(".preview").clone().appendTo(de.document.body).css({display:"flex","justify-content":"center","align-items":"center",height:"100%"});f()(de.document.body).css({display:"flex","justify-content":"center","align-items":"center"});var t=$,a=0;f()(de).ready(function n(){var o=1e3/t;e.children().css({display:"none"}),e.children()[a]&&(e.children()[a].style.display="block"),(a+=1)===e.children().length&&(a=0),setTimeout(n,o)})}N.subscribe(function(){pe=N.getState().currentCanvas});var be,ye=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={size:""},e.mounted=!1,e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155;this.setState({size:t}),f()(document).click(function(){return e.penHandleClick()})}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"penHandleClick",value:function(){this.mounted=!0,f()("#drawCanvas").unbind("mousedown").unbind("mouseup").unbind("click"),f()("#drawCanvas").click(le),f()("#drawCanvas").mousedown(Q),f()("#drawCanvas").mousedown(re),f()("#drawCanvas").mouseup(function(){f()("#drawCanvas").off("mousemove"),setTimeout(function(){var e=f()("#canvas".concat(pe))[0].toDataURL("image/png");f()("#frame".concat(pe)).find(".preview-box").css({background:"url(".concat(e,")"),"background-size":"contain"})},300),setTimeout(function(){ve(pe)},500)})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{id:"canvas-block",className:"canvas-block"},o.a.createElement("canvas",{id:"canvas1",className:"canvas hidden",width:this.state.size,height:this.state.size})),o.a.createElement("canvas",{id:"drawCanvas",className:"drawCanvas",width:this.state.size,height:this.state.size}))}}]),t}(o.a.Component);a(50),a(51);function we(){var e=f()(this).find(".number").text();N.dispatch({type:"currentCanvas",value:+e}),f()(".canvas").addClass("hidden"),f()("#canvas".concat(e)).removeClass("hidden"),f()(".activeFrame")&&f()(".activeFrame").removeClass("activeFrame"),f()(this).toggleClass("activeFrame"),setTimeout(function(){ve(+e)},200)}function ke(){var e=f()(this).find("span");e.hasClass("minorZ")&&(e.removeClass("minorZ"),1===f()("#sortable").children().length&&(f()("#frame1").find(".removeFrame").addClass("minorZ"),f()("#frame1").find(".dragFrame").addClass("minorZ")))}function Ee(){var e=f()(this).find("span");e.hasClass("minorZ")||e.addClass("minorZ"),1===f()("#sortable").children().length&&(f()("#frame1").find(".copyFrame").addClass("minorZ"),f()("#frame1").find(".dragFrame").addClass("minorZ"))}function Ne(){for(var e=0;e<f()("#canvas-block").children().length;e+=1)f()("#canvas-block").children()[e].id="canvas".concat(e+1);for(var t=0;t<f()(".preview").children().length;t+=1)f()(".preview").children()[t].id="canvasImage".concat(t+1);for(var a=0;a<f()("#sortable").children().length;a+=1){f()("#sortable").children()[a].id="frame".concat(a+1),f()(f()("#sortable").children()[a]).find(".number").text(a+1),ve(a+1)}}function Ce(){f()("#sortable").sortable(),f()("#sortable").sortable("option","disabled",!1),f()("#sortable").disableSelection()}function Se(e){f()("#sortable").sortable("option","disabled",!0),setTimeout(function(){var t=f()(e.currentTarget).parent().find(".number").text();Ne();var a=f()(e.currentTarget).parent().find(".number").text();t<a?f()("#canvas".concat(t)).insertAfter("#canvas".concat(a)):f()("#canvas".concat(t)).insertBefore("#canvas".concat(a)),Ne()},200),setTimeout(function(){f()(e.currentTarget).parent().click()},400)}function Oe(){var e=f()(this).parent().find(".number").text();f()("#frame".concat(e)).remove(),f()("#canvasImage".concat(e)).remove(),f()("#canvas".concat(e)).remove(),Ne(),f()("#frame".concat(+e-1)).click()}function Ae(){var e=f()(this).parent().find(".number").text();f()("#frame".concat(e)).clone().insertAfter("#frame".concat(e)).attr("id","frame".concat(+e+1)).removeClass("activeFrame").hover(ke,Ee).click(we),function(e){var t=f()("#canvas".concat(e)).clone().attr("id","canvas".concat(+e+1)).attr("width",f()("#canvas".concat(e)).width()).attr("height",f()("#canvas".concat(e)).width()).insertAfter("#canvas".concat(e)),a=f()("#canvas".concat(e)).get(0).getContext("2d").getImageData(0,0,f()("#canvas".concat(e)).width(),f()("#canvas".concat(e)).width());t.get(0).getContext("2d").putImageData(a,0,0)}(e),f()("#frame".concat(+e+1)).find(".removeFrame").click(Oe),f()("#frame".concat(+e+1)).find(".copyFrame").click(Ae),f()("#frame".concat(+e+1)).find(".dragFrame").mousedown(Ce).mouseup(Se),setTimeout(function(){f()("#frame".concat(+e+1)).click()},100),Ne();var t=f()("#canvas".concat(e))[0].toDataURL("image/png");t&&f()("#frame".concat(+e+1)).find(".preview-box").css({background:"url(".concat(t,")"),"background-size":"contain"});for(var a=0;a<f()(".frame-list").children().length;a+=1)ve(a+1)}function je(){var e=f()(".frame-list").children().length+1;f()(".frame").first().clone().appendTo(".frame-list").attr("id","frame".concat(e)).removeClass("activeFrame").hover(ke,Ee).click(we).find(".preview-box").css({background:"none"}),f()(".number").last().text(e),function(e){var t=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155;f()("<canvas/>",{class:"canvas hidden",id:"canvas".concat(e)}).attr("width",t).attr("height",t).appendTo("#canvas-block")}(e),f()("#frame".concat(e)).find(".removeFrame").click(Oe),f()("#frame".concat(e)).find(".copyFrame").click(Ae),f()("#frame".concat(e)).find(".dragFrame").mousedown(Ce).mouseup(Se),setTimeout(function(){f()("#frame".concat(e)).click()},100)}k.subscribe(function(){be=k.getState().customWidth});var Ie,xe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){f()(".frame").hover(ke,Ee).click(we),f()(".removeFrame").click(Oe),f()(".copyFrame").click(Ae),f()(".dragFrame").mousedown(Ce).mouseup(Se),f()("#frame1").click(we).click(),f()("#current-width").text(be),f()("#current-height").text(be),f()("#new-width").text(f()("#canvas1").width()),f()("#resize-input").attr("max",f()("#canvas1").width())}},{key:"render",value:function(){return o.a.createElement("div",{className:"frame-box"},o.a.createElement("ul",{id:"sortable",className:"frame-list"},o.a.createElement("li",{className:"ui-state-default frame activeFrame",id:"frame1"},o.a.createElement("p",{id:"preview-box",className:"preview-box"}),o.a.createElement("title",{className:"number"},"1"),o.a.createElement("span",{className:"removeFrame minorZ"},o.a.createElement("i",{className:"fas fa-trash-alt"})),o.a.createElement("span",{className:"dragFrame minorZ"},o.a.createElement("i",{className:"fas fa-arrows-alt"})),o.a.createElement("span",{className:"copyFrame minorZ"},o.a.createElement("i",{className:"fas fa-copy"})))),o.a.createElement("button",{className:"addNewFrame",onClick:je,type:"button"},"Add new frame"))}}]),t}(o.a.Component),Te=(a(52),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={active:""},e.mounted=!1,e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"hoverIn",value:function(){this.mounted&&this.setState({active:!0})}},{key:"hoverOut",value:function(){this.mounted&&this.setState({active:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"preview-area",className:"preview-area",onMouseEnter:function(){return e.hoverIn()},onMouseLeave:function(){return e.hoverOut()}},o.a.createElement("div",{className:"preview-open ".concat(this.state.active?"":"hidden"),id:"preview-open",role:"button",tabIndex:"-1",onKeyPress:void 0,onClick:ge},o.a.createElement("i",{className:"fas fa-external-link-alt"})),o.a.createElement("div",{className:"preview"}))}}]),t}(o.a.Component)),Me=(a(53),a(54),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={hovered:"",mouseEnter:!1},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"popHintOnMouseOver",value:function(e){var t=e.target.getAttribute("id");this.state.hovered===t?this.setState({hovered:""}):this.setState({hovered:t})}},{key:"mouseIn",value:function(){this.setState({mouseEnter:!0})}},{key:"mouseOut",value:function(){this.setState({mouseEnter:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"layers-box",onMouseOver:function(t){return e.popHintOnMouseOver(t)},onFocus:function(){}},o.a.createElement("div",{className:"layer-outlet"},o.a.createElement("span",{className:"layer-title"},"Layers"),o.a.createElement("i",{id:"layers-preview",className:"fas fa-eye",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}}),o.a.createElement("p",{className:"hint layers-preview ".concat("layers-preview"===this.state.hovered?"":"hidden")},"Preview all layers",o.a.createElement("i",{className:"layers-preview-arrow fas fa-sort-down"}))),o.a.createElement("div",{className:"layer-buttons-box"},o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-plus",className:"fas fa-plus"})),o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-up",className:"fas fa-arrow-up"})),o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-down",className:"fas fa-arrow-down"})),o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-edit-name",className:"fas fa-pen"})),o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-merge",className:"fas fa-compress"})),o.a.createElement("button",{type:"button",className:"layer-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"layers-remove",className:"fas fa-times"})),o.a.createElement("p",{className:"hint layers-plus ".concat(!0===this.state.mouseEnter&&"layers-plus"===this.state.hovered?"":"hidden")},"Create a layer",o.a.createElement("i",{className:"layers-plus-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"hint layers-up ".concat(!0===this.state.mouseEnter&&"layers-up"===this.state.hovered?"":"hidden")},"Move layer up",o.a.createElement("i",{className:"layers-up-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"hint layers-down ".concat(!0===this.state.mouseEnter&&"layers-down"===this.state.hovered?"":"hidden")},"Move layer down",o.a.createElement("i",{className:"layers-down-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"hint layers-edit-name ".concat(!0===this.state.mouseEnter&&"layers-edit-name"===this.state.hovered?"":"hidden")},"Edit layer name",o.a.createElement("i",{className:"layers-edit-name-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"big hint layers-merge ".concat(!0===this.state.mouseEnter&&"layers-merge"===this.state.hovered?"":"hidden")},"Merge with layer below",o.a.createElement("i",{className:"layers-merge-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"big hint layers-remove ".concat(!0===this.state.mouseEnter&&"layers-remove"===this.state.hovered?"":"hidden")},"Delete selected layer",o.a.createElement("i",{className:"layers-remove-arrow fas fa-sort-down"}))),o.a.createElement("ul",{className:"layer-list"},o.a.createElement("li",{className:"layer-item"},"Layer 1")))}}]),t}(o.a.Component));a(55);O.subscribe(function(){Ie=O.getState().addColor});var Be,Ue=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={hovered:"",mouseEnter:!1,color:[],changed:!1,active:""},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"popHintOnMouseOver",value:function(e){var t=e.target.getAttribute("id");this.state.hovered===t?this.setState({hovered:""}):this.setState({hovered:t})}},{key:"mouseIn",value:function(){this.setState({mouseEnter:!0})}},{key:"mouseOut",value:function(){this.setState({mouseEnter:!1})}},{key:"addNewColor",value:function(){-1===this.state.color.indexOf(Ie)&&(this.state.color.push(Ie),this.setState({changed:!0,active:Ie}))}},{key:"changeCurColor",value:function(e){var t=f()(e.target).css("background-color");this.setState({active:t}),f()("#currentColor").css({background:t}),k.dispatch({type:"currentColor",value:t}),f()("#switchHexValue").click()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"palettes-box",onMouseOver:function(t){return e.popHintOnMouseOver(t)},onFocus:function(){}},o.a.createElement("div",{className:"palettes-outlet"},o.a.createElement("span",{className:"palettes-title"},"Palettes")),o.a.createElement("div",{className:"palettes-buttons-box"},o.a.createElement("button",{type:"button",className:"palettes-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"palettes-plus",className:"fas fa-plus"})),o.a.createElement("button",{type:"button",id:"palettes-dropdown-list",className:"palettes-button colors-list"},"Current colors",o.a.createElement("i",{className:"colors-list-arrow fas fa-sort-down ".concat("palettes-dropdown-list"===this.state.hovered?"colors-list-arrow-hovered":"")})),o.a.createElement("button",{type:"button",className:"palettes-button",onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"palettes-edit",className:"fas fa-pen"})),o.a.createElement("p",{className:"hint palettes-plus ".concat(!0===this.state.mouseEnter&&"palettes-plus"===this.state.hovered?"":"hidden")},"Create a new palette",o.a.createElement("i",{className:"palettes-plus-arrow fas fa-sort-down"})),o.a.createElement("p",{className:"hint palettes-edit ".concat(!0===this.state.mouseEnter&&"palettes-edit"===this.state.hovered?"":"hidden")},"Palette options",o.a.createElement("i",{className:"palettes-edit-arrow fas fa-sort-down"}))),o.a.createElement("ul",{className:"palettes-list"},o.a.createElement("span",{className:"palette-colors-isempty ".concat(!0===this.state.changed?"hidden":"")},"No colors in this palette yet"),this.state.color.map(function(t){return o.a.createElement("li",{key:t,id:t,className:"palette-sample-list"},o.a.createElement("div",{style:{background:t},className:"palette-sample ".concat(e.state.active===t?"active-palette-sample":""),onClick:function(t){return e.changeCurColor(t)},tabIndex:"-1",onKeyPress:function(){},onFocus:function(){},role:"button"}))})),o.a.createElement("button",{id:"addColorButton",className:"hidden",type:"button",onClick:function(){return e.addNewColor()}}))}}]),t}(o.a.Component);a(56);S.subscribe(function(){Be=S.getState().optionsBlock});var Pe,De,Le=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={active:""},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"addActiveOnClick",value:function(e){var t,a=e.target.getAttribute("id"),n=f()(e.target).css("background-image");t=n,f()(".frame").css({background:t}),f()(".canvas").css({background:t}),this.setState({active:a})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"general-settings-block ".concat("settings"===Be?"flexed":"hidden")},o.a.createElement("div",{className:"current-bg"},o.a.createElement("span",{className:"default-bg bold"},"Background"),o.a.createElement("div",{className:"general-settings-buttons-area"},o.a.createElement("button",{type:"button",id:"bg1",onClick:function(t){return e.addActiveOnClick(t)},className:"general-settings-button bg1 ".concat("bg1"===this.state.active?"active-button":"not-active-button")}),o.a.createElement("button",{type:"button",id:"bg2",onClick:function(t){return e.addActiveOnClick(t)},className:"general-settings-button bg2 ".concat("bg2"===this.state.active?"active-button":"not-active-button")}),o.a.createElement("button",{type:"button",id:"bg3",onClick:function(t){return e.addActiveOnClick(t)},className:"general-settings-button bg3 ".concat("bg3"===this.state.active?"active-button":"not-active-button")}),o.a.createElement("button",{type:"button",id:"bg4",onClick:function(t){return e.addActiveOnClick(t)},className:"general-settings-button bg4 ".concat("bg4"===this.state.active?"active-button":"not-active-button")})),o.a.createElement("p",null,"Set default background")))}}]),t}(o.a.Component);a(57);k.subscribe(function(){Pe=k.getState().customWidth||33}),S.subscribe(function(){De=S.getState().optionsBlock});var Re=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={customWidth:""},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){f()("#current-width").text(Pe),f()("#current-height").text(Pe),f()("#new-width").text(f()("#canvas1").width()),f()("#resize-input").attr("max","".concat(f()("#canvas1").width())),this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"resizeCanvasOnClickHandler",value:function(){if(f()("#resize-input").val()){var e=+f()("#resize-input").val(),t=+f()("#resize-input").attr("max");e>0&&e<t?(k.dispatch({type:"customWidth",value:e}),this.mounted&&this.setState({customWidth:Pe}),f()("#resize-input").val(""),f()("#error-message").text("")):(f()("#error-message").text("Size can be from ".concat(f()("#resize-input").attr("min")," to ").concat(f()("#resize-input").attr("max")," px")),f()("#resize-input").val(""))}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"resize-canvas-block ".concat("resize-settings"===De?"flexed":"hidden")},o.a.createElement("div",{className:"current-size"},o.a.createElement("span",{className:"default-size bold"},"current size"),o.a.createElement("p",null,"Width ",o.a.createElement("span",{className:"default-width bold",id:"current-width"},this.state.customWidth),"px"),o.a.createElement("p",null,"Height",o.a.createElement("span",{className:"default-width bold",id:"current-height"},this.state.customWidth),"px")),o.a.createElement("div",{className:"resize-canvas"},o.a.createElement("span",{className:"resize bold"},"resize"),o.a.createElement("p",{className:"new-width-block"},o.a.createElement("span",null,"1 - "),o.a.createElement("span",{id:"new-width",className:"canvas-width"}),o.a.createElement("span",null,"px"),o.a.createElement("input",{type:"number",className:"resize-input",id:"resize-input",min:"1",onKeyPress:function(t){"Enter"===t.key&&e.resizeCanvasOnClickHandler()}})),o.a.createElement("p",{id:"error-message",className:"error-message"}),o.a.createElement("button",{id:"resize-button",className:"resize-button",type:"button",onClick:function(){return e.resizeCanvasOnClickHandler()}},"Change canvas size")))}}]),t}(o.a.Component),Fe=(a(58),a(23)),He=function(){var e,t,a,n,o,r={},c=[],s=[],i=[],l=[],u=r.NeuQuant=function(e,r,c){var l,u;for(t=e,a=r,n=c,o=new Array(256),l=0;l<256;l++)o[l]=new Array(4),(u=o[l])[0]=u[1]=u[2]=(l<<12)/256,i[l]=256,s[l]=0},d=(r.map=function(e,t,a){var n,r,s,i,l,u,d;for(l=1e3,d=-1,r=(n=c[t])-1;n<256||r>=0;)n<256&&((s=(u=o[n])[1]-t)>=l?n=256:(n++,s<0&&(s=-s),(i=u[0]-e)<0&&(i=-i),(s+=i)<l&&((i=u[2]-a)<0&&(i=-i),(s+=i)<l&&(l=s,d=u[3])))),r>=0&&((s=t-(u=o[r])[1])>=l?r=-1:(r--,s<0&&(s=-s),(i=u[0]-e)<0&&(i=-i),(s+=i)<l&&((i=u[2]-a)<0&&(i=-i),(s+=i)<l&&(l=s,d=u[3]))));return d},r.process=function(){return function(){var o,r,c,s,i,u,d,p,f,g,b,y,w,k;for(a<1509&&(n=1),e=30+(n-1)/3,y=t,w=0,k=a,g=(b=a/(3*n))/100|0,p=1024,(d=(u=2048)>>6)<=1&&(d=0),o=0;o<d;o++)l[o]=p*(256*(d*d-o*o)/(d*d));for(f=a<1509?3:a%499!==0?1497:a%491!==0?1473:a%487!==0?1461:1509,o=0;o<b;)if(c=(255&y[w+0])<<4,s=(255&y[w+1])<<4,i=(255&y[w+2])<<4,r=v(c,s,i),h(p,r,c,s,i),0!==d&&m(d,r,c,s,i),(w+=f)>=k&&(w-=a),0===g&&(g=1),++o%g===0)for(p-=p/e,(d=(u-=u/30)>>6)<=1&&(d=0),r=0;r<d;r++)l[r]=p*(256*(d*d-r*r)/(d*d))}(),d(),function(){var e,t,a,n,r,s,i,l;for(i=0,l=0,e=0;e<256;e++){for(a=e,n=(r=o[e])[1],t=e+1;t<256;t++)(s=o[t])[1]<n&&(a=t,n=s[1]);if(s=o[a],e!=a&&(t=s[0],s[0]=r[0],r[0]=t,t=s[1],s[1]=r[1],r[1]=t,t=s[2],s[2]=r[2],r[2]=t,t=s[3],s[3]=r[3],r[3]=t),n!=i){for(c[i]=l+e>>1,t=i+1;t<n;t++)c[t]=e;i=n,l=e}}for(c[i]=l+255>>1,t=i+1;t<256;t++)c[t]=255}(),function(){for(var e=[],t=new Array(256),a=0;a<256;a++)t[o[a][3]]=a;for(var n=0,r=0;r<256;r++){var c=t[r];e[n++]=o[c][0],e[n++]=o[c][1],e[n++]=o[c][2]}return e}()},function(){var e;for(e=0;e<256;e++)o[e][0]>>=4,o[e][1]>>=4,o[e][2]>>=4,o[e][3]=e}),m=function(e,t,a,n,r){var c,s,i,u,d,m,h;for((i=t-e)<-1&&(i=-1),(u=t+e)>256&&(u=256),c=t+1,s=t-1,m=1;c<u||s>i;){if(d=l[m++],c<u){h=o[c++];try{h[0]-=d*(h[0]-a)/(1<<18),h[1]-=d*(h[1]-n)/(1<<18),h[2]-=d*(h[2]-r)/(1<<18)}catch(v){}}if(s>i){h=o[s--];try{h[0]-=d*(h[0]-a)/(1<<18),h[1]-=d*(h[1]-n)/(1<<18),h[2]-=d*(h[2]-r)/(1<<18)}catch(v){}}}},h=function(e,t,a,n,r){var c=o[t];c[0]-=e*(c[0]-a)/1024,c[1]-=e*(c[1]-n)/1024,c[2]-=e*(c[2]-r)/1024},v=function(e,t,a){var n,r,c,l,u,d,m,h,v,p;for(v=h=~(1<<31),m=d=-1,n=0;n<256;n++)(r=(p=o[n])[0]-e)<0&&(r=-r),(c=p[1]-t)<0&&(c=-c),r+=c,(c=p[2]-a)<0&&(c=-c),(r+=c)<h&&(h=r,d=n),(l=r-(s[n]>>12))<v&&(v=l,m=n),u=i[n]>>10,i[n]-=u,s[n]+=u<<10;return i[d]+=64,s[d]-=65536,m};return u.apply(this,arguments),r},ze=function(){var e,t,a,n,o,r,c,s,i,l,u,d,m={},h=[],v=[],p=0,f=!1,g=0,b=0,y=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],w=[],k=m.LZWEncoder=function(o,r,c,s){e=o,t=r,a=c,n=Math.max(2,s)},E=function(e,t){w[d++]=e,d>=254&&O(t)},N=function(e){C(5003),p=l+2,f=!0,I(l,e)},C=function(e){for(var t=0;t<e;++t)h[t]=-1},S=m.compress=function(e,t){var a,n,o,r,m,g;for(f=!1,s=A(c=i=e),u=(l=1<<e-1)+1,p=l+2,d=0,r=j(),g=0,a=5003;a<65536;a*=2)++g;g=8-g,C(5003),I(l,t);e:for(;-1!=(o=j());)if(a=(o<<12)+r,h[n=o<<g^r]!=a){if(h[n]>=0){m=5003-n,0===n&&(m=1);do{if((n-=m)<0&&(n+=5003),h[n]==a){r=v[n];continue e}}while(h[n]>=0)}I(r,t),r=o,p<4096?(v[n]=p++,h[n]=a):N(t)}else r=v[n];I(r,t),I(u,t)},O=(m.encode=function(a){a.writeByte(n),o=e*t,r=0,S(n+1,a),a.writeByte(0)},function(e){d>0&&(e.writeByte(d),e.writeBytes(w,0,d),d=0)}),A=function(e){return(1<<e)-1},j=function(){return 0===o?-1:(--o,255&a[r++])},I=function(e,t){for(g&=y[b],b>0?g|=e<<b:g=e,b+=c;b>=8;)E(255&g,t),g>>=8,b-=8;if((p>s||f)&&(f?(s=A(c=i),f=!1):s=12==++c?4096:A(c)),e==u){for(;b>0;)E(255&g,t),g>>=8,b-=8;O(t)}};return k.apply(this,arguments),m},We=function(){for(var e=0,t={};e<256;e++)t[e]=String.fromCharCode(e);function a(){this.bin=[]}a.prototype.getData=function(){for(var e="",a=this.bin.length,n=0;n<a;n++)e+=t[this.bin[n]];return e},a.prototype.writeByte=function(e){this.bin.push(e)},a.prototype.writeUTFBytes=function(e){for(var t=e.length,a=0;a<t;a++)this.writeByte(e.charCodeAt(a))},a.prototype.writeBytes=function(e,t,a){for(var n=a||e.length,o=t||0;o<n;o++)this.writeByte(e[o])};var n,o,r,c,s,i,l,u,d,m={},h=null,v=-1,p=0,g=!1,b=[],y=7,w=-1,k=!1,E=!0,N=!1,C=10,S="Generated by jsgif (https://github.com/antimatter15/jsgif/)",O=(m.setDelay=function(e){p=Math.round(e/10)},m.setDispose=function(e){e>=0&&(w=e)},m.setRepeat=function(e){e>=0&&(v=e)},m.setTransparent=function(e){h=e},m.setComment=function(e){S=e},m.addFrame=function(e,t){if(null===e||!g||null===c)throw new Error("Please call start method before calling addFrame");var a=!0;try{t?e instanceof ImageData?(s=e.data,n==e.width&&o==e.height||A(e.width,e.height)):e instanceof Uint8ClampedArray?e.length==n*o*4?s=e:(console.log("Please set the correct size: ImageData length mismatch"),a=!1):(console.log("Please provide correct input"),a=!1):(s=e.getImageData(0,0,e.canvas.width,e.canvas.height).data,N||A(e.canvas.width,e.canvas.height)),x(),j(),E&&(U(),D(),v>=0&&P()),T(),""!==S&&M(),B(),E||D(),R(),E=!1}catch(r){a=!1}return a},m.download=function(e){if(null===c||0==k)console.log("Please call start method and add frames and call finish method before calling download");else{e=void 0!==e?(e.endsWith(".gif"),e):"download.gif";var t=document.createElement("a");t.download=e,t.href=URL.createObjectURL(new Blob([new Uint8Array(c.bin)],{type:"image/gif"})),t.click()}},m.upload=function(e){if(null!==c&&0!=k){e=void 0!==e?(e.endsWith(".gif"),e):"download.gif";var t=document.createElement("a");t.target="_blank",t.href=URL.createObjectURL(new Blob([new Uint8Array(c.bin)],{type:"image/gif"}));f()(t).attr("href").replace("blob:","");return new Uint8Array(c.bin)}console.log("Please call start method and add frames and call finish method before calling download")},m.finish=function(){if(!g)return!1;var e=!0;g=!1;try{c.writeByte(59),k=!0}catch(t){e=!1}return e},function(){r=0,s=null,i=null,l=null,d=null,k=!1,E=!0}),A=(m.setFrameRate=function(e){15!=e&&(p=Math.round(100/e))},m.setQuality=function(e){e<1&&(e=1),C=e},m.setSize=function(e,t){g&&!E||((n=e)<1&&(n=320),(o=t)<1&&(o=240),N=!0)}),j=(m.start=function(){O();var e=!0;k=!1,c=new a;try{c.writeUTFBytes("GIF89a")}catch(t){e=!1}return g=e},m.cont=function(){O();return k=!1,c=new a,g=!0},function(){var e=i.length,t=e/3;l=[];var a=new He(i,e,C);d=a.process();for(var n=0,o=0;o<t;o++){var c=a.map(255&i[n++],255&i[n++],255&i[n++]);b[c]=!0,l[o]=c}i=null,u=8,y=7,null!==h&&(r=I(h))}),I=function(e){if(null===d)return-1;for(var t=(16711680&e)>>16,a=(65280&e)>>8,n=255&e,o=0,r=16777216,c=d.length,s=0;s<c;){var i=t-(255&d[s++]),l=a-(255&d[s++]),u=n-(255&d[s]),m=i*i+l*l+u*u,h=s/3;b[h]&&m<r&&(r=m,o=h),s++}return o},x=function(){var e=n,t=o;i=[];for(var a=s,r=0,c=0;c<t;c++)for(var l=0;l<e;l++){var u=c*e*4+4*l;i[r++]=a[u],i[r++]=a[u+1],i[r++]=a[u+2]}},T=function(){var e,t;c.writeByte(33),c.writeByte(249),c.writeByte(4),null===h?(e=0,t=0):(e=1,t=2),w>=0&&(t=7&w),t<<=2,c.writeByte(0|t|e),L(p),c.writeByte(r),c.writeByte(0)},M=function(){c.writeByte(33),c.writeByte(254),c.writeByte(S.length),c.writeUTFBytes(S),c.writeByte(0)},B=function(){c.writeByte(44),L(0),L(0),L(n),L(o),E?c.writeByte(0):c.writeByte(128|y)},U=function(){L(n),L(o),c.writeByte(240|y),c.writeByte(0),c.writeByte(0)},P=function(){c.writeByte(33),c.writeByte(255),c.writeByte(11),c.writeUTFBytes("NETSCAPE2.0"),c.writeByte(3),c.writeByte(1),L(v),c.writeByte(0)},D=function(){c.writeBytes(d);for(var e=768-d.length,t=0;t<e;t++)c.writeByte(0)},L=function(e){c.writeByte(255&e),c.writeByte(e>>8&255)},R=function(){new ze(n,o,l,u).encode(c)};m.stream=function(){return c},m.setProperties=function(e,t){g=e,E=t};return m};var Ge,Ye,Je,Ke=window.UploaderForGoogleDrive=function(){var e=function(){this.interval=1e3,this.maxInterval=6e4};e.prototype.retry=function(e){setTimeout(e,this.interval),this.interval=this.nextInterval_()},e.prototype.reset=function(){this.interval=1e3},e.prototype.nextInterval_=function(){var e=2*this.interval+this.getRandomInt_(0,1e3);return Math.min(e,this.maxInterval)},e.prototype.getRandomInt_=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};var t=function(t){var a=function(){};if(this.file=t.file,this.contentType=t.contentType||this.file.type||"application/octet-stream",this.metadata=t.metadata||{name:this.file.name,mimeType:this.contentType},t.token)this.token=t.token;else try{this.token=window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse(!0).access_token,C.dispatch({type:"token",value:this.token})}catch(o){throw console.log(o),new Error("Uploader: missing Google OAuth2 access_token")}if(this.onComplete=t.onComplete||a,this.onProgress=t.onProgress||a,this.onError=t.onError||a,this.offset=t.offset||0,this.chunkSize=t.chunkSize||0,this.retryHandler=new e,this.url=t.url,!this.url){var n=t.params||{};n.uploadType="resumable",this.url=this.buildUrl_(t.fileId,n,t.baseUrl)}this.httpMethod=t.fileId?"PATCH":"POST"};return t.prototype.upload=function(){var e=new XMLHttpRequest;e.open(this.httpMethod,this.url,!0),e.setRequestHeader("Authorization","Bearer ".concat(this.token)),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("X-Upload-Content-Length",this.file.size),e.setRequestHeader("X-Upload-Content-Type",this.contentType),e.setRequestHeader("writersCanShare",!0),e.onload=function(e){if(e.target.status<400){var t=e.target.getResponseHeader("Location");this.url=t,this.sendFile_()}else this.onUploadError_(e)}.bind(this),e.onerror=this.onUploadError_.bind(this),e.send(JSON.stringify(this.metadata))},t.prototype.sendFile_=function(){var e=this.file,t=this.file.size;(this.offset||this.chunkSize)&&(this.chunkSize&&(t=Math.min(this.offset+this.chunkSize,this.file.size)),e=e.slice(this.offset,t));var a=new XMLHttpRequest;a.open("PUT",this.url,!0),a.setRequestHeader("Content-Type",this.contentType),a.setRequestHeader("Content-Range","bytes ".concat(this.offset,"-").concat(t-1,"/").concat(this.file.size)),a.setRequestHeader("X-Upload-Content-Type",this.file.type),a.setRequestHeader("writersCanShare",!0),a.upload&&a.upload.addEventListener("progress",this.onProgress),a.onload=this.onContentUploadSuccess_.bind(this),a.onerror=this.onContentUploadError_.bind(this),a.send(e)},t.prototype.resume_=function(){var e=new XMLHttpRequest;e.open("PUT",this.url,!0),e.setRequestHeader("Content-Range","bytes */".concat(this.file.size)),e.setRequestHeader("X-Upload-Content-Type",this.file.type),e.setRequestHeader("writersCanShare",!0),e.upload&&e.upload.addEventListener("progress",this.onProgress),e.onload=this.onContentUploadSuccess_.bind(this),e.onerror=this.onContentUploadError_.bind(this),e.send()},t.prototype.extractRange_=function(e){var t=e.getResponseHeader("Range");t&&(this.offset=parseInt(t.match(/\d+/g).pop(),10)+1)},t.prototype.onContentUploadSuccess_=function(e){200==e.target.status||201==e.target.status?this.onComplete(e.target.response):308==e.target.status?(this.extractRange_(e.target),this.retryHandler.reset(),this.sendFile_()):this.onContentUploadError_(e)},t.prototype.onContentUploadError_=function(e){e.target.status&&e.target.status<500?this.onError(e.target.response):this.retryHandler.retry(this.resume_.bind(this))},t.prototype.onUploadError_=function(e){this.onError(e.target.response)},t.prototype.buildQuery_=function(e){return e=e||{},Object.keys(e).map(function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))}).join("&")},t.prototype.buildUrl_=function(e,t,a){var n=a||"https://www.googleapis.com/upload/drive/v3/files/";e&&(n+=e);var o=this.buildQuery_(t);return o&&(n+="?".concat(o)),n},t}();function qe(e){var t=new We;t.setRepeat(0),t.setDelay(Ge),t.start();for(var a=0;a<f()("#canvas-block").children().length;a+=1){for(var n=document.querySelector("#canvas".concat(a+1)),o=f()("#canvas".concat(a+1)).get(0).getContext("2d").getImageData(0,0,f()("#canvas".concat(a+1)).width(),f()("#canvas".concat(a+1)).width()),r=o.data.length,c=[],s=void 0,i=0;r>0;)(s=o.data.slice(i,i+4)).every(function(e){return 0===e})&&(s=s.map(function(){return 255})),c.push.apply(c,Object(Fe.a)(s)),i+=4,r-=4;var l=Uint8ClampedArray.from(c),u=new ImageData(l,n.width,n.height);t.setSize(n.height,n.width),t.addFrame(u,!0)}return t.finish(),Je=Je||"New Piskel-clone",e?t.upload("".concat(Je,".gif")):t.download("".concat(Je,".gif"))}function Ve(){var e=new We;e.setRepeat(0),e.setDelay(Ge),e.start();for(var t=0;t<f()("#canvas-block").children().length;t+=1){for(var a=document.querySelector("#canvas".concat(t+1)),n=f()("#canvas".concat(t+1)).get(0).getContext("2d").getImageData(0,0,f()("#canvas".concat(t+1)).width(),f()("#canvas".concat(t+1)).width()),o=n.data.length,r=[],c=void 0,s=0;o>0;)(c=n.data.slice(s,s+4)).every(function(e){return 0===e})&&(c=c.map(function(){return 255})),r.push.apply(r,Object(Fe.a)(c)),s+=4,o-=4;var i=Uint8ClampedArray.from(r),l=new ImageData(i,a.width,a.height);e.setSize(a.height,a.width),e.addFrame(l,!0)}e.finish();var u=e.stream().getData();return"data:image/gif;base64,".concat(function(e){for(var t,a,n,o,r,c,s,i="",l=0,u=e.length,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l<u;)o=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(a=e.charCodeAt(l++))>>4,c=(15&a)<<2|(n=e.charCodeAt(l++))>>6,s=63&n,isNaN(a)?c=s=64:isNaN(n)&&(s=64),i=i+d.charAt(o)+d.charAt(r)+d.charAt(c)+d.charAt(s);return i}(u))}window.pUploaderForGoogleDrive=function(e){return new Promise(function(t,a){e.onComplete=function(e){var a;try{a="string"===typeof e?JSON.parse(e):e}catch(n){a=e}t(a)},e.onError=function(e){a(e)},new window.UploaderForGoogleDrive(e).upload()})},k.subscribe(function(){var e=k.getState().fps||3;Ge=1e3/e}),N.subscribe(function(){Ye=N.getState().currentCanvas}),E.subscribe(function(){Je=E.getState().title});var Qe="AIzaSyAVJFuo57LAwfGHx66mi177_F4r2sWrato";function Xe(){window.gapi.client.setApiKey(Qe),window.gapi.client.load("https://content.googleapis.com/discovery/v1/apis/drive/v3/rest").then(function(){console.log("GAPI client loaded for API")},function(e){console.error("Error loading GAPI client for API",e)});var e=new Blob([qe("upload")],{type:"image/gif"});new Ke({file:e,metadata:{name:Je},onComplete:function(e){var t=JSON.parse(e).id,a="https://drive.google.com/open?id=".concat(t),n="https://drive.google.com/thumbnail?id=".concat(t);C.dispatch({type:"googleUrl",value:a}),C.dispatch({type:"gifUrl",value:n}),f()("#google-link").attr("href",a),f()("#span-link").attr("href",n),window.gapi.client.drive.permissions.create({fileId:"".concat(t),resource:{role:"reader",type:"anyone"}}).then(function(e){console.log("Response",e)},function(e){console.error("Execute error",e)})},onError:function(e){console.log(e)}}).upload()}var Ze=a(26),_e=a.n(Ze);_e.a.initializeApp({apiKey:"AIzaSyBADlQGxow-MMb31zZkmqE10d4XSh2nMaM",authDomain:"piskel-clown-1561245773423.firebaseapp.com",databaseURL:"https://piskel-clown-1561245773423.firebaseio.com",projectId:"piskel-clown-1561245773423",storageBucket:"",messagingSenderId:"717448332612",appId:"1:717448332612:web:b29e4fdc54066ec0"});var $e,et,tt,at,nt=_e.a;function ot(){var e=new Date,t=e.getDate();t<10&&(t="0".concat(t));var a=e.getMonth();a<10&&(a="0".concat(a));var n=e.getHours();n<10&&(n="0".concat(n));var o=e.getMinutes();return o<10&&(o="0".concat(o)),"".concat(n,":").concat(o,"  ").concat(t,"/").concat(a,"/").concat(e.getFullYear())}function rt(e,t,a,n,o,r,c){var s=void 0!==a?a:localStorage.getItem("project"),i=e,l=[];if(t&&Object.keys(t).length>0)for(var u in t)i[u]={gif:t[u].gif,frames:t[u].frames,title:t[u].title,time:t[u].time};if(0===Object.keys(i).length)i[s]={gif:n,frames:o,title:r,time:c};else{for(var d in i)d===s&&(i[d].gif=n,i[d].frames=o,i[d].title=r,i[d].time=c),l.push(d);l.every(function(e){return e!==s})&&(i[s]={gif:n,frames:o,title:r,time:c})}return i}window.localProjects={},window.authLocalProjects={},S.subscribe(function(){$e=S.getState().optionsBlock}),C.subscribe(function(){et=C.getState().name,tt=C.getState().userID}),w.subscribe(function(){at=w.getState().piskelID});var ct,st,it,lt,ut=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={value:"New Piskel",isLogin:!1},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,E.dispatch({type:"title",value:f()("#title-input").val()}),et&&this.setState({isLogin:!0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"saveLocallyHandler",value:function(){var e=f()("#title-input").val();this.setState({value:e}),E.dispatch({type:"title",value:e});for(var t=[],a=0;a<f()(".preview").children().length;a+=1)t.push(f()(".preview").children()[a].src);var n=Ve(),o="undefined"!==localStorage.getItem("localProjects")?JSON.parse(localStorage.getItem("localProjects")):void 0,r=ot(),c=JSON.stringify(rt(window.localProjects,o,at,n,t,e,r));localStorage.setItem("localProjects",c),w.dispatch({type:"projects",value:c}),f()("#addLocalPiskel").click()}},{key:"saveToGaleryHandler",value:function(){if(!localStorage.getItem("auth"))return this.setState({isLogin:!1}),void f()("#signOuted").click();var e=f()("#title-input").val();this.setState({value:e}),E.dispatch({type:"title",value:e});for(var t=[],a=0;a<f()(".preview").children().length;a+=1)t.push(f()(".preview").children()[a].src);var n=Ve(),o="undefined"!==localStorage.getItem("authLocalProjects")?JSON.parse(localStorage.getItem("authLocalProjects")):void 0,r=ot(),c=JSON.stringify(function(e,t,a,n,o,r,c,s){var i,l=e,u=localStorage.getItem("userID");if(t){var d=Object.entries(t);l={};for(var m=0;m<d.length;m+=1)l[d[m][0]]={},l[d[m][0]]=d[m][1];d.every(function(e){return e[0]!==s})&&(l[s]={})}else l[s]={};if(localStorage.getItem("".concat(u))&&(l[s]={},l[s]=JSON.parse(localStorage.getItem("".concat(u)))),l)for(var h=Object.entries(l),v=0;v<h.length;v+=1)h[v][0]===s&&(i=h[v][1]);for(var p,f,g,b,y,w,k=rt(l["".concat(s)],i,a,n,o,r,c),E=Object.entries(k),N=0;N<E.length;N+=1){var C=E[N][0],S=E[N][1];p=s,f=C,g=S.frames,b=S.gif,y=S.time,w=S.title,nt.database().ref("users/".concat(p,"/").concat(f)).set({frames:g,gif:b,time:y,title:w})}var O=JSON.stringify(k);return localStorage.setItem("".concat(s),O),l["".concat(s)]=k,l}(window.authLocalProjects,o,at,n,t,e,r,tt));localStorage.setItem("authLocalProjects",c)}},{key:"updateState",value:function(){et&&this.setState({isLogin:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"save-settings-block ".concat("save-settings"===$e?"flexed":"hidden")},o.a.createElement("div",{className:"sprite-info-block"},o.a.createElement("span",{className:"sprite-info bold"},"Sprite information"),o.a.createElement("span",{className:"label-title"},"Title:"),o.a.createElement("input",{className:"title-input",id:"title-input",defaultValue:this.state.value}),o.a.createElement("span",{className:"label-description"},"Description:"),o.a.createElement("textarea",{rows:"1",cols:"6",className:"description-input",id:"description-input"})),o.a.createElement("div",{className:"save-online-block"},o.a.createElement("span",{className:"save-online bold"},"Save online"),o.a.createElement("button",{id:"save-locally",className:"save-online-button",type:"button",onClick:function(){return e.saveLocallyHandler()}},"Save locally"),o.a.createElement("p",{className:"save-online-info"},"Your piskel will be saved and available only from this browser"),o.a.createElement("button",{id:"save-online",className:"save-online-button ".concat(this.state.isLogin?"":"hidden"),type:"button",onClick:function(){return e.saveToGaleryHandler()}},"Save to your gallery"),o.a.createElement("button",{type:"button",onClick:function(){f()(".abcRioButton.abcRioButtonLightBlue").click()},className:"save-online-button ".concat(this.state.isLogin?"hidden":"")},"Sign in to save to your gallery"),o.a.createElement("p",{className:"save-online-info"},"Your piskel will be stored online in your gallery"),o.a.createElement("button",{type:"button",className:"hidden",id:"updateSaveButtonLoggedIn",onClick:function(){return e.updateState()}})))}}]),t}(o.a.Component);a(72);S.subscribe(function(){ct=S.getState().optionsBlock}),C.subscribe(function(){st=C.getState().googleUrl,it=C.getState().urlToGif,lt=C.getState().name});var dt,mt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={active:"show-gif-block",dataUrl:"",googleUrl:"",isLogin:!1},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.mounted=!0,lt&&this.setState({isLogin:!0})}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"showExportOptions",value:function(e){var t=e.target.getAttribute("id");this.setState({active:t})}},{key:"updateState",value:function(){lt&&this.setState({isLogin:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"export-settings-block ".concat("export-settings"===ct?"flexed":"hidden")},o.a.createElement("span",{className:"export-info bold"},"Export"),o.a.createElement("div",{className:"file-format-buttons"},o.a.createElement("button",{id:"show-gif-block",className:"show-gif-block ".concat("show-gif-block"===this.state.active?"active-show-button":"not-active-show-button"),type:"button",onClick:function(t){return e.showExportOptions(t)}},"GIF"),o.a.createElement("button",{id:"show-png-block",className:"show-png-block ".concat("show-png-block"===this.state.active?"active-show-button":"not-active-show-button"),type:"button",onClick:function(t){return e.showExportOptions(t)}},"PNG")),o.a.createElement("div",{className:"gif-block ".concat("show-gif-block"===this.state.active?"flexed":"hidden")},o.a.createElement("span",{className:"gif-title"},"Convert your sprite to an animated GIF"),o.a.createElement("div",{className:"download-block"},o.a.createElement("button",{id:"download-gif",className:"gif-button",type:"button",onClick:function(){return qe()}},"Download"),o.a.createElement("span",{className:"download-gif-title"},"Download as an animated GIF")),o.a.createElement("div",{className:"download-block"},o.a.createElement("button",{id:"upload-gif",className:"gif-button",type:"button",onClick:function(){var t=Ve();e.setState({dataUrl:t})}},"Open in new tab"),o.a.createElement("span",{className:"upload-gif-title"},"Watch an animated GIF in new tab"),o.a.createElement("div",{className:"link-to-gif ".concat(this.state.dataUrl?"":"hidden")},o.a.createElement("button",{type:"button",onClick:function(){!function(e){var t=window.open();f()(t.document.body).css({display:"flex",width:"100vw",heigh:"100vh","justify-content":"center","align-items":"center",background:"whitesmoke"}),f()("<img></img>",{src:e}).appendTo(t.document.body)}(e.state.dataUrl),e.setState({dataUrl:""})}},"your animation file"))),o.a.createElement("div",{className:"download-block"},o.a.createElement("button",{id:"upload-google",className:"gif-button ".concat(this.state.isLogin?"":"hidden"),type:"button",onClick:function(){if(!localStorage.getItem("auth"))return e.setState({isLogin:!1}),void f()("#signOuted").click();Xe(),setTimeout(function(){e.setState({googleUrl:!0})},700),setTimeout(function(){e.setState({googleUrl:""})},15e4)}},"Get link"),o.a.createElement("span",{className:"upload-gif-google ".concat(this.state.isLogin?"blocked":"hidden")},"Save your animation to Google disk to share"),o.a.createElement("button",{type:"button",onClick:function(){f()(".abcRioButton.abcRioButtonLightBlue").click()},className:"save-online-button ".concat(this.state.isLogin?"hidden":"")},"Sign in to save to Google disk"),o.a.createElement("button",{type:"button",className:"hidden",id:"updateGoogleButtonLoggedIn",onClick:function(){return e.updateState()}}),o.a.createElement("div",{className:"link-to-gif ".concat(this.state.googleUrl?"":"hidden")},o.a.createElement("span",null,"Click the link"),o.a.createElement("a",{className:"google-link",id:"google-link",rel:"noopener noreferrer",target:"_blank",href:st},"Link to file on Google disk"),o.a.createElement("a",{className:"google-link",id:"span-link",rel:"noopener noreferrer",target:"_blank",href:it},"Direct link to your GIF")))),o.a.createElement("div",{className:"png-block ".concat("show-png-block"===this.state.active?"flexed":"hidden")},o.a.createElement("span",{className:"png-title"},"Export your animation as a PNG file"),o.a.createElement("div",{className:"download-block"},o.a.createElement("button",{id:"download-png",className:"png-button",type:"button",onClick:function(){return function(){var e=Ye,t=new We;t.setRepeat(0),t.setDelay(Ge),t.start();for(var a,n=f()("#canvas".concat(e)).width(),o=f()("#canvas".concat(e)).get(0).getContext("2d").getImageData(0,0,n,n),r=o.data.length,c=[],s=0;r>0;)(a=o.data.slice(s,s+4)).every(function(e){return 0===e})&&(a=a.map(function(){return 255})),c.push.apply(c,Object(Fe.a)(a)),s+=4,r-=4;var i=Uint8ClampedArray.from(c),l=new ImageData(i,n,n);t.setSize(n,n),t.addFrame(l,!0),t.finish(),Je=Je||"New Piskel-clone",t.download("".concat(Je,".png"))}()}},"Download"),o.a.createElement("span",{className:"download-png-title"},"Download selected frame as PNG file")),o.a.createElement("div",{className:"download-block"},o.a.createElement("button",{id:"open-png",className:"png-button",type:"button",onClick:function(){for(var e=[],t=0;t<f()(".preview").children().length;t+=1)e.push(f()(".preview").children()[t].src);!function(e,t){var a=window.open();f()(a.document.body).css({display:"flex","flex-direction":"column",width:"100vw",height:"100vh","align-items":"center",background:"whitesmoke",overflow:"hidden"});for(var n=f()("<div></div>",{id:"ancor",width:"100%",height:"50%"}).appendTo(a.document.body).css({width:"80%",height:"50%",background:"white","overflow-y":"scroll","margin-bottom":"25px",border:"1px solid black"}),o=0;o<e.length;o+=1)f()("<img></img>",{src:e[o],width:"25%"}).appendTo(n).css({border:"1px solid black"});f()("<div></div>",{text:t}).appendTo(a.document.body).css({display:"flex","flex-wrap":"wrap",width:"80%",height:"40%","overflow-y":"scroll","word-break":"break-word"})}(e,Ve())}},"Open"),o.a.createElement("span",{className:"open-png-title"},"Open the spritesheet as a data uri"))),o.a.createElement("div",{id:"hidden",className:"hidden"}))}}]),t}(o.a.Component);a(30);S.subscribe(function(){dt=S.getState().optionsBlock});var ht,vt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){return o.a.createElement("div",{className:"general-settings-block ".concat("import-settings"===dt?"flexed":"hidden")},o.a.createElement("div",{className:"current-bg"},o.a.createElement("span",{className:"default-bg bold"},"Load from browser"),o.a.createElement("p",null,"Load your animation saved in this browser"),o.a.createElement("button",{type:"button",onClick:function(){return f()("#showSavesButton").click()},className:"browse-local-piskels-button"},"Browse local saves")))}}]),t}(o.a.Component);k.subscribe(function(){ht=k.getState().fps});var pt,ft,gt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={fps:3,hovered:"",active:"none",mouseEnter:!1},e.mounted=!1,e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fpsOnChangeHandler",value:function(){k.dispatch({type:"fps",value:f()("#fps-bar").val()}),this.setState({fps:ht})}},{key:"popHintOnMouseOver",value:function(e){var t=e.target.getAttribute("id");this.state.hovered===t?this.setState({hovered:""}):this.setState({hovered:t})}},{key:"mouseIn",value:function(){this.setState({mouseEnter:!0})}},{key:"mouseOut",value:function(){this.setState({mouseEnter:!1})}},{key:"showOptionsOnClick",value:function(e){var t=f()(e.target).attr("id")||f()(e.target).find("i").attr("id");this.state.active===t?(this.setState({active:"none"}),S.dispatch({type:"optionsBlock",value:"none"})):(this.setState({active:t}),S.dispatch({type:"optionsBlock",value:t}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"optionsBox",id:"optionsBox"},o.a.createElement("div",{className:"fps-options"},o.a.createElement("span",{id:"display-fps",className:"display-fps"},"".concat(this.state.fps," FPS")),o.a.createElement("input",{type:"range",min:"1",max:"24",step:"1",defaultValue:this.state.fps,id:"fps-bar",className:"fps-bar",onChange:function(){return e.fpsOnChangeHandler()}})),o.a.createElement(Me,null),o.a.createElement(Ue,null),o.a.createElement("div",{className:"options-blocks-area ".concat("none"===this.state.active?"":"slide")},o.a.createElement(Le,null),o.a.createElement(Re,null),o.a.createElement(ut,null),o.a.createElement(mt,null),o.a.createElement(vt,null)),o.a.createElement("div",{className:"settings-buttons ".concat("none"===this.state.active?"":"slide"),onMouseOver:function(t){return e.popHintOnMouseOver(t)},onFocus:function(){}},o.a.createElement("button",{type:"button",className:"settings-button",onFocus:function(){},onClick:function(t){return e.showOptionsOnClick(t)},onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"settings",className:"fas fa-cog ".concat("settings"===this.state.hovered?"fas-hovered":""," ").concat("settings"===this.state.active?"fas-hovered":"")})),o.a.createElement("button",{type:"button",className:"settings-button",onFocus:function(){},onClick:function(t){return e.showOptionsOnClick(t)},onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"resize-settings",className:"fas fa-crop ".concat("resize-settings"===this.state.hovered?"fas-hovered":""," ").concat("resize-settings"===this.state.active?"fas-hovered":"")})),o.a.createElement("button",{type:"button",className:"settings-button",onFocus:function(){},onClick:function(t){return e.showOptionsOnClick(t)},onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"save-settings",className:"fas fa-save ".concat("save-settings"===this.state.hovered?"fas-hovered":""," ").concat("save-settings"===this.state.active?"fas-hovered":"")})),o.a.createElement("button",{type:"button",className:"settings-button",onFocus:function(){},onClick:function(t){return e.showOptionsOnClick(t)},onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"export-settings",className:"fas fa-file-download ".concat("export-settings"===this.state.hovered?"fas-hovered":""," ").concat("export-settings"===this.state.active?"fas-hovered":"")})),o.a.createElement("button",{type:"button",className:"settings-button",onFocus:function(){},onClick:function(t){return e.showOptionsOnClick(t)},onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()}},o.a.createElement("i",{id:"import-settings",className:"fas fa-file-upload ".concat("import-settings"===this.state.hovered?"fas-hovered":""," ").concat("import-settings"===this.state.active?"fas-hovered":"")})),o.a.createElement("p",{className:"hint settings-button-cog ".concat(!0===this.state.mouseEnter&&"settings"===this.state.hovered?"":"hidden")},"Settings",o.a.createElement("i",{className:"settings-button-cog-arrow fas fa-caret-right"})),o.a.createElement("p",{className:"big hint resize-settings ".concat(!0===this.state.mouseEnter&&"resize-settings"===this.state.hovered?"":"hidden")},"Resize the drawing area",o.a.createElement("i",{className:"resize-settings-arrow fas fa-caret-right"})),o.a.createElement("p",{className:"hint save-settings ".concat(!0===this.state.mouseEnter&&"save-settings"===this.state.hovered?"":"hidden")},"Save to your galery",o.a.createElement("i",{className:"save-settings-arrow fas fa-caret-right"})),o.a.createElement("p",{className:"big hint export-settings ".concat(!0===this.state.mouseEnter&&"export-settings"===this.state.hovered?"":"hidden")},"Export as image or animated gif",o.a.createElement("i",{className:"export-settings-arrow fas fa-caret-right"})),o.a.createElement("p",{className:"big hint import-settings ".concat(!0===this.state.mouseEnter&&"import-settings"===this.state.hovered?"":"hidden")},"Import your animation",o.a.createElement("i",{className:"import-settings-arrow fas fa-caret-right"}))))}}]),t}(o.a.Component),bt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={projects:[]},e.changedProjects="",e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){if(localStorage.getItem("localProjects")){var e=JSON.parse(localStorage.getItem("localProjects"));this.setState({projects:Object.entries(e)})}}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"deletePiskel",value:function(e){for(var t=0;t<this.state.projects.length;t+=1)this.state.projects[t][0]===e&&this.state.projects.splice(t,1);this.changedProjects=this.state.projects,window.localProjects={};for(var a=0;a<this.changedProjects.length;a+=1)window.localProjects[this.changedProjects[a][0]]=this.changedProjects[a][1];this.setState({projects:this.changedProjects});var n=JSON.stringify(window.localProjects);localStorage.setItem("localProjects",n)}},{key:"addPiskel",value:function(){if(localStorage.getItem("localProjects")){var e=JSON.parse(localStorage.getItem("localProjects"));this.setState({projects:Object.entries(e)})}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"local-saves-block"},o.a.createElement("div",null,o.a.createElement("span",{className:"local-saves-title"},"Browse local piskels"),o.a.createElement("i",{className:"far fa-window-close local-saves-button",onClick:function(){return f()("#hideSavesButton").click()},onKeyPress:void 0,tabIndex:"-1",role:"button"})),o.a.createElement("div",{className:"table-wrapper"},o.a.createElement("table",{className:"table-local-saves",cellPadding:"10",cellSpacing:"20"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"table-title"},"Name"),o.a.createElement("th",{className:"table-title"},"Date"),o.a.createElement("th",{className:"table-title"},"Actions"))),o.a.createElement("tbody",null,this.state.projects.map(function(t){return o.a.createElement("tr",{key:t[0]},o.a.createElement("td",{key:t[1].title,className:"table-data"},t[1].title),o.a.createElement("td",{key:t[1].time,className:"table-data"},t[1].time),o.a.createElement("td",{key:"".concat(t[0],"-buttons"),className:"table-data table-data-buttons"},o.a.createElement("button",{key:"".concat(t[0],"-load"),type:"button",className:"table-button"},"Load"),o.a.createElement("button",{key:"".concat(t[0],"-delete"),type:"button",className:"table-button",onClick:function(){return e.deletePiskel(t[0])}},"Delete")))})))),o.a.createElement("button",{id:"addLocalPiskel",type:"button",className:"hidden",onClick:function(){return e.addPiskel()}}))}}]),t}(o.a.Component),yt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={showSaves:!1},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){f()(window).bind("beforeunload",function(){return"are you sure you want to leave?"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"container",className:"container"},o.a.createElement("section",{className:"tool-pannel",id:"tool-pannel"},o.a.createElement(F,null)),o.a.createElement("section",{className:"frame-area",id:"frame-area"},o.a.createElement(xe,null)),o.a.createElement("section",{className:"canvas-area",id:"canvas-area"},o.a.createElement(ye,null)),o.a.createElement("section",{className:"preview-area noselect",id:"preview-area"},o.a.createElement(Te,null)),o.a.createElement("section",{className:"options-area",id:"options-area"},o.a.createElement(gt,null)),o.a.createElement("div",{className:"local-saves-page ".concat(this.state.showSaves?"":"hidden")},o.a.createElement("div",{className:"local-saves-background"}),o.a.createElement(bt,null)),o.a.createElement("button",{type:"button",className:"hidden",id:"showSavesButton",onClick:function(){return e.setState({showSaves:!0})}}),o.a.createElement("button",{type:"button",className:"hidden",id:"hideSavesButton",onClick:function(){return e.setState({showSaves:!1})}}))}}]),t}(o.a.Component);a(73);C.subscribe(function(){pt=C.getState().name,ft=C.getState().imageURL});var wt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={active:"",height:"",isEmpty:!0,projects:[]},e.changedProjects="",e.localObj={},e.mounted=!1,e.user="",e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.user=localStorage.getItem("userID"),localStorage.getItem("auth")||this.setState({isEmpty:!0})}},{key:"componentDidMount",value:function(){var e=this;if(this.setState({height:window.innerHeight}),this.mounted=!0,localStorage.getItem("".concat(this.user))){var t=JSON.parse(localStorage.getItem("".concat(this.user)));this.setState({isEmpty:!1,projects:Object.entries(t)})}else nt.database().ref("/users/".concat(this.user)).once("value").then(function(t){if(e.localObj=t.val(),e.localObj){var a=JSON.stringify(e.localObj);localStorage.setItem("".concat(e.user),a),e.setState({isEmpty:!1,projects:Object.entries(e.localObj)})}})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"deletePiskel",value:function(e){if(!localStorage.getItem("auth"))return this.setState({isEmpty:!0}),void f()("#signOuted").click();for(var t=0;t<this.state.projects.length;t+=1)this.state.projects[t][0]===e&&(nt.database().ref("users/".concat(this.user,"/").concat(this.state.projects[t][0])).set(null),this.state.projects.splice(t,1));this.changedProjects=this.state.projects,window["".concat(this.user)]={};for(var a=0;a<this.changedProjects.length;a+=1)window["".concat(this.user)][this.changedProjects[a][0]]=this.changedProjects[a][1];this.setState({projects:this.changedProjects});var n=JSON.stringify(window["".concat(this.user)]);localStorage.setItem("".concat(this.user),n)}},{key:"hoverIn",value:function(e){this.mounted&&this.setState({active:e.currentTarget.id})}},{key:"hoverOut",value:function(){this.mounted&&this.setState({active:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"user-page",style:{height:this.state.height-110}},o.a.createElement("div",{className:"user-image",style:{backgroundImage:"url(".concat(ft,")"),backgroundSize:"contain"}}),o.a.createElement("h2",{className:"user-name"},pt),o.a.createElement("ul",{className:"piskel-list"},o.a.createElement("li",null,"all"),o.a.createElement("li",null,"public"),o.a.createElement("li",null,"private"),o.a.createElement("li",null,"deleted")),o.a.createElement("div",{id:"user-piskel-preview-area",className:"user-piskel-preview-area"},o.a.createElement("span",{className:"".concat(this.state.isEmpty?"":"hidden")},"No piskel available in 'all' category."),o.a.createElement("div",{className:"user-preview-piskel-block ".concat(this.state.isEmpty?"hidden":"flexed")},this.state.projects.map(function(t,a){return o.a.createElement("div",{key:t,className:"preview-wrapper",id:t[0],onMouseEnter:function(t){return e.hoverIn(t)},onMouseLeave:function(){return e.hoverOut()}},o.a.createElement("img",{key:t[1].gif,className:"preview-gif",src:t[1].gif,alt:"preview"}),o.a.createElement("span",{key:t[1].title,className:"preview-gif-title"},t[1].title),o.a.createElement("span",{key:t[1].time,className:"preview-gif-date"},t[1].time),o.a.createElement("button",{type:"button",className:"piskel-preview-button ".concat(e.state.active===t[0]?"":"hidden"),onClick:function(){return e.deletePiskel(t[0])}},o.a.createElement("i",{className:"fas fa-trash-alt"})),o.a.createElement("div",{key:t[1].frames,className:"hidden"},t[1].frames.map(function(e){return o.a.createElement("img",{key:e,src:e,alt:"img"})})))}))),o.a.createElement("div",{className:"hidden"},o.a.createElement("button",{id:"userAddPiskel",type:"button",onClick:void 0})))}}]),t}(o.a.Component);function kt(){for(var e,t=[],a=0;a<20;a+=1)e=[[48,57],[65,90],[97,122]][3*Math.random()>>0],t[a]=String.fromCharCode((Math.random()*(e[1]-e[0]+1)>>0)+e[0]);return t.join("")}var Et=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={page:""},e.id="",e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"isRedirected",value:function(e){return this.state.page?o.a.createElement(v.a,{to:"/create-animation/".concat(this.id)}):e?o.a.createElement("span",{className:"description-link"},"Create a new Sprite"):o.a.createElement("span",{className:"link"},"Create Sprite")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"homepage-section"},o.a.createElement("div",{className:"home-about"},o.a.createElement("h1",null,o.a.createElement("span",{className:"piskel"},"Piskel-clone "),"is a free online editor for animated sprites & pixel art"),o.a.createElement("h2",null,"Create animations in your browser."),o.a.createElement("h2",null,o.a.createElement("span",{className:"description-link"},"Try an example"),", use ",o.a.createElement("span",{role:"button",tabIndex:"-1",onKeyPress:void 0,className:"description-link",onClick:function(){return f()(".abcRioButton.abcRioButtonLightBlue").click()}},"Google sign in")," to access your gallery or simply ",o.a.createElement("button",{type:"button",className:"text-button",onClick:function(){e.id=kt(),w.dispatch({type:"piskelID",value:e.id}),k.dispatch({type:"currentPage",value:"create-animation/".concat(e.id)}),e.setState({page:"create-animation/".concat(e.id)}),localStorage.setItem("page","create-animation/".concat(e.id)),localStorage.setItem("project",e.id),f()(document.body).css({cursor:"default"})}},this.isRedirected("span"))),o.a.createElement("div",{className:"home-buttons"},o.a.createElement("button",{type:"button",className:"login-button",onClick:function(){return f()(".abcRioButton.abcRioButtonLightBlue").click()}},"Sign in"),o.a.createElement("button",{type:"button",className:"create-button",onClick:function(){e.id=kt(),w.dispatch({type:"piskelID",value:e.id}),e.setState({page:"create-animation/".concat(e.id)}),localStorage.setItem("page","create-animation/".concat(e.id)),localStorage.setItem("project",e.id),f()(document.body).css({cursor:"default"})}},this.isRedirected()))),o.a.createElement("div",{className:"home-image"},o.a.createElement("div",{className:"screen"}),o.a.createElement("div",{className:"home-preview"})))}}]),t}(o.a.Component),Nt=a(40),Ct=a.n(Nt);a(78);function St(e,t){return Math.ceil(t-(t-e)*Math.random())}var Ot=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"isPropsReceived",value:function(){this.props.state&&function e(){var t=100-48e3/window.innerWidth,a=100-37500/window.innerHeight,n=5500/window.innerHeight,o=window.innerHeight-370;document.getElementById("error-image-wrapper").animate([{top:"55px",left:"0"},{top:"".concat(St(n,a),"%"),left:"".concat(St(0,t/2),"%")},{top:"".concat(St(n,a),"%"),left:"".concat(St(0,t/2),"%")},{top:"".concat(o,"px"),left:"".concat(St(t/2,t),"%")},{top:"".concat(St(n,a),"%"),left:"".concat(St(t/2,t),"%")},{top:"55px",left:"".concat(t,"%")},{top:"".concat(St(n,a),"%"),left:"".concat(St(t/2,t),"%")},{top:"".concat(o,"px"),left:"".concat(St(t/2,t),"%")},{top:"".concat(St(n,a),"%"),left:"".concat(St(0,t/2),"%")},{top:"".concat(St(n,a),"%"),left:"".concat(St(0,t/2),"%")},{top:"55px",left:"0"}],{duration:3e4,delay:0,easing:"linear"}).play(),setTimeout(function(){e()},3e4)}()}},{key:"render",value:function(){return o.a.createElement("div",{className:"error-page"},o.a.createElement("div",{className:"error-image-wrapper",id:"error-image-wrapper"},o.a.createElement("img",{src:Ct.a,alt:"Oops! Somthing went wrong"})),o.a.createElement("div",{className:"error-text-wrapper"},o.a.createElement("span",null,"Oops! Something went wrong :("),o.a.createElement("span",null,"Please refresh the Webpage!")),this.isPropsReceived())}}]),t}(o.a.Component),At=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={id:"",name:"",img:"",redirected:"",active:"",auth:!1,error:!1},e.onSuccess=e.onSuccess.bind(Object(m.a)(e)),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("page")?this.setState({redirected:localStorage.getItem("page")}):this.setState({redirected:""})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){f()(document.body).ready(function(){window.gapi.load("client:auth2",function(){window.gapi.auth2.init({client_id:"717448332612-evijnpopt50fj6vp0d9iul50sgdout90.apps.googleusercontent.com"}).then(function(){window.gapi.signin2.render("my-signIn",{scope:"https://www.googleapis.com/auth/drive.file",width:240,height:37,longtitle:!0,onsuccess:e.onSuccess,onfailure:e.onFailure})})})})},200)}},{key:"onSuccess",value:function(e){var t=e.getBasicProfile(),a=t.getId(),n=t.getName(),o=t.getImageUrl(),r=t.getEmail();C.dispatch({type:"email",value:r}),C.dispatch({type:"userID",value:a}),localStorage.setItem("userID",a),C.dispatch({type:"name",value:n}),this.setState({id:a,name:n,img:o,auth:!0}),f()("#updateSaveButtonLoggedIn").click(),f()("#updateGoogleButtonLoggedIn").click(),localStorage.setItem("auth",!0),localStorage.getItem("page")?-1===localStorage.getItem("page").indexOf("create")&&this.setState({redirected:localStorage.getItem("page")}):(localStorage.setItem("page","user/".concat(a)),this.setState({redirected:"user/".concat(a)}),f()(document.body).css({cursor:"default"}))}},{key:"signOut",value:function(){var e=this;window.gapi.auth2.getAuthInstance().signOut().then(function(){e.setState({redirected:"",id:"",auth:!1}),localStorage.setItem("page",""),localStorage.setItem("auth",!1),C.dispatch({type:"name",value:""})})}},{key:"isRedirected",value:function(){return C.dispatch({type:"imageURL",value:this.state.img}),localStorage.getItem("page")&&this.state.redirected?o.a.createElement(v.a,{to:"/".concat(this.state.redirected)}):o.a.createElement(v.a,{to:"/"})}},{key:"addActiveClass",value:function(e){var t=e.currentTarget.getAttribute("id");this.state.active===t?this.setState({active:""}):this.setState({active:t})}},{key:"render",value:function(){var e=this;return o.a.createElement(s.a,null,o.a.createElement("div",null,o.a.createElement("header",{className:"header"},o.a.createElement("div",{className:"header-menu"},o.a.createElement("span",{className:"menu-icon"},o.a.createElement("i",{className:"fas fa-bars"})),o.a.createElement("ul",{className:"menu"},o.a.createElement("li",{className:"homepage"},o.a.createElement(s.b,{to:"/",className:"task-name",onClick:function(t){if(localStorage.getItem("auth")||e.setState({auth:!1}),localStorage.getItem("page"))if(-1!==localStorage.getItem("page").indexOf("create")){if(!0===confirm("Are you sure you want to leave?"))return e.setState({redirected:"about"}),localStorage.setItem("page","about"),void f()(document.body).css({cursor:"default"});t.preventDefault()}else e.setState({redirected:"about"}),localStorage.setItem("page","about"),f()(document.body).css({cursor:"default"})}},"Piskel-clone")),o.a.createElement("li",{className:"create menu-item"},o.a.createElement(s.b,{to:"/create-animation",className:"create-link",onClick:function(t){if(localStorage.getItem("page")&&-1!==localStorage.getItem("page").indexOf("create")){if(!0===confirm("Are you sure you want to leave?")){var a=kt();return w.dispatch({type:"piskelID",value:a}),e.setState({redirected:"create-animation/".concat(a)}),localStorage.setItem("page","create-animation/".concat(a)),localStorage.setItem("project",a),void f()(document.body).css({cursor:"default"})}t.preventDefault()}else{var n=kt();w.dispatch({type:"piskelID",value:n}),e.setState({redirected:"create-animation/".concat(n)}),localStorage.setItem("page","create-animation/".concat(n)),localStorage.setItem("project",n),f()(document.body).css({cursor:"default"})}}},"Create Animation")),o.a.createElement("li",{className:"signin"},o.a.createElement("div",{className:"menu-item ".concat(this.state.auth?"account":"hidden"),id:"list",role:"button",tabIndex:"-1",onKeyPress:void 0,onClick:function(t){localStorage.getItem("auth")?e.addActiveClass(t):f()("#signOuted").click()}},o.a.createElement("div",{className:"account-image",style:{backgroundImage:"url(".concat(this.state.img,")"),backgroundSize:"contain"}}),o.a.createElement("span",{className:"account-button"},this.state.name),o.a.createElement("i",{className:"fas fa-sort-down"}),o.a.createElement("ul",{className:"dropdown ".concat("list"===this.state.active?"active":"hidden")},o.a.createElement("li",{className:"list top ".concat("list"===this.state.active?"":"hidden")},o.a.createElement(s.b,{to:"/user/".concat(this.state.id),id:"galery",className:"account-item",onClick:function(t){if(localStorage.getItem("page"))if(-1!==localStorage.getItem("page").indexOf("create")){if(!0===confirm("Are you sure you want to leave?"))return localStorage.setItem("page","user/".concat(e.state.id)),e.setState({redirected:localStorage.getItem("page")}),void f()(document.body).css({cursor:"default"});t.preventDefault()}else localStorage.setItem("page","user/".concat(e.state.id)),e.setState({redirected:localStorage.getItem("page")}),f()(document.body).css({cursor:"default"})}},"My Galery")),o.a.createElement("li",{className:"list bottom ".concat("list"===this.state.active?"":"hidden")},o.a.createElement(s.b,{to:"/".concat(this.state.redirected),id:"logout",className:"account-item",onClick:function(t){!0===confirm("Are you sure you want to leave?")?e.signOut():t.preventDefault()}},"Log out")))),o.a.createElement("div",{id:"my-signIn",className:"".concat(this.state.auth?"hidden":"shown"),onClick:function(){},onKeyPress:function(){},role:"button",tabIndex:"-1"}),this.isRedirected()))),o.a.createElement("button",{id:"signOuted",type:"button",className:"hidden",onClick:function(){return e.setState({auth:!1,error:!0})}})),o.a.createElement("div",{className:"error-section ".concat(this.state.error?"blocked":"hidden")},o.a.createElement(Ot,{state:this.state.error})),o.a.createElement("div",{className:"".concat(this.state.error?"hidden":"")},o.a.createElement(v.d,null,o.a.createElement(v.b,{path:"/",exact:!0,component:Et}),o.a.createElement(v.b,{path:"/user/".concat(this.state.id),component:wt}),o.a.createElement(v.b,{path:"/create-animation/*",component:yt}),o.a.createElement(v.b,{path:"*",component:Et})))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(s.a,null,o.a.createElement(At,null)),document.getElementById("home-page")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[41,1,2]]]);
//# sourceMappingURL=main.cbc4f5e4.chunk.js.map