{"version":3,"sources":["components/tools/images/pen.png","components/tools/images/colorpicker.png","components/tools/images/bucket.png","components/tools/images/eraser.png","mainpage/error/error.jpg","store/store.js","components/tools/color-picker.js","components/tools/toolsDomBuilder.js","screens/canvas/resizeWindow.js","components/tools/paintBucket.js","components/tools/pen.js","components/tools/eraser.js","components/tools/stroke.js","screens/canvas/drawing.js","screens/canvas/paint.js","screens/preview/preview.js","screens/canvas/canvasDomBuilder.js","components/frames-list/frameDomBuilder.js","components/frames-list/canvasManager.js","components/frames-list/framesManager.js","components/menu/palettes/palettes.js","screens/preview/previewDomBuilder.js","components/menu/layers-list/layers-list.js","components/menu/settings/settings.js","components/menu/resize/resizeCanvas.js","components/gifModule/jsgif-master/NeuQuant.js","components/gifModule/jsgif-master/LZWEncoder.js","components/gifModule/jsgif-master/GIFEncoder.js","components/menu/export/googleUploader.js","components/menu/export/fromCanvasToFile.js","components/gifModule/jsgif-master/b64.js","firebase.js","components/menu/save/save.js","components/menu/save/saveLocally.js","components/menu/export/export.js","components/menu/import/import.js","components/menu/optionsDomBuilder.js","components/menu/export/fromImageToCanvas.js","components/menu/import/localSaves.js","mainpage/create/create.js","mainpage/about/about.js","mainpage/user/user.js","mainpage/error/error.js","mainpage/project/project.js","mainpage/home.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","preview","createStore","state","arguments","length","undefined","action","type","Object","assign","gif","value","frames","piskelID","projects","store","currentPage","currentColor","backColor","currentTool","fps","customWidth","settings","setBg","title","description","canvas","currentCanvas","user","name","userID","imageURL","email","token","googleUrl","urlToGif","options","optionsBlock","palette","addColor","piskelGif","piskelTitle","piskelDescription","piskelDate","customedColorOnChange","id","newValue","$","concat","val","customedColor","match","map","v","parseInt","join","dispatch","css","background-color","attr","toolState","currentColorState","backColorState","subscribe","getState","changeWidth","Tools","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","tool","active","value1","value2","pickedColor","mounted","_this2","document","click","e","colorPickerHandleClick","setState","curColorValue","backColorValue","hide","target","is","curCanv","querySelector","rect","getBoundingClientRect","x","Math","round","clientX","left","y","clientY","top","ctx","getContext","getImageData","data","rgbColor","hexColor","r","g","b","hexR","toString","hexG","hexB","rgbaToHex","show","children","removeClass","_this3","react_default","a","createElement","className","onMouseEnter","buttonOnHoverIn","onMouseLeave","buttonOnHoverOut","onClick","find","addClass","focus","body","cursor","paintBucketIcon","blur","colorPicker","penIcon","erserIcon","hex","color","nums","exec","rgbToHex","role","switchColorsOnClick","onFocus","onKeyPress","tabIndex","onChange","React","Component","canvasWidth","window","innerWidth","innerHeight","bind","i","imageData","get","putImageData","text","width","endX","endY","mouseDownX","mouseDownY","end","offsetX","offsetY","fillStyle","strokeStyle","canvasSize","ceil","mouseMoveX","floor","mouseMoveY","fillRect","start","globalCompositeOperation","mousemove","radius","startX","startY","lastX","lastY","endStroke","drawCtx","pageX","offsetLeft","pageY","offsetTop","clearRect","lineWidth","beginPath","moveTo","lineTo","stroke","sqrt","arc","PI","mouseup","strokeLines","getColorAtPixel","setColorAtPixel","colorMatch","paintIt","newColor","rgb","col","height","stack","baseColor","clicked","push","pop","goDown","goUp","goLeft","goRight","floodFill","dataURL","toDataURL","background","background-size","anim","newWindow","count","animate","clearTimeout","time","display","style","setTimeout","makeImage","n","canvasImage","Image","insertBefore","next","remove","appendTo","fullSizePreview","close","open","newPreview","clone","justify-content","align-items","newFps","newCount","ready","newAnimate","Canvas","size","penHandleClick","unbind","mousedown","off","openCanvas","num","toggleClass","hoverIn","hasClass","hoverOut","updateId","dragFrame","sortable","disableSelection","dragOff","dragged","currentTarget","parent","insertAfter","removeFrame","exact","copyFrame","hover","cloneWrapper","copyCanvas","addNewFrame","first","last","class","newCanvas","Frames","Preview","Layers","hovered","mouseEnter","getAttribute","onMouseOver","popHintOnMouseOver","mouseIn","mouseOut","Palettes","changed","indexOf","item","key","changeCurColor","addNewColor","Settings","bg","addActiveOnClick","ResizeCanvas","inputVal","maxSize","min","resizeCanvasOnClickHandler","NeuQuant","alphadec","thepicture","lengthcount","samplefac","network","netindex","bias","freq","radpower","thepic","len","sample","Array","netbiasshift","intbias","unbiasnet","j","dist","bestd","best","process","rad","alpha","step","delta","samplepixels","pix","lim","initrad","contest","altersingle","alterneigh","learn","smallpos","smallval","q","previouscol","startpos","netsize","inxbuild","index","k","l","colorMap","lo","hi","m","alphabiasshift","biasdist","betafreq","bestpos","bestbiaspos","bestbiasd","intbiasshift","apply","LZWEncoder","imgW","imgH","pixAry","initCodeSize","remaining","curPixel","n_bits","maxcode","g_init_bits","ClearCode","EOFCode","a_count","htab","codetab","free_ent","clear_flg","cur_accum","cur_bits","masks","accum","pixels","color_depth","max","char_out","c","outs","flush_char","cl_block","cl_hash","output","hsize","compress","init_bits","fcode","ent","disp","hshift","MAXCODE","nextPixel","outer_loop","encode","os","writeByte","writeBytes","code","GIFEncoder","chr","String","fromCharCode","ByteArray","bin","prototype","getData","writeUTFBytes","string","charCodeAt","array","offset","transIndex","out","image","indexedPixels","colorDepth","colorTab","transparent","repeat","delay","started","usedEntry","palSize","dispose","closeStream","firstFrame","sizeSet","comment","reset","setDelay","ms","setDispose","setRepeat","iter","setTransparent","setComment","addFrame","im","is_imageData","Error","ok","ImageData","setSize","Uint8ClampedArray","console","log","getImagePixels","analyzePixels","writeLSD","writePalette","writeNetscapeExt","writeGraphicCtrlExt","writeCommentExt","writeImageDesc","writePixels","download","filename","endsWith","templink","href","URL","createObjectURL","Blob","Uint8Array","upload","replace","finish","setFrameRate","setQuality","quality","w","h","cont","nPix","nq","findClosest","minpos","dmin","dr","dg","db","d","transp","WriteShort","pValue","stream","setProperties","has_start","is_first","Uploader","UploaderForGoogleDrive","RetryHandler","interval","maxInterval","retry","fn","nextInterval_","getRandomInt_","random","MediaUploader","noop","file","contentType","metadata","mimeType","gapi","auth2","getAuthInstance","currentUser","getAuthResponse","access_token","onComplete","onProgress","onError","chunkSize","retryHandler","url","params","uploadType","buildUrl_","fileId","baseUrl","httpMethod","xhr","XMLHttpRequest","setRequestHeader","onload","status","location","getResponseHeader","sendFile_","onUploadError_","onerror","send","JSON","stringify","content","slice","addEventListener","onContentUploadSuccess_","onContentUploadError_","resume_","extractRange_","range","response","buildQuery_","keys","encodeURIComponent","query","saveAsGif","encoder","newArr","map2","every","toConsumableArray","fixedNewArray","from","newImage","uploadToUrl","binaryGif","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","encode64","pUploaderForGoogleDrive","Promise","resolve","reject","parse","apikey","uploadToGoogle","client","setApiKey","load","then","err","error","drive","permissions","create","resource","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","projectID","storedTitle","storedDescription","getDate","Date","day","month","getMonth","hour","getHours","minutes","getMinutes","getFullYear","getTime","saveLocally","global","storage","dataUrl","date","piskel","localStorage","getItem","globalObj","idArr","project","writeUserData","userId","database","ref","set","localProjects","authLocalProjects","gifUrl","SaveOptions","isLogin","isFull","isSaved","arrayFramesSrc","src","storageObj","entries","some","split","objToSave","setItem","getUser","checkStorage","storedObj","storageEntries","storedUser","authProjects","objForDB","projectName","projectItems","saveToGalery","_this4","rows","cols","saveLocallyHandler","saveToGaleryHandler","updateState","ExportOptions","showExportOptions","base64URL","win","heigh","debugBase64","rel","downloadPng","flex-direction","overflow","ancor","overflow-y","margin-bottom","border","flex-wrap","word-break","debugBase64WithText","ImportOptions","Options","defaultValue","fpsOnChangeHandler","layers_list_layers_list","palettes_palettes","menu_settings_settings","resizeCanvas","save_save","menu_export_export","menu_import_import","showOptionsOnClick","fromDataToCanvas","_loop","drawImage","LocalSaves","page","changedProjects","obj","sorted","sort","splice","projectsJson","react_router","to","cellPadding","cellSpacing","deletePiskel","isRedirected","addPiskel","CreateAnimation","showSaves","toolsDomBuilder","frameDomBuilder","canvasDomBuilder","previewDomBuilder","optionsDomBuilder","localSaves","makeRandomId","img","About","span","User","isEmpty","localObj","once","snapshot","backgroundImage","backgroundSize","alt","makeRandom","props","makeAnimate","bottom","getElementById","duration","easing","play","isPropsReceived","Piskel","projectInfo","filter","toFixed","AppRouter","redirected","auth","onSuccess","assertThisInitialized","init","client_id","signin2","render","scope","longtitle","onsuccess","onfailure","onFailure","googleUser","profile","getBasicProfile","ID","getId","fullName","getName","getImageUrl","getEmail","signOut","react_router_dom","confirm","preventDefault","addActiveClass","mainpage_error_error","path","component","Boolean","hostname","ReactDOM","mainpage_home","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.2d5a6640.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAOdJREFUOI3t0zErhWEUAOCnK9Pd76a4kjALGQ0+1ySrwXgXg9WPMBjFYJMSZTGom1kppJj9BBYZGL4zfG4ZvnPv6Cxv5z29T+e8dUbkYxK72EATL/huJLEC54FcoYNTpLwC79jpuz+Jbmtjd2ijh61KrYP9DNaKfAFfFXQbe1lsDg+Yx61y/HuMDYLNRN5W/mkxDKwV9TT2iNl/7M9YGybWxAcuMR3YU5y1MVjHIVZwg7dBMDjwe7F7mMpi8IrFSr6Kiyw2gWflBixhE0dqrFM1GtHNJ0ZxjGWcKce9rguKLroYzzzujx/AVUNl5zj/7wAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADCSURBVDhP7dAxCwFhGMDxh00Gk4nBYDAZFIvNJ/BBDOwGiUlJklAWPov4FqSUDEqUSfyf91zdqTuv3b9+3fte3b13j1hUwxpLJPWGTRHE0cLTYw6rGtjC+7BawVf0ff0sgYyz9GX1BW3cUMUG7un6O1/r4YKy2Ynk8cAeMb0RVhdnFM1OJIsdFqhDBxtYBXeUzE4khwMmCJqTrzGmzlIKOGKA0FPdUjihgz6uaMK6IXTK+pIZ3AFap9MdIW12/35M5AUsFCcIOdPfYQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEdSURBVEhL3dU/a8JAHMbxIChYlQ52aIeCU6Gbk2+hXcV306lDofSttIvuQsGhk4uLIIiCVVF0KxQ6td9HchDkvDvSdKgPfCC55H4PJP6Jjj4tPKOwO8s4ZSzxjTb+pKSODVTSwf8sKeIVKsi85ARdaPAa2/g4k5IKetBAvexr6HFlUnKKN2jQDFcw+fU7qaIPDZighv2kLjnDANo4wiUOJVXJC7RhiAsteJIsudeCK3l84RPnWghMAyqY7s4cyeEDujkNb4HyBNvmEN5HpOhF6YfNNsDFvORmzBndqA22QTZmeAnzmI6dCS1JfjzvYNZ17I2vJDlcGcNc03FQDpXY/oDeYa7r5yU4+n48YIEVHrE/XLmFBsuNFo4hUfQDRmuR/2vYwfIAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAWZJREFUOI2t0jFI1VEUx/FPGjlki9ai0CQIDQ5pCqbNTxJdykGdWmxxsUAHXYJwqMVBNHVzKWh2EAdBTDCQFhWKrMW2aFTiyXO4f+GP/u//8dQfHLiXe+73nvs7h2tWdYX5PZhDF6rwCyeXffwZVtCIZkxgHe9wv1LYIJZwM+OsDbOYjpxf0BBmcCMnpxa/0VEONoz5MrB7+IgDwdeoBgXDh3NymvAZvXiVB3uOIkpJ7OE1GlI5rVhFndD5OzFYAf9TsHScYAMfsIl6PBA6nqlW/IvAzmIL+7greLuI21mwGvzENhawjL8pUBHvsYPu5M5bPI5VN3qukgNMYQCTQpP2EiCM4WkMVoPDyBeLaE8eKGEcL9EXg8FIBHbWiBep/Tf058Gq8D0H+AWfkvWxMHO5epIDKwnGHyVRKAerxp/kYhtuZeR8xcOksrVywLTqBMN/pKrbFQa4sxJQlh7hjTCLLVeFXUmnRmtxEV/Efn8AAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/error.d70d2a0b.jpg\";","import { createStore } from 'redux';\n\nfunction appState(state = {}, action) {\n  switch (action.type) {\n    case 'currentPage':\n      return Object.assign({}, state, {\n        currentPage: action.value\n      });\n    case 'currentColor':\n      return Object.assign({}, state, {\n        currentColor: action.value\n      });\n    case 'backColor':\n      return Object.assign({}, state, {\n        backColor: action.value\n      });\n    case 'currentTool':\n      return Object.assign({}, state, {\n        currentTool: action.value\n      });\n    case 'fps':\n      return Object.assign({}, state, {\n        fps: action.value\n      });\n    case 'customWidth':\n      return Object.assign({}, state, {\n        customWidth: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction settingsState(state = {}, action) {\n  switch (action.type) {\n    case 'setBg':\n      return Object.assign({}, state, {\n        setBg: action.value\n      });\n    case 'title':\n      return Object.assign({}, state, {\n        title: action.value\n      });\n    case 'description':\n      return Object.assign({}, state, {\n        description: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction previewState(state = {}, action) {\n  switch (action.type) {\n    case 'gif':\n      return Object.assign({}, state, {\n        gif: action.value\n      });\n    case 'frames':\n      return Object.assign({}, state, {\n        frames: action.value\n      });\n    case 'piskelID':\n      return Object.assign({}, state, {\n        piskelID: action.value\n      });\n    case 'projects':\n      return Object.assign({}, state, {\n        projects: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction canvasState(state = {}, action) {\n  switch (action.type) {\n    case 'currentCanvas':\n      return Object.assign({}, state, {\n        currentCanvas: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction userState(state = {}, action) {\n  switch (action.type) {\n    case 'name':\n      return Object.assign({}, state, {\n        name: action.value\n      });\n    case 'userID':\n      return Object.assign({}, state, {\n        userID: action.value\n      });\n    case 'imageURL':\n      return Object.assign({}, state, {\n        imageURL: action.value\n      });\n    case 'email':\n      return Object.assign({}, state, {\n        email: action.value\n      });\n    case 'token':\n      return Object.assign({}, state, {\n        token: action.value\n      });\n    case 'googleUrl':\n      return Object.assign({}, state, {\n        googleUrl: action.value\n      });\n    case 'urlToGif':\n      return Object.assign({}, state, {\n        urlToGif: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction optionsState(state = {}, action) {\n  switch (action.type) {\n    case 'optionsBlock':\n      return Object.assign({}, state, {\n        optionsBlock: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction paletteState(state = {}, action) {\n  switch (action.type) {\n    case 'addColor':\n      return Object.assign({}, state, {\n        addColor: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nfunction piskelPageState(state = {}, action) {\n  switch (action.type) {\n    case 'piskelGif':\n      return Object.assign({}, state, {\n        piskelGif: action.value\n      });\n    case 'piskelTitle':\n      return Object.assign({}, state, {\n        piskelTitle: action.value\n      });\n    case 'piskelDescription':\n      return Object.assign({}, state, {\n        piskelDescription: action.value\n      });\n    case 'piskelDate':\n      return Object.assign({}, state, {\n        piskelDate: action.value\n      });\n    default:\n      return state;\n  }\n}\n\nconst preview = createStore(previewState);\nconst store = createStore(appState);\nconst settings = createStore(settingsState);\nconst canvas = createStore(canvasState);\nconst user = createStore(userState);\nconst options = createStore(optionsState);\nconst palette = createStore(paletteState);\nconst piskelPage = createStore(piskelPageState);\n\nexport { store, settings, canvas, user, options, palette, preview, piskelPage };\n","import $ from 'jquery';\nimport colorPicker from './images/colorpicker.png';\nimport { store } from '../../store/store';\n\n// chose color from pop out panel of colors and bind it to current color box\nfunction customedColorOnChange(id) {\n  const newValue = $(`#${id}`).val();\n  const customedColor = `rgb(${$(`#${id}`)\n    .val()\n    .match(/[A-Za-z0-9]{2}/g)\n    .map(v => {\n      return parseInt(v, 16);\n    })\n    .join(', ')})`;\n  if (id === 'customed1') {\n    store.dispatch({ type: 'currentColor', value: customedColor });\n    $('#currentColor').css({ 'background-color': customedColor });\n  }\n  if (id === 'customed2') {\n    store.dispatch({ type: 'backColor', value: customedColor });\n    $('#backColor').css({ 'background-color': customedColor });\n  }\n\n  $(`#${id}`).attr('value', newValue);\n}\n\n// change style of tool button\nfunction colorPickerOnClick() {\n  if (store.getState().currentTool !== 'colorPickerTool') {\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    $('#color-picker').addClass('hovered');\n    store.dispatch({ type: 'currentTool', value: 'colorPickerTool' });\n    $('#color-picker').focus();\n    $(document.body).css({ cursor: `url(${colorPicker}) 1 10, auto` });\n  } else if (store.getState().currentTool === 'colorPickerTool') {\n    store.dispatch({ type: 'currentTool', value: 'none' });\n    $('#color-picker').removeClass('hovered');\n    $('#color-picker').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n\nfunction rgbaToHex(r, g, b) {\n  let hexR = r.toString(16);\n  let hexG = g.toString(16);\n  let hexB = b.toString(16);\n  if (hexR.length < 2) {\n    hexR = `0${hexR}`;\n  }\n  if (hexG.length < 2) {\n    hexG = `0${hexG}`;\n  }\n  if (hexB.length < 2) {\n    hexB = `0${hexB}`;\n  }\n  return `#${hexR}${hexG}${hexB}`;\n}\n\nfunction rgbToHex(color) {\n  const hex = `${color}`;\n\n  const nums = /(.*?)rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/i.exec(hex);\n  const r = parseInt(nums[2], 10).toString(16);\n  const g = parseInt(nums[3], 10).toString(16);\n  const b = parseInt(nums[4], 10).toString(16);\n\n  return `#${r.length === 1 ? `0${r}` : r}${g.length === 1 ? `0${g}` : g}${\n    b.length === 1 ? `0${b}` : b\n  }`;\n}\n\nexport { customedColorOnChange, colorPickerOnClick, rgbaToHex, rgbToHex };\n","import React from 'react';\nimport $ from 'jquery';\nimport './tools.css';\nimport { colorPickerOnClick, customedColorOnChange, rgbaToHex, rgbToHex } from './color-picker';\nimport paintBucketOnClick from './paintBucket';\nimport penOnClick from './pen';\nimport eraserOnClick from './eraser';\nimport { strokeOnClick, rectangleOnClick, circleOnClick } from './stroke';\nimport { store, canvas } from '../../store/store';\n\nlet toolState;\nlet currentColorState;\nlet backColorState;\nstore.subscribe(() => {\n  toolState = store.getState().currentTool;\n  currentColorState = store.getState().currentColor;\n  backColorState = store.getState().backColor;\n});\nlet currentCanvas;\ncanvas.subscribe(() => {\n  currentCanvas = canvas.getState().currentCanvas;\n});\nclass Tools extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      tool: '',\n      active: '',\n      value1: '#161030',\n      value2: '#c0c0c0',\n      pickedColor: ''\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    $(document).click(e => this.colorPickerHandleClick(e));\n  }\n\n  componentDidMount() {\n    const currentColor = $('#currentColor').css('background-color');\n    const backColor = $('#backColor').css('background-color');\n    store.dispatch({ type: 'currentColor', value: currentColor });\n    store.dispatch({ type: 'backColor', value: backColor });\n    this.mounted = true;\n    if (this.mounted === true) {\n      this.setState({ pickedColor: currentColor });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  switchColorsOnClick() {\n    store.dispatch({ type: 'currentColor', value: backColorState });\n    store.dispatch({ type: 'backColor', value: this.state.pickedColor });\n    const curColorValue = $('#customed1').val();\n    const backColorValue = $('#customed2').val();\n    $('#currentColor').css({ 'background-color': currentColorState });\n    $('#backColor').css({ 'background-color': backColorState });\n    this.setState({\n      value1: backColorValue,\n      value2: curColorValue,\n      pickedColor: currentColorState\n    });\n  }\n\n  colorPickerHandleClick(e) {\n    if (this.state.tool === 'colorPickerTool') {\n      $('#drawCanvas').hide();\n      if ($(e.target).is('.canvas')) {\n        const curCanv = document.querySelector(`#canvas${currentCanvas}`);\n        const rect = curCanv.getBoundingClientRect();\n        const x = Math.round(e.clientX - rect.left);\n        const y = Math.round(e.clientY - rect.top);\n        const ctx = curCanv.getContext('2d').getImageData(x, y, 1, 1).data;\n        const rgbColor = `rgba(${ctx[0]}, ${ctx[1]}, ${ctx[2]})`;\n        if (ctx[3] > 0) {\n          const hexColor = rgbaToHex(ctx[0], ctx[1], ctx[2]);\n          store.dispatch({ type: 'currentColor', value: rgbColor });\n          $('#currentColor').css({ 'background-color': rgbColor });\n          this.setState({\n            value1: hexColor,\n            pickedColor: rgbColor\n          });\n        }\n      }\n    } else {\n      $('#drawCanvas').show();\n    }\n  }\n\n  buttonOnHoverIn(e) {\n    const id = $(e.target).attr('id');\n    if (this.mounted) {\n      this.setState({ active: id });\n    }\n  }\n\n  buttonOnHoverOut(e) {\n    $(e.target)\n      .children()\n      .removeClass('fas-hovered');\n    if (this.mounted) {\n      this.setState({ active: 'false' });\n    }\n  }\n\n  render() {\n    return (\n      <div name=\"Tools\">\n        <div className=\"palette\" id=\"palette-tool-area\">\n          <div className=\"palette-block\">\n            <button\n              id=\"paint-bucket\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                paintBucketOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`fas fa-fill-drip ${\n                  this.state.active === 'paint-bucket' ? 'fas-hovered' : ''\n                }`}\n              />\n            </button>\n          </div>\n          <div className=\"palette-block\">\n            <button\n              id=\"color-picker\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                colorPickerOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`fas fa-eye-dropper ${\n                  this.state.active === 'color-picker' ? 'fas-hovered' : ''\n                }`}\n              />\n            </button>\n          </div>\n          <div className=\"palette-block\">\n            <button\n              id=\"pen\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                penOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`fas fa-pencil-alt ${this.state.active === 'pen' ? 'fas-hovered' : ''}`}\n              />\n            </button>\n          </div>\n          <div className=\"palette-block\">\n            <button\n              id=\"eraser\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                eraserOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`fas fa-eraser ${this.state.active === 'eraser' ? 'fas-hovered' : ''}`}\n              />\n            </button>\n          </div>\n          <div className=\"palette-block\">\n            <button\n              id=\"stroke\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                strokeOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`fas fa-slash ${this.state.active === 'stroke' ? 'fas-hovered' : ''}`}\n              />\n            </button>\n          </div>\n          <div className=\"palette-block\">\n            <button\n              id=\"rectangle\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                rectangleOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`far fa-square ${\n                  this.state.active === 'rectangle' ? 'fas-hovered' : ''\n                }`}\n              />\n            </button>\n          </div>\n          <div className=\"palette-block\">\n            <button\n              id=\"circle\"\n              className=\"palette-button\"\n              type=\"button\"\n              onMouseEnter={e => this.buttonOnHoverIn(e)}\n              onMouseLeave={e => this.buttonOnHoverOut(e)}\n              onClick={() => {\n                circleOnClick();\n                if (this.mounted) {\n                  this.setState({ tool: toolState });\n                }\n              }}\n            >\n              <i\n                className={`far fa-circle ${this.state.active === 'circle' ? 'fas-hovered' : ''}`}\n              />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"color\">\n          <div className=\"color-block hidden\">\n            <div className=\"radiobutton current\" id=\"currentColor\" />\n            <div className=\"radiobutton back\" id=\"backColor\" />\n            <button\n              type=\"button\"\n              id=\"switchHexValue\"\n              onClick={() => {\n                const hex = rgbToHex(currentColorState);\n                this.setState({ value1: hex });\n              }}\n            />\n          </div>\n          <div\n            className=\"switcher\"\n            role=\"button\"\n            onClick={() => this.switchColorsOnClick()}\n            onFocus={() => undefined}\n            onKeyPress={() => undefined}\n            tabIndex=\"-1\"\n          >\n            <i className=\"fas fa-retweet\" />\n          </div>\n          <div className=\"color-block-upper\">\n            <input\n              type=\"color\"\n              name=\"colors\"\n              className=\"input-color\"\n              id=\"customed1\"\n              value={this.state.value1}\n              onChange={() => {\n                customedColorOnChange('customed1');\n                this.setState({ value1: $('#customed1').val(), pickedColor: currentColorState });\n              }}\n            />\n          </div>\n          <div className=\"color-block-under\">\n            <input\n              type=\"color\"\n              name=\"colors\"\n              className=\"input-color\"\n              id=\"customed2\"\n              value={this.state.value2}\n              onChange={() => {\n                customedColorOnChange('customed2');\n                this.setState({ value2: $('#customed2').val() });\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Tools;\n","import $ from 'jquery';\n\nconst canvasWidth =\n  window.innerWidth - 500 < window.innerHeight - 155\n    ? window.innerWidth - 500\n    : window.innerHeight - 155;\nlet changeWidth;\n$(window).bind('resize', () => {\n  for (let i = 0; i < $('#canvas-block').children().length; i += 1) {\n    // get context before resizing\n    const imageData = $(`#canvas${i + 1}`)\n      .get(0)\n      .getContext('2d')\n      .getImageData(0, 0, canvasWidth, canvasWidth);\n\n    // calc new canvas width on resize the window\n    changeWidth =\n      window.innerWidth - 500 < window.innerHeight - 155\n        ? window.innerWidth - 500\n        : window.innerHeight - 155;\n\n    $(`#canvas${i + 1}`)\n      .attr('width', changeWidth)\n      .attr('height', changeWidth); // all canvases will resize\n\n    // put context after resizing\n    $(`#canvas${i + 1}`)\n      .get(0)\n      .getContext('2d')\n      .putImageData(imageData, 0, 0);\n  }\n  $('#drawCanvas')\n    .attr('width', changeWidth)\n    .attr('height', changeWidth);\n  $('#new-width').text($('#canvas1').width()); // change resize options\n  $('#resize-input').attr('max', $('#canvas1').width());\n});\n","import $ from 'jquery';\nimport { store } from '../../store/store';\nimport paintBucketIcon from './images/bucket.png';\n\n// change tool-button style, tool does not work yet\nexport default function paintBucketOnClick() {\n  if (store.getState().currentTool !== 'paintBucketTool') {\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    $('#paint-bucket').addClass('hovered');\n    store.dispatch({ type: 'currentTool', value: 'paintBucketTool' });\n    $('#paint-bucket').focus();\n    $(document.body).css({ cursor: `url(${paintBucketIcon}) 15 15, auto` });\n  } else if (store.getState().currentTool === 'paintBucketTool') {\n    store.dispatch({ type: 'currentTool', value: '' });\n    $('#paint-bucket').removeClass('hovered');\n    $('#paint-bucket').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n","import $ from 'jquery';\nimport './tools.css';\nimport { store } from '../../store/store';\nimport penIcon from './images/pen.png';\n\n// change button-tool style if clicked\nexport default function penOnClick() {\n  if (store.getState().currentTool !== 'penTool') {\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    store.dispatch({ type: 'currentTool', value: 'penTool' });\n    $('#pen').addClass('hovered');\n    $('#pen').focus();\n    $(document.body).css({ cursor: `url(${penIcon}) 1 18, auto` });\n  } else if (store.getState().currentTool === 'penTool') {\n    store.dispatch({ type: 'currentTool', value: '' });\n    $('#pen').removeClass('hovered');\n    $('#pen').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n","import $ from 'jquery';\nimport './tools.css';\nimport { store } from '../../store/store';\nimport erserIcon from './images/eraser.png';\n\n// change button-tool style if clicked\nexport default function eraserOnClick() {\n  if (store.getState().currentTool !== 'eraserTool') {\n    store.dispatch({ type: 'currentTool', value: 'eraserTool' });\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    $('#eraser').addClass('hovered');\n    $('#eraser').focus();\n    $(document.body).css({ cursor: `url(${erserIcon}) 1 18, auto` });\n  } else if (store.getState().currentTool === 'eraserTool') {\n    store.dispatch({ type: 'currentTool', value: '' });\n    $('#eraser').removeClass('hovered');\n    $('#eraser').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n","import $ from 'jquery';\nimport './tools.css';\nimport { store } from '../../store/store';\nimport penIcon from './images/pen.png';\n\n// change button-tool style if clicked\nfunction strokeOnClick() {\n  if (store.getState().currentTool !== 'strokeTool') {\n    store.dispatch({ type: 'currentTool', value: 'strokeTool' });\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    $('#stroke').addClass('hovered');\n    $('#stroke').focus();\n    $(document.body).css({ cursor: `url(${penIcon}) 1 18, auto` });\n  } else if (store.getState().currentTool === 'strokeTool') {\n    store.dispatch({ type: 'currentTool', value: '' });\n    $('#stroke').removeClass('hovered');\n    $('#stroke').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n\nfunction rectangleOnClick() {\n  if (store.getState().currentTool !== 'rectangleTool') {\n    store.dispatch({ type: 'currentTool', value: 'rectangleTool' });\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    $('#rectangle').addClass('hovered');\n    $('#rectangle').focus();\n    $(document.body).css({ cursor: `url(${penIcon}) 1 18, auto` });\n  } else if (store.getState().currentTool === 'rectangleTool') {\n    store.dispatch({ type: 'currentTool', value: '' });\n    $('#rectangle').removeClass('hovered');\n    $('#rectangle').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n\nfunction circleOnClick() {\n  if (store.getState().currentTool !== 'circleTool') {\n    store.dispatch({ type: 'currentTool', value: 'circleTool' });\n    $('#palette-tool-area')\n      .find('button')\n      .removeClass('hovered');\n    $('#circle').addClass('hovered');\n    $('#circle').focus();\n    $(document.body).css({ cursor: `url(${penIcon}) 1 18, auto` });\n  } else if (store.getState().currentTool === 'circleTool') {\n    store.dispatch({ type: 'currentTool', value: '' });\n    $('#circle').removeClass('hovered');\n    $('#circle').blur();\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n\nexport { strokeOnClick, rectangleOnClick, circleOnClick };\n","import $ from 'jquery';\nimport { store, canvas, palette } from '../../store/store';\n\nlet currentCanvas;\nlet customWidth;\nlet tool;\ncanvas.subscribe(() => {\n  currentCanvas = canvas.getState().currentCanvas;\n});\nstore.subscribe(() => {\n  customWidth = store.getState().customWidth || 33;\n  tool = store.getState().currentTool;\n});\n\nlet endX;\nlet endY;\nlet mouseDownX;\nlet mouseDownY;\n\n// drawing on mouse move\nfunction end(e) {\n  const ctx = $(`#canvas${currentCanvas}`)\n    .get(0)\n    .getContext('2d');\n  endX = e.offsetX;\n  endY = e.offsetY;\n  if (tool === 'penTool') {\n    ctx.fillStyle = $('#currentColor').css('background-color'); // color depends on chosen color\n    ctx.strokeStyle = $('#currentColor').css('background-color');\n  } else if (tool === 'eraserTool') {\n    ctx.fillStyle = 'rgba(0, 0, 0, 1)';\n    ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\n  }\n  // calc pen size according to chosen canvas width\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n  // calc position and size of canvas rectangles according to pen size\n  const mouseMoveX = Math.floor(e.offsetX / canvasSize) * canvasSize;\n  const mouseMoveY = Math.floor(e.offsetY / canvasSize) * canvasSize;\n  if (mouseDownX > endX || mouseDownY > endY) {\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  } else if (mouseDownX + canvasSize < endX || mouseDownY + canvasSize < endY) {\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  }\n}\n\n// drawing on mouse click\nfunction start(e) {\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n  mouseDownX = Math.floor(e.offsetX / canvasSize) * canvasSize;\n  mouseDownY = Math.floor(e.offsetY / canvasSize) * canvasSize;\n  if (tool === 'penTool' || tool === 'eraserTool') {\n    const ctx = $(`#canvas${currentCanvas}`)\n      .get(0)\n      .getContext('2d');\n    if (tool === 'penTool') {\n      ctx.globalCompositeOperation = 'source-over';\n      ctx.fillStyle = $('#currentColor').css('background-color');\n      ctx.strokeStyle = $('#currentColor').css('background-color');\n    } else if (tool === 'eraserTool') {\n      ctx.fillStyle = 'rgba(0, 0, 0, 1)';\n      ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\n      ctx.globalCompositeOperation = 'destination-out';\n    }\n    ctx.fillRect(mouseDownX, mouseDownY, canvasSize, canvasSize);\n    $('#drawCanvas').mousemove(end);\n    palette.dispatch({ type: 'addColor', value: $('#currentColor').css('background-color') });\n    $('#addColorButton').click();\n  }\n}\n\nlet startX = 0;\nlet startY = 0;\nlet lastX = 0;\nlet lastY = 0;\nlet radius;\n\nfunction endStroke(e) {\n  let canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n  const drawCtx = $('#drawCanvas')\n    .get(0)\n    .getContext('2d');\n  const width = $('#drawCanvas').width();\n\n  lastX = e.pageX - this.offsetLeft;\n  lastY = e.pageY - this.offsetTop;\n  drawCtx.clearRect(0, 0, width, width);\n  drawCtx.globalCompositeOperation = 'source-over';\n  drawCtx.strokeStyle = $('#currentColor').css('background-color');\n  drawCtx.lineWidth = canvasSize;\n  drawCtx.beginPath();\n  if (tool === 'strokeTool') {\n    drawCtx.moveTo(startX, startY);\n    drawCtx.lineTo(lastX, lastY);\n    drawCtx.stroke();\n  } else if (tool === 'rectangleTool') {\n    drawCtx.moveTo(startX, startY);\n    drawCtx.lineTo(lastX, startY);\n    drawCtx.lineTo(lastX, lastY);\n    drawCtx.lineTo(startX, lastY);\n    drawCtx.lineTo(startX, startY);\n    drawCtx.stroke();\n  } else if (tool === 'circleTool') {\n    radius =\n      Math.sqrt((startX - lastX) * (startX - lastX) + (startY - lastY) * (startY - lastY)) / 2;\n    drawCtx.arc(startX, startY, radius, 0, 2 * Math.PI);\n    drawCtx.stroke();\n  }\n\n  $('#drawCanvas').mouseup(() => {\n    canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n    const ctx = $(`#canvas${currentCanvas}`)\n      .get(0)\n      .getContext('2d');\n    ctx.globalCompositeOperation = 'source-over';\n    ctx.strokeStyle = $('#currentColor').css('background-color');\n    ctx.lineWidth = canvasSize;\n    ctx.beginPath();\n    if (tool === 'strokeTool') {\n      ctx.moveTo(startX, startY);\n      ctx.lineTo(lastX, lastY);\n      ctx.stroke();\n      drawCtx.clearRect(0, 0, width, width);\n    } else if (tool === 'rectangleTool') {\n      ctx.moveTo(startX, startY);\n      ctx.lineTo(lastX, startY);\n      ctx.lineTo(lastX, lastY);\n      ctx.lineTo(startX, lastY);\n      ctx.lineTo(startX, startY);\n      ctx.stroke();\n      drawCtx.clearRect(0, 0, width, width);\n    } else if (tool === 'circleTool') {\n      ctx.arc(startX, startY, radius, 0, 2 * Math.PI);\n      ctx.stroke();\n      drawCtx.clearRect(0, 0, width, width);\n    }\n  });\n}\n\nfunction strokeLines(e) {\n  startX = e.pageX - this.offsetLeft;\n  startY = e.pageY - this.offsetTop;\n  $('#drawCanvas').mousemove(endStroke);\n  palette.dispatch({ type: 'addColor', value: $('#currentColor').css('background-color') });\n  $('#addColorButton').click();\n}\n\nexport { start, end, strokeLines };\n","import $ from 'jquery';\nimport { store, canvas, palette } from '../../store/store';\n\nlet currentCanvas;\ncanvas.subscribe(() => {\n  currentCanvas = canvas.getState().currentCanvas;\n});\n\nlet tool;\nstore.subscribe(() => {\n  tool = store.getState().currentTool;\n});\n\nfunction getColorAtPixel(imageData, x, y) {\n  const { width, data } = imageData;\n\n  return {\n    r: data[4 * (width * y + x) + 0],\n    g: data[4 * (width * y + x) + 1],\n    b: data[4 * (width * y + x) + 2],\n    a: data[4 * (width * y + x) + 3]\n  };\n}\n\nfunction setColorAtPixel(imageData, color, x, y) {\n  const { width, data } = imageData;\n\n  data[4 * (width * y + x) + 0] = color.r;\n  data[4 * (width * y + x) + 1] = color.g;\n  data[4 * (width * y + x) + 2] = color.b;\n  data[4 * (width * y + x) + 3] = color.a;\n}\nfunction colorMatch(a, b) {\n  return a.r === b.r && a.g === b.g && a.b === b.b && a.a === b.a;\n}\n\nfunction floodFill(imageData, newColor, x, y) {\n  const { width, height } = imageData;\n  const stack = [];\n  const baseColor = getColorAtPixel(imageData, x, y);\n  let clicked = { x, y };\n\n  // Check if base color and new color are the same\n  if (colorMatch(baseColor, newColor)) {\n    return;\n  }\n\n  // Add the clicked location to stack\n  stack.push({ x: clicked.x, y: clicked.y });\n\n  while (stack.length) {\n    clicked = stack.pop();\n    let goDown = true; // Vertical is assumed to be true\n    let goUp = true; // Vertical is assumed to be true\n    let goLeft = false;\n    let goRight = false;\n\n    // Move to top most goDown pixel\n    while (goUp && clicked.y >= 0) {\n      clicked.y -= 1;\n      goUp = colorMatch(getColorAtPixel(imageData, clicked.x, clicked.y), baseColor);\n    }\n\n    // Move downward\n    while (goDown && clicked.y < height) {\n      setColorAtPixel(imageData, newColor, clicked.x, clicked.y);\n\n      // Check left\n      if (\n        clicked.x - 1 >= 0 &&\n        colorMatch(getColorAtPixel(imageData, clicked.x - 1, clicked.y), baseColor)\n      ) {\n        if (!goLeft) {\n          goLeft = true;\n          stack.push({ x: clicked.x - 1, y: clicked.y });\n        }\n      } else {\n        goLeft = false;\n      }\n\n      // Check right\n      if (\n        clicked.x + 1 < width &&\n        colorMatch(getColorAtPixel(imageData, clicked.x + 1, clicked.y), baseColor)\n      ) {\n        if (!goRight) {\n          stack.push({ x: clicked.x + 1, y: clicked.y });\n          goRight = true;\n        }\n      } else {\n        goRight = false;\n      }\n\n      clicked.y += 1;\n      goDown = colorMatch(getColorAtPixel(imageData, clicked.x, clicked.y), baseColor);\n    }\n  }\n}\n\nexport default function paintIt(e) {\n  if (tool === 'paintBucketTool') {\n    const curCanv = document.querySelector(`#canvas${currentCanvas}`);\n    const ctx = curCanv.getContext('2d');\n    const newColor = $('#currentColor').css('background-color');\n    const rgb = newColor.match(/([0-9]+\\.?[0-9]*)/g);\n    const col = { r: +rgb[0], g: +rgb[1], b: +rgb[2], a: 255 };\n    ctx.fillStyle = newColor;\n    ctx.strokeStyle = newColor;\n    const rect = curCanv.getBoundingClientRect();\n    const x = Math.round(e.clientX - rect.left);\n    const y = Math.round(e.clientY - rect.top);\n    const imageData = ctx.getImageData(0, 0, curCanv.width, curCanv.height);\n    floodFill(imageData, col, x, y);\n    ctx.putImageData(imageData, 0, 0);\n\n    palette.dispatch({ type: 'addColor', value: $('#currentColor').css('background-color') });\n    $('#addColorButton').click();\n    // put canvas image in preview-box\n    const dataURL = $(`#canvas${currentCanvas}`)[0].toDataURL('image/png');\n\n    $(`#frame${currentCanvas}`)\n      .find('.preview-box')\n      .css({\n        background: `url(${dataURL})`,\n        'background-size': 'contain'\n      });\n  }\n}\n","import $ from 'jquery';\nimport { store } from '../../store/store';\n\nlet fps;\nstore.subscribe(() => {\n  fps = store.getState().fps || 3;\n});\nlet count = 0;\nlet anim;\nfunction animate() {\n  clearTimeout(anim); // stop old animation\n  const time = 1000 / fps; // calc animation speed\n  $('.preview')\n    .children()\n    .css({ display: 'none' }); // hide all canvas-images\n  if ($('.preview').children()[count]) {\n    $('.preview').children()[count].style.display = 'block'; // show only the \"count\"-th image\n  }\n  count += 1;\n  if (count === $('.preview').children().length) {\n    count = 0; // restart counting if all images were shown\n  }\n\n  anim = setTimeout(animate, time); // repeat animation\n}\n\n// make image from canvas drawing\nfunction makeImage(n) {\n  const canvasImage = new Image();\n  if ($(`#canvas${n}`)[0]) {\n    $(canvasImage)\n      .attr('id', `canvasImage${n}`)\n      .css({ width: '100%' })\n      .attr('src', $(`#canvas${n}`)[0].toDataURL('image/png'));\n  }\n  // if the image is from the same canvas should update the image\n  if ($(`#canvasImage${n}`).length) {\n    $(canvasImage)\n      .insertBefore(`#canvasImage${n}`)\n      .next()\n      .remove();\n  } else {\n    // if new canvas was made should append new image\n    $(canvasImage).appendTo('.preview');\n  }\n  if ($('.preview').children().length > 1) {\n    count = 0;\n    animate();\n  } else {\n    clearTimeout(anim);\n  }\n}\n\nlet newWindow;\nlet id = 0;\n// open new window to watch animation in full-size mode\nfunction fullSizePreview() {\n  if (newWindow) {\n    id += 1;\n    newWindow.close();\n  }\n  newWindow = window.open('about:blank', `window${id}`, 'width=300,height=300');\n\n  // cloning animation box with images to new window\n  const newPreview = $('.preview')\n    .clone()\n    .appendTo(newWindow.document.body)\n    .css({ display: 'flex', 'justify-content': 'center', 'align-items': 'center', height: '100%' });\n  $(newWindow.document.body).css({\n    display: 'flex',\n    'justify-content': 'center',\n    'align-items': 'center'\n  });\n\n  const newFps = fps;\n  let newCount = 0;\n\n  function newAnimate() {\n    // clearTimeout(newAnim);\n    const time = 1000 / newFps;\n    newPreview.children().css({ display: 'none' });\n    if (newPreview.children()[newCount]) {\n      newPreview.children()[newCount].style.display = 'block';\n    }\n    newCount += 1;\n    if (newCount === newPreview.children().length) {\n      newCount = 0;\n    }\n    setTimeout(newAnimate, time);\n  }\n  // when new window loaded should start animation\n  $(newWindow).ready(newAnimate);\n}\n\nexport { makeImage, animate, fullSizePreview };\n","import React from 'react';\nimport $ from 'jquery';\nimport './resizeWindow';\nimport './canvas.css';\nimport { canvas } from '../../store/store';\nimport { start, strokeLines } from './drawing';\nimport paintIt from './paint';\nimport { makeImage } from '../preview/preview';\n\nlet currentCanvas;\ncanvas.subscribe(() => {\n  currentCanvas = canvas.getState().currentCanvas;\n});\n\nclass Canvas extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      size: ''\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    const canvasWidth =\n      window.innerWidth - 500 < window.innerHeight - 155\n        ? window.innerWidth - 500\n        : window.innerHeight - 155;\n    this.setState({ size: canvasWidth });\n\n    $(document).click(() => this.penHandleClick());\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  penHandleClick() {\n    this.mounted = true;\n\n    // remove old events\n    $('#drawCanvas')\n      .unbind('mousedown')\n      .unbind('mouseup')\n      .unbind('click');\n    // initialize new events\n    $('#drawCanvas').click(paintIt);\n    $('#drawCanvas').mousedown(start);\n    $('#drawCanvas').mousedown(strokeLines);\n    $('#drawCanvas').mouseup(() => {\n      $('#drawCanvas').off('mousemove');\n      setTimeout(() => {\n        const dataURL = $(`#canvas${currentCanvas}`)[0].toDataURL('image/png');\n        // put canvas image in preview-box\n        $(`#frame${currentCanvas}`)\n          .find('.preview-box')\n          .css({\n            background: `url(${dataURL})`,\n            'background-size': 'contain'\n          });\n      }, 300);\n\n      // create image for animation preview\n      setTimeout(() => {\n        makeImage(currentCanvas);\n      }, 500);\n    });\n  }\n\n  render() {\n    return (\n      <div>\n        <div id=\"canvas-block\" className=\"canvas-block\">\n          <canvas\n            id=\"canvas1\"\n            className=\"canvas hidden\"\n            width={this.state.size}\n            height={this.state.size}\n          />\n        </div>\n        <canvas\n          id=\"drawCanvas\"\n          className=\"drawCanvas\"\n          width={this.state.size}\n          height={this.state.size}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Canvas;\n","import React from 'react';\nimport $ from 'jquery';\nimport './frames.css';\nimport {\n  hoverIn,\n  hoverOut,\n  addNewFrame,\n  removeFrame,\n  copyFrame,\n  dragFrame,\n  dragOff\n} from './framesManager';\nimport { openCanvas } from './canvasManager';\nimport { store } from '../../store/store';\n\nlet customWidth;\nstore.subscribe(() => {\n  customWidth = store.getState().customWidth;\n});\n\nclass Frames extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidMount() {\n    $('.frame')\n      .hover(hoverIn, hoverOut)\n      .click(openCanvas);\n    $('.removeFrame').click(removeFrame);\n    $('.copyFrame').click(copyFrame);\n    $('.dragFrame')\n      .mousedown(dragFrame)\n      .mouseup(dragOff);\n\n    // make the first frame active\n    $('#frame1')\n      .click(openCanvas)\n      .click();\n\n    // calculating canvas resize options\n    $('#current-width').text(customWidth);\n    $('#current-height').text(customWidth);\n    $('#new-width').text($('#canvas1').width());\n    $('#resize-input').attr('max', $('#canvas1').width());\n  }\n\n  render() {\n    return (\n      <div className=\"frame-box\">\n        <ul id=\"sortable\" className=\"frame-list\">\n          <li className=\"ui-state-default frame activeFrame\" id=\"frame1\">\n            <p id=\"preview-box\" className=\"preview-box\" />\n            <title className=\"number\">1</title>\n            <span className=\"removeFrame minorZ\">\n              <i className=\"fas fa-trash-alt\" />\n            </span>\n            <span className=\"dragFrame minorZ\">\n              <i className=\"fas fa-arrows-alt\" />\n            </span>\n            <span className=\"copyFrame minorZ\">\n              <i className=\"fas fa-copy\" />\n            </span>\n          </li>\n        </ul>\n        <button className=\"addNewFrame\" onClick={addNewFrame} type=\"button\">\n          Add new frame\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default Frames;\n","import $ from 'jquery';\nimport { makeImage } from '../../screens/preview/preview';\nimport { canvas } from '../../store/store';\n\n// show canvas according to active frame, hide other canvas\nfunction openCanvas() {\n  const num = $(this)\n    .find('.number')\n    .text(); // calc target frame ID\n  canvas.dispatch({ type: 'currentCanvas', value: +num });\n  $('.canvas').addClass('hidden'); // hide all canvas\n  $(`#canvas${num}`).removeClass('hidden'); // show current canvas\n  if ($('.activeFrame')) {\n    $('.activeFrame').removeClass('activeFrame');\n  }\n  $(this).toggleClass('activeFrame'); // make current frame active\n  setTimeout(() => {\n    makeImage(+num); // automatically make image of current canvas for animation\n  }, 200);\n}\n\n// create new canvas if new frame was created\nfunction newCanvas(n) {\n  const canvasWidth =\n    window.innerWidth - 500 < window.innerHeight - 155\n      ? window.innerWidth - 500\n      : window.innerHeight - 155;\n  const newCanvasEl = $('<canvas/>', {\n    class: 'canvas hidden',\n    id: `canvas${n}`\n  })\n    .attr('width', canvasWidth)\n    .attr('height', canvasWidth);\n  newCanvasEl.appendTo('#canvas-block');\n}\n\n// copy target frame's canvas with content if the frame was cloned\nfunction copyCanvas(n) {\n  const cloneWrapper = $(`#canvas${n}`)\n    .clone()\n    .attr('id', `canvas${+n + 1}`)\n    .attr('width', $(`#canvas${n}`).width())\n    .attr('height', $(`#canvas${n}`).width())\n    .insertAfter(`#canvas${n}`);\n  const originalContext = $(`#canvas${n}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(\n    0,\n    0,\n    $(`#canvas${n}`).width(),\n    $(`#canvas${n}`).width()\n  );\n  const cloneContext = cloneWrapper.get(0).getContext('2d');\n  cloneContext.putImageData(imageData, 0, 0);\n}\nfunction copyCanvasContext(n) {\n  const originalContext = $(`#canvas${n}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(\n    0,\n    0,\n    $(`#canvas${n}`).width(),\n    $(`#canvas${n}`).width()\n  );\n  return imageData;\n}\n\nfunction putImage(n, imageData) {\n  const cloneContext = $(`#canvas${n}`)\n    .get(0)\n    .getContext('2d');\n  cloneContext.putImageData(imageData, 0, 0);\n}\n\nexport { copyCanvas, newCanvas, openCanvas, copyCanvasContext, putImage };\n","import $ from 'jquery';\nimport 'jquery-ui-sortable-npm';\nimport { makeImage } from '../../screens/preview/preview';\nimport { openCanvas, newCanvas, copyCanvas } from './canvasManager';\n\n// show/hide frame buttons\nfunction hoverIn() {\n  const children = $(this).find('span');\n  if (children.hasClass('minorZ')) {\n    children.removeClass('minorZ');\n    if ($('#sortable').children().length === 1) {\n      $('#frame1')\n        .find('.removeFrame')\n        .addClass('minorZ');\n      $('#frame1')\n        .find('.dragFrame')\n        .addClass('minorZ');\n    }\n  }\n}\nfunction hoverOut() {\n  const children = $(this).find('span');\n  if (!children.hasClass('minorZ')) {\n    children.addClass('minorZ');\n  }\n  if ($('#sortable').children().length === 1) {\n    $('#frame1')\n      .find('.copyFrame')\n      .addClass('minorZ');\n    $('#frame1')\n      .find('.dragFrame')\n      .addClass('minorZ');\n  }\n}\n// update IDs after adding/removing elements\nfunction updateId() {\n  for (let i = 0; i < $('#canvas-block').children().length; i += 1) {\n    $('#canvas-block').children()[i].id = `canvas${i + 1}`;\n  }\n  for (let i = 0; i < $('.preview').children().length; i += 1) {\n    $('.preview').children()[i].id = `canvasImage${i + 1}`;\n  }\n  for (let i = 0; i < $('#sortable').children().length; i += 1) {\n    $('#sortable').children()[i].id = `frame${i + 1}`;\n    const child = $($('#sortable').children()[i]);\n    child.find('.number').text(i + 1);\n    makeImage(i + 1);\n  }\n}\n\nfunction dragFrame() {\n  $('#sortable').sortable();\n  $('#sortable').sortable('option', 'disabled', false);\n  $('#sortable').disableSelection();\n}\n\nfunction dragOff(e) {\n  $('#sortable').sortable('option', 'disabled', true);\n  setTimeout(() => {\n    const dragged = $(e.currentTarget)\n      .parent()\n      .find('.number')\n      .text();\n    updateId();\n    const target = $(e.currentTarget)\n      .parent()\n      .find('.number')\n      .text();\n    if (dragged < target) {\n      $(`#canvas${dragged}`).insertAfter(`#canvas${target}`);\n    } else {\n      $(`#canvas${dragged}`).insertBefore(`#canvas${target}`);\n    }\n    // const draggedImage = copyCanvasContext(dragged);\n    // const targetImage = copyCanvasContext(dragged + 1);\n    // putImage(dragged, targetImage);\n    // putImage(target, draggedImage);\n    updateId();\n  }, 200);\n  setTimeout(() => {\n    $(e.currentTarget)\n      .parent()\n      .click();\n  }, 400);\n}\n\nfunction removeFrame(exact) {\n  // calculating target's ID\n  const num = $(this)\n    .parent()\n    .find('.number')\n    .text();\n  const target = typeof exact === 'number' ? exact : num;\n  // remove all related elements\n  $(`#frame${target}`).remove();\n  $(`#canvasImage${target}`).remove();\n  $(`#canvas${target}`).remove();\n  updateId();\n  $(`#frame${+target - 1}`).click(); // make previous frame active\n}\n\nfunction copyFrame() {\n  // calculating target's ID\n  const num = $(this)\n    .parent()\n    .find('.number')\n    .text();\n  // cloning target frame\n  $(`#frame${num}`)\n    .clone()\n    .insertAfter(`#frame${num}`)\n    .attr('id', `frame${+num + 1}`)\n    .removeClass('activeFrame')\n    .hover(hoverIn, hoverOut)\n    .click(openCanvas);\n  // cloning target canvas image\n  copyCanvas(num);\n  // bind frame events\n  $(`#frame${+num + 1}`)\n    .find('.removeFrame')\n    .click(removeFrame);\n  $(`#frame${+num + 1}`)\n    .find('.copyFrame')\n    .click(copyFrame);\n  $(`#frame${+num + 1}`)\n    .find('.dragFrame')\n    .mousedown(dragFrame)\n    .mouseup(dragOff);\n  // make copied frame active\n  setTimeout(() => {\n    $(`#frame${+num + 1}`).click();\n  }, 100);\n  updateId();\n  // cloning target frame preview image\n  const dataURL = $(`#canvas${num}`)[0].toDataURL('image/png');\n  if (dataURL) {\n    $(`#frame${+num + 1}`)\n      .find('.preview-box')\n      .css({\n        background: `url(${dataURL})`,\n        'background-size': 'contain'\n      });\n  }\n  // update frame images and animation\n  for (let i = 0; i < $('.frame-list').children().length; i += 1) {\n    makeImage(i + 1);\n  }\n}\n\nfunction addNewFrame() {\n  const count = $('.frame-list').children().length + 1; // calc ID for new frame\n  $('.frame')\n    .first()\n    .clone()\n    .appendTo('.frame-list')\n    .attr('id', `frame${count}`)\n    .removeClass('activeFrame')\n    .hover(hoverIn, hoverOut)\n    .click(openCanvas)\n    .find('.preview-box')\n    .css({ background: 'none' }); // clear preview-box background from first frame\n  $('.number')\n    .last()\n    .text(count); // update number of frame\n  newCanvas(count);\n  $(`#frame${count}`)\n    .find('.removeFrame')\n    .click(removeFrame);\n  $(`#frame${count}`)\n    .find('.copyFrame')\n    .click(copyFrame);\n  $(`#frame${count}`)\n    .find('.dragFrame')\n    .mousedown(dragFrame)\n    .mouseup(dragOff);\n  setTimeout(() => {\n    $(`#frame${count}`).click(); // make new frame active\n  }, 100);\n}\n\nexport { hoverIn, hoverOut, addNewFrame, removeFrame, copyFrame, dragFrame, dragOff, updateId };\n","import React from 'react';\nimport $ from 'jquery';\nimport './palettes.css';\nimport { palette, store } from '../../../store/store';\n\nlet newColor;\npalette.subscribe(() => {\n  newColor = palette.getState().addColor;\n});\n\nclass Palettes extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      hovered: '',\n      mouseEnter: false,\n      color: [],\n      changed: false,\n      active: ''\n    };\n  }\n\n  popHintOnMouseOver(e) {\n    const hovered = e.target.getAttribute('id');\n    if (this.state.hovered === hovered) {\n      this.setState({ hovered: '' });\n    } else {\n      this.setState({ hovered });\n    }\n  }\n\n  mouseIn() {\n    this.setState({ mouseEnter: true });\n  }\n\n  mouseOut() {\n    this.setState({ mouseEnter: false });\n  }\n\n  addNewColor() {\n    if (this.state.color.indexOf(newColor) === -1) {\n      this.state.color.push(newColor);\n      this.setState({ changed: true, active: newColor });\n    }\n  }\n\n  changeCurColor(e) {\n    const color = $(e.target).css('background-color');\n    this.setState({ active: color });\n    $('#currentColor').css({ background: color });\n    store.dispatch({ type: 'currentColor', value: color });\n    $('#switchHexValue').click();\n  }\n\n  render() {\n    return (\n      <div\n        className=\"palettes-box\"\n        onMouseOver={e => this.popHintOnMouseOver(e)}\n        onFocus={() => undefined}\n      >\n        <div className=\"palettes-outlet\">\n          <span className=\"palettes-title\">Palettes</span>\n        </div>\n        <div className=\"palettes-buttons-box\">\n          <button\n            type=\"button\"\n            className=\"palettes-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"palettes-plus\" className=\"fas fa-plus\" />\n          </button>\n          <button type=\"button\" id=\"palettes-dropdown-list\" className=\"palettes-button colors-list\">\n            Current colors\n            <i\n              className={`colors-list-arrow fas fa-sort-down ${\n                this.state.hovered === 'palettes-dropdown-list' ? 'colors-list-arrow-hovered' : ''\n              }`}\n            />\n          </button>\n          <button\n            type=\"button\"\n            className=\"palettes-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"palettes-edit\" className=\"fas fa-pen\" />\n          </button>\n          <p\n            className={`hint palettes-plus ${\n              this.state.mouseEnter === true && this.state.hovered === 'palettes-plus'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Create a new palette\n            <i className=\"palettes-plus-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`hint palettes-edit ${\n              this.state.mouseEnter === true && this.state.hovered === 'palettes-edit'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Palette options\n            <i className=\"palettes-edit-arrow fas fa-sort-down\" />\n          </p>\n        </div>\n        <ul className=\"palettes-list\">\n          <span className={`palette-colors-isempty ${this.state.changed === true ? 'hidden' : ''}`}>\n            No colors in this palette yet\n          </span>\n          {this.state.color.map(item => (\n            <li key={item} id={item} className=\"palette-sample-list\">\n              <div\n                style={{ background: item }}\n                className={`palette-sample ${\n                  this.state.active === item ? 'active-palette-sample' : ''\n                }`}\n                onClick={e => this.changeCurColor(e)}\n                tabIndex=\"-1\"\n                onKeyPress={() => undefined}\n                onFocus={() => undefined}\n                role=\"button\"\n              />\n            </li>\n          ))}\n        </ul>\n        <button\n          id=\"addColorButton\"\n          className=\"hidden\"\n          type=\"button\"\n          onClick={() => this.addNewColor()}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Palettes;\n","import React from 'react';\nimport './preview.css';\nimport { fullSizePreview } from './preview';\n\nclass Preview extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: ''\n    };\n    this.mounted = false;\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  hoverIn() {\n    if (this.mounted) {\n      this.setState({ active: true });\n    }\n  }\n\n  hoverOut() {\n    if (this.mounted) {\n      this.setState({ active: false });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        id=\"preview-area\"\n        className=\"preview-area\"\n        onMouseEnter={() => this.hoverIn()}\n        onMouseLeave={() => this.hoverOut()}\n      >\n        <div\n          className={`preview-open ${this.state.active ? '' : 'hidden'}`}\n          id=\"preview-open\"\n          role=\"button\"\n          tabIndex=\"-1\"\n          onKeyPress={undefined}\n          onClick={fullSizePreview} // open animation in full size mode\n        >\n          <i className=\"fas fa-external-link-alt\" />\n        </div>\n        <div className=\"preview\" />\n      </div>\n    );\n  }\n}\n\nexport default Preview;\n","import React from 'react';\nimport './layers-list.css';\n\nclass Layers extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      hovered: '',\n      mouseEnter: false\n    };\n  }\n\n  popHintOnMouseOver(e) {\n    const hovered = e.target.getAttribute('id');\n    if (this.state.hovered === hovered) {\n      this.setState({ hovered: '' });\n    } else {\n      this.setState({ hovered });\n    }\n  }\n\n  mouseIn() {\n    this.setState({ mouseEnter: true });\n  }\n\n  mouseOut() {\n    this.setState({ mouseEnter: false });\n  }\n\n  render() {\n    return (\n      <div\n        className=\"layers-box\"\n        onMouseOver={e => this.popHintOnMouseOver(e)}\n        onFocus={() => undefined}\n      >\n        <div className=\"layer-outlet\">\n          <span className=\"layer-title\">Layers</span>\n          <i\n            id=\"layers-preview\"\n            className=\"fas fa-eye\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          />\n          <p\n            className={`hint layers-preview ${\n              this.state.hovered === 'layers-preview' ? '' : 'hidden'\n            }`}\n          >\n            Preview all layers\n            <i className=\"layers-preview-arrow fas fa-sort-down\" />\n          </p>\n        </div>\n        <div className=\"layer-buttons-box\">\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-plus\" className=\"fas fa-plus\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-up\" className=\"fas fa-arrow-up\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-down\" className=\"fas fa-arrow-down\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-edit-name\" className=\"fas fa-pen\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-merge\" className=\"fas fa-compress\" />\n          </button>\n          <button\n            type=\"button\"\n            className=\"layer-button\"\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i id=\"layers-remove\" className=\"fas fa-times\" />\n          </button>\n          <p\n            className={`hint layers-plus ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-plus' ? '' : 'hidden'\n            }`}\n          >\n            Create a layer\n            <i className=\"layers-plus-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`hint layers-up ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-up' ? '' : 'hidden'\n            }`}\n          >\n            Move layer up\n            <i className=\"layers-up-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`hint layers-down ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-down' ? '' : 'hidden'\n            }`}\n          >\n            Move layer down\n            <i className=\"layers-down-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`hint layers-edit-name ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-edit-name'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Edit layer name\n            <i className=\"layers-edit-name-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`big hint layers-merge ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-merge'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Merge with layer below\n            <i className=\"layers-merge-arrow fas fa-sort-down\" />\n          </p>\n          <p\n            className={`big hint layers-remove ${\n              this.state.mouseEnter === true && this.state.hovered === 'layers-remove'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Delete selected layer\n            <i className=\"layers-remove-arrow fas fa-sort-down\" />\n          </p>\n        </div>\n        <ul className=\"layer-list\">\n          <li className=\"layer-item\">Layer 1</li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default Layers;\n","import React from 'react';\nimport $ from 'jquery';\nimport './settings.css';\nimport { options } from '../../../store/store';\n\n// let customWidth;\nlet optionsBlock;\noptions.subscribe(() => {\n  // customWidth = store.getState().customWidth || 33;\n  optionsBlock = options.getState().optionsBlock;\n});\n\nfunction setBG(background) {\n  $('.frame').css({ background });\n  $('.canvas').css({ background });\n}\nclass Settings extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: ''\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  addActiveOnClick(e) {\n    const clicked = e.target.getAttribute('id');\n    const bg = $(e.target).css('background-image');\n    setBG(bg);\n    this.setState({ active: clicked });\n  }\n\n  render() {\n    return (\n      <div\n        className={`general-settings-block ${optionsBlock === 'settings' ? 'flexed' : 'hidden'}`}\n      >\n        <div className=\"current-bg\">\n          <span className=\"default-bg bold\">Background</span>\n          <div className=\"general-settings-buttons-area\">\n            <button\n              type=\"button\"\n              id=\"bg1\"\n              onClick={e => this.addActiveOnClick(e)}\n              className={`general-settings-button bg1 ${\n                this.state.active === 'bg1' ? 'active-button' : 'not-active-button'\n              }`}\n            />\n            <button\n              type=\"button\"\n              id=\"bg2\"\n              onClick={e => this.addActiveOnClick(e)}\n              className={`general-settings-button bg2 ${\n                this.state.active === 'bg2' ? 'active-button' : 'not-active-button'\n              }`}\n            />\n            <button\n              type=\"button\"\n              id=\"bg3\"\n              onClick={e => this.addActiveOnClick(e)}\n              className={`general-settings-button bg3 ${\n                this.state.active === 'bg3' ? 'active-button' : 'not-active-button'\n              }`}\n            />\n            <button\n              type=\"button\"\n              id=\"bg4\"\n              onClick={e => this.addActiveOnClick(e)}\n              className={`general-settings-button bg4 ${\n                this.state.active === 'bg4' ? 'active-button' : 'not-active-button'\n              }`}\n            />\n          </div>\n          <p>Set default background</p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Settings;\n","import React from 'react';\nimport $ from 'jquery';\nimport './resize.css';\nimport { store, options } from '../../../store/store';\n\nlet customWidth;\nlet optionsBlock;\nstore.subscribe(() => {\n  customWidth = store.getState().customWidth || 33;\n});\noptions.subscribe(() => {\n  optionsBlock = options.getState().optionsBlock;\n});\nclass ResizeCanvas extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      customWidth: ''\n    };\n  }\n\n  componentDidMount() {\n    // calculating canvas resize options\n    $('#current-width').text(customWidth);\n    $('#current-height').text(customWidth);\n    $('#new-width').text($('#canvas1').width());\n    $('#resize-input').attr('max', `${$('#canvas1').width()}`);\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  resizeCanvasOnClickHandler() {\n    if ($('#resize-input').val()) {\n      const inputVal = +$('#resize-input').val();\n      const maxSize = +$('#resize-input').attr('max');\n      if (inputVal > 0 && inputVal < maxSize) {\n        store.dispatch({ type: 'customWidth', value: inputVal });\n        if (this.mounted) {\n          this.setState({ customWidth });\n        }\n        $('#resize-input').val('');\n        $('#error-message').text('');\n      } else {\n        $('#error-message').text(\n          `Size can be from ${$('#resize-input').attr('min')} to ${$('#resize-input').attr(\n            'max'\n          )} px`\n        );\n        $('#resize-input').val('');\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={`resize-canvas-block ${\n          optionsBlock === 'resize-settings' ? 'flexed' : 'hidden'\n        }`}\n      >\n        <div className=\"current-size\">\n          <span className=\"default-size bold\">current size</span>\n          <p>\n            {`Width `}\n            <span className=\"default-width bold\" id=\"current-width\">\n              {this.state.customWidth}\n            </span>\n            px\n          </p>\n          <p>\n            Height\n            <span className=\"default-width bold\" id=\"current-height\">\n              {this.state.customWidth}\n            </span>\n            px\n          </p>\n        </div>\n        <div className=\"resize-canvas\">\n          <span className=\"resize bold\">resize</span>\n          <p className=\"new-width-block\">\n            <span>1 - </span>\n            <span id=\"new-width\" className=\"canvas-width\" />\n            <span>px</span>\n            <input\n              type=\"number\"\n              className=\"resize-input\"\n              id=\"resize-input\"\n              min=\"1\"\n              onKeyPress={e => {\n                if (e.key === 'Enter') {\n                  this.resizeCanvasOnClickHandler();\n                }\n              }}\n            />\n          </p>\n          <p id=\"error-message\" className=\"error-message\" />\n          <button\n            id=\"resize-button\"\n            className=\"resize-button\"\n            type=\"button\"\n            onClick={() => this.resizeCanvasOnClickHandler()}\n          >\n            Change canvas size\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ResizeCanvas;\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable prettier/prettier */\n/* eslint-disable func-names */\n/* eslint-disable no-bitwise */\n/* eslint-disable prefer-rest-params */\n/* eslint-disable no-empty */\n/* eslint-disable no-var */\n/* eslint-disable no-use-before-define */\n/* eslint-disable no-lonely-if */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-shadow */\n/* eslint-disable prefer-const */\n/*\n * NeuQuant Neural-Net Quantization Algorithm\n * ------------------------------------------\n *\n * Copyright (c) 1994 Anthony Dekker\n *\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\n * the algorithm.\n *\n * Any party obtaining a copy of these files from the author, directly or\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\n * this software and documentation files (the \"Software\"), including without\n * limitation the rights to use, copy, modify, merge, publish, distribute,\n * sublicense, and/or sell copies of the Software, and to permit persons who\n * receive copies from any such party to do so, with the only requirement being\n * that this copyright notice remain intact.\n */\n\n/*\n * This class handles Neural-Net quantization algorithm\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\n\nconst NeuQuant = function () {\n  let exports = {};\n  let netsize = 256; /* number of colours used */\n\n  /* four primes near 500 - assume no image has a length so large */\n  /* that it is divisible by all four primes */\n\n  let prime1 = 499;\n  let prime2 = 491;\n  let prime3 = 487;\n  let prime4 = 503;\n  let minpicturebytes = 3 * prime4; /* minimum size for input image */\n\n  /*\n   * Program Skeleton ---------------- [select samplefac in range 1..30] [read\n   * image from input file] pic = (unsigned char*) malloc(3*width*height);\n   * initnet(pic,3*width*height,samplefac); learn(); unbiasnet(); [write output\n   * image header, using writecolourmap(f)] inxbuild(); write output image using\n   * inxsearch(b,g,r)\n   */\n\n  /*\n   * Network Definitions -------------------\n   */\n\n  let maxnetpos = netsize - 1;\n  let netbiasshift = 4; /* bias for colour values */\n  let ncycles = 100; /* no. of learning cycles */\n\n  /* defs for freq and bias */\n  let intbiasshift = 16; /* bias for fractions */\n  let intbias = 1 << intbiasshift;\n  let gammashift = 10; /* gamma = 1024 */\n  let gamma = 1 << gammashift;\n  let betashift = 10;\n  let beta = intbias >> betashift; /* beta = 1/1024 */\n  let betagamma = intbias << (gammashift - betashift);\n\n  /* defs for decreasing radius factor */\n  let initrad = netsize >> 3; /* for 256 cols, radius starts */\n  let radiusbiasshift = 6; /* at 32.0 biased by 6 bits */\n  let radiusbias = 1 << radiusbiasshift;\n  let initradius = initrad * radiusbias; /* and decreases by a */\n  let radiusdec = 30; /* factor of 1/30 each cycle */\n\n  /* defs for decreasing alpha factor */\n  let alphabiasshift = 10; /* alpha starts at 1.0 */\n  let initalpha = 1 << alphabiasshift;\n  let alphadec; /* biased by 10 bits */\n\n  /* radbias and alpharadbias used for radpower calculation */\n  let radbiasshift = 8;\n  let radbias = 1 << radbiasshift;\n  let alpharadbshift = alphabiasshift + radbiasshift;\n  let alpharadbias = 1 << alpharadbshift;\n\n  /*\n   * Types and Global Variables --------------------------\n   */\n\n  let thepicture; /* the input image itself */\n  let lengthcount; /* lengthcount = H*W*3 */\n  let samplefac; /* sampling factor 1..30 */\n\n  // typedef int pixel[4]; /* BGRc */\n  let network; /* the network itself - [netsize][4] */\n  let netindex = [];\n\n  /* for network lookup - really 256 */\n  let bias = [];\n\n  /* bias and freq arrays for learning */\n  let freq = [];\n  let radpower = [];\n\n  let NeuQuant = (exports.NeuQuant = function NeuQuant(thepic, len, sample) {\n    let i;\n    let p;\n\n    thepicture = thepic;\n    lengthcount = len;\n    samplefac = sample;\n\n    network = new Array(netsize);\n\n    for (i = 0; i < netsize; i++) {\n      network[i] = new Array(4);\n      p = network[i];\n      p[0] = p[1] = p[2] = (i << (netbiasshift + 8)) / netsize;\n      freq[i] = intbias / netsize; /* 1/netsize */\n      bias[i] = 0;\n    }\n  });\n\n  let colorMap = function colorMap() {\n    let map = [];\n    let index = new Array(netsize);\n\n    for (let i = 0; i < netsize; i++) index[network[i][3]] = i;\n\n    let k = 0;\n    for (let l = 0; l < netsize; l++) {\n      let j = index[l];\n      map[k++] = network[j][0];\n      map[k++] = network[j][1];\n      map[k++] = network[j][2];\n    }\n\n    return map;\n  };\n\n  /*\n   * Insertion sort of network and building of netindex[0..255] (to do after\n   * unbias)\n   * -------------------------------------------------------------------------------\n   */\n\n  let inxbuild = function inxbuild() {\n    let i;\n    let j;\n    let smallpos;\n    let smallval;\n    let p;\n    let q;\n    let previouscol;\n    let startpos;\n\n    previouscol = 0;\n    startpos = 0;\n    for (i = 0; i < netsize; i++) {\n      p = network[i];\n      smallpos = i;\n      smallval = p[1]; /* index on g */\n\n      /* find smallest in i..netsize-1 */\n      for (j = i + 1; j < netsize; j++) {\n        q = network[j];\n        if (q[1] < smallval) {\n          /* index on g */\n          smallpos = j;\n          smallval = q[1]; /* index on g */\n        }\n      }\n      q = network[smallpos];\n\n      /* swap p (i) and q (smallpos) entries */\n      if (i != smallpos) {\n        j = q[0];\n        q[0] = p[0];\n        p[0] = j;\n        j = q[1];\n        q[1] = p[1];\n        p[1] = j;\n        j = q[2];\n        q[2] = p[2];\n        p[2] = j;\n        j = q[3];\n        q[3] = p[3];\n        p[3] = j;\n      }\n\n      /* smallval entry is now in position i */\n\n      if (smallval != previouscol) {\n        netindex[previouscol] = (startpos + i) >> 1;\n\n        for (j = previouscol + 1; j < smallval; j++) netindex[j] = i;\n\n        previouscol = smallval;\n        startpos = i;\n      }\n    }\n\n    netindex[previouscol] = (startpos + maxnetpos) >> 1;\n    for (j = previouscol + 1; j < 256; j++) netindex[j] = maxnetpos; /* really 256 */\n  };\n\n  /*\n   * Main Learning Loop ------------------\n   */\n\n  let learn = function learn() {\n    let i;\n    let j;\n    let b;\n    let g;\n    let r;\n    let radius;\n    let rad;\n    let alpha;\n    let step;\n    let delta;\n    let samplepixels;\n    let p;\n    let pix;\n    let lim;\n\n    if (lengthcount < minpicturebytes) samplefac = 1;\n\n    alphadec = 30 + (samplefac - 1) / 3;\n    p = thepicture;\n    pix = 0;\n    lim = lengthcount;\n    samplepixels = lengthcount / (3 * samplefac);\n    delta = (samplepixels / ncycles) | 0;\n    alpha = initalpha;\n    radius = initradius;\n\n    rad = radius >> radiusbiasshift;\n    if (rad <= 1) rad = 0;\n\n    for (i = 0; i < rad; i++) radpower[i] = alpha * (((rad * rad - i * i) * radbias) / (rad * rad));\n\n    if (lengthcount < minpicturebytes) step = 3;\n    else if (lengthcount % prime1 !== 0) step = 3 * prime1;\n    else {\n      if (lengthcount % prime2 !== 0) step = 3 * prime2;\n      else if ((lengthcount % prime3) !== 0) step = 3 * prime3;\n      else step = 3 * prime4;\n    }\n\n    i = 0;\n    while (i < samplepixels) {\n      b = (p[pix + 0] & 0xff) << netbiasshift;\n      g = (p[pix + 1] & 0xff) << netbiasshift;\n      r = (p[pix + 2] & 0xff) << netbiasshift;\n      j = contest(b, g, r);\n\n      altersingle(alpha, j, b, g, r);\n      if (rad !== 0) alterneigh(rad, j, b, g, r); /* alter neighbours */\n\n      pix += step;\n      if (pix >= lim) pix -= lengthcount;\n\n      i++;\n\n      if (delta === 0) delta = 1;\n\n      if (i % delta === 0) {\n        alpha -= alpha / alphadec;\n        radius -= radius / radiusdec;\n        rad = radius >> radiusbiasshift;\n\n        if (rad <= 1) rad = 0;\n\n        for (j = 0; j < rad; j++)\n          radpower[j] = alpha * (((rad * rad - j * j) * radbias) / (rad * rad));\n      }\n    }\n  };\n\n  /*\n   ** Search for BGR values 0..255 (after net is unbiased) and return colour\n   * index\n   * ----------------------------------------------------------------------------\n   */\n\n  let map = (exports.map = function map(b, g, r) {\n    let i;\n    let j;\n    let dist;\n    let a;\n    let bestd;\n    let p;\n    let best;\n\n    bestd = 1000; /* biggest possible dist is 256*3 */\n    best = -1;\n    i = netindex[g]; /* index on g */\n    j = i - 1; /* start at netindex[g] and work outwards */\n\n    while (i < netsize || j >= 0) {\n      if (i < netsize) {\n        p = network[i];\n        dist = p[1] - g; /* inx key */\n\n        if (dist >= bestd) i = netsize;\n        /* stop iter */ else {\n          i++;\n          if (dist < 0) dist = -dist;\n          a = p[0] - b;\n          if (a < 0) a = -a;\n          dist += a;\n\n          if (dist < bestd) {\n            a = p[2] - r;\n            if (a < 0) a = -a;\n            dist += a;\n\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n\n      if (j >= 0) {\n        p = network[j];\n        dist = g - p[1]; /* inx key - reverse dif */\n\n        if (dist >= bestd) j = -1;\n        /* stop iter */ else {\n          j--;\n          if (dist < 0) dist = -dist;\n          a = p[0] - b;\n          if (a < 0) a = -a;\n          dist += a;\n\n          if (dist < bestd) {\n            a = p[2] - r;\n            if (a < 0) a = -a;\n            dist += a;\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n    }\n\n    return best;\n  });\n\n  let process = (exports.process = function process() {\n    learn();\n    unbiasnet();\n    inxbuild();\n    return colorMap();\n  });\n\n  /*\n   * Unbias network to give byte values 0..255 and record position i to prepare\n   * for sort\n   * -----------------------------------------------------------------------------------\n   */\n\n  var unbiasnet = function unbiasnet() {\n    let i;\n    let j;\n\n    for (i = 0; i < netsize; i++) {\n      network[i][0] >>= netbiasshift;\n      network[i][1] >>= netbiasshift;\n      network[i][2] >>= netbiasshift;\n      network[i][3] = i; /* record colour no */\n    }\n  };\n\n  /*\n   * Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2)) in\n   * radpower[|i-j|]\n   * ---------------------------------------------------------------------------------\n   */\n\n  var alterneigh = function alterneigh(rad, i, b, g, r) {\n    let j;\n    let k;\n    let lo;\n    let hi;\n    let a;\n    let m;\n    let p;\n\n    lo = i - rad;\n    if (lo < -1) lo = -1;\n\n    hi = i + rad;\n    if (hi > netsize) hi = netsize;\n\n    j = i + 1;\n    k = i - 1;\n    m = 1;\n\n    while (j < hi || k > lo) {\n      a = radpower[m++];\n\n      if (j < hi) {\n        p = network[j++];\n\n        try {\n          p[0] -= (a * (p[0] - b)) / alpharadbias;\n          p[1] -= (a * (p[1] - g)) / alpharadbias;\n          p[2] -= (a * (p[2] - r)) / alpharadbias;\n        } catch (e) { } // prevents 1.3 miscompilation\n      }\n\n      if (k > lo) {\n        p = network[k--];\n\n        try {\n          p[0] -= (a * (p[0] - b)) / alpharadbias;\n          p[1] -= (a * (p[1] - g)) / alpharadbias;\n          p[2] -= (a * (p[2] - r)) / alpharadbias;\n        } catch (e) { }\n      }\n    }\n  };\n\n  /*\n   * Move neuron i towards biased (b,g,r) by factor alpha\n   * ----------------------------------------------------\n   */\n\n  var altersingle = function altersingle(alpha, i, b, g, r) {\n    /* alter hit neuron */\n    let n = network[i];\n    n[0] -= (alpha * (n[0] - b)) / initalpha;\n    n[1] -= (alpha * (n[1] - g)) / initalpha;\n    n[2] -= (alpha * (n[2] - r)) / initalpha;\n  };\n\n  /*\n   * Search for biased BGR values ----------------------------\n   */\n\n  var contest = function contest(b, g, r) {\n    /* finds closest neuron (min dist) and updates freq */\n    /* finds best neuron (min dist-bias) and returns position */\n    /* for frequently chosen neurons, freq[i] is high and bias[i] is negative */\n    /* bias[i] = gamma*((1/netsize)-freq[i]) */\n\n    let i;\n    let dist;\n    let a;\n    let biasdist;\n    let betafreq;\n    let bestpos;\n    let bestbiaspos;\n    let bestd;\n    let bestbiasd;\n    let n;\n\n    bestd = ~(1 << 31);\n    bestbiasd = bestd;\n    bestpos = -1;\n    bestbiaspos = bestpos;\n\n    for (i = 0; i < netsize; i++) {\n      n = network[i];\n      dist = n[0] - b;\n      if (dist < 0) dist = -dist;\n      a = n[1] - g;\n      if (a < 0) a = -a;\n      dist += a;\n      a = n[2] - r;\n      if (a < 0) a = -a;\n      dist += a;\n\n      if (dist < bestd) {\n        bestd = dist;\n        bestpos = i;\n      }\n\n      biasdist = dist - (bias[i] >> (intbiasshift - netbiasshift));\n\n      if (biasdist < bestbiasd) {\n        bestbiasd = biasdist;\n        bestbiaspos = i;\n      }\n\n      betafreq = freq[i] >> betashift;\n      freq[i] -= betafreq;\n      bias[i] += betafreq << gammashift;\n    }\n\n    freq[bestpos] += beta;\n    bias[bestpos] -= betagamma;\n    return bestbiaspos;\n  };\n\n  NeuQuant.apply(this, arguments);\n  return exports;\n};\n\nexport { NeuQuant };\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-continue */\n/* eslint-disable no-unused-vars */\n/* eslint-disable prefer-rest-params */\n/* eslint-disable func-names */\n/* eslint-disable camelcase */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-shadow */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-labels */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-use-before-define */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-var */\n/* eslint-disable prefer-const */\n/**\n * This class handles LZW encoding\n * Adapted from Jef Poskanzer's Java port by way of J. M. G. Elliott.\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\n\nconst LZWEncoder = function() {\n  let exports = {};\n  let EOF = -1;\n  let imgW;\n  let imgH;\n  let pixAry;\n  let initCodeSize;\n  let remaining;\n  let curPixel;\n\n  // GIFCOMPR.C - GIF Image compression routines\n  // Lempel-Ziv compression based on 'compress'. GIF modifications by\n  // David Rowley (mgardi@watdcsu.waterloo.edu)\n  // General DEFINEs\n\n  let BITS = 12;\n  let HSIZE = 5003; // 80% occupancy\n\n  // GIF Image compression - modified 'compress'\n  // Based on: compress.c - File compression ala IEEE Computer, June 1984.\n  // By Authors: Spencer W. Thomas (decvax!harpo!utah-cs!utah-gr!thomas)\n  // Jim McKie (decvax!mcvax!jim)\n  // Steve Davies (decvax!vax135!petsd!peora!srd)\n  // Ken Turkowski (decvax!decwrl!turtlevax!ken)\n  // James A. Woods (decvax!ihnp4!ames!jaw)\n  // Joe Orost (decvax!vax135!petsd!joe)\n\n  let n_bits; // number of bits/code\n  let maxbits = BITS; // user settable max # bits/code\n  let maxcode; // maximum code, given n_bits\n  let maxmaxcode = 1 << BITS; // should NEVER generate this code\n  let htab = [];\n  let codetab = [];\n  let hsize = HSIZE; // for dynamic table sizing\n  let free_ent = 0; // first unused entry\n\n  // block compression parameters -- after all codes are used up,\n  // and compression rate changes, start over.\n\n  let clear_flg = false;\n\n  // Algorithm: use open addressing double hashing (no chaining) on the\n  // prefix code / next character combination. We do a variant of Knuth's\n  // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime\n  // secondary probe. Here, the modular division first probe is gives way\n  // to a faster exclusive-or manipulation. Also do block compression with\n  // an adaptive reset, whereby the code table is cleared when the compression\n  // ratio decreases, but after the table fills. The variable-length output\n  // codes are re-sized at this point, and a special CLEAR code is generated\n  // for the decompressor. Late addition: construct the table according to\n  // file size for noticeable speed improvement on small files. Please direct\n  // questions about this implementation to ames!jaw.\n\n  let g_init_bits;\n  let ClearCode;\n  let EOFCode;\n\n  // output\n  // Output the given code.\n  // Inputs:\n  // code: A n_bits-bit integer. If == -1, then EOF. This assumes\n  // that n_bits =< wordsize - 1.\n  // Outputs:\n  // Outputs code to the file.\n  // Assumptions:\n  // Chars are 8 bits long.\n  // Algorithm:\n  // Maintain a BITS character long buffer (so that 8 codes will\n  // fit in it exactly). Use the VAX insv instruction to insert each\n  // code in turn. When the buffer fills up empty it and start over.\n\n  let cur_accum = 0;\n  let cur_bits = 0;\n  let masks = [\n    0x0000,\n    0x0001,\n    0x0003,\n    0x0007,\n    0x000f,\n    0x001f,\n    0x003f,\n    0x007f,\n    0x00ff,\n    0x01ff,\n    0x03ff,\n    0x07ff,\n    0x0fff,\n    0x1fff,\n    0x3fff,\n    0x7fff,\n    0xffff\n  ];\n\n  // Number of characters so far in this 'packet'\n  let a_count;\n\n  // Define the storage for the packet accumulator\n  let accum = [];\n\n  let LZWEncoder = (exports.LZWEncoder = function LZWEncoder(width, height, pixels, color_depth) {\n    imgW = width;\n    imgH = height;\n    pixAry = pixels;\n    initCodeSize = Math.max(2, color_depth);\n  });\n\n  // Add a character to the end of the current packet, and if it is 254\n  // characters, flush the packet to disk.\n  let char_out = function char_out(c, outs) {\n    accum[a_count++] = c;\n    if (a_count >= 254) flush_char(outs);\n  };\n\n  // Clear out the hash table\n  // table clear for block compress\n\n  let cl_block = function cl_block(outs) {\n    cl_hash(hsize);\n    free_ent = ClearCode + 2;\n    clear_flg = true;\n    output(ClearCode, outs);\n  };\n\n  // reset code table\n  var cl_hash = function cl_hash(hsize) {\n    for (let i = 0; i < hsize; ++i) htab[i] = -1;\n  };\n\n  let compress = (exports.compress = function compress(init_bits, outs) {\n    let fcode;\n    let i; /* = 0 */\n    let c;\n    let ent;\n    let disp;\n    let hsize_reg;\n    let hshift;\n\n    // Set up the globals: g_init_bits - initial number of bits\n    g_init_bits = init_bits;\n\n    // Set up the necessary values\n    clear_flg = false;\n    n_bits = g_init_bits;\n    maxcode = MAXCODE(n_bits);\n\n    ClearCode = 1 << (init_bits - 1);\n    EOFCode = ClearCode + 1;\n    free_ent = ClearCode + 2;\n\n    a_count = 0; // clear packet\n\n    ent = nextPixel();\n\n    hshift = 0;\n    for (fcode = hsize; fcode < 65536; fcode *= 2) ++hshift;\n    hshift = 8 - hshift; // set hash code range bound\n\n    hsize_reg = hsize;\n    cl_hash(hsize_reg); // clear hash table\n\n    output(ClearCode, outs);\n\n    outer_loop: while ((c = nextPixel()) != EOF) {\n      fcode = (c << maxbits) + ent;\n      i = (c << hshift) ^ ent; // xor hashing\n\n      if (htab[i] == fcode) {\n        ent = codetab[i];\n        continue;\n      } else if (htab[i] >= 0) {\n        // non-empty slot\n\n        disp = hsize_reg - i; // secondary hash (after G. Knott)\n        if (i === 0) disp = 1;\n\n        do {\n          if ((i -= disp) < 0) i += hsize_reg;\n\n          if (htab[i] == fcode) {\n            ent = codetab[i];\n            continue outer_loop;\n          }\n        } while (htab[i] >= 0);\n      }\n\n      output(ent, outs);\n      ent = c;\n      if (free_ent < maxmaxcode) {\n        codetab[i] = free_ent++; // code -> hashtable\n        htab[i] = fcode;\n      } else cl_block(outs);\n    }\n\n    // Put out the final code.\n    output(ent, outs);\n    output(EOFCode, outs);\n  });\n\n  // ----------------------------------------------------------------------------\n  let encode = (exports.encode = function encode(os) {\n    os.writeByte(initCodeSize); // write \"initial code size\" byte\n    remaining = imgW * imgH; // reset navigation variables\n    curPixel = 0;\n    compress(initCodeSize + 1, os); // compress and write the pixel data\n    os.writeByte(0); // write block terminator\n  });\n\n  // Flush the packet to disk, and reset the accumulator\n  var flush_char = function flush_char(outs) {\n    if (a_count > 0) {\n      outs.writeByte(a_count);\n      outs.writeBytes(accum, 0, a_count);\n      a_count = 0;\n    }\n  };\n\n  var MAXCODE = function MAXCODE(n_bits) {\n    return (1 << n_bits) - 1;\n  };\n\n  // ----------------------------------------------------------------------------\n  // Return the next pixel from the image\n  // ----------------------------------------------------------------------------\n\n  var nextPixel = function nextPixel() {\n    if (remaining === 0) return EOF;\n    --remaining;\n    let pix = pixAry[curPixel++];\n    return pix & 0xff;\n  };\n\n  var output = function output(code, outs) {\n    cur_accum &= masks[cur_bits];\n\n    if (cur_bits > 0) cur_accum |= code << cur_bits;\n    else cur_accum = code;\n\n    cur_bits += n_bits;\n\n    while (cur_bits >= 8) {\n      char_out(cur_accum & 0xff, outs);\n      cur_accum >>= 8;\n      cur_bits -= 8;\n    }\n\n    // If the next entry is going to be too big for the code size,\n    // then increase it, if possible.\n\n    if (free_ent > maxcode || clear_flg) {\n      if (clear_flg) {\n        maxcode = MAXCODE((n_bits = g_init_bits));\n        clear_flg = false;\n      } else {\n        ++n_bits;\n        if (n_bits == maxbits) maxcode = maxmaxcode;\n        else maxcode = MAXCODE(n_bits);\n      }\n    }\n\n    if (code == EOFCode) {\n      // At EOF, write the rest of the buffer.\n      while (cur_bits > 0) {\n        char_out(cur_accum & 0xff, outs);\n        cur_accum >>= 8;\n        cur_bits -= 8;\n      }\n\n      flush_char(outs);\n    }\n  };\n\n  LZWEncoder.apply(this, arguments);\n  return exports;\n};\n\nexport { LZWEncoder };\n","/* eslint-disable consistent-return */\n/* eslint-disable no-console */\n/* eslint-disable func-names */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-useless-concat */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-return-assign */\n/* eslint-disable no-nested-ternary */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-empty */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-use-before-define */\n/* eslint-disable camelcase */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-unused-vars */\n/* eslint-disable block-scoped-var */\n/* eslint-disable no-shadow */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-var */\n/* eslint-disable vars-on-top */\n/**\n * This class lets you encode animated GIF files\n * Base class :  http://www.java2s.com/Code/Java/2D-Graphics-GUI/AnimatedGifEncoder.htm\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\nimport $ from 'jquery';\nimport { NeuQuant } from './NeuQuant';\nimport { LZWEncoder } from './LZWEncoder';\n\nconst GIFEncoder = function() {\n  for (var i = 0, chr = {}; i < 256; i++) chr[i] = String.fromCharCode(i);\n\n  function ByteArray() {\n    this.bin = [];\n  }\n\n  ByteArray.prototype.getData = function() {\n    for (var v = '', l = this.bin.length, i = 0; i < l; i++) v += chr[this.bin[i]];\n    return v;\n  };\n\n  ByteArray.prototype.writeByte = function(val) {\n    this.bin.push(val);\n  };\n\n  ByteArray.prototype.writeUTFBytes = function(string) {\n    for (let l = string.length, i = 0; i < l; i++) this.writeByte(string.charCodeAt(i));\n  };\n\n  ByteArray.prototype.writeBytes = function(array, offset, length) {\n    for (let l = length || array.length, i = offset || 0; i < l; i++) this.writeByte(array[i]);\n  };\n\n  const exports = {};\n  let width; // image size\n  let height;\n  let transparent = null; // transparent color if given\n  let transIndex; // transparent index in color table\n  let repeat = -1; // no repeat\n  let delay = 0; // frame delay (hundredths)\n  let started = false; // ready to output frames\n  let out;\n  let image; // current frame\n  let pixels; // BGR byte array from frame\n  let indexedPixels; // converted frame indexed to palette\n  let colorDepth; // number of bit planes\n  let colorTab; // RGB palette\n  const usedEntry = []; // active palette entries\n  let palSize = 7; // color table size (bits-1)\n  let dispose = -1; // disposal code (-1 = use default)\n  let closeStream = false; // close stream when finished\n  let firstFrame = true;\n  let sizeSet = false; // if false, get size from first frame\n  let sample = 10; // default sample interval for quantizer\n  let comment = 'Generated by jsgif (https://github.com/antimatter15/jsgif/)'; // default comment for generated gif\n\n  /**\n   * Sets the delay time between each frame, or changes it for subsequent frames\n   * (applies to last frame added)\n   * int delay time in milliseconds\n   * @param ms\n   */\n\n  const setDelay = (exports.setDelay = function setDelay(ms) {\n    delay = Math.round(ms / 10);\n  });\n\n  /**\n   * Sets the GIF frame disposal code for the last added frame and any\n   *\n   * subsequent frames. Default is 0 if no transparent color has been set,\n   * otherwise 2.\n   * @param code\n   * int disposal code.\n   */\n\n  const setDispose = (exports.setDispose = function setDispose(code) {\n    if (code >= 0) dispose = code;\n  });\n\n  /**\n   * Sets the number of times the set of GIF frames should be played. Default is\n   * 1; 0 means play indefinitely. Must be invoked before the first image is\n   * added.\n   *\n   * @param iter\n   * int number of iterations.\n   * @return\n   */\n\n  const setRepeat = (exports.setRepeat = function setRepeat(iter) {\n    if (iter >= 0) repeat = iter;\n  });\n\n  /**\n   * Sets the transparent color for the last added frame and any subsequent\n   * frames. Since all colors are subject to modification in the quantization\n   * process, the color in the final palette for each frame closest to the given\n   * color becomes the transparent color for that frame. May be set to null to\n   * indicate no transparent color.\n   * @param\n   * Color to be treated as transparent on display.\n   */\n\n  const setTransparent = (exports.setTransparent = function setTransparent(c) {\n    transparent = c;\n  });\n\n  /**\n   * Sets the comment for the block comment\n   * @param\n   * string to be insterted as comment\n   */\n\n  const setComment = (exports.setComment = function setComment(c) {\n    comment = c;\n  });\n\n  /**\n   * The addFrame method takes an incoming BitmapData object to create each frames\n   * @param\n   * BitmapData object to be treated as a GIF's frame\n   */\n\n  const addFrame = (exports.addFrame = function addFrame(im, is_imageData) {\n    if (im === null || !started || out === null) {\n      throw new Error('Please call start method before calling addFrame');\n    }\n\n    let ok = true;\n\n    try {\n      if (!is_imageData) {\n        image = im.getImageData(0, 0, im.canvas.width, im.canvas.height).data;\n        if (!sizeSet) setSize(im.canvas.width, im.canvas.height);\n      } else if (im instanceof ImageData) {\n        image = im.data;\n        if (width != im.width || height != im.height) {\n          setSize(im.width, im.height);\n        } else {\n        }\n      } else if (im instanceof Uint8ClampedArray) {\n        if (im.length == width * height * 4) {\n          image = im;\n        } else {\n          console.log('Please set the correct size: ImageData length mismatch');\n          ok = false;\n        }\n      } else {\n        console.log('Please provide correct input');\n        ok = false;\n      }\n      getImagePixels(); // convert to correct format if necessary\n      analyzePixels(); // build color table & map pixels\n\n      if (firstFrame) {\n        writeLSD(); // logical screen descriptior\n        writePalette(); // global color table\n        if (repeat >= 0) {\n          // use NS app extension to indicate reps\n          writeNetscapeExt();\n        }\n      }\n\n      writeGraphicCtrlExt(); // write graphic control extension\n      if (comment !== '') {\n        writeCommentExt(); // write comment extension\n      }\n      writeImageDesc(); // image descriptor\n      if (!firstFrame) writePalette(); // local color table\n      writePixels(); // encode and write pixel data\n      firstFrame = false;\n    } catch (e) {\n      ok = false;\n    }\n\n    return ok;\n  });\n\n  /**\n   * @description: Downloads the encoded gif with the given name\n   * No need of any conversion from the stream data (out) to base64\n   * Solves the issue of large file sizes when there are more frames\n   * and does not involve in creation of any temporary data in the process\n   * so no wastage of memory, and speeds up the process of downloading\n   * to just calling this function.\n   * @parameter {String} filename filename used for downloading the gif\n   */\n\n  const download = (exports.download = function download(filename) {\n    if (out === null || closeStream == false) {\n      console.log(\n        'Please call start method and add frames and call finish method before calling download'\n      );\n    } else {\n      filename =\n        filename !== undefined ? (filename.endsWith('.gif') ? filename : filename) : 'download.gif';\n      const templink = document.createElement('a');\n      templink.download = filename;\n      templink.href = URL.createObjectURL(\n        new Blob([new Uint8Array(out.bin)], { type: 'image/gif' })\n      );\n      templink.click();\n    }\n  });\n\n  const upload = (exports.upload = function upload(filename) {\n    if (out === null || closeStream == false) {\n      console.log(\n        'Please call start method and add frames and call finish method before calling download'\n      );\n    } else {\n      filename =\n        filename !== undefined ? (filename.endsWith('.gif') ? filename : filename) : 'download.gif';\n      const templink = document.createElement('a');\n      templink.target = '_blank';\n      templink.href = URL.createObjectURL(\n        new Blob([new Uint8Array(out.bin)], { type: 'image/gif' })\n      );\n      const link = $(templink)\n        .attr('href')\n        .replace('blob:', '');\n      return new Uint8Array(out.bin);\n    }\n  });\n\n  /**\n   * Adds final trailer to the GIF stream, if you don't call the finish method\n   * the GIF stream will not be valid.\n   */\n\n  const finish = (exports.finish = function finish() {\n    if (!started) return false;\n\n    let ok = true;\n    started = false;\n\n    try {\n      out.writeByte(0x3b); // gif trailer\n      closeStream = true;\n    } catch (e) {\n      ok = false;\n    }\n\n    return ok;\n  });\n\n  /**\n   * Resets some members so that a new stream can be started.\n   * This method is actually called by the start method\n   */\n\n  const reset = function reset() {\n    // reset for subsequent use\n    transIndex = 0;\n    image = null;\n    pixels = null;\n    indexedPixels = null;\n    colorTab = null;\n    closeStream = false;\n    firstFrame = true;\n  };\n\n  /**\n   * * Sets frame rate in frames per second. Equivalent to\n   * <code>setDelay(1000/fps)</code>.\n   * @param fps\n   * float frame rate (frames per second)\n   */\n\n  const setFrameRate = (exports.setFrameRate = function setFrameRate(fps) {\n    if (fps != 0xf) delay = Math.round(100 / fps);\n  });\n\n  /**\n   * Sets quality of color quantization (conversion of images to the maximum 256\n   * colors allowed by the GIF specification). Lower values (minimum = 1)\n   * produce better colors, but slow processing significantly. 10 is the\n   * default, and produces good color mapping at reasonable speeds. Values\n   * greater than 20 do not yield significant improvements in speed.\n   * @param quality\n   * int greater than 0.\n   * @return\n   */\n\n  const setQuality = (exports.setQuality = function setQuality(quality) {\n    if (quality < 1) quality = 1;\n    sample = quality;\n  });\n\n  /**\n   * Sets the GIF frame size. The default size is the size of the first frame\n   * added if this method is not invoked.\n   * @param w\n   * int frame width.\n   * @param h\n   * int frame width.\n   */\n\n  var setSize = (exports.setSize = function setSize(w, h) {\n    if (started && !firstFrame) return;\n    width = w;\n    height = h;\n    if (width < 1) width = 320;\n    if (height < 1) height = 240;\n    sizeSet = true;\n  });\n\n  /**\n   * Initiates GIF file creation on the given stream.\n   * @param os\n   * OutputStream on which GIF images are written.\n   * @return false if initial write failed.\n   */\n\n  const start = (exports.start = function start() {\n    reset();\n    let ok = true;\n    closeStream = false;\n    out = new ByteArray();\n    try {\n      out.writeUTFBytes('GIF89a'); // header\n    } catch (e) {\n      ok = false;\n    }\n\n    return (started = ok);\n  });\n\n  const cont = (exports.cont = function cont() {\n    reset();\n    const ok = true;\n    closeStream = false;\n    out = new ByteArray();\n\n    return (started = ok);\n  });\n\n  /**\n   * Analyzes image colors and creates color map.\n   */\n\n  var analyzePixels = function analyzePixels() {\n    const len = pixels.length;\n    const nPix = len / 3;\n    indexedPixels = [];\n    const nq = new NeuQuant(pixels, len, sample);\n\n    // initialize quantizer\n    colorTab = nq.process(); // create reduced palette\n\n    // map image pixels to new palette\n    let k = 0;\n    for (let j = 0; j < nPix; j++) {\n      const index = nq.map(pixels[k++] & 0xff, pixels[k++] & 0xff, pixels[k++] & 0xff);\n      usedEntry[index] = true;\n      indexedPixels[j] = index;\n    }\n\n    pixels = null;\n    colorDepth = 8;\n    palSize = 7;\n\n    // get closest match to transparent color if specified\n    if (transparent !== null) {\n      transIndex = findClosest(transparent);\n    }\n  };\n\n  /**\n   * Returns index of palette color closest to c\n   */\n\n  var findClosest = function findClosest(c) {\n    if (colorTab === null) return -1;\n    const r = (c & 0xff0000) >> 16;\n    const g = (c & 0x00ff00) >> 8;\n    const b = c & 0x0000ff;\n    let minpos = 0;\n    let dmin = 256 * 256 * 256;\n    const len = colorTab.length;\n\n    for (let i = 0; i < len; ) {\n      const dr = r - (colorTab[i++] & 0xff);\n      const dg = g - (colorTab[i++] & 0xff);\n      const db = b - (colorTab[i] & 0xff);\n      const d = dr * dr + dg * dg + db * db;\n      const index = i / 3;\n      if (usedEntry[index] && d < dmin) {\n        dmin = d;\n        minpos = index;\n      }\n      i++;\n    }\n    return minpos;\n  };\n\n  /**\n   * Extracts image pixels into byte array \"pixels\n   */\n\n  var getImagePixels = function getImagePixels() {\n    const w = width;\n    const h = height;\n    pixels = [];\n    const data = image;\n    let count = 0;\n\n    for (let i = 0; i < h; i++) {\n      for (let j = 0; j < w; j++) {\n        const b = i * w * 4 + j * 4;\n        pixels[count++] = data[b];\n        pixels[count++] = data[b + 1];\n        pixels[count++] = data[b + 2];\n      }\n    }\n  };\n\n  /**\n   * Writes Graphic Control Extension\n   */\n\n  var writeGraphicCtrlExt = function writeGraphicCtrlExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xf9); // GCE label\n    out.writeByte(4); // data block size\n    let transp;\n    let disp;\n    if (transparent === null) {\n      transp = 0;\n      disp = 0; // dispose = no action\n    } else {\n      transp = 1;\n      disp = 2; // force clear if using transparent color\n    }\n    if (dispose >= 0) {\n      disp = dispose & 7; // user override\n    }\n    disp <<= 2;\n    // packed fields\n    out.writeByte(\n      0 | // 1:3 reserved\n      disp | // 4:6 disposal\n      0 | // 7 user input - 0 = none\n        transp\n    ); // 8 transparency flag\n\n    WriteShort(delay); // delay x 1/100 sec\n    out.writeByte(transIndex); // transparent color index\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes Comment Extention\n   */\n\n  var writeCommentExt = function writeCommentExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xfe); // comment label\n    out.writeByte(comment.length); // Block Size (s)\n    out.writeUTFBytes(comment);\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes Image Descriptor\n   */\n\n  var writeImageDesc = function writeImageDesc() {\n    out.writeByte(0x2c); // image separator\n    WriteShort(0); // image position x,y = 0,0\n    WriteShort(0);\n    WriteShort(width); // image size\n    WriteShort(height);\n\n    // packed fields\n    if (firstFrame) {\n      // no LCT - GCT is used for first (or only) frame\n      out.writeByte(0);\n    } else {\n      // specify normal LCT\n      out.writeByte(\n        0x80 | // 1 local color table 1=yes\n        0 | // 2 interlace - 0=no\n        0 | // 3 sorted - 0=no\n        0 | // 4-5 reserved\n          palSize\n      ); // 6-8 size of color table\n    }\n  };\n\n  /**\n   * Writes Logical Screen Descriptor\n   */\n\n  var writeLSD = function writeLSD() {\n    // logical screen size\n    WriteShort(width);\n    WriteShort(height);\n    // packed fields\n    out.writeByte(\n      0x80 | // 1 : global color table flag = 1 (gct used)\n      0x70 | // 2-4 : color resolution = 7\n      0x00 | // 5 : gct sort flag = 0\n        palSize\n    ); // 6-8 : gct size\n\n    out.writeByte(0); // background color index\n    out.writeByte(0); // pixel aspect ratio - assume 1:1\n  };\n\n  /**\n   * Writes Netscape application extension to define repeat count.\n   */\n\n  var writeNetscapeExt = function writeNetscapeExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xff); // app extension label\n    out.writeByte(11); // block size\n    out.writeUTFBytes('NETSCAPE' + '2.0'); // app id + auth code\n    out.writeByte(3); // sub-block size\n    out.writeByte(1); // loop sub-block id\n    WriteShort(repeat); // loop count (extra iterations, 0=repeat forever)\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes color table\n   */\n\n  var writePalette = function writePalette() {\n    out.writeBytes(colorTab);\n    const n = 3 * 256 - colorTab.length;\n    for (let i = 0; i < n; i++) out.writeByte(0);\n  };\n\n  var WriteShort = function WriteShort(pValue) {\n    out.writeByte(pValue & 0xff);\n    out.writeByte((pValue >> 8) & 0xff);\n  };\n\n  /**\n   * Encodes and writes pixel data\n   */\n\n  var writePixels = function writePixels() {\n    const myencoder = new LZWEncoder(width, height, indexedPixels, colorDepth);\n    myencoder.encode(out);\n  };\n\n  /**\n   * Retrieves the GIF stream\n   */\n\n  const stream = (exports.stream = function stream() {\n    return out;\n  });\n\n  const setProperties = (exports.setProperties = function setProperties(has_start, is_first) {\n    started = has_start;\n    firstFrame = is_first;\n  });\n\n  return exports;\n};\n\nexport { GIFEncoder };\n","import { user } from '../../../store/store';\n\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-multi-assign */\n/* eslint-disable func-names */\n/* eslint-disable no-param-reassign */\n/* eslint-disable eqeqeq */\n/* eslint-disable prettier/prettier */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n/* eslint-disable no-underscore-dangle */\n// upload.js, from https://github.com/googledrive/cors-upload-sample\n// Contributors Steve Bazyl, Mike Procopio, Jeffrey Posnick, Renaud Sauvain\n// License: Apache 2.0 http://www.apache.org/licenses/LICENSE-2.0\n//\n// Implements Resumable Upload for Google Drive as described by\n// https://developers.google.com/drive/v3/web/resumable-upload\n//\n// Modified by Paul Brewer, Economic and Financial Technology Consulting LLC\n// Nov. 1 2017\n//  1. use Google Drive API V3 instead of V2\n//  2. wrap code in a \"use strict\" IIFE, only exposing MediaUploader\n//  3. explicitly export MediaUploader as window.UploaderForGoogleDrive\n//  4. if options.token undefined, get access token from existing window.gapi instance, if any\n//\n// Nov. 7, 2017\n//  5. Change file metadata \"title\" to \"name\" in line with Drive API v2-->v3 migration advisory\n//  6. export promise wrapper as window.pUploaderForGoogleDrive\n\n// jshint browser:true, strict:true\n\nconst Uploader = window.UploaderForGoogleDrive = (function () {\n\n\n  /**\n   * Helper for implementing retries with backoff. Initial retry\n   * delay is 1 second, increasing by 2x (+jitter) for subsequent retries\n   *\n   * @constructor\n   */\n\n  const RetryHandler = function () {\n    this.interval = 1000; // Start at one second\n    this.maxInterval = 60 * 1000; // Don't wait longer than a minute\n  };\n\n  /**\n   * Invoke the function after waiting\n   *\n   * @param {function} fn Function to invoke\n   */\n  RetryHandler.prototype.retry = function (fn) {\n    setTimeout(fn, this.interval);\n    this.interval = this.nextInterval_();\n  };\n\n  /**\n   * Reset the counter (e.g. after successful request.)\n   */\n  RetryHandler.prototype.reset = function () {\n    this.interval = 1000;\n  };\n\n  /**\n   * Calculate the next wait time.\n   * @return {number} Next wait interval, in milliseconds\n   *\n   * @private\n   */\n  RetryHandler.prototype.nextInterval_ = function () {\n    const interval = this.interval * 2 + this.getRandomInt_(0, 1000);\n    return Math.min(interval, this.maxInterval);\n  };\n\n  /**\n   * Get a random int in the range of min to max. Used to add jitter to wait times.\n   *\n   * @param {number} min Lower bounds\n   * @param {number} max Upper bounds\n   * @private\n   */\n  RetryHandler.prototype.getRandomInt_ = function (min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n  };\n\n  /**\n   * Helper class for resumable uploads using XHR/CORS. Can upload any Blob-like item, whether\n   * files or in-memory constructs.\n   *\n   * @example\n   * var content = new Blob([\"Hello world\"], {\"type\": \"text/plain\"});\n   * var uploader = new MediaUploader({\n   *   file: content,\n   *   token: accessToken,\n   *   onComplete: function(data) { ... }\n   *   onError: function(data) { ... }\n   * });\n   * uploader.upload();\n   *\n   * @constructor\n   * @param {object} options Hash of options\n   * @param {string} options.token Access token\n   * @param {blob} options.file Blob-like item to upload\n   * @param {string} [options.fileId] ID of file if replacing\n   * @param {object} [options.params] Additional query parameters\n   * @param {string} [options.contentType] Content-type, if overriding the type of the blob.\n   * @param {object} [options.metadata] File metadata\n   * @param {function} [options.onComplete] Callback for when upload is complete\n   * @param {function} [options.onProgress] Callback for status for the in-progress upload\n   * @param {function} [options.onError] Callback if upload fails\n   */\n  const MediaUploader = function (options) {\n    const noop = function () { };\n    this.file = options.file;\n    this.contentType = options.contentType || this.file.type || 'application/octet-stream';\n    this.metadata = options.metadata || {\n      name: this.file.name,\n      mimeType: this.contentType\n    };\n    // if options.token omitted, get access_token from existing window.gapi instance, if any : PJB 2017-11-01\n    // see https://developers.google.com/api-client-library/javascript/reference/referencedocs\n    if (options.token) {\n      this.token = options.token;\n    } else {\n      try {\n        this.token = window.gapi.auth2\n          .getAuthInstance()\n          .currentUser.get()\n          .getAuthResponse(true).access_token;\n        user.dispatch({ type: 'token', value: this.token })\n      } catch (e) {\n        console.log(e);\n        throw new Error('Uploader: missing Google OAuth2 access_token');\n      }\n    }\n    // end access_token patch -- PJB 2017-11-01\n    this.onComplete = options.onComplete || noop;\n    this.onProgress = options.onProgress || noop;\n    this.onError = options.onError || noop;\n    this.offset = options.offset || 0;\n    this.chunkSize = options.chunkSize || 0;\n    this.retryHandler = new RetryHandler();\n\n    this.url = options.url;\n    if (!this.url) {\n      const params = options.params || {};\n      params.uploadType = 'resumable';\n      this.url = this.buildUrl_(options.fileId, params, options.baseUrl);\n    }\n    // PJB 2018.01.22 Change \"update/replace\" method from \"PUT\" to \"PATCH\"\n    //   per https://developers.google.com/drive/v3/reference/files/update\n    this.httpMethod = options.fileId ? 'PATCH' : 'POST';\n  };\n\n  /**\n   * Initiate the upload.\n   */\n  MediaUploader.prototype.upload = function () {\n    const self = this;\n    const xhr = new XMLHttpRequest();\n\n    xhr.open(this.httpMethod, this.url, true);\n    xhr.setRequestHeader('Authorization', `Bearer ${this.token}`);\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    xhr.setRequestHeader('X-Upload-Content-Length', this.file.size);\n    xhr.setRequestHeader('X-Upload-Content-Type', this.contentType);\n    xhr.setRequestHeader('writersCanShare', true);\n\n    xhr.onload = function (e) {\n      if (e.target.status < 400) {\n        const location = e.target.getResponseHeader('Location');\n        this.url = location;\n        this.sendFile_();\n      } else {\n        this.onUploadError_(e);\n      }\n    }.bind(this);\n    xhr.onerror = this.onUploadError_.bind(this);\n    xhr.send(JSON.stringify(this.metadata));\n  };\n\n  /**\n   * Send the actual file content.\n   *\n   * @private\n   */\n  MediaUploader.prototype.sendFile_ = function () {\n    let content = this.file;\n    let end = this.file.size;\n\n    if (this.offset || this.chunkSize) {\n      // Only bother to slice the file if we're either resuming or uploading in chunks\n      if (this.chunkSize) {\n        end = Math.min(this.offset + this.chunkSize, this.file.size);\n      }\n      content = content.slice(this.offset, end);\n    }\n\n    const xhr = new XMLHttpRequest();\n    xhr.open('PUT', this.url, true);\n    xhr.setRequestHeader('Content-Type', this.contentType);\n    xhr.setRequestHeader(\n      'Content-Range',\n      `bytes ${this.offset}-${end - 1}/${this.file.size}`\n    );\n    xhr.setRequestHeader('X-Upload-Content-Type', this.file.type);\n    xhr.setRequestHeader('writersCanShare', true);\n    if (xhr.upload) {\n      xhr.upload.addEventListener('progress', this.onProgress);\n    }\n    xhr.onload = this.onContentUploadSuccess_.bind(this);\n    xhr.onerror = this.onContentUploadError_.bind(this);\n    xhr.send(content);\n  };\n\n  /**\n   * Query for the state of the file for resumption.\n   *\n   * @private\n   */\n  MediaUploader.prototype.resume_ = function () {\n    const xhr = new XMLHttpRequest();\n    xhr.open('PUT', this.url, true);\n    xhr.setRequestHeader('Content-Range', `bytes */${this.file.size}`);\n    xhr.setRequestHeader('X-Upload-Content-Type', this.file.type);\n    xhr.setRequestHeader('writersCanShare', true);\n    if (xhr.upload) {\n      xhr.upload.addEventListener('progress', this.onProgress);\n    }\n    xhr.onload = this.onContentUploadSuccess_.bind(this);\n    xhr.onerror = this.onContentUploadError_.bind(this);\n    xhr.send();\n  };\n\n  /**\n   * Extract the last saved range if available in the request.\n   *\n   * @param {XMLHttpRequest} xhr Request object\n   */\n  MediaUploader.prototype.extractRange_ = function (xhr) {\n    const range = xhr.getResponseHeader('Range');\n    if (range) {\n      this.offset = parseInt(range.match(/\\d+/g).pop(), 10) + 1;\n    }\n  };\n\n  /**\n   * Handle successful responses for uploads. Depending on the context,\n   * may continue with uploading the next chunk of the file or, if complete,\n   * invokes the caller's callback.\n   *\n   * @private\n   * @param {object} e XHR event\n   */\n  MediaUploader.prototype.onContentUploadSuccess_ = function (e) {\n    if (e.target.status == 200 || e.target.status == 201) {\n      this.onComplete(e.target.response);\n    } else if (e.target.status == 308) {\n      this.extractRange_(e.target);\n      this.retryHandler.reset();\n      this.sendFile_();\n    } else {\n      this.onContentUploadError_(e);\n    }\n  };\n\n  /**\n   * Handles errors for uploads. Either retries or aborts depending\n   * on the error.\n   *\n   * @private\n   * @param {object} e XHR event\n   */\n  MediaUploader.prototype.onContentUploadError_ = function (e) {\n    if (e.target.status && e.target.status < 500) {\n      this.onError(e.target.response);\n    } else {\n      this.retryHandler.retry(this.resume_.bind(this));\n    }\n  };\n\n  /**\n   * Handles errors for the initial request.\n   *\n   * @private\n   * @param {object} e XHR event\n   */\n  MediaUploader.prototype.onUploadError_ = function (e) {\n    this.onError(e.target.response); // TODO - Retries for initial upload\n  };\n\n  /**\n   * Construct a query string from a hash/object\n   *\n   * @private\n   * @param {object} [params] Key/value pairs for query string\n   * @return {string} query string\n   */\n  MediaUploader.prototype.buildQuery_ = function (params) {\n    params = params || {};\n    return Object.keys(params)\n      .map(function (key) {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`;\n      })\n      .join('&');\n  };\n\n  /**\n   * Build the drive upload URL\n   *\n   * @private\n   * @param {string} [id] File ID if replacing\n   * @param {object} [params] Query parameters\n   * @return {string} URL\n   */\n  MediaUploader.prototype.buildUrl_ = function (id, params, baseUrl) {\n    // modified next line to use v3, not v2 -- PJB, 2017-11-01\n    let url = baseUrl || 'https://www.googleapis.com/upload/drive/v3/files/';\n    if (id) {\n      url += id;\n    }\n    const query = this.buildQuery_(params);\n    if (query) {\n      url += `?${query}`;\n    }\n    return url;\n  };\n\n  return MediaUploader;\n})();\n\nwindow.pUploaderForGoogleDrive = function (options) {\n\n\n  return new Promise(function (resolve, reject) {\n    options.onComplete = function (r) {\n      let response;\n      try {\n        response = typeof r === 'string' ? JSON.parse(r) : r;\n      } catch (e) {\n        response = r;\n      }\n      resolve(response);\n    };\n    options.onError = function (e) {\n      reject(e);\n    };\n    const uploader = new window.UploaderForGoogleDrive(options);\n    uploader.upload();\n  });\n};\n\nexport { Uploader };\n","/* eslint-disable no-console */\nimport $ from 'jquery';\nimport { GIFEncoder } from '../../gifModule/jsgif-master/GIFEncoder';\nimport encode64 from '../../gifModule/jsgif-master/b64';\nimport { store, canvas, settings, user } from '../../../store/store';\nimport { Uploader } from './googleUploader';\n\nlet delay;\nstore.subscribe(() => {\n  const fps = store.getState().fps || 3;\n  delay = 1000 / fps;\n});\nlet currentCanvas;\ncanvas.subscribe(() => {\n  currentCanvas = canvas.getState().currentCanvas;\n});\nlet filename;\nsettings.subscribe(() => {\n  filename = settings.getState().title;\n});\n\nfunction debugBase64(base64URL) {\n  const win = window.open();\n  $(win.document.body).css({\n    display: 'flex',\n    width: '100vw',\n    heigh: '100vh',\n    'justify-content': 'center',\n    'align-items': 'center',\n    background: 'whitesmoke'\n  });\n  $('<img></img>', {\n    src: base64URL\n  }).appendTo(win.document.body);\n}\n\nfunction debugBase64WithText(array, base64URL) {\n  const win = window.open();\n  $(win.document.body).css({\n    display: 'flex',\n    'flex-direction': 'column',\n    width: '100vw',\n    height: '100vh',\n    'align-items': 'center',\n    background: 'whitesmoke',\n    overflow: 'hidden'\n  });\n  const ancor = $('<div></div>', {\n    id: 'ancor',\n    width: '100%',\n    height: '50%'\n  })\n    .appendTo(win.document.body)\n    .css({\n      width: '80%',\n      height: '50%',\n      background: 'white',\n      'overflow-y': 'scroll',\n      'margin-bottom': '25px',\n      border: '1px solid black'\n    });\n  for (let i = 0; i < array.length; i += 1) {\n    $('<img></img>', {\n      src: array[i],\n      width: '25%'\n    })\n      .appendTo(ancor)\n      .css({ border: '1px solid black' });\n  }\n  $('<div></div>', {\n    text: base64URL\n  })\n    .appendTo(win.document.body)\n    .css({\n      display: 'flex',\n      'flex-wrap': 'wrap',\n      width: '80%',\n      height: '40%',\n      'overflow-y': 'scroll',\n      'word-break': 'break-word'\n    });\n}\n\nfunction saveAsGif(upload) {\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  for (let i = 0; i < $('#canvas-block').children().length; i += 1) {\n    const curCanv = document.querySelector(`#canvas${i + 1}`);\n    const originalContext = $(`#canvas${i + 1}`)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(\n      0,\n      0,\n      $(`#canvas${i + 1}`).width(),\n      $(`#canvas${i + 1}`).width()\n    );\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  }\n  encoder.finish();\n  filename = filename || 'New Piskel-clone';\n  if (upload) {\n    return encoder.upload(`${filename}.gif`);\n  }\n  return encoder.download(`${filename}.gif`);\n}\n\nfunction uploadToUrl() {\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  for (let i = 0; i < $('#canvas-block').children().length; i += 1) {\n    const curCanv = document.querySelector(`#canvas${i + 1}`);\n    const originalContext = $(`#canvas${i + 1}`)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(\n      0,\n      0,\n      $(`#canvas${i + 1}`).width(),\n      $(`#canvas${i + 1}`).width()\n    );\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  }\n  encoder.finish();\n  const binaryGif = encoder.stream().getData();\n  const dataUrl = `data:image/gif;base64,${encode64(binaryGif)}`;\n  return dataUrl;\n}\n\nfunction downloadPng() {\n  const i = currentCanvas;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n  const width = $(`#canvas${i}`).width();\n  const originalContext = $(`#canvas${i}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(0, 0, width, width);\n  let len = imageData.data.length;\n  const newArr = [];\n  let map1;\n  let map2;\n  let count = 0;\n  while (len > 0) {\n    map1 = imageData.data.slice(count, count + 4);\n    map2 = map1;\n    if (map2.every(item => item === 0)) {\n      map2 = map2.map(() => 255);\n    }\n    newArr.push(...map2);\n    count += 4;\n    len -= 4;\n  }\n  const fixedNewArray = Uint8ClampedArray.from(newArr);\n  const newImage = new ImageData(fixedNewArray, width, width);\n  encoder.setSize(width, width);\n  encoder.addFrame(newImage, true);\n  encoder.finish();\n  filename = filename || 'New Piskel-clone';\n  encoder.download(`${filename}.png`);\n}\n\nconst apikey = 'AIzaSyAVJFuo57LAwfGHx66mi177_F4r2sWrato';\nfunction loadClient() {\n  window.gapi.client.setApiKey(apikey);\n  return window.gapi.client\n    .load('https://content.googleapis.com/discovery/v1/apis/drive/v3/rest')\n    .then(\n      () => {\n        console.log('GAPI client loaded for API');\n      },\n      err => {\n        console.error('Error loading GAPI client for API', err);\n      }\n    );\n}\n\nfunction uploadToGoogle() {\n  loadClient();\n  const content = new Blob([saveAsGif('upload')], { type: 'image/gif' });\n  const uploader = new Uploader({\n    file: content,\n    metadata: {\n      name: filename\n    },\n    onComplete(data) {\n      const info = JSON.parse(data);\n      const fileId = info.id;\n      const url = `https://drive.google.com/open?id=${fileId}`;\n      const urlToGif = `https://drive.google.com/thumbnail?id=${fileId}`;\n      user.dispatch({ type: 'googleUrl', value: url });\n      user.dispatch({ type: 'gifUrl', value: urlToGif });\n      $('#google-link').attr('href', url);\n      $('#span-link').attr('href', urlToGif);\n      window.gapi.client.drive.permissions\n        .create({\n          fileId: `${fileId}`,\n          resource: {\n            role: 'reader',\n            type: 'anyone'\n          }\n        })\n        .then(\n          response => {\n            // Handle the results here (response.result has the parsed body).\n            console.log('Response', response);\n          },\n          err => {\n            console.error('Execute error', err);\n          }\n        );\n    },\n    onError(data) {\n      console.log(data);\n    }\n  });\n  uploader.upload();\n}\n\nexport { saveAsGif, uploadToUrl, downloadPng, debugBase64, debugBase64WithText, uploadToGoogle };\n","/* eslint-disable no-multi-assign */\n/* eslint-disable no-restricted-globals */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-plusplus */\nexport default function encode64(input) {\n  let output = '';\n  let i = 0;\n  const l = input.length;\n  const key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  let chr1;\n  let chr2;\n  let chr3;\n  let enc1;\n  let enc2;\n  let enc3;\n  let enc4;\n  while (i < l) {\n    chr1 = input.charCodeAt(i++);\n    chr2 = input.charCodeAt(i++);\n    chr3 = input.charCodeAt(i++);\n    enc1 = chr1 >> 2;\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    enc4 = chr3 & 63;\n    if (isNaN(chr2)) enc3 = enc4 = 64;\n    else if (isNaN(chr3)) enc4 = 64;\n    output = output + key.charAt(enc1) + key.charAt(enc2) + key.charAt(enc3) + key.charAt(enc4);\n  }\n  return output;\n}\n","import firebase from 'firebase';\n\nconst config = {\n  apiKey: 'AIzaSyBADlQGxow-MMb31zZkmqE10d4XSh2nMaM',\n  authDomain: 'piskel-clown-1561245773423.firebaseapp.com',\n  databaseURL: 'https://piskel-clown-1561245773423.firebaseio.com',\n  projectId: 'piskel-clown-1561245773423',\n  storageBucket: '',\n  messagingSenderId: '717448332612',\n  appId: '1:717448332612:web:b29e4fdc54066ec0'\n};\n\nfirebase.initializeApp(config);\n\nexport default firebase;\n\n// <!-- The core Firebase JS SDK is always required and must be listed first -->\n// <script src=\"https://www.gstatic.com/firebasejs/6.3.0/firebase-app.js\"></script>\n\n// <!-- TODO: Add SDKs for Firebase products that you want to use\n//      https://firebase.google.com/docs/web/setup#config-web-app -->\n\n// <script>\n//   // Your web app's Firebase configuration\n//   var firebaseConfig = {\n//     apiKey: \"AIzaSyB7L9YDQre3TEMDbonPKJh9oiT0LB8MPME\",\n//     authDomain: \"piskel-clone-1561243542927.firebaseapp.com\",\n//     databaseURL: \"https://piskel-clone-1561243542927.firebaseio.com\",\n//     projectId: \"piskel-clone-1561243542927\",\n//     storageBucket: \"\",\n//     messagingSenderId: \"842905832916\",\n//     appId: \"1:842905832916:web:bd7859a38165e1b7\"\n//   };\n//   // Initialize Firebase\n//   firebase.initializeApp(firebaseConfig);\n// </script>\n","/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\nimport React from 'react';\nimport $ from 'jquery';\nimport './save.css';\nimport { options, settings, preview, user } from '../../../store/store';\nimport { uploadToUrl } from '../export/fromCanvasToFile';\nimport { getDate, saveLocally, saveToGalery } from './saveLocally';\n\nwindow.localProjects = {};\nwindow.authLocalProjects = {};\n\nlet optionsBlock;\noptions.subscribe(() => {\n  optionsBlock = options.getState().optionsBlock;\n});\nlet name;\nlet userID;\nuser.subscribe(() => {\n  name = user.getState().name;\n  userID = user.getState().userID;\n});\nlet projectID;\npreview.subscribe(() => {\n  projectID = preview.getState().piskelID;\n});\n\nlet storedTitle;\nlet storedDescription;\nsettings.subscribe(() => {\n  storedTitle = settings.getState().title;\n  storedDescription = settings.getState().description;\n});\n\nclass SaveOptions extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      isLogin: false,\n      isFull: false,\n      isSaved: false,\n      title: '',\n      description: ''\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    if (storedTitle) {\n      this.setState({ title: storedTitle });\n    } else {\n      this.setState({ title: 'New Piskel' });\n    }\n    if (storedDescription) {\n      this.setState({ description: storedDescription });\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    if (name) {\n      this.setState({ isLogin: true });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    this.state = {\n      isFull: false,\n      isSaved: false,\n      title: 'New Piskel',\n      description: ''\n    };\n  }\n\n  saveLocallyHandler() {\n    const newValue = $('#title-input').val();\n    this.setState({ title: newValue });\n    settings.dispatch({ type: 'title', value: newValue });\n    const arrayFramesSrc = [];\n    for (let i = 0; i < $('.preview').children().length; i += 1) {\n      arrayFramesSrc.push($('.preview').children()[i].src);\n    }\n    const dataUrl = uploadToUrl();\n    const storageObj =\n      localStorage.getItem('localProjects') !== 'undefined'\n        ? JSON.parse(localStorage.getItem('localProjects'))\n        : undefined;\n    // restrict saving piskels locally more than 20\n    if (storageObj) {\n      if (Object.keys(storageObj).length < 20) {\n        this.setState({ isSaved: true });\n        setTimeout(() => {\n          if (this.mounted) {\n            this.setState({ isSaved: false });\n          }\n        }, 5000);\n      } else if (\n        Object.entries(storageObj).some(item => item[0] === localStorage.getItem('project'))\n      ) {\n        this.setState({ isSaved: true });\n        setTimeout(() => {\n          if (this.mounted) {\n            this.setState({ isSaved: false });\n          }\n        }, 5000);\n      } else {\n        this.setState({ isFull: 'local' });\n        setTimeout(() => {\n          if (this.mounted) {\n            this.setState({ isFull: false });\n          }\n        }, 5000);\n        return;\n      }\n    }\n    const date = getDate().split('  ');\n    const description = $('#description-input').val();\n    const fps = $('#fps-bar').val();\n\n    const objToSave = JSON.stringify(\n      saveLocally(\n        window.localProjects,\n        storageObj,\n        projectID,\n        dataUrl,\n        arrayFramesSrc,\n        newValue,\n        date[0],\n        date[1],\n        description,\n        fps\n      )\n    );\n    localStorage.setItem('localProjects', objToSave);\n    preview.dispatch({ type: 'projects', value: objToSave });\n    $('#addLocalPiskel').click();\n  }\n\n  saveToGaleryHandler() {\n    if (!localStorage.getItem('auth')) {\n      this.setState({ isLogin: false });\n      $('#signOuted').click();\n      return;\n    }\n    const newValue = $('#title-input').val();\n    this.setState({ title: newValue });\n    settings.dispatch({ type: 'title', value: newValue });\n    const arrayFramesSrc = [];\n    for (let i = 0; i < $('.preview').children().length; i += 1) {\n      arrayFramesSrc.push($('.preview').children()[i].src);\n    }\n    const dataUrl = uploadToUrl();\n    const storageObj =\n      localStorage.getItem('authLocalProjects') !== 'undefined'\n        ? JSON.parse(localStorage.getItem('authLocalProjects'))\n        : undefined;\n    const getUser = localStorage.getItem('userID');\n    // restrict saving piskels to Database more than 30\n    const checkStorage =\n      localStorage.getItem(`${getUser}`) !== 'undefined'\n        ? JSON.parse(localStorage.getItem(`${getUser}`))\n        : undefined;\n    if (checkStorage) {\n      if (Object.keys(checkStorage).length < 30) {\n        this.setState({ isSaved: true });\n        setTimeout(() => {\n          if (this.mounted) {\n            this.setState({ isSaved: false });\n          }\n        }, 5000);\n      } else if (\n        Object.entries(checkStorage).some(item => item[0] === localStorage.getItem('project'))\n      ) {\n        this.setState({ isSaved: true });\n        setTimeout(() => {\n          if (this.mounted) {\n            this.setState({ isSaved: false });\n          }\n        }, 5000);\n      } else {\n        this.setState({ isFull: 'personal' });\n        setTimeout(() => {\n          if (this.mounted) {\n            this.setState({ isFull: false });\n          }\n        }, 5000);\n        return;\n      }\n    }\n    const date = getDate().split('  ');\n    const description = $('#description-input').val();\n    const fps = $('#fps-bar').val();\n\n    const objToSave = JSON.stringify(\n      saveToGalery(\n        window.authLocalProjects,\n        storageObj,\n        projectID,\n        dataUrl,\n        arrayFramesSrc,\n        newValue,\n        date[0],\n        date[1],\n        userID,\n        description,\n        fps\n      )\n    );\n    localStorage.setItem('authLocalProjects', objToSave);\n  }\n\n  updateState() {\n    if (name) {\n      this.setState({ isLogin: true });\n    }\n    if (storedTitle) {\n      this.setState({ title: storedTitle });\n    } else {\n      this.setState({ title: 'New Piskel' });\n    }\n    if (storedDescription) {\n      this.setState({ description: storedDescription });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={`save-settings-block ${\n          this.mounted && optionsBlock === 'save-settings' ? 'flexed' : 'hidden'\n        }`}\n      >\n        <div className=\"sprite-info-block\">\n          <span className=\"sprite-info bold\">Sprite information</span>\n          <span className=\"label-title\">Title:</span>\n          <input\n            className=\"title-input\"\n            id=\"title-input\"\n            value={this.state.title}\n            onChange={() => this.setState({ title: $('#title-input').val() })}\n          />\n          <span className=\"label-description\">Description:</span>\n          <textarea\n            rows=\"1\"\n            cols=\"6\"\n            className=\"description-input\"\n            id=\"description-input\"\n            value={this.state.description}\n            onChange={() => this.setState({ description: $('#description-input').val() })}\n          />\n        </div>\n        <div className=\"save-online-block\">\n          <span className=\"save-online bold\">Save online</span>\n          <button\n            id=\"save-locally\"\n            className=\"save-online-button\"\n            type=\"button\"\n            onClick={() => this.saveLocallyHandler()}\n          >\n            Save locally\n          </button>\n          <p className=\"save-online-info\">\n            Your piskel will be saved and available only from this browser\n          </p>\n          <button\n            id=\"save-online\"\n            className={`save-online-button ${this.mounted && this.state.isLogin ? '' : 'hidden'}`}\n            type=\"button\"\n            onClick={() => this.saveToGaleryHandler()}\n          >\n            Save to your gallery\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => {\n              $('.abcRioButton.abcRioButtonLightBlue').click();\n            }}\n            className={`save-online-button ${this.mounted && this.state.isLogin ? 'hidden' : ''}`}\n          >\n            Sign in to save to your gallery\n          </button>\n          <p className=\"save-online-info\">Your piskel will be stored online in your gallery</p>\n          <button\n            type=\"button\"\n            className=\"hidden\"\n            id=\"updateSaveButtonLoggedIn\"\n            onClick={() => this.updateState()}\n          />\n          <p\n            id=\"error\"\n            className={`${this.mounted && this.state.isFull ? 'storage-warning error' : 'hidden'}`}\n          >\n            {`Your ${this.state.isFull} storage is full, please delete old piskels`}\n          </p>\n          <p\n            id=\"success\"\n            className={`${\n              this.mounted && this.state.isSaved ? 'storage-warning success' : 'hidden'\n            }`}\n          >\n            Your animation successfully saved!\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SaveOptions;\n","/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\nimport firebase from '../../../firebase';\n// import { store } from '../../../store/store';\n\n// let defaultFps = 3;\n// store.subscribe(() => {\n//   defaultFps = store.getState().fps;\n// });\n\nfunction getDate() {\n  const data = new Date();\n  let day = data.getDate();\n  if (day < 10) {\n    day = `0${day}`;\n  }\n  let month = data.getMonth();\n  if (month < 10) {\n    month = `0${month}`;\n  }\n  let hour = data.getHours();\n  if (hour < 10) {\n    hour = `0${hour}`;\n  }\n  let minutes = data.getMinutes();\n  if (minutes < 10) {\n    minutes = `0${minutes}`;\n  }\n  const time = new Date(`${hour}:${minutes} ${month}/${day}/${data.getFullYear()}`).getTime();\n  return `${hour}:${minutes} ${day}/${month}/${data.getFullYear()}  ${time}`;\n}\n\nfunction saveLocally(\n  global,\n  storage,\n  projectID,\n  dataUrl,\n  array,\n  newValue,\n  date,\n  time,\n  description,\n  fps\n) {\n  const piskel = projectID !== undefined ? projectID : localStorage.getItem('project');\n  const globalObj = global;\n  const idArr = [];\n  if (storage) {\n    if (Object.keys(storage).length > 0) {\n      for (const project in storage) {\n        globalObj[project] = {\n          gif: storage[project].gif,\n          frames: storage[project].frames,\n          title: storage[project].title,\n          date: storage[project].date,\n          time: storage[project].time,\n          description: storage[project].description,\n          fps: storage[project].fps\n        };\n      }\n    }\n  }\n  if (Object.keys(globalObj).length === 0) {\n    globalObj[piskel] = {\n      gif: dataUrl,\n      frames: array,\n      title: newValue,\n      date,\n      time,\n      description,\n      fps\n    };\n  } else {\n    for (const project in globalObj) {\n      if (project === piskel) {\n        globalObj[project].gif = dataUrl;\n        globalObj[project].frames = array;\n        globalObj[project].title = newValue;\n        globalObj[project].date = date;\n        globalObj[project].time = time;\n        globalObj[project].description = description;\n        globalObj[project].fps = fps;\n      }\n      idArr.push(project);\n    }\n    if (idArr.every(e => e !== piskel)) {\n      globalObj[piskel] = {\n        gif: dataUrl,\n        frames: array,\n        title: newValue,\n        date,\n        time,\n        description,\n        fps\n      };\n    }\n  }\n  return globalObj;\n}\n\nfunction writeUserData(userId, project, frames, gif, date, time, title, description, fps) {\n  firebase\n    .database()\n    .ref(`users/${userId}/${project}`)\n    .set({\n      frames,\n      gif,\n      date,\n      time,\n      title,\n      description,\n      fps\n    });\n}\n\nfunction saveToGalery(\n  global,\n  storage,\n  projectID,\n  dataUrl,\n  arrayFramesSrc,\n  newValue,\n  date,\n  time,\n  userID,\n  description,\n  fps\n) {\n  let globalObj = global;\n  const user = localStorage.getItem('userID');\n  // if storage with users and projects then put it in global object\n  if (storage) {\n    const storageEntries = Object.entries(storage);\n    globalObj = {};\n    for (let i = 0; i < storageEntries.length; i += 1) {\n      globalObj[storageEntries[i][0]] = {};\n      globalObj[storageEntries[i][0]] = storageEntries[i][1];\n    }\n    if (storageEntries.every(storedUser => storedUser[0] !== userID)) {\n      globalObj[userID] = {};\n    }\n  } else {\n    globalObj[userID] = {};\n  }\n  // if object with user's projects updates then rewrite this user in global object\n  if (localStorage.getItem(`${user}`)) {\n    globalObj[userID] = {};\n    globalObj[userID] = JSON.parse(localStorage.getItem(`${user}`));\n  }\n\n  let storedObj; // object for user ID projects\n  if (globalObj) {\n    const entries = Object.entries(globalObj);\n    for (let i = 0; i < entries.length; i += 1) {\n      if (entries[i][0] === userID) {\n        storedObj = entries[i][1];\n      }\n    }\n  }\n  // check and rewrite user's projects\n  const authProjects = saveLocally(\n    globalObj[`${userID}`],\n    storedObj,\n    projectID,\n    dataUrl,\n    arrayFramesSrc,\n    newValue,\n    date,\n    time,\n    description,\n    fps\n  );\n  // send user projects to firebase Realtime Database\n  const objForDB = Object.entries(authProjects);\n  for (let i = 0; i < objForDB.length; i += 1) {\n    const projectName = objForDB[i][0];\n    const projectItems = objForDB[i][1];\n    writeUserData(\n      userID,\n      projectName,\n      projectItems.frames,\n      projectItems.gif,\n      projectItems.date,\n      projectItems.time,\n      projectItems.title,\n      projectItems.description,\n      projectItems.fps\n    );\n  }\n  const objToSave = JSON.stringify(authProjects);\n  localStorage.setItem(`${userID}`, objToSave); // save local object with user's projects\n  globalObj[`${userID}`] = authProjects; // rewrite user's projects in global object with users\n  return globalObj;\n}\n\nexport { getDate, saveLocally, saveToGalery };\n","import React from 'react';\nimport $ from 'jquery';\nimport './export.css';\nimport { options, user } from '../../../store/store';\nimport {\n  saveAsGif,\n  uploadToUrl,\n  downloadPng,\n  debugBase64,\n  debugBase64WithText,\n  uploadToGoogle\n} from './fromCanvasToFile';\n\nlet optionsBlock;\noptions.subscribe(() => {\n  optionsBlock = options.getState().optionsBlock;\n});\n\nlet url;\nlet gifUrl;\nlet name;\nuser.subscribe(() => {\n  url = user.getState().googleUrl;\n  gifUrl = user.getState().urlToGif;\n  name = user.getState().name;\n});\nclass ExportOptions extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: 'show-gif-block',\n      dataUrl: '',\n      googleUrl: '',\n      isLogin: false\n    };\n  }\n\n  componentWillMount() {\n    this.mounted = true;\n    if (name) {\n      this.setState({ isLogin: true });\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  showExportOptions(e) {\n    const clicked = e.target.getAttribute('id');\n    this.setState({ active: clicked });\n  }\n\n  updateState() {\n    if (name) {\n      this.setState({ isLogin: true });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={`export-settings-block ${\n          optionsBlock === 'export-settings' ? 'flexed' : 'hidden'\n        }`}\n      >\n        <span className=\"export-info bold\">Export</span>\n        <div className=\"file-format-buttons\">\n          <button\n            id=\"show-gif-block\"\n            className={`show-gif-block ${\n              this.state.active === 'show-gif-block'\n                ? 'active-show-button'\n                : 'not-active-show-button'\n            }`}\n            type=\"button\"\n            onClick={e => this.showExportOptions(e)}\n          >\n            GIF\n          </button>\n          <button\n            id=\"show-png-block\"\n            className={`show-png-block ${\n              this.state.active === 'show-png-block'\n                ? 'active-show-button'\n                : 'not-active-show-button'\n            }`}\n            type=\"button\"\n            onClick={e => this.showExportOptions(e)}\n          >\n            PNG\n          </button>\n        </div>\n        <div\n          className={`gif-block ${this.state.active === 'show-gif-block' ? 'flexed' : 'hidden'}`}\n        >\n          <span className=\"gif-title\">Convert your sprite to an animated GIF</span>\n          <div className=\"download-block\">\n            <button\n              id=\"download-gif\"\n              className=\"gif-button\"\n              type=\"button\"\n              onClick={() => saveAsGif()}\n            >\n              Download\n            </button>\n            <span className=\"download-gif-title\">Download as an animated GIF</span>\n          </div>\n          <div className=\"download-block\">\n            <button\n              id=\"upload-gif\"\n              className=\"gif-button\"\n              type=\"button\"\n              onClick={() => {\n                const dataUrl = uploadToUrl();\n                this.setState({ dataUrl });\n              }}\n            >\n              Open in new tab\n            </button>\n            <span className=\"upload-gif-title\">Watch an animated GIF in new tab</span>\n            <div className={`link-to-gif ${this.state.dataUrl ? '' : 'hidden'}`}>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  debugBase64(this.state.dataUrl);\n                  this.setState({ dataUrl: '' });\n                }}\n              >\n                your animation file\n              </button>\n            </div>\n          </div>\n          <div className=\"download-block\">\n            <button\n              id=\"upload-google\"\n              className={`gif-button ${this.state.isLogin ? '' : 'hidden'}`}\n              type=\"button\"\n              onClick={() => {\n                if (!localStorage.getItem('auth')) {\n                  this.setState({ isLogin: false });\n                  $('#signOuted').click();\n                  return;\n                }\n                uploadToGoogle();\n                setTimeout(() => {\n                  this.setState({ googleUrl: true });\n                }, 700);\n                setTimeout(() => {\n                  this.setState({ googleUrl: '' });\n                }, 150000);\n              }}\n            >\n              Get link\n            </button>\n            <span className={`upload-gif-google ${this.state.isLogin ? 'blocked' : 'hidden'}`}>\n              Save your animation to Google disk to share\n            </span>\n\n            <button\n              type=\"button\"\n              onClick={() => {\n                $('.abcRioButton.abcRioButtonLightBlue').click();\n              }}\n              className={`save-online-button ${this.state.isLogin ? 'hidden' : ''}`}\n            >\n              Sign in to save to Google disk\n            </button>\n            <button\n              type=\"button\"\n              className=\"hidden\"\n              id=\"updateGoogleButtonLoggedIn\"\n              onClick={() => this.updateState()}\n            />\n\n            <div className={`link-to-gif ${this.state.googleUrl ? '' : 'hidden'}`}>\n              <span>Click the link</span>\n              <a\n                className=\"google-link\"\n                id=\"google-link\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n                href={url}\n              >\n                {'Link to file on Google disk'}\n              </a>\n              <a\n                className=\"google-link\"\n                id=\"span-link\"\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n                href={gifUrl}\n              >\n                {'Direct link to your GIF'}\n              </a>\n            </div>\n          </div>\n        </div>\n\n        <div\n          className={`png-block ${this.state.active === 'show-png-block' ? 'flexed' : 'hidden'}`}\n        >\n          <span className=\"png-title\">Export your animation as a PNG file</span>\n          <div className=\"download-block\">\n            <button\n              id=\"download-png\"\n              className=\"png-button\"\n              type=\"button\"\n              onClick={() => downloadPng()}\n            >\n              Download\n            </button>\n            <span className=\"download-png-title\">Download selected frame as PNG file</span>\n          </div>\n          <div className=\"download-block\">\n            <button\n              id=\"open-png\"\n              className=\"png-button\"\n              type=\"button\"\n              onClick={() => {\n                const array = [];\n                for (let i = 0; i < $('.preview').children().length; i += 1) {\n                  array.push($('.preview').children()[i].src);\n                }\n                const dataUrl = uploadToUrl();\n                debugBase64WithText(array, dataUrl);\n              }}\n            >\n              Open\n            </button>\n            <span className=\"open-png-title\">Open the spritesheet as a data uri</span>\n          </div>\n        </div>\n        <div id=\"hidden\" className=\"hidden\" />\n      </div>\n    );\n  }\n}\n\nexport default ExportOptions;\n","import React from 'react';\nimport $ from 'jquery';\nimport './import.css';\nimport { options } from '../../../store/store';\n\n// let customWidth;\nlet optionsBlock;\noptions.subscribe(() => {\n  optionsBlock = options.getState().optionsBlock;\n});\n\nclass ImportOptions extends React.Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    return (\n      <div\n        className={`general-settings-block ${\n          optionsBlock === 'import-settings' ? 'flexed' : 'hidden'\n        }`}\n      >\n        <div className=\"current-bg\">\n          <span className=\"default-bg bold\">Load from browser</span>\n          <p>Load your animation saved in this browser</p>\n          <button\n            type=\"button\"\n            onClick={() => $('#showSavesButton').click()}\n            className=\"browse-local-piskels-button\"\n          >\n            Browse local saves\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ImportOptions;\n","import React from 'react';\nimport $ from 'jquery';\nimport './menu.css';\nimport { store, options } from '../../store/store';\nimport Layers from './layers-list/layers-list';\nimport Palettes from './palettes/palettes';\nimport Settings from './settings/settings';\nimport ResizeCanvas from './resize/resizeCanvas';\nimport SaveOptions from './save/save';\nimport ExportOptions from './export/export';\nimport ImportOptions from './import/import';\n\nlet fps;\nstore.subscribe(() => {\n  fps = store.getState().fps;\n});\nclass Options extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      fps: 3,\n      hovered: '',\n      active: 'none',\n      mouseEnter: false\n    };\n    this.mounted = false;\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  fpsOnChangeHandler() {\n    store.dispatch({ type: 'fps', value: $('#fps-bar').val() });\n    if (this.mounted) {\n      this.setState({ fps });\n    }\n  }\n\n  popHintOnMouseOver(e) {\n    const hovered = e.target.getAttribute('id');\n    if (this.mounted) {\n      if (this.state.hovered === hovered) {\n        this.setState({ hovered: '' });\n      } else {\n        this.setState({ hovered });\n      }\n    }\n  }\n\n  mouseIn() {\n    if (this.mounted) {\n      this.setState({ mouseEnter: true });\n    }\n  }\n\n  mouseOut() {\n    if (this.mounted) {\n      this.setState({ mouseEnter: false });\n    }\n  }\n\n  showOptionsOnClick(e) {\n    const clicked =\n      $(e.target).attr('id') ||\n      $(e.target)\n        .find('i')\n        .attr('id');\n    if (this.mounted) {\n      if (this.state.active === clicked) {\n        this.setState({ active: 'none' });\n        options.dispatch({ type: 'optionsBlock', value: 'none' });\n      } else {\n        this.setState({ active: clicked });\n        options.dispatch({ type: 'optionsBlock', value: clicked });\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"optionsBox\" id=\"optionsBox\">\n        <div className=\"fps-options\">\n          <span id=\"display-fps\" className=\"display-fps\">\n            {`${this.state.fps} FPS`}\n          </span>\n          <input\n            type=\"range\"\n            min=\"1\"\n            max=\"24\"\n            step=\"1\"\n            defaultValue={this.state.fps}\n            id=\"fps-bar\"\n            className=\"fps-bar\"\n            onChange={() => this.fpsOnChangeHandler()}\n          />\n        </div>\n        <Layers />\n        <Palettes />\n        <div className={`options-blocks-area ${this.state.active === 'none' ? '' : 'slide'}`}>\n          <Settings />\n          <ResizeCanvas />\n          <SaveOptions />\n          <ExportOptions />\n          <ImportOptions />\n        </div>\n        <div\n          className={`settings-buttons ${\n            this.state.active && this.state.active === 'none' ? '' : 'slide'\n          }`}\n          onMouseOver={e => this.popHintOnMouseOver(e)}\n          onFocus={() => undefined}\n        >\n          <button\n            type=\"button\"\n            className=\"settings-button\"\n            onFocus={() => undefined}\n            onClick={e => this.showOptionsOnClick(e)}\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i\n              id=\"settings\"\n              className={`fas fa-cog ${this.state.hovered === 'settings' ? 'fas-hovered' : ''} ${\n                this.state.active === 'settings' ? 'fas-hovered' : ''\n              }`}\n            />\n          </button>\n          <button\n            type=\"button\"\n            className=\"settings-button\"\n            onFocus={() => undefined}\n            onClick={e => this.showOptionsOnClick(e)}\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i\n              id=\"resize-settings\"\n              className={`fas fa-crop ${\n                this.state.hovered === 'resize-settings' ? 'fas-hovered' : ''\n              } ${this.state.active === 'resize-settings' ? 'fas-hovered' : ''}`}\n            />\n          </button>\n          <button\n            type=\"button\"\n            className=\"settings-button\"\n            onFocus={() => undefined}\n            onClick={e => this.showOptionsOnClick(e)}\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i\n              id=\"save-settings\"\n              className={`fas fa-save ${\n                this.state.hovered === 'save-settings' ? 'fas-hovered' : ''\n              } ${this.state.active === 'save-settings' ? 'fas-hovered' : ''}`}\n            />\n          </button>\n          <button\n            type=\"button\"\n            className=\"settings-button\"\n            onFocus={() => undefined}\n            onClick={e => this.showOptionsOnClick(e)}\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i\n              id=\"export-settings\"\n              className={`fas fa-file-download ${\n                this.state.hovered === 'export-settings' ? 'fas-hovered' : ''\n              } ${this.state.active === 'export-settings' ? 'fas-hovered' : ''}`}\n            />\n          </button>\n          <button\n            type=\"button\"\n            className=\"settings-button\"\n            onFocus={() => undefined}\n            onClick={e => this.showOptionsOnClick(e)}\n            onMouseEnter={() => this.mouseIn()}\n            onMouseLeave={() => this.mouseOut()}\n          >\n            <i\n              id=\"import-settings\"\n              className={`fas fa-file-upload ${\n                this.state.hovered === 'import-settings' ? 'fas-hovered' : ''\n              } ${this.state.active === 'import-settings' ? 'fas-hovered' : ''}`}\n            />\n          </button>\n\n          <p\n            className={`hint settings-button-cog ${\n              this.state.mouseEnter === true && this.state.hovered === 'settings' ? '' : 'hidden'\n            }`}\n          >\n            Settings\n            <i className=\"settings-button-cog-arrow fas fa-caret-right\" />\n          </p>\n          <p\n            className={`big hint resize-settings ${\n              this.state.mouseEnter === true && this.state.hovered === 'resize-settings'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Resize the drawing area\n            <i className=\"resize-settings-arrow fas fa-caret-right\" />\n          </p>\n          <p\n            className={`hint save-settings ${\n              this.state.mouseEnter === true && this.state.hovered === 'save-settings'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Save to your galery\n            <i className=\"save-settings-arrow fas fa-caret-right\" />\n          </p>\n          <p\n            className={`big hint export-settings ${\n              this.state.mouseEnter === true && this.state.hovered === 'export-settings'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Export as image or animated gif\n            <i className=\"export-settings-arrow fas fa-caret-right\" />\n          </p>\n          <p\n            className={`big hint import-settings ${\n              this.state.mouseEnter === true && this.state.hovered === 'import-settings'\n                ? ''\n                : 'hidden'\n            }`}\n          >\n            Import your animation\n            <i className=\"import-settings-arrow fas fa-caret-right\" />\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Options;\n","import $ from 'jquery';\nimport { GIFEncoder } from '../../gifModule/jsgif-master/GIFEncoder';\nimport { makeImage } from '../../../screens/preview/preview';\nimport { removeFrame } from '../../frames-list/framesManager';\n// import encode64 from '../../gifModule/jsgif-master/b64';\n// import { store, canvas, settings } from '../../../store/store';\n\nfunction fromImageToCanvas() {\n  const newCanv = $('<canvas></canvas>', {\n    id: 'canvasSave1',\n    width: '421px',\n    height: '421px'\n  })\n    .appendTo('#hidden')\n    .attr('width', 421)\n    .attr('height', 421)\n    .css({ width: '421px', height: '421px' });\n\n  const originalContext = $(newCanv)\n    .get(0)\n    .getContext('2d');\n  originalContext.scale(1, 1);\n  const image = new Image();\n  // const shifted = src.shift();\n  // image.src = shifted;\n  image.onload = () => {\n    originalContext.drawImage(image, 0, 0, 421, 421);\n    image.style.display = 'none';\n  };\n}\n\nfunction makeFgif() {\n  const delay = 1000 / 3;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  for (let i = 0; i < $('#hidden').children().length; i += 1) {\n    const curCanv = $('#hidden').children()[i];\n    const originalContext = $(curCanv)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(0, 0, curCanv.width, curCanv.height);\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  }\n  encoder.finish();\n  const filename = 'New Piskel-clone';\n  encoder.download(`${filename}.gif`);\n}\n\nfunction fromDataToCanvas(data) {\n  const width = $('#drawCanvas').width();\n  while ($('#canvas-block').children().length > 1) {\n    removeFrame($('#canvas-block').children().length);\n  }\n  const firstctx = $(`#canvas1`)\n    .get(0)\n    .getContext('2d');\n  firstctx.clearRect(0, 0, width, width);\n\n  for (let i = 0; i < data.length; i += 1) {\n    if ($('#canvas-block')) {\n      if (data.length > $('#canvas-block').children().length) {\n        $('.addNewFrame').click();\n      }\n      const ctx = $(`#canvas${i + 1}`)\n        .get(0)\n        .getContext('2d');\n      const image = new Image();\n      const promise = new Promise((resolve, reject) => {\n        image.src = data[i];\n        if (image.src) {\n          resolve('Success!');\n        } else {\n          reject(Error('Something went wrong'));\n        }\n      });\n      promise.then(() => {\n        ctx.drawImage(image, 0, 0, width, width);\n        const dataURL = $(`#canvas${i + 1}`)[0].toDataURL('image/png');\n        $(`#frame${i + 1}`)\n          .find('.preview-box')\n          .css({\n            background: `url(${dataURL})`,\n            'background-size': 'contain'\n          });\n        makeImage(i + 1);\n      });\n    }\n  }\n}\n\nexport { fromImageToCanvas, makeFgif, fromDataToCanvas };\n","import React from 'react';\nimport $ from 'jquery';\nimport { Redirect } from 'react-router-dom';\nimport './import.css';\nimport { fromDataToCanvas } from '../export/fromImageToCanvas';\nimport { preview, settings } from '../../../store/store';\n\nclass LocalSaves extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      projects: [],\n      page: ''\n    };\n    this.changedProjects = '';\n    this.mounted = false;\n    this.project = '';\n  }\n\n  componentWillMount() {\n    if (localStorage.getItem('localProjects')) {\n      const obj = JSON.parse(localStorage.getItem('localProjects'));\n      const sorted = Object.entries(obj).sort((a, b) => b[1].time - a[1].time);\n      this.setState({ projects: sorted });\n    }\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  deletePiskel(item) {\n    for (let i = 0; i < this.state.projects.length; i += 1) {\n      if (this.state.projects[i][0] === item) {\n        this.state.projects.splice(i, 1);\n      }\n    }\n\n    this.changedProjects = this.state.projects;\n    window.localProjects = {};\n    for (let k = 0; k < this.changedProjects.length; k += 1) {\n      window.localProjects[this.changedProjects[k][0]] = this.changedProjects[k][1];\n    }\n    this.setState({ projects: this.changedProjects });\n    const projectsJson = JSON.stringify(window.localProjects);\n    localStorage.setItem('localProjects', projectsJson);\n  }\n\n  addPiskel() {\n    if (localStorage.getItem('localProjects')) {\n      const obj = JSON.parse(localStorage.getItem('localProjects'));\n      const sorted = Object.entries(obj).sort((a, b) => b[1].time - a[1].time);\n      this.setState({ projects: sorted });\n    }\n  }\n\n  isRedirected() {\n    if (this.state.page) {\n      this.mounted = false;\n      return <Redirect to={`/create-animation/${this.project}`} />;\n    }\n    return <div className=\"hidden\" />;\n  }\n\n  render() {\n    return (\n      <div className=\"local-saves-block\">\n        <div>\n          <span className=\"local-saves-title\">Browse local piskels</span>\n          <i\n            className=\"far fa-window-close local-saves-button\"\n            onClick={() => $('#hideSavesButton').click()}\n            onKeyPress={undefined}\n            tabIndex=\"-1\"\n            role=\"button\"\n          />\n        </div>\n        <div className=\"table-wrapper\">\n          <table className=\"table-local-saves\" cellPadding=\"10\" cellSpacing=\"20\">\n            <thead>\n              <tr>\n                <th className=\"table-title\">Name</th>\n                <th className=\"table-title\">Date</th>\n                <th className=\"table-title\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.projects.map(item => (\n                <tr key={item[0]}>\n                  <td key={item[1].title} className=\"table-data\">\n                    {item[1].title}\n                  </td>\n                  <td key={item[1].date} className=\"table-data\">\n                    {item[1].date}\n                  </td>\n                  <td key={`${item[0]}-buttons`} className=\"table-data table-data-buttons\">\n                    <button\n                      key={`${item[0]}-load`}\n                      type=\"button\"\n                      className=\"table-button\"\n                      onClick={() => {\n                        this.project = item[0];\n                        localStorage.setItem('project', item[0]);\n                        preview.dispatch({ type: 'piskelID', value: item[0] });\n                        settings.dispatch({ type: 'title', value: item[1].title });\n                        settings.dispatch({ type: 'description', value: item[1].description });\n                        setTimeout(() => {\n                          fromDataToCanvas(item[1].frames);\n                        }, 300);\n                        $('#hideSavesButton').click();\n                        $('#updateSaveButtonLoggedIn').click();\n                        this.setState({ page: `create-animation/${item[0]}` });\n                      }}\n                    >\n                      Load\n                    </button>\n                    <button\n                      key={`${item[0]}-delete`}\n                      type=\"button\"\n                      className=\"table-button\"\n                      onClick={() => this.deletePiskel(item[0])}\n                    >\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        {this.isRedirected()}\n        <button\n          id=\"addLocalPiskel\"\n          type=\"button\"\n          className=\"hidden\"\n          onClick={() => this.addPiskel()}\n        />\n      </div>\n    );\n  }\n}\n\nexport default LocalSaves;\n","import React from 'react';\nimport $ from 'jquery';\nimport Tools from '../../components/tools/toolsDomBuilder';\nimport Canvas from '../../screens/canvas/canvasDomBuilder';\nimport Frames from '../../components/frames-list/frameDomBuilder';\nimport Preview from '../../screens/preview/previewDomBuilder';\nimport Options from '../../components/menu/optionsDomBuilder';\nimport LocalSaves from '../../components/menu/import/localSaves';\n\nclass CreateAnimation extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      showSaves: false\n    };\n    this.mounted = false;\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    $(window).bind('beforeunload', () => {\n      return 'are you sure you want to leave?';\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  render() {\n    return (\n      <div id=\"container\" className=\"container\">\n        <section className=\"tool-pannel\" id=\"tool-pannel\">\n          <Tools />\n        </section>\n        <section className=\"frame-area\" id=\"frame-area\">\n          <Frames />\n        </section>\n        <section className=\"canvas-area\" id=\"canvas-area\">\n          <Canvas />\n        </section>\n        <section className=\"preview-area noselect\" id=\"preview-area\">\n          <Preview />\n        </section>\n        <section className=\"options-area\" id=\"options-area\">\n          <Options />\n        </section>\n        <div className={`local-saves-page ${this.mounted && this.state.showSaves ? '' : 'hidden'}`}>\n          <div className=\"local-saves-background\" />\n          <LocalSaves />\n        </div>\n\n        <button\n          type=\"button\"\n          className=\"hidden\"\n          id=\"showSavesButton\"\n          onClick={() => this.setState({ showSaves: true })}\n        />\n        <button\n          type=\"button\"\n          className=\"hidden\"\n          id=\"hideSavesButton\"\n          onClick={() => this.setState({ showSaves: false })}\n        />\n      </div>\n    );\n  }\n}\n\nexport default CreateAnimation;\n","/* eslint-disable no-bitwise */\nimport React from 'react';\nimport $ from 'jquery';\nimport { Redirect } from 'react-router-dom';\nimport { preview, store } from '../../store/store';\n\nfunction makeRandomId() {\n  const j = [];\n  let x;\n  for (let i = 0; i < 20; i += 1) {\n    x = [[48, 57], [65, 90], [97, 122]][(Math.random() * 3) >> 0];\n    j[i] = String.fromCharCode(((Math.random() * (x[1] - x[0] + 1)) >> 0) + x[0]);\n  }\n  return j.join('');\n}\n\nclass About extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      page: ''\n    };\n    this.id = '';\n  }\n\n  isRedirected(span) {\n    if (this.state.page) {\n      return <Redirect to={`/create-animation/${this.id}`} />;\n    }\n    if (span) {\n      return <span className=\"description-link\">Create a new Sprite</span>;\n    }\n    return <span className=\"link\">Create Sprite</span>;\n  }\n\n  render() {\n    return (\n      <div className=\"homepage-section\">\n        <div className=\"home-about\">\n          <h1>\n            <span className=\"piskel\">Piskel-clone </span>\n            is a free online editor for animated sprites & pixel art\n          </h1>\n          <h2>Create animations in your browser.</h2>\n          <h2>\n            <span className=\"description-link\">Try an example</span>\n            {', use '}\n            <span\n              role=\"button\"\n              tabIndex=\"-1\"\n              onKeyPress={undefined}\n              className=\"description-link\"\n              onClick={() => $('.abcRioButton.abcRioButtonLightBlue').click()}\n            >\n              Google sign in\n            </span>\n            {' to access your gallery or simply '}\n            <button\n              type=\"button\"\n              className=\"text-button\"\n              onClick={() => {\n                this.id = makeRandomId();\n                preview.dispatch({ type: 'piskelID', value: this.id });\n                store.dispatch({ type: 'currentPage', value: `create-animation/${this.id}` });\n                this.setState({ page: `create-animation/${this.id}` });\n                localStorage.setItem('page', `create-animation/${this.id}`);\n                localStorage.setItem('project', this.id);\n                $(document.body).css({ cursor: 'default' });\n              }}\n            >\n              {this.isRedirected('span')}\n            </button>\n          </h2>\n          <div className=\"home-buttons\">\n            <button\n              type=\"button\"\n              className=\"login-button\"\n              onClick={() => $('.abcRioButton.abcRioButtonLightBlue').click()}\n            >\n              Sign in\n            </button>\n            <button\n              type=\"button\"\n              className=\"create-button\"\n              onClick={() => {\n                this.id = makeRandomId();\n                preview.dispatch({ type: 'piskelID', value: this.id });\n                this.setState({ page: `create-animation/${this.id}` });\n                localStorage.setItem('page', `create-animation/${this.id}`);\n                localStorage.setItem('project', this.id);\n                $(document.body).css({ cursor: 'default' });\n              }}\n            >\n              {this.isRedirected()}\n            </button>\n          </div>\n        </div>\n\n        <div className=\"home-image\">\n          <div className=\"screen\" />\n          <div className=\"home-preview\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport { About, makeRandomId };\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport $ from 'jquery';\nimport './user.css';\nimport { user, preview, settings } from '../../store/store';\nimport firebase from '../../firebase';\nimport { fromDataToCanvas } from '../../components/menu/export/fromImageToCanvas';\nimport { makeRandomId } from '../about/about';\n\nlet name;\nlet img;\nuser.subscribe(() => {\n  name = user.getState().name;\n  img = user.getState().imageURL;\n});\n\nclass User extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: '',\n      height: '',\n      isEmpty: true,\n      projects: []\n    };\n    this.changedProjects = '';\n    this.localObj = {};\n    this.mounted = false;\n    this.user = '';\n    this.project = '';\n  }\n\n  componentWillMount() {\n    this.user = localStorage.getItem('userID');\n    if (!localStorage.getItem('auth')) {\n      this.setState({ isEmpty: true });\n    }\n  }\n\n  componentDidMount() {\n    this.setState({ height: window.innerHeight });\n    this.mounted = true;\n    if (localStorage.getItem(`${this.user}`)) {\n      const obj = JSON.parse(localStorage.getItem(`${this.user}`));\n      const sorted = Object.entries(obj).sort((a, b) => b[1].time - a[1].time);\n      this.setState({ isEmpty: false, projects: sorted });\n    } else {\n      firebase\n        .database()\n        .ref(`/users/${this.user}`)\n        .once('value')\n        .then(snapshot => {\n          this.localObj = snapshot.val();\n          if (this.localObj) {\n            const projects = JSON.stringify(this.localObj);\n            localStorage.setItem(`${this.user}`, projects);\n            const sorted = Object.entries(this.localObj).sort((a, b) => b[1].time - a[1].time);\n            this.setState({ isEmpty: false, projects: sorted });\n          }\n        });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  deletePiskel(item) {\n    if (!localStorage.getItem('auth')) {\n      this.setState({ isEmpty: true });\n      $('#signOuted').click();\n      return;\n    }\n    for (let i = 0; i < this.state.projects.length; i += 1) {\n      if (this.state.projects[i][0] === item) {\n        firebase\n          .database()\n          .ref(`users/${this.user}/${this.state.projects[i][0]}`)\n          .set(null);\n        this.state.projects.splice(i, 1);\n      }\n    }\n\n    this.changedProjects = this.state.projects;\n    window[`${this.user}`] = {};\n    for (let k = 0; k < this.changedProjects.length; k += 1) {\n      window[`${this.user}`][this.changedProjects[k][0]] = this.changedProjects[k][1];\n    }\n    this.setState({ projects: this.changedProjects });\n    const projectsJson = JSON.stringify(window[`${this.user}`]);\n    localStorage.setItem(`${this.user}`, projectsJson);\n  }\n\n  hoverIn(e) {\n    if (this.mounted) {\n      this.setState({ active: e.currentTarget.id });\n    }\n  }\n\n  hoverOut() {\n    if (this.mounted) {\n      this.setState({ active: false });\n    }\n  }\n\n  isRedirected() {\n    if (this.state.page) {\n      this.mounted = false;\n      return <Redirect to={`/${this.state.page}`} />;\n    }\n    return <div className=\"hidden\" />;\n  }\n\n  render() {\n    return (\n      <div className=\"user-page\" style={{ height: this.state.height - 110 }}>\n        <div\n          className=\"user-image\"\n          style={{\n            backgroundImage: `url(${img})`,\n            backgroundSize: 'contain'\n          }}\n        />\n        <h2 className=\"user-name\">{name}</h2>\n        <ul className=\"piskel-list\">\n          <li>all</li>\n          <li>public</li>\n          <li>private</li>\n          <li>deleted</li>\n        </ul>\n        <div id=\"user-piskel-preview-area\" className=\"user-piskel-preview-area\">\n          <span className={`${this.state.isEmpty ? '' : 'hidden'}`}>\n            No piskel available in &#39;all&#39; category.\n          </span>\n\n          <div className={`user-preview-piskel-block ${this.state.isEmpty ? 'hidden' : 'flexed'}`}>\n            {this.state.projects.map((item, i) => (\n              <div\n                key={item}\n                className=\"preview-wrapper\"\n                id={item[0]}\n                onMouseEnter={e => this.hoverIn(e)}\n                onMouseLeave={() => this.hoverOut()}\n              >\n                <img key={item[1].gif} className=\"preview-gif\" src={item[1].gif} alt=\"preview\" />\n                <span key={item[1].title} className=\"preview-gif-title\">\n                  {item[1].title}\n                </span>\n                <span key={item[1].date} className=\"preview-gif-date\">\n                  {item[1].date}\n                </span>\n                <div key={`${item[0]}-button-block`} className=\"piskel-preview-button-block\">\n                  <button\n                    key={`${item[0]}-delete`}\n                    type=\"button\"\n                    className={`piskel-preview-button ${\n                      this.state.active === item[0] ? '' : 'hidden'\n                    }`}\n                    onClick={() => this.deletePiskel(item[0])}\n                  >\n                    <i key={`${item[0]}-delete-icon`} className=\"fas fa-trash-alt user-buttons\" />\n                  </button>\n                  <button\n                    key={`${item[0]}-edit`}\n                    type=\"button\"\n                    className={`piskel-preview-button ${\n                      this.state.active === item[0] ? '' : 'hidden'\n                    }`}\n                    onClick={() => {\n                      this.project = item[0];\n                      localStorage.setItem('project', this.project);\n                      preview.dispatch({ type: 'piskelID', value: item[0] });\n                      settings.dispatch({ type: 'title', value: item[1].title });\n                      settings.dispatch({ type: 'description', value: item[1].description });\n                      this.setState({ page: `create-animation/${this.project}` });\n                      setTimeout(() => {\n                        fromDataToCanvas(item[1].frames);\n                      }, 300);\n                    }}\n                  >\n                    <i key={`${item[0]}-edit-icon`} className=\"fas fa-pencil-alt user-buttons\" />\n                  </button>\n                  <button\n                    key={`${item[0]}-copy`}\n                    type=\"button\"\n                    className={`piskel-preview-button ${\n                      this.state.active === item[0] ? '' : 'hidden'\n                    }`}\n                    onClick={() => {\n                      this.project = makeRandomId();\n                      localStorage.setItem('project', this.project);\n                      preview.dispatch({ type: 'piskelID', value: this.project });\n                      settings.dispatch({ type: 'title', value: item[1].title });\n                      settings.dispatch({ type: 'description', value: item[1].description });\n                      this.setState({ page: `create-animation/${this.project}` });\n                      setTimeout(() => {\n                        fromDataToCanvas(item[1].frames);\n                      }, 300);\n                    }}\n                  >\n                    <i key={`${item[0]}-copy-icon`} className=\"fas fa-copy user-buttons\" />\n                  </button>\n                  <button\n                    key={`${item[0]}-view`}\n                    type=\"button\"\n                    className={`piskel-preview-button ${\n                      this.state.active === item[0] ? '' : 'hidden'\n                    }`}\n                    onClick={() => {\n                      this.project = item[0];\n                      localStorage.setItem('project', this.project);\n                      preview.dispatch({ type: 'piskelID', value: this.project });\n                      // piskelPage.dispatch({ type: 'piskelGif', value: item[1].gif });\n                      this.setState({ page: `user/projects/${this.user}/${this.project}` });\n                    }}\n                  >\n                    <i key={`${item[0]}-copy-icon`} className=\"fas fa-eye user-buttons\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n          {this.isRedirected()}\n        </div>\n        <div className=\"hidden\">\n          <button id=\"userAddPiskel\" type=\"button\" onClick={undefined} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default User;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport error from './error.jpg';\nimport './error.css';\n\nfunction makeRandom(from, to) {\n  const number = Math.ceil(to - (to - from) * Math.random());\n  return number;\n}\n\nfunction makeAnimate() {\n  const width = 100 - (480 * 100) / window.innerWidth;\n  const height = 100 - (375 * 100) / window.innerHeight;\n  const top = (55 * 100) / window.innerHeight;\n  const bottom = window.innerHeight - 370;\n  const animation = document.getElementById('error-image-wrapper').animate(\n    [\n      { top: '55px', left: '0' }, // 0\n      { top: `${makeRandom(top, height)}%`, left: `${makeRandom(0, width / 2)}%` }, // 10%\n      { top: `${makeRandom(top, height)}%`, left: `${makeRandom(0, width / 2)}%` }, // 20%\n      { top: `${bottom}px`, left: `${makeRandom(width / 2, width)}%` }, // 30%\n      { top: `${makeRandom(top, height)}%`, left: `${makeRandom(width / 2, width)}%` }, // 40%\n      { top: '55px', left: `${width}%` }, // 50%\n      { top: `${makeRandom(top, height)}%`, left: `${makeRandom(width / 2, width)}%` }, // 60%\n      { top: `${bottom}px`, left: `${makeRandom(width / 2, width)}%` }, // 70%\n      { top: `${makeRandom(top, height)}%`, left: `${makeRandom(0, width / 2)}%` }, // 80%\n      { top: `${makeRandom(top, height)}%`, left: `${makeRandom(0, width / 2)}%` }, // 90%\n      { top: '55px', left: '0' } // 100%\n    ],\n    {\n      duration: 30000,\n      delay: 0,\n      easing: 'linear'\n    }\n  );\n  animation.play();\n  setTimeout(() => {\n    makeAnimate();\n  }, 30000);\n}\n\nclass Error extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  isPropsReceived() {\n    if (this.props.state) {\n      makeAnimate();\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"error-page\">\n        <div className=\"error-image-wrapper\" id=\"error-image-wrapper\">\n          <img src={error} alt=\"Oops! Somthing went wrong\" />\n        </div>\n        <div className=\"error-text-wrapper\">\n          <span>Oops! Something went wrong :(</span>\n          <span>Please refresh the Webpage!</span>\n        </div>\n        {this.isPropsReceived()}\n      </div>\n    );\n  }\n}\n\nError.propTypes = {\n  state: PropTypes.bool.isRequired\n};\n\nexport default Error;\n","import React from 'react';\nimport './project.css';\n\nclass Piskel extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      projectInfo: []\n    };\n    this.changedProjects = '';\n    this.localObj = {};\n    this.mounted = false;\n    this.user = '';\n    this.project = '';\n  }\n\n  componentWillMount() {\n    this.user = localStorage.getItem('userID');\n    this.project = localStorage.getItem('project');\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem(`${this.user}`)) {\n      const obj = JSON.parse(localStorage.getItem(`${this.user}`));\n      const entries = Object.entries(obj);\n      this.localObj = entries.filter(projects => projects[0] === this.project);\n      this.setState({ projectInfo: this.localObj });\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"project-section\">\n        {this.state.projectInfo.map(item => (\n          <div key={`${item[0]}-project-wrapper`} className=\"project-wrapper\">\n            <div key={`${item[0]}-gif-wrapper`} className=\"piskel-page-gif-wrapper\">\n              <img key={item[1].gif} src={item[1].gif} alt=\"preview-gif\" />\n            </div>\n            <div key={`${item[0]}-info-wrapper`} className=\"piskel-page-info-wrapper\">\n              <span className=\"sprite-info-title bold\" key={`${item[0]}-title`}>\n                Title\n              </span>\n              <h3 className=\"sprite-title\" key={item[1].title}>\n                {item[1].title}\n              </h3>\n              <span className=\"sprite-info-title bold\" key={`${item[0]}-description`}>\n                Description\n              </span>\n              <h3 className=\"sprite-description\" key={item[1].description}>\n                {`${item[1].description || 'no-description yet'}`}\n              </h3>\n              <span className=\"sprite-info-title bold\" key={`${item[0]}-date`}>\n                Created:\n              </span>\n              <h3 className=\"sprite-date bold\" key={item[1].date}>\n                {item[1].date}\n              </h3>\n              <div key={`${item[0]}-options-wrapper`}>\n                <span className=\"sprite-info-title bold\" key={`${item[0]}-options`}>\n                  Animation info:\n                </span>\n                <h3 className=\"sprite-options bold\" key={`${item[0]}-frames-length`}>\n                  Frames:\n                </h3>\n                <span key={`${item[0]}-frames-span`}>{`${item[1].frames.length}`}</span>\n                <h3 className=\"sprite-options bold\" key={`${item[0]}-fps`}>\n                  FPS:\n                </h3>\n                <span key={`${item[0]}-fps-span`}>\n                  {`${item[1].frames.length === 1 ? 0 : item[1].fps} frames per second`}\n                </span>\n                <h3 className=\"sprite-options bold\" key={`${item[0]}-time`}>\n                  The total duration:\n                </h3>\n                <span key={`${item[0]}-duration-span`}>\n                  {`${(item[1].frames.length === 1\n                    ? 0\n                    : item[1].frames.length / item[1].fps\n                  ).toFixed(1)} seconds`}\n                </span>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n\nexport default Piskel;\n","/* eslint-disable no-alert */\nimport React from 'react';\nimport { Redirect, Route, Link, HashRouter, Switch } from 'react-router-dom';\nimport './home.css';\nimport $ from 'jquery';\nimport CreateAnimation from './create/create';\nimport User from './user/user';\nimport { About, makeRandomId } from './about/about';\nimport Error from './error/error';\nimport Piskel from './project/project';\nimport { user, preview } from '../store/store';\n\nclass AppRouter extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      id: '',\n      name: '',\n      img: '',\n      redirected: '',\n      active: '',\n      auth: false,\n      error: false\n    };\n    this.onSuccess = this.onSuccess.bind(this);\n  }\n\n  componentWillMount() {\n    if (!localStorage.getItem('page')) {\n      this.setState({ redirected: '' });\n    } else {\n      this.setState({ redirected: localStorage.getItem('page') });\n    }\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      $(document.body).ready(() => {\n        window.gapi.load('client:auth2', () => {\n          window.gapi.auth2\n            .init({\n              client_id: '717448332612-fnnatbck2icvkubo0ffuf7sjlht22tj1.apps.googleusercontent.com'\n            })\n            .then(() => {\n              window.gapi.signin2.render('my-signIn', {\n                scope: 'https://www.googleapis.com/auth/drive.file',\n                width: 240,\n                height: 37,\n                longtitle: true,\n                onsuccess: this.onSuccess,\n                onfailure: this.onFailure\n              });\n            });\n        });\n      });\n    }, 200);\n  }\n\n  onSuccess(googleUser) {\n    const profile = googleUser.getBasicProfile();\n    const ID = profile.getId();\n    const fullName = profile.getName();\n    const imageURL = profile.getImageUrl();\n    const email = profile.getEmail();\n    user.dispatch({ type: 'email', value: email });\n    user.dispatch({ type: 'userID', value: ID });\n    localStorage.setItem('userID', ID);\n    user.dispatch({ type: 'name', value: fullName });\n    this.setState({ id: ID, name: fullName, img: imageURL, auth: true });\n    $('#updateSaveButtonLoggedIn').click();\n    $('#updateGoogleButtonLoggedIn').click();\n    localStorage.setItem('auth', true);\n    if (localStorage.getItem('page')) {\n      if (localStorage.getItem('page').indexOf('create') === -1) {\n        this.setState({ redirected: localStorage.getItem('page') });\n      }\n    } else {\n      localStorage.setItem('page', `user/${ID}`);\n      this.setState({ redirected: `user/${ID}` });\n      $(document.body).css({ cursor: 'default' });\n    }\n  }\n\n  signOut() {\n    const auth2 = window.gapi.auth2.getAuthInstance();\n    auth2.signOut().then(() => {\n      this.setState({ redirected: '', id: '', auth: false });\n      localStorage.setItem('page', '');\n      localStorage.setItem('auth', false);\n      user.dispatch({ type: 'name', value: '' });\n    });\n  }\n\n  isRedirected() {\n    user.dispatch({ type: 'imageURL', value: this.state.img });\n    if (!localStorage.getItem('page')) {\n      return <Redirect to=\"/\" />;\n    }\n    if (this.state.redirected) {\n      return <Redirect to={`/${this.state.redirected}`} />;\n    }\n    return <Redirect to=\"/\" />;\n  }\n\n  addActiveClass(e) {\n    const clicked = e.currentTarget.getAttribute('id');\n    if (this.state.active === clicked) {\n      this.setState({ active: '' });\n    } else {\n      this.setState({ active: clicked });\n    }\n  }\n\n  render() {\n    return (\n      <HashRouter>\n        <div>\n          <header className=\"header\">\n            <div className=\"header-menu\">\n              <span className=\"menu-icon\">\n                <i className=\"fas fa-bars\" />\n              </span>\n              <ul className=\"menu\">\n                <li className=\"homepage\">\n                  <Link\n                    to=\"/\"\n                    className=\"task-name\"\n                    onClick={e => {\n                      if (!localStorage.getItem('auth')) {\n                        this.setState({ auth: false });\n                      }\n                      if (localStorage.getItem('page')) {\n                        if (localStorage.getItem('page').indexOf('create') !== -1) {\n                          // eslint-disable-next-line no-restricted-globals\n                          if (confirm('Are you sure you want to leave?') === true) {\n                            this.setState({ redirected: 'about' });\n                            localStorage.setItem('page', 'about');\n                            $(document.body).css({ cursor: 'default' });\n                            return;\n                          }\n                          e.preventDefault();\n                        } else {\n                          this.setState({ redirected: 'about' });\n                          localStorage.setItem('page', 'about');\n                          $(document.body).css({ cursor: 'default' });\n                        }\n                      }\n                    }}\n                  >\n                    Piskel-clone\n                  </Link>\n                </li>\n                <li className=\"create menu-item\">\n                  <Link\n                    to=\"/create-animation\"\n                    className=\"create-link\"\n                    onClick={e => {\n                      if (localStorage.getItem('page')) {\n                        if (localStorage.getItem('page').indexOf('create') !== -1) {\n                          // eslint-disable-next-line no-restricted-globals\n                          if (confirm('Are you sure you want to leave?') === true) {\n                            const piskel = makeRandomId();\n                            preview.dispatch({ type: 'piskelID', value: piskel });\n                            this.setState({ redirected: `create-animation/${piskel}` });\n                            localStorage.setItem('page', `create-animation/${piskel}`);\n                            localStorage.setItem('project', piskel);\n                            $(document.body).css({ cursor: 'default' });\n                            return;\n                          }\n                          e.preventDefault();\n                          return;\n                        }\n                      }\n                      const piskel = makeRandomId();\n                      preview.dispatch({ type: 'piskelID', value: piskel });\n                      this.setState({ redirected: `create-animation/${piskel}` });\n                      localStorage.setItem('page', `create-animation/${piskel}`);\n                      localStorage.setItem('project', piskel);\n                      $(document.body).css({ cursor: 'default' });\n                    }}\n                  >\n                    Create Animation\n                  </Link>\n                </li>\n                <li className=\"signin\">\n                  <div\n                    className={`menu-item ${this.state.auth ? 'account' : 'hidden'}`}\n                    id=\"list\"\n                    role=\"button\"\n                    tabIndex=\"-1\"\n                    onKeyPress={undefined}\n                    onClick={e => {\n                      if (!localStorage.getItem('auth')) {\n                        $('#signOuted').click();\n                        return;\n                      }\n                      this.addActiveClass(e);\n                    }}\n                  >\n                    <div\n                      className=\"account-image\"\n                      style={{\n                        backgroundImage: `url(${this.state.img})`,\n                        backgroundSize: 'contain'\n                      }}\n                    />\n                    <span className=\"account-button\">{this.state.name}</span>\n                    <i className=\"fas fa-sort-down\" />\n                    <ul\n                      className={`dropdown ${this.state.active === 'list' ? 'active' : 'hidden'}`}\n                    >\n                      <li className={`list top ${this.state.active === 'list' ? '' : 'hidden'}`}>\n                        <Link\n                          to={`/user/${this.state.id}`}\n                          id=\"galery\"\n                          className=\"account-item\"\n                          onClick={e => {\n                            $('#error').removeClass('error');\n                            $('#success').removeClass('success');\n                            if (localStorage.getItem('page')) {\n                              if (localStorage.getItem('page').indexOf('create') !== -1) {\n                                // eslint-disable-next-line no-restricted-globals\n                                if (confirm('Are you sure you want to leave?') === true) {\n                                  localStorage.setItem('page', `user/${this.state.id}`);\n                                  this.setState({ redirected: localStorage.getItem('page') });\n                                  $(document.body).css({ cursor: 'default' });\n                                  return;\n                                }\n                                e.preventDefault();\n                              } else {\n                                localStorage.setItem('page', `user/${this.state.id}`);\n                                this.setState({ redirected: localStorage.getItem('page') });\n                                $(document.body).css({ cursor: 'default' });\n                              }\n                            }\n                          }}\n                        >\n                          My Galery\n                        </Link>\n                      </li>\n                      <li className={`list bottom ${this.state.active === 'list' ? '' : 'hidden'}`}>\n                        <Link\n                          to={`/${this.state.redirected}`}\n                          id=\"logout\"\n                          className=\"account-item\"\n                          onClick={e => {\n                            // eslint-disable-next-line no-restricted-globals\n                            if (confirm('Are you sure you want to leave?') === true) {\n                              this.signOut();\n                            } else {\n                              e.preventDefault();\n                            }\n                          }}\n                        >\n                          Log out\n                        </Link>\n                      </li>\n                    </ul>\n                  </div>\n                  <div\n                    id=\"my-signIn\"\n                    className={`${this.state.auth ? 'hidden' : 'shown'}`}\n                    onClick={() => {\n                      // localStorage.setItem('auth', true);\n                    }}\n                    onKeyPress={() => undefined}\n                    role=\"button\"\n                    tabIndex=\"-1\"\n                  />\n                  {this.isRedirected()}\n                </li>\n              </ul>\n            </div>\n            <button\n              id=\"signOuted\"\n              type=\"button\"\n              className=\"hidden\"\n              onClick={() => this.setState({ auth: false, error: true })}\n            />\n          </header>\n          <div className={`error-section ${this.state.error ? 'blocked' : 'hidden'}`}>\n            <Error state={this.state.error} />\n          </div>\n          <div className={`${this.state.error ? 'hidden' : ''}`}>\n            <Switch>\n              <Route path=\"/\" exact component={About} />\n              <Route path={`/user/${this.state.id}`} component={User} />\n              <Route path=\"/user/projects/*\" component={Piskel} />\n              <Route path=\"/create-animation/*\" component={CreateAnimation} />\n              <Route path=\"*\" component={About} />\n            </Switch>\n          </div>\n        </div>\n      </HashRouter>\n    );\n  }\n}\n\nexport default AppRouter;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-console */\n/* eslint-disable no-use-before-define */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport './index.css';\nimport AppRouter from './mainpage/home';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <HashRouter>\n    <AppRouter />\n  </HashRouter>,\n  document.getElementById('home-page')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}