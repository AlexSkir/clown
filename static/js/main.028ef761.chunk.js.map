{"version":3,"sources":["assets/images/bg/bg1.png","assets/images/pages/preview-example.gif","assets/images/pages/google-icon.png","assets/images/pages/export-gif.png","assets/images/pages/private-page.png","assets/images/toolIcons/colorpicker.png","assets/images/toolIcons/bucket.png","assets/images/toolIcons/eraser.png","assets/images/toolIcons/pen.png","assets/images/pages/error.jpg","locales/index.js","store/store.js","components/functions/random.js","components/functions/navigation.js","containers/accountButton/accountButton.js","services/googleAuth/authApi.js","components/header/header.js","containers/pages/about/about.js","components/functions/toolsFunctions/buttonsClickHandlers.js","components/tooltips/tooltip.js","components/buttons/awesomeButton.js","components/functions/preview.js","components/tools/toolsDomBuilder.js","components/functions/toolsFunctions/cursorShadow.js","components/functions/toolsFunctions/drawing.js","components/screens/frames/frameDomBuilder.js","components/functions/canvasManager.js","components/functions/toolsFunctions/paint.js","components/functions/colors.js","components/screens/canvas/canvasDomBuilder.js","components/screens/preview/previewDomBuilder.js","components/menuComponents/layers-list/layers-list.js","components/buttons/paletteSampleButton.js","components/menuComponents/palettes/palettes.js","components/menuComponents/settings/settings.js","components/menuComponents/resize/resizeCanvas.js","firebase/firebase.js","components/functions/requestToDB.js","services/jsgif-master/NeuQuant.js","services/jsgif-master/LZWEncoder.js","services/jsgif-master/GIFEncoder.js","components/functions/menuFunctions/fromCanvasToFile.js","services/jsgif-master/b64.js","components/functions/menuFunctions/saveProject.js","components/menuComponents/save/save.js","services/google-uploader/googleUploader.js","components/functions/menuFunctions/exportToGoogle.js","components/menuComponents/export/export.js","components/menuComponents/import/import.js","containers/menu/optionsDomBuilder.js","components/functions/menuFunctions/fromImageToCanvas.js","containers/pages/localSaves/localSaves.js","containers/pages/create/create.js","containers/pages/error/error.js","components/functions/animation.js","components/projectCards/projectCard.js","containers/pages/user/user.js","containers/pages/projectPage/project.js","app.js","serviceWorker.js","ConnectedIntlProvider.js","index.js"],"names":["module","exports","__webpack_require__","p","locales","ru","en","initialState","locale","localStorage","getItem","messages","page","indexOf","userData","JSON","parse","info","id","name","image","isAuthed","error","toolState","currentTool","currentColor","backColor","settings","currentBG","concat","bg1","customWidth","projectID","project","gif","frames","title","description","date","time","fps","currentCanvas","googleLinks","palette","showLocalSaves","localProjects","allProjects","framesArray","store","createStore","state","arguments","length","undefined","action","type","setItem","value","Object","assign","stringify","objectSpread","Array","key","$","val","obj","array","push","projects","framesID","copy","forEach","item","i","splice","stateObj","delete","update","frameSRC","src","drag","target","dragged","every","map","makeRandomNumber","from","to","Math","ceil","random","makeRandomId","x","j","String","fromCharCode","join","pageNavigator","e","projectId","window","confirm","dispatch","document","body","css","cursor","preventDefault","AccountButton","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","active","clicked","currentTarget","getAttribute","setState","_this2","react_default","a","createElement","className","props","role","tabIndex","onKeyPress","onClick","addActiveClass","onBlur","setTimeout","style","backgroundImage","backgroundSize","react_router_dom","gapi","auth2","getAuthInstance","signOut","then","React","Component","connect","Header","accountButton_accountButton","click","previewExampleGif","alt","googleIcon","exportIcon","privatePage","toolButtonsClickHandler","activeTool","show","bucket","hide","picker","pen","eraser","useStylesBootstrap","makeStyles","theme","arrow","position","fontSize","&::before","content","margin","display","width","height","borderStyle","popper","color","&[x-placement*=\"bottom\"] $arrow","top","left","marginTop","borderWidth","borderColor","&[x-placement*=\"top\"] $arrow","bottom","marginBottom","&[x-placement*=\"right\"] $arrow","marginLeft","&[x-placement*=\"left\"] $arrow","right","marginRight","tooltip","backgroundColor","border","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","BootstrapTooltip","_useStylesBootstrap","classes","objectWithoutProperties","_React$useState","useState","_React$useState2","slicedToArray","arrowRef","setArrowRef","Tooltip","PopperProps","popperOptions","modifiers","enabled","Boolean","element","Fragment","ref","CustomizedTooltips","placement","AwesomeButton","mouseEnter","enterDelay","buttonClass","buttonId","onMouseEnter","mouseIn","onMouseLeave","mouseOut","onClickHandler","iconClass","defaultProps","text","ToolsPanel","mounted","tool","awesomeButton_AwesomeButton","activeToolSetter","current","back","defaultValue","onChange","subscribe","getState","anim","newWindow","count","animate","clearTimeout","children","makeImage","framesSrcUpdate","toDataURL","fullSizePreview","close","open","newPreview","clone","appendTo","justify-content","align-items","newFps","newCount","ready","newAnimate","endX","endY","mouseOverX","mouseOverY","mouseDownX","mouseDownY","startX","startY","lastX","lastY","radius","FramesWrapper","activeFrame","hovered","updateImagePreview","frame","_this3","frameID","_this4","newFrameID","oldID","newID","imageData","get","getContext","getImageData","putImageData","canvas","openCanvasHandler","_this5","_this6","last","split","sortable","disableSelection","draggedFrom","_this7","draggedFrame","_this8","background","bg","onMouseEnterHandler","onMouseLeaveHandler","removeFrameHandler","onMouseDown","dragFrameOnClick","onMouseUp","dragOffOnClick","copyFrameHandler","addNewFrameHandler","clearCanvas","ctx","clearRect","endStroke","rect","querySelector","getBoundingClientRect","floor","clientX","y","clientY","canvasSize","drawCtx","globalCompositeOperation","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","sqrt","arc","PI","mouseup","off","getColorAtPixel","data","r","g","b","setColorAtPixel","colorMatch","paintIt","num","curCanv","rgbColor","hexColor","result","exec","parseInt","hexToRGB","col","fillStyle","round","newColor","stack","baseColor","pop","goDown","goUp","goLeft","goRight","floodFill","CanvasWrapper","size","draw","lines","canvasWidth","innerWidth","innerHeight","curCanvas","fillRect","startDraw","mousemove","startStroke","is","hexR","toString","hexG","hexB","rgbaToHex","mouseMoveX","mouseMoveY","endDraw","endCursorMove","mouseDownHandler","onMouseOver","createCursorShadow","curColor","onMouseMove","mouseMoveHandler","mouseUpHandler","onFocus","PreviewBlock","hoverIn","hoverOut","Layers","popHintOnMouseOver","SampleButton","Palettes","changed","hex","nums","rgbToHex","addPalettesOnClick","choosePalettesOnClick","editPalettesOnClick","colorSamples","paletteSampleButton_SampleButton","changeCurColor","Settings","addActiveOnClick","ResizeCanvas","maxWidth","newWidth","min","resizeCanvasOnClickHandler","firebase","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","appId","writeUserData","userId","database","set","NeuQuant","alphadec","thepicture","lengthcount","samplefac","network","netindex","bias","freq","radpower","thepic","len","sample","netbiasshift","intbias","unbiasnet","dist","bestd","best","process","rad","alpha","step","delta","samplepixels","pix","lim","initrad","contest","altersingle","alterneigh","learn","smallpos","smallval","q","previouscol","startpos","netsize","inxbuild","index","k","l","colorMap","lo","hi","m","alphabiasshift","n","biasdist","betafreq","bestpos","bestbiaspos","bestbiasd","intbiasshift","apply","LZWEncoder","imgW","imgH","pixAry","initCodeSize","remaining","curPixel","n_bits","maxcode","g_init_bits","ClearCode","EOFCode","a_count","htab","codetab","free_ent","clear_flg","cur_accum","cur_bits","masks","accum","pixels","color_depth","max","char_out","c","outs","flush_char","cl_block","cl_hash","output","hsize","compress","init_bits","fcode","ent","disp","hshift","MAXCODE","nextPixel","outer_loop","encode","os","writeByte","writeBytes","code","GIFEncoder","chr","ByteArray","bin","prototype","getData","v","writeUTFBytes","string","charCodeAt","offset","transIndex","out","indexedPixels","colorDepth","colorTab","transparent","repeat","delay","started","usedEntry","palSize","dispose","closeStream","firstFrame","sizeSet","comment","reset","setDelay","ms","setDispose","setRepeat","iter","setTransparent","setComment","addFrame","im","is_imageData","Error","ok","ImageData","setSize","Uint8ClampedArray","console","log","getImagePixels","analyzePixels","writeLSD","writePalette","writeNetscapeExt","writeGraphicCtrlExt","writeCommentExt","writeImageDesc","writePixels","download","filename","endsWith","templink","href","URL","createObjectURL","Blob","Uint8Array","upload","attr","replace","finish","setFrameRate","setQuality","quality","w","h","start","cont","nPix","nq","findClosest","minpos","dmin","dr","dg","db","d","transp","WriteShort","pValue","stream","setProperties","has_start","is_first","saveAsGif","encoder","map2","newArr","slice","toConsumableArray","fixedNewArray","newImage","uploadToUrl","binaryGif","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","encode64","makeObjectToSave","newTitle","newDescription","dataUrl","Date","day","getDate","month","getMonth","hour","getHours","minutes","getMinutes","getFullYear","getTime","saveLocally","storage","totalSaves","currentProject","keys","entries","some","newStorage","SaveOptions","isFull","isSaved","localSaves","updatedAllProjects","userID","saves","user","objForDB","projectName","projectItems","saveToGalery","rows","cols","saveLocallyHandler","saveToGaleryHandler","Uploader","UploaderForGoogleDrive","RetryHandler","interval","maxInterval","retry","fn","nextInterval_","getRandomInt_","MediaUploader","options","noop","file","contentType","metadata","mimeType","token","currentUser","getAuthResponse","access_token","onComplete","onProgress","onError","chunkSize","retryHandler","url","params","uploadType","buildUrl_","fileId","baseUrl","httpMethod","xhr","XMLHttpRequest","setRequestHeader","onload","status","location","getResponseHeader","sendFile_","onUploadError_","bind","onerror","send","end","addEventListener","onContentUploadSuccess_","onContentUploadError_","resume_","extractRange_","range","match","response","buildQuery_","encodeURIComponent","query","pUploaderForGoogleDrive","Promise","resolve","reject","apikey","uploadToGoogle","client","setApiKey","load","err","googleUrl","urlToGif","drive","permissions","create","resource","ExportOptions","links","showExportOptions","base64URL","win","heigh","debugBase64","rel","downloadPng","flex-direction","overflow","ancor","overflow-y","margin-bottom","flex-wrap","word-break","debugBase64WithText","ImportOptions","Options","layers_list_layers_list","palettes_palettes","settings_Settings","resizeCanvas_ResizeCanvas","save_SaveOptions","export_ExportOptions","showOptionsOnClick","fromDataToCanvas","Image","drawImage","LocalSaves","sorted","sort","cellPadding","cellSpacing","CreateAnimation","showSaves","changeWidth","toolsDomBuilder_ToolsPanel","frameDomBuilder_FramesWrapper","canvasDomBuilder_CanvasWrapper","previewDomBuilder_PreviewBlock","optionsDomBuilder_Options","ErrorPage","makeAnimate","node","getElementById","duration","easing","play","errorImage","ProjectCard","infoObj","deletePiskelOnClick","User","DBitem","once","snapshot","getDBdata","projectFrames","preview","isEmpty","projectCard_ProjectCard","deletePiskel","toFixed","App","onSuccess","assertThisInitialized","init","client_id","signin2","render","scope","longtitle","onsuccess","onfailure","googleUser","profile","getBasicProfile","getId","getName","getImageUrl","onSuccessHandler","react_router","path","component","About","ProjectInfo","hostname","_state$locales","IntlProvider","addLocaleData","ReactDOM","es","ConnectedIntlProvider","app","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.028ef761.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABlBMVEXf39////8zI3BgAAAAHklEQVR4AWNghAIGCMDgjwgFCDDSw2M0PSCD0fQAACRcAgF4ciGUAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/preview-example.e3ca5e51.gif\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/export-gif.ae1e58e5.png\";","module.exports = __webpack_public_path__ + \"static/media/private-page.d4571089.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADCSURBVDhP7dAxCwFhGMDxh00Gk4nBYDAZFIvNJ/BBDOwGiUlJklAWPov4FqSUDEqUSfyf91zdqTuv3b9+3fte3b13j1hUwxpLJPWGTRHE0cLTYw6rGtjC+7BawVf0ff0sgYyz9GX1BW3cUMUG7un6O1/r4YKy2Ynk8cAeMb0RVhdnFM1OJIsdFqhDBxtYBXeUzE4khwMmCJqTrzGmzlIKOGKA0FPdUjihgz6uaMK6IXTK+pIZ3AFap9MdIW12/35M5AUsFCcIOdPfYQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEdSURBVEhL3dU/a8JAHMbxIChYlQ52aIeCU6Gbk2+hXcV306lDofSttIvuQsGhk4uLIIiCVVF0KxQ6td9HchDkvDvSdKgPfCC55H4PJP6Jjj4tPKOwO8s4ZSzxjTb+pKSODVTSwf8sKeIVKsi85ARdaPAa2/g4k5IKetBAvexr6HFlUnKKN2jQDFcw+fU7qaIPDZighv2kLjnDANo4wiUOJVXJC7RhiAsteJIsudeCK3l84RPnWghMAyqY7s4cyeEDujkNb4HyBNvmEN5HpOhF6YfNNsDFvORmzBndqA22QTZmeAnzmI6dCS1JfjzvYNZ17I2vJDlcGcNc03FQDpXY/oDeYa7r5yU4+n48YIEVHrE/XLmFBsuNFo4hUfQDRmuR/2vYwfIAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAWZJREFUOI2t0jFI1VEUx/FPGjlki9ai0CQIDQ5pCqbNTxJdykGdWmxxsUAHXYJwqMVBNHVzKWh2EAdBTDCQFhWKrMW2aFTiyXO4f+GP/u//8dQfHLiXe+73nvs7h2tWdYX5PZhDF6rwCyeXffwZVtCIZkxgHe9wv1LYIJZwM+OsDbOYjpxf0BBmcCMnpxa/0VEONoz5MrB7+IgDwdeoBgXDh3NymvAZvXiVB3uOIkpJ7OE1GlI5rVhFndD5OzFYAf9TsHScYAMfsIl6PBA6nqlW/IvAzmIL+7greLuI21mwGvzENhawjL8pUBHvsYPu5M5bPI5VN3qukgNMYQCTQpP2EiCM4WkMVoPDyBeLaE8eKGEcL9EXg8FIBHbWiBep/Tf058Gq8D0H+AWfkvWxMHO5epIDKwnGHyVRKAerxp/kYhtuZeR8xcOksrVywLTqBMN/pKrbFQa4sxJQlh7hjTCLLVeFXUmnRmtxEV/Efn8AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAOdJREFUOI3t0zErhWEUAOCnK9Pd76a4kjALGQ0+1ySrwXgXg9WPMBjFYJMSZTGom1kppJj9BBYZGL4zfG4ZvnPv6Cxv5z29T+e8dUbkYxK72EATL/huJLEC54FcoYNTpLwC79jpuz+Jbmtjd2ijh61KrYP9DNaKfAFfFXQbe1lsDg+Yx61y/HuMDYLNRN5W/mkxDKwV9TT2iNl/7M9YGybWxAcuMR3YU5y1MVjHIVZwg7dBMDjwe7F7mMpi8IrFSr6Kiyw2gWflBixhE0dqrFM1GtHNJ0ZxjGWcKce9rguKLroYzzzujx/AVUNl5zj/7wAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/error.d70d2a0b.jpg\";","import ru from 'locales/ru.json';\nimport en from 'locales/en.json';\n\nexport default { ru, en };\n","import { createStore } from 'redux';\nimport messages from 'locales';\nimport $ from 'jquery';\nimport bg1 from 'assets/images/bg/bg1.png';\n\nconst initialState = {\n  locales: {\n    locale: localStorage.getItem('locale') || 'en',\n    messages: messages.ru,\n  },\n  page: localStorage.getItem('page')\n    ? localStorage.getItem('page').indexOf('projects') !== -1\n      ? 'user'\n      : localStorage.getItem('page')\n    : '',\n  userData: JSON.parse(localStorage.getItem('userData')) || {\n    info: {\n      id: 'none',\n      name: 'none',\n      image: 'none'\n    },\n    isAuthed: false\n  },\n  error: false,\n  toolState: {\n    currentTool: '',\n    currentColor: '#161030',\n    backColor: '#c0c0c0'\n  },\n  settings: {\n    currentBG: `url(${bg1})`,\n    customWidth: 33\n  },\n  projectID: localStorage.getItem('projectID') || '',\n  project: {\n    gif: '',\n    frames: '',\n    title: 'New Piskel-clone',\n    description: '',\n    date: '',\n    time: '',\n    fps: 3\n  },\n  currentCanvas: '',\n  googleLinks: [],\n  palette: [],\n  showLocalSaves: false,\n  localProjects: JSON.parse(localStorage.getItem('localProjects')) || {},\n  allProjects: JSON.parse(localStorage.getItem('allProjects')) || {},\n  framesArray: []\n};\n\nfunction appState(state = initialState, action) {\n  switch (action.type) {\n    case 'locale':\n      localStorage.setItem('locale', action.value);\n      return Object.assign({}, state, {\n        locale: action.value\n      });\n    case 'page':\n      localStorage.setItem('page', action.value);\n      return Object.assign({}, state, {\n        page: action.value\n      });\n    case 'userData':\n      const userData = {\n        info: {\n          id: action.value.id,\n          name: action.value.name,\n          image: action.value.image\n        },\n        isAuthed: action.value !== ''\n      }\n      localStorage.setItem('userData', JSON.stringify(userData));\n      return {\n        ...state,\n        userData\n      };\n    case 'error':\n      return Object.assign({}, state, {\n        error: action.value\n      });\n    case 'toolState':\n      if (action.value instanceof Array) {\n        for (let key in state.toolState) {\n          if (action.value[0] === key) {\n            state.toolState[key] = action.value[1]\n          }\n          if (action.value[0] === 'currentColor') {\n            $('#customed1').val(action.value[1]);\n          } else if (action.value[0] === 'backColor') {\n            $('#customed2').val(action.value[1]);\n          }\n        }\n        return {\n          ...state,\n          ...state.toolState\n        };\n      } else {\n        return Object.assign({}, state, {\n          toolState: action.value\n        });\n      }\n    case 'settings':\n      for (let key in state.settings) {\n        if (action.value[0] === key) {\n          state.settings[key] = action.value[1]\n        }\n      }\n      return {\n        ...state,\n        ...state.settings\n      };\n    case 'projectID':\n      localStorage.setItem('projectID', action.value);\n      return Object.assign({}, state, {\n        projectID: action.value\n      });\n    case 'project':\n      if (action.value instanceof Array) {\n        for (let key in state.project) {\n          if (action.value[0] === key) {\n            state.project[key] = action.value[1]\n          }\n        }\n        return {\n          ...state,\n          ...state.project\n        };\n      } else if (action.value === 'initial') {\n        const obj = initialState.project;\n        return Object.assign({}, state, {\n          project: obj\n        });\n      } else {\n        return Object.assign({}, state, {\n          project: action.value\n        });\n      }\n    case 'currentCanvas':\n      return Object.assign({}, state, {\n        currentCanvas: action.value\n      });\n    case 'showLocalSaves':\n      return Object.assign({}, state, {\n        showLocalSaves: action.value\n      });\n    case 'googleLinks':\n      return Object.assign({}, state, {\n        googleLinks: action.value\n      });\n    case 'palette':\n      const array = state.palette;\n      if (array.indexOf(action.value) === -1) {\n        array.push(action.value);\n      }\n      return Object.assign({}, state, {\n        palette: array\n      });\n    case 'localProjects':\n      if (action.value instanceof Array) {\n        const projects = state.localProjects;\n        if (action.value[0] === 'delete') {\n          delete projects[action.value[1]];\n          localStorage.setItem('localProjects', JSON.stringify(projects));\n        }\n        return {\n          ...state,\n          ...projects\n        };\n      } else {\n        localStorage.setItem('localProjects', JSON.stringify(action.value));\n        return Object.assign({}, state, {\n          localProjects: action.value\n        });\n      }\n    case 'allProjects':\n      if (action.value instanceof Array) {\n        const projects = state.allProjects;\n        if (action.value[0] === 'delete') {\n          delete projects[action.value[1]][action.value[2]];\n          localStorage.setItem('allProjects', JSON.stringify(projects));\n        }\n        return {\n          ...state,\n          ...projects\n        };\n      } else {\n        localStorage.setItem('allProjects', JSON.stringify(action.value));\n        return Object.assign({}, state, {\n          allProjects: action.value\n        });\n      }\n    case 'framesArray':\n      let framesID = state.framesArray;\n      if (action.value instanceof Object) {\n        if (framesID.length >= 1) {\n          if (action.value.copy !== undefined) {\n            framesID.forEach((item, i) => {\n              if (item.id === action.value.copy) {\n                framesID.splice(i + 1, 0, action.value.stateObj);\n              }\n            });\n          } else if (action.value.delete !== undefined) {\n            framesID.forEach((item, i) => {\n              if (item.id === action.value.delete) {\n                framesID.splice(i, 1);\n              }\n            });\n          } else if (action.value.update !== undefined) {\n            framesID.forEach((item, i) => {\n              if (item.id === action.value.update) {\n                framesID[i].frameSRC = action.value.src;\n              }\n            });\n          } else if (action.value.drag !== undefined) {\n            let target = framesID[action.value.target];\n            let dragged = framesID[action.value.drag];\n            framesID[action.value.target] = dragged;\n            framesID[action.value.drag] = target;\n          } else if (action.value === null) {\n            return Object.assign({}, state, {\n              framesArray: []\n            });\n          } else {\n            if (framesID.every(item => item.id !== action.value.id)) {\n              framesID.push(action.value);\n            }\n          }\n        } else {\n          if (action.value.length > 0) {\n            action.value.map(item => framesID.push(item))\n          } else {\n            framesID = [{ id: action.value.id, frameSRC: action.value.frameSRC }];\n          }\n        }\n      } else if (action.value === null) {\n        return Object.assign({}, state, {\n          framesArray: []\n        });\n      }\n      return Object.assign({}, state, {\n        framesArray: framesID\n      });\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(appState);\n\nexport default store;\n","/* eslint-disable no-bitwise */\nexport function makeRandomNumber(from, to) {\n  const number = Math.ceil(to - (to - from) * Math.random());\n  return number;\n}\n\nexport function makeRandomId() {\n  const j = [];\n  let x;\n  for (let i = 0; i < 20; i += 1) {\n    x = [[48, 57], [65, 90], [97, 122]][(Math.random() * 3) >> 0];\n    j[i] = String.fromCharCode(((Math.random() * (x[1] - x[0] + 1)) >> 0) + x[0]);\n  }\n  return j.join('');\n}\n\nexport function getDate() {\n  const data = new Date();\n  let day = data.getDate();\n  if (day < 10) {\n    day = `0${day}`;\n  }\n  let month = data.getMonth() + 1;\n  if (month < 10) {\n    month = `0${month}`;\n  }\n  let hour = data.getHours();\n  if (hour < 10) {\n    hour = `0${hour}`;\n  }\n  let minutes = data.getMinutes();\n  if (minutes < 10) {\n    minutes = `0${minutes}`;\n  }\n  const time = new Date(`${hour}:${minutes} ${month}/${day}/${data.getFullYear()}`).getTime();\n  return `${hour}:${minutes} ${day}/${month}/${data.getFullYear()}  ${time}`;\n}\n","import $ from 'jquery';\nimport store from 'store/store';\nimport { makeRandomId } from 'components/functions/random';\n\nexport function pageNavigator(e, from, to, isAuthed, projectId) {\n  if (from.indexOf('create') !== -1) {\n    if (to.indexOf('user') !== -1) {\n      // navigate from createPage to userPage if authed\n      if (isAuthed) {\n        if (window.confirm('Are you sure you want to leave?')) {\n          store.dispatch({ type: 'page', value: to });\n          $(document.body).css({ cursor: 'default' });\n          return;\n        }\n        e.preventDefault();\n        return;\n      }\n      // navigate from createPage to userPage, if not authed redirect to erorPage\n      store.dispatch({ type: 'page', value: 'about' });\n      store.dispatch({ type: 'userData', value: '' });\n      store.dispatch({ type: 'error', value: true });\n      return;\n    }\n    // navigate from createPage to createPage - create new project\n    if (to === 'create') {\n      if (window.confirm('Are you sure you want to leave?')) {\n        const projectID = makeRandomId();\n        const page = `create-animation/${projectID}`;\n        store.dispatch({ type: 'page', value: page });\n        store.dispatch({ type: 'projectID', value: projectID });\n        $(document.body).css({ cursor: 'default' });\n        return;\n      }\n      e.preventDefault();\n      return;\n    }\n    // navigate from createPage to general pages\n    if (window.confirm('Are you sure you want to leave?')) {\n      store.dispatch({ type: 'page', value: to });\n      $(document.body).css({ cursor: 'default' });\n      return;\n    }\n    e.preventDefault();\n    return;\n  }\n  // navigate from general pages to createPage\n  if (to === 'create') {\n    if (projectId) {\n      store.dispatch({ type: 'page', value: `create-animation/${projectId}` });\n      store.dispatch({ type: 'projectID', value: projectId });\n      $(document.body).css({ cursor: 'default' });\n      return;\n    }\n    const projectID = makeRandomId();\n    const page = `create-animation/${projectID}`;\n    store.dispatch({ type: 'page', value: page });\n    store.dispatch({ type: 'projectID', value: projectID });\n    $(document.body).css({ cursor: 'default' });\n    return;\n  }\n  // navigate from other pages to general pages\n  store.dispatch({ type: 'page', value: to });\n  $(document.body).css({ cursor: 'default' });\n}\n\nexport function toCreatePage() { }\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport store from 'store/store';\nimport { signOut } from 'services/googleAuth/authApi';\nimport 'containers/accountButton/accountButton.css';\nimport { pageNavigator } from 'components/functions/navigation';\n\nclass AccountButton extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: ''\n    };\n  }\n\n  addActiveClass(e) {\n    const clicked = e.currentTarget.getAttribute('id');\n    if (this.state.active === clicked) {\n      this.setState({ active: '' });\n    } else {\n      this.setState({ active: clicked });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={`menu-item ${this.props.userData.isAuthed ? 'account flexed' : 'hidden'}`}\n        id=\"list\"\n        role=\"button\"\n        tabIndex=\"-1\"\n        onKeyPress={undefined}\n        onClick={e => {\n          if (!localStorage.getItem('userData')) {\n            pageNavigator(e, this.props.page, 'about', false);\n            store.dispatch({ type: 'userData', value: '' });\n            store.dispatch({ type: 'error', value: true });\n            return;\n          }\n          this.addActiveClass(e);\n        }}\n        onBlur={() => {\n          setTimeout(() => {\n            this.setState({ active: '' });\n\n          }, 300);\n        }}\n      >\n        <div\n          className=\"account-image\"\n          style={{\n            backgroundImage: `url(${this.props.userData.info.image})`,\n            backgroundSize: 'contain'\n          }}\n        />\n        <span className=\"account-button\">{this.props.userData.info.name}</span>\n        <i className=\"fas fa-sort-down\" />\n        <ul className={`dropdown ${this.state.active === 'list' ? 'active flexed' : 'hidden'}`}>\n          <li className={`list top ${this.state.active === 'list' ? 'flexed' : 'hidden'}`}>\n            <Link\n              to={`/user/${this.props.userData.info.id}`}\n              id={`/user/${this.props.userData.info.id}`}\n              className=\"account-item\"\n              onClick={e => pageNavigator(e, this.props.page, `user/${this.props.userData.info.id}`, this.props.userData.isAuthed)}\n            >\n              My Galery\n            </Link>\n          </li>\n          <li className={`list bottom ${this.state.active === 'list' ? 'flexed' : 'hidden'}`}>\n            <Link\n              to=\"/\"\n              id=\"logout\"\n              className=\"account-item\"\n              onClick={e => {\n                if (window.confirm('Are you sure you want to leave?') === true) {\n                  pageNavigator(e, this.props.page, 'about', this.props.userData.isAuthed)\n                  signOut();\n                } else {\n                  e.preventDefault();\n                }\n              }}\n            >\n              Log out\n            </Link>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nAccountButton.propTypes = {\n  userData: PropTypes.object.isRequired,\n  page: PropTypes.string.isRequired\n};\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n  page: state.page\n});\n\nexport default connect(mapStateToProps)(AccountButton);\n","import $ from 'jquery';\nimport store from 'store/store';\n\nexport function authenticate() {\n  return window.gapi.auth2\n    .getAuthInstance()\n    .signIn({\n      scope: 'https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file'\n    })\n    .then(\n      () => {\n        console.log('Sign-in successful');\n      },\n      err => {\n        console.error('Error signing in', err);\n      }\n    );\n}\n\nexport function loadClient() {\n  window.gapi.client.setApiKey('AIzaSyD8p3NmO-jrbUeGpC9EYDHzH8FWOl3ivss');\n  return window.gapi.client\n    .load('https://content.googleapis.com/discovery/v1/apis/drive/v3/rest')\n    .then(\n      () => {\n        console.log('GAPI client loaded for API');\n      },\n      err => {\n        console.error('Error loading GAPI client for API', err);\n      }\n    );\n}\n\n// Make sure the client is loaded and sign-in is complete before calling this method.\nexport function execute() {\n  return window.gapi.client.drive.permissions\n    .create({\n      resource: {\n        role: '',\n        type: ''\n      }\n    })\n    .then(\n      response => {\n        // Handle the results here (response.result has the parsed body).\n        console.log('Response', response);\n      },\n      err => {\n        console.error('Execute error', err);\n      }\n    );\n}\n\nexport function onSuccessHandler(googleUser) {\n  const profile = googleUser.getBasicProfile();\n  const userData = {\n    id: profile.getId(),\n    name: profile.getName(),\n    image: profile.getImageUrl()\n  };\n  $(document.body).css({ cursor: 'default' });\n  return userData;\n}\n\nexport function googleAuth(onSuccess) {\n  window.gapi.load('client:auth2', () => {\n    window.gapi.auth2\n      .init({\n        client_id: '842905832916-kcnptlm4pbd6ji1lpqbka2p6jpdr5i0q.apps.googleusercontent.com'\n      })\n      .then(() => {\n        window.gapi.signin2.render('my-signIn', {\n          scope: 'https://www.googleapis.com/auth/drive.file',\n          width: 'auto',\n          height: 37,\n          longtitle: true,\n          onsuccess: onSuccess,\n          onfailure: Error('try again')\n        });\n      });\n  });\n}\n\nexport function signOut() {\n  const auth2 = window.gapi.auth2.getAuthInstance();\n  auth2.signOut().then(() => {\n    store.dispatch({ type: 'userData', value: '' });\n    store.dispatch({ type: 'page', value: '' });\n  });\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport 'components/header/header.css';\nimport AccountButton from 'containers/accountButton/accountButton';\nimport { pageNavigator } from 'components/functions/navigation';\n\nexport default function Header(props) {\n  return (\n    <header className=\"header\">\n      <ul className=\"header-menu\">\n        <li className=\"logo\">\n          <Link\n            id=\"/about\"\n            to=\"/about\"\n            className=\"logo-text\"\n            onClick={e => pageNavigator(e, props.page, 'about', props.isAuthed)}>\n            Piskel-clone\n            </Link>\n        </li>\n        <li className=\"header-buttons\">\n          <div className=\"create menu-item flexed\">\n            <Link\n              id=\"/create\"\n              to=\"/create-animation\"\n              className=\"create-link\"\n              onClick={e => pageNavigator(e, props.page, 'create', props.isAuthed)}\n            >\n              Create Animation\n            </Link>\n          </div>\n          <div className=\"signin\">\n            <AccountButton />\n            <div id=\"my-signIn\" className={`${props.isAuthed ? 'hidden' : 'shown'}`} />\n          </div>\n        </li>\n      </ul>\n    </header>\n  );\n}\n\nHeader.propTypes = {\n  isAuthed: PropTypes.bool.isRequired,\n  page: PropTypes.string.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport $ from 'jquery';\nimport { pageNavigator } from 'components/functions/navigation';\nimport 'containers/pages/about/about.css';\nimport previewExampleGif from 'assets/images/pages/preview-example.gif';\nimport googleIcon from 'assets/images/pages/google-icon.png';\nimport exportIcon from 'assets/images/pages/export-gif.png';\nimport privatePage from 'assets/images/pages/private-page.png';\n\nfunction About(props) {\n  return (\n    <div className=\"homepage-section\">\n      <div className=\"about-app-wrapper\">\n        <div className=\"home-about\">\n          <h1>\n            <span className=\"piskel\">Piskel-clone </span>\n            is a free online editor for animated sprites & pixel art\n          </h1>\n          <h2>Create animations in your browser.</h2>\n          <h2>\n            <span className=\"description-link\">Try an example</span>\n            {', use '}\n            <span\n              role=\"button\"\n              tabIndex=\"-1\"\n              onKeyPress={undefined}\n              className=\"description-link\"\n              onClick={() => $('.abcRioButton.abcRioButtonLightBlue').click()}\n            >\n              Google sign in\n            </span>\n            {' to access your gallery or simply '}\n            <button\n              type=\"button\"\n              className=\"text-button\"\n              onClick={e => pageNavigator(e, 'about', 'create', props.isAuthed)}\n            >\n              <span className=\"description-link\">Create a new Sprite</span>\n            </button>\n          </h2>\n          <div className=\"home-buttons\">\n            <button\n              type=\"button\"\n              className=\"login-button\"\n              onClick={() => $('.abcRioButton.abcRioButtonLightBlue').click()}\n            >\n              Sign in\n            </button>\n            <button\n              type=\"button\"\n              className=\"create-button\"\n              onClick={e => pageNavigator(e, 'about', 'create', props.isAuthed)}\n            >\n              <span className=\"link\">Create Sprite</span>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"home-image\">\n          <div className=\"screen\" />\n          <div className=\"home-preview\" />\n        </div>\n      </div>\n      <div className=\"app-description-wrapper\">\n        <div className=\"description-item\">\n          <img className=\"description-image\" src={previewExampleGif} alt=\"piskel-example\" />\n          <div className=\"description-body\">\n            <h3 className=\"description-title\">\n              Live preview\n              </h3>\n            <p className=\"description-text\">\n              Check a preview of your animation in real time as you draw. Adjust the frame delay on the fly.\n              </p>\n          </div>\n        </div>\n        <div className=\"description-item\">\n          <img className=\"description-image\" src={googleIcon} alt=\"google-icon\" />\n          <div className=\"description-body\">\n            <h3 className=\"description-title\">\n              Google Sign in\n              </h3>\n            <p className=\"description-text\">\n              No need to remember yet another password, just use your Google account to sign in.\n              </p>\n          </div>\n        </div>\n        <div className=\"description-item\">\n          <img className=\"description-image\" src={exportIcon} alt=\"export-icon\" />\n          <div className=\"description-body\">\n            <h3 className=\"description-title\">\n              Export to GIF, PNG\n              </h3>\n            <p className=\"description-text\">\n              Several export modes supported. Animated GIFs for sharing, spritesheet PNG/ZIP for bigger projects\n              </p>\n          </div>\n        </div>\n        <div className=\"description-item\">\n          <img className=\"description-image\" src={privatePage} alt=\"personal-page-icon\" />\n          <div className=\"description-body\">\n            <h3 className=\"description-title\">\n              Private gallery\n              </h3>\n            <p className=\"description-text\">\n              You can chose to make any of your sprites public or private.\n              Private sprites are only visible to you.\n              </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nAbout.propTypes = {\n  isAuthed: PropTypes.bool.isRequired\n}\n\nconst mapStateToProps = state => ({ isAuthed: state.userData.isAuthed });\nexport default connect(mapStateToProps)(About);\n","import $ from 'jquery';\nimport picker from 'assets/images/toolIcons/colorpicker.png';\nimport bucket from 'assets/images/toolIcons/bucket.png';\nimport eraser from 'assets/images/toolIcons/eraser.png';\nimport pen from 'assets/images/toolIcons/pen.png';\n\nexport default function toolButtonsClickHandler(activeTool) {\n  $('#drawCanvas').show();\n  if (activeTool === 'paintBucketTool') {\n    $(document.body).css({ cursor: `url(${bucket}) 15 15, auto` });\n  } else if (activeTool === 'colorPickerTool') {\n    $('#drawCanvas').hide();\n    $(document.body).css({ cursor: `url(${picker}) 1 10, auto` });\n  } else if (\n    activeTool === 'penTool'\n    || activeTool === 'strokeTool'\n    || activeTool === 'rectangleTool'\n    || activeTool === 'circleTool'\n  ) {\n    $(document.body).css({ cursor: `url(${pen}) 1 18, auto` });\n  } else if (activeTool === 'eraserTool') {\n    $(document.body).css({ cursor: `url(${eraser}) 1 18, auto` });\n  } else {\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nfunction arrowGenerator(color) {\n  return {\n    '&[x-placement*=\"bottom\"] $arrow': {\n      top: 0,\n      left: 0,\n      marginTop: '-9px',\n      width: '20px',\n      height: '10px',\n      '&::before': {\n        borderWidth: '0 10px 10px 10px',\n        borderColor: `transparent transparent ${color} transparent`,\n      },\n    },\n    '&[x-placement*=\"top\"] $arrow': {\n      bottom: 0,\n      left: 0,\n      marginBottom: '-9px',\n      width: '20px',\n      height: '10px',\n      '&::before': {\n        borderWidth: '10px 10px 0 10px',\n        borderColor: `${color} transparent transparent transparent`,\n      },\n    },\n    '&[x-placement*=\"right\"] $arrow': {\n      left: 0,\n      marginLeft: '-9px',\n      height: '20px',\n      width: '10px',\n      '&::before': {\n        borderWidth: '10px 10px 10px 0',\n        borderColor: `transparent ${color} transparent transparent`,\n      },\n    },\n    '&[x-placement*=\"left\"] $arrow': {\n      right: 0,\n      marginRight: '-9px',\n      height: '20px',\n      width: '10px',\n      '&::before': {\n        borderWidth: '10px 0 10px 10px',\n        borderColor: `transparent transparent transparent ${color}`,\n      },\n    },\n  };\n}\n\nconst useStylesBootstrap = makeStyles(theme => ({\n  arrow: {\n    position: 'absolute',\n    fontSize: 6,\n    '&::before': {\n      content: '\"\"',\n      margin: 'auto',\n      display: 'block',\n      width: 0,\n      height: 0,\n      borderStyle: 'solid',\n    },\n  },\n  popper: arrowGenerator('#6bebeb'),\n  tooltip: {\n    position: 'relative',\n    color: 'black',\n    fontSize: '18px',\n    backgroundColor: '#6bebeb',\n    border: '1px solid #3c8484'\n  },\n  tooltipPlacementLeft: {\n    right: '-15px',\n    margin: '0 8px',\n  },\n  tooltipPlacementRight: {\n    margin: '0 8px',\n  },\n  tooltipPlacementTop: {\n    right: '-15px',\n    margin: '8px 0',\n  },\n  tooltipPlacementBottom: {\n    top: '5px',\n    margin: '8px 0',\n  },\n}));\n\nfunction BootstrapTooltip(props) {\n  const { arrow, ...classes } = useStylesBootstrap();\n  const [arrowRef, setArrowRef] = React.useState(null);\n\n  return (\n    <Tooltip\n      classes={classes}\n      PopperProps={{\n        popperOptions: {\n          modifiers: {\n            arrow: {\n              enabled: Boolean(arrowRef),\n              element: arrowRef,\n            },\n          },\n        },\n      }}\n      {...props}\n      title={\n        <React.Fragment>\n          {props.title}\n          <span className={arrow} ref={setArrowRef} />\n        </React.Fragment>\n      }\n    />\n  );\n}\n\nBootstrapTooltip.propTypes = {\n  title: PropTypes.node,\n};\n\nexport default function CustomizedTooltips(props) {\n  return (\n    <BootstrapTooltip {...props} title={props.title} placement={props.placement} />\n  );\n}\nCustomizedTooltips.propTypes = {\n  title: PropTypes.string.isRequired,\n  placement: PropTypes.string.isRequired\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CustomizedTooltips from 'components/tooltips/tooltip';\n\nexport default class AwesomeButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mouseEnter: false\n    };\n  }\n\n  mouseIn() {\n    this.setState({ mouseEnter: true });\n  }\n\n  mouseOut() {\n    this.setState({ mouseEnter: false });\n  }\n\n  render() {\n    return (\n      <CustomizedTooltips\n        title={this.props.title}\n        placement={this.props.placement}\n        enterDelay={500}\n      >\n        <button\n          type=\"button\"\n          className={\n            `${this.props.buttonClass} ${this.state.mouseEnter || this.props.active === this.props.buttonId\n              ? `${this.props.buttonClass}-hovered`\n              : ''}`}\n          onMouseEnter={() => this.mouseIn()}\n          onMouseLeave={() => this.mouseOut()}\n          onClick={() => this.props.onClickHandler()}\n        >\n          <i\n            className={this.props.iconClass}\n          />\n        </button>\n      </CustomizedTooltips>\n    );\n  }\n}\n\nAwesomeButton.propTypes = {\n  buttonId: PropTypes.string,\n  buttonClass: PropTypes.string,\n  iconClass: PropTypes.string.isRequired,\n  onClickHandler: PropTypes.func.isRequired,\n  active: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  placement: PropTypes.string.isRequired\n};\n\nAwesomeButton.defaultProps = {\n  buttonClass: 'awesome-button',\n  text: ''\n};\n","import $ from 'jquery';\nimport store from 'store/store';\n\nlet fps;\nstore.subscribe(() => {\n  fps = store.getState().fps || 3;\n});\nlet count = 0;\nlet anim;\n\nexport function animate() {\n  clearTimeout(anim); // stop old animation\n  const time = 1000 / fps; // calc animation speed\n  $('.preview')\n    .children()\n    .css({ display: 'none' }); // hide all canvas-images\n  if ($('.preview').children()[count]) {\n    $('.preview').children()[count].style.display = 'block'; // show only the \"count\"-th image\n  }\n  count += 1;\n  if (count === $('.preview').children().length) {\n    count = 0; // restart counting if all images were shown\n  }\n\n  anim = setTimeout(animate, time); // repeat animation\n}\n\n// make image from canvas drawing\nexport function makeImage(id) {\n  const imageSRC = $(`#canvas${id}`)[0].toDataURL('image/png');\n  const framesSrcUpdate = {\n    update: id,\n    src: imageSRC\n  }\n  store.dispatch({ type: 'framesArray', value: framesSrcUpdate });\n  if ($('.preview').children().length > 1) {\n    count = 0;\n    animate();\n  } else {\n    clearTimeout(anim);\n  }\n}\n\nlet newWindow;\nlet id = 0;\n\n// open new window to watch animation in full-size mode\nexport function fullSizePreview() {\n  if (newWindow) {\n    id += 1;\n    newWindow.close();\n  }\n  newWindow = window.open('about:blank', `window${id}`, 'width=300,height=300');\n\n  // cloning animation box with images to new window\n  const newPreview = $('.preview')\n    .clone()\n    .appendTo(newWindow.document.body)\n    .css({ display: 'flex', 'justify-content': 'center', 'align-items': 'center', height: '100%' });\n  $(newWindow.document.body).css({\n    display: 'flex',\n    'justify-content': 'center',\n    'align-items': 'center'\n  });\n\n  const newFps = fps;\n  let newCount = 0;\n\n  function newAnimate() {\n    // clearTimeout(newAnim);\n    const time = 1000 / newFps;\n    newPreview.children().css({ display: 'none' });\n    if (newPreview.children()[newCount]) {\n      newPreview.children()[newCount].style.display = 'block';\n    }\n    newCount += 1;\n    if (newCount === newPreview.children().length) {\n      newCount = 0;\n    }\n    setTimeout(newAnimate, time);\n  }\n  // when new window loaded should start animation\n  $(newWindow).ready(newAnimate);\n}\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport 'components/tools/tools.css';\r\nimport toolButtonsClickHandler from 'components/functions/toolsFunctions/buttonsClickHandlers';\r\nimport store from 'store/store';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\n\r\nexport default class ToolsPanel extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      active: ''\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  activeToolSetter(tool) {\r\n    if (this.state.active === tool) {\r\n      this.setState({ active: null });\r\n      store.dispatch({ type: 'toolState', value: ['currentTool', ''] });\r\n      toolButtonsClickHandler(null);\r\n    } else {\r\n      this.setState({ active: tool });\r\n      store.dispatch({ type: 'toolState', value: ['currentTool', tool] });\r\n      toolButtonsClickHandler(tool);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div name=\"Tools\">\r\n        <div className=\"tool-panel\" id=\"tool-panel\">\r\n          <div className=\"tool-buttons-block\">\r\n            <AwesomeButton\r\n              buttonId=\"paintBucketTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('paintBucketTool')}\r\n              iconClass=\"fas fa-fill-drip\"\r\n              active={this.state.active}\r\n              title=\"Click on the area to paint it in chosen color\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"colorPickerTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('colorPickerTool')}\r\n              iconClass=\"fas fa-eye-dropper\"\r\n              active={this.state.active}\r\n              title=\"Click on any fragment to pick its color\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"penTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('penTool')}\r\n              iconClass=\"fas fa-pencil-alt\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"eraserTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('eraserTool')}\r\n              iconClass=\"fas fa-eraser\"\r\n              active={this.state.active}\r\n              title=\"Click on the area to erase it\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"strokeTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('strokeTool')}\r\n              iconClass=\"fas fa-slash\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw a line\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"rectangleTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('rectangleTool')}\r\n              iconClass=\"far fa-square\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw a rectangle\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"circleTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('circleTool')}\r\n              iconClass=\"far fa-circle\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw a circle\"\r\n              placement=\"right\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"color-panel\">\r\n          <AwesomeButton\r\n            buttonClass=\"color-switcher\"\r\n            onClickHandler={() => {\r\n              const current = this.props.toolState.currentColor;\r\n              const back = this.props.toolState.backColor;\r\n              store.dispatch({ type: 'toolState', value: ['currentColor', back] });\r\n              store.dispatch({ type: 'toolState', value: ['backColor', current] });\r\n            }}\r\n            iconClass=\"fas fa-retweet\"\r\n            title=\"Switch colors on click\"\r\n            placement=\"bottom-start\"\r\n            buttonId={null}\r\n            active={this.state.active}\r\n          />\r\n          <div className=\"color-block-upper\">\r\n            <input\r\n              type=\"color\"\r\n              name=\"colors\"\r\n              className=\"input-color\"\r\n              id=\"customed1\"\r\n              defaultValue={this.props.toolState.currentColor}\r\n              onChange={e => store.dispatch({ type: 'toolState', value: ['currentColor', $(e.target).val()] })}\r\n            />\r\n          </div>\r\n          <div className=\"color-block-under\">\r\n            <input\r\n              type=\"color\"\r\n              name=\"colors\"\r\n              className=\"input-color\"\r\n              id=\"customed2\"\r\n              defaultValue={this.props.toolState.backColor}\r\n              onChange={e => store.dispatch({ type: 'toolState', value: ['backColor', $(e.target).val()] })}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nToolsPanel.propTypes = {\r\n  toolState: PropTypes.object.isRequired\r\n};\r\n","import $ from 'jquery';\nimport store from 'store/store';\n\nlet customWidth;\nstore.subscribe(() => {\n  customWidth = store.getState().customWidth || 33;\n});\n\nlet endX;\nlet endY;\nlet mouseOverX;\nlet mouseOverY;\n\nexport function endCursorMove(e) {\n  const curCanv = document.querySelector('#drawCanvas');\n  const rect = curCanv.getBoundingClientRect();\n  const x = Math.round(e.clientX - rect.left);\n  const y = Math.round(e.clientY - rect.top);\n  const ctx = $('#drawCanvas')\n    .get(0)\n    .getContext('2d');\n  ctx.globalCompositeOperation = 'source-over';\n  ctx.fillStyle = 'gray';\n  ctx.strokeStyle = 'gray';\n  const width = $('#drawCanvas').width();\n  const canvasSize = Math.ceil(width / customWidth); // todo pass store as argument\n  endX = x;\n  endY = y;\n  const mouseMoveX = Math.floor(x / canvasSize) * canvasSize;\n  const mouseMoveY = Math.floor(y / canvasSize) * canvasSize;\n  if (mouseOverX > endX || mouseOverY > endY) {\n    ctx.clearRect(0, 0, width, width);\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  } else if (mouseOverX + canvasSize < endX || mouseOverY + canvasSize < endY) {\n    ctx.clearRect(0, 0, width, width);\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  }\n}\n\nexport function createCursorShadow(e) {\n  const width = $('#drawCanvas').width();\n  const curCanv = document.querySelector('#drawCanvas');\n  const canvasSize = Math.ceil(width / customWidth);\n  const rect = curCanv.getBoundingClientRect();\n  const x = Math.round(e.clientX - rect.left);\n  const y = Math.round(e.clientY - rect.top);\n  mouseOverX = Math.floor(x / canvasSize) * canvasSize;\n  mouseOverY = Math.floor(y / canvasSize) * canvasSize;\n  const ctx = $('#drawCanvas')\n    .get(0)\n    .getContext('2d');\n  ctx.globalCompositeOperation = 'source-over';\n  ctx.fillStyle = 'gray';\n  ctx.strokeStyle = 'gray';\n  ctx.fillRect(mouseOverX, mouseOverY, canvasSize, canvasSize);\n}\n\nexport function clearCanvas() {\n  const ctx = $('#drawCanvas')\n    .get(0)\n    .getContext('2d');\n  const width = $('#drawCanvas').width();\n  ctx.clearRect(0, 0, width, width);\n}\n","import $ from 'jquery';\n\nlet endX;\nlet endY;\nlet mouseDownX;\nlet mouseDownY;\n\n// drawing on mouse move\nexport function endDraw(e, currentCanvas, tool, customWidth, color) {\n  const drawCanv = document.querySelector('#drawCanvas');\n  const rect = drawCanv.getBoundingClientRect();\n  const x = Math.round(e.clientX - rect.left);\n  const y = Math.round(e.clientY - rect.top);\n  const ctx = $(`#canvas${currentCanvas}`)\n    .get(0)\n    .getContext('2d');\n  endX = x;\n  endY = y;\n  if (tool === 'penTool') {\n    ctx.fillStyle = color; // color depends on chosen color\n    ctx.strokeStyle = color;\n  } else if (tool === 'eraserTool') {\n    ctx.fillStyle = 'rgba(0, 0, 0, 1)';\n    ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\n  }\n\n  // calc pen size according to chosen canvas width\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n  // calc position and size of canvas rectangles according to pen size\n  const mouseMoveX = Math.floor(x / canvasSize) * canvasSize;\n  const mouseMoveY = Math.floor(y / canvasSize) * canvasSize;\n  if (mouseDownX > endX || mouseDownY > endY) {\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  } else if (mouseDownX + canvasSize < endX || mouseDownY + canvasSize < endY) {\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  }\n}\n\n// drawing on mouse click\nexport function startDraw(e, currentCanvas, tool, customWidth, color) {\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n  const drawCanv = document.querySelector('#drawCanvas');\n  const rect = drawCanv.getBoundingClientRect();\n  const x = Math.round(e.clientX - rect.left);\n  const y = Math.round(e.clientY - rect.top);\n  mouseDownX = Math.floor(x / canvasSize) * canvasSize;\n  mouseDownY = Math.floor(y / canvasSize) * canvasSize;\n  if (tool === 'penTool' || tool === 'eraserTool') {\n    const ctx = $(`#canvas${currentCanvas}`)\n      .get(0)\n      .getContext('2d');\n    if (tool === 'penTool') {\n      ctx.globalCompositeOperation = 'source-over';\n      ctx.fillStyle = color;\n      ctx.strokeStyle = color;\n    } else if (tool === 'eraserTool') {\n      ctx.fillStyle = 'rgba(0, 0, 0, 1)';\n      ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\n      ctx.globalCompositeOperation = 'destination-out';\n    }\n    ctx.fillRect(mouseDownX, mouseDownY, canvasSize, canvasSize);\n  }\n}\n\nlet startX;\nlet startY;\nlet lastX;\nlet lastY;\nlet radius;\n\nexport function endStroke(e, currentCanvas, tool, customWidth, color) {\n  const drawCanv = document.querySelector('#drawCanvas');\n  const rect = drawCanv.getBoundingClientRect();\n  const x = Math.floor(e.clientX - rect.left);\n  const y = Math.floor(e.clientY - rect.top);\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n  const drawCtx = $('#drawCanvas')\n    .get(0)\n    .getContext('2d');\n  const width = $('#drawCanvas').width();\n\n  lastX = x;\n  lastY = y;\n  drawCtx.clearRect(0, 0, width, width);\n  drawCtx.globalCompositeOperation = 'source-over';\n  drawCtx.strokeStyle = color;\n  drawCtx.lineWidth = canvasSize;\n  drawCtx.beginPath();\n  if (tool === 'strokeTool') {\n    drawCtx.moveTo(startX, startY);\n    drawCtx.lineTo(lastX, lastY);\n    drawCtx.stroke();\n  } else if (tool === 'rectangleTool') {\n    drawCtx.moveTo(startX, startY);\n    drawCtx.lineTo(lastX, startY);\n    drawCtx.lineTo(lastX, lastY);\n    drawCtx.lineTo(startX, lastY);\n    drawCtx.lineTo(startX, startY);\n    drawCtx.stroke();\n  } else if (tool === 'circleTool') {\n    radius =\n      Math.sqrt((startX - lastX) * (startX - lastX) + (startY - lastY) * (startY - lastY)) / 2;\n    drawCtx.arc(startX, startY, radius, 0, 2 * Math.PI);\n    drawCtx.stroke();\n  }\n  $('#drawCanvas').mouseup(() => {\n    const ctx = $(`#canvas${currentCanvas}`)\n      .get(0)\n      .getContext('2d');\n    ctx.globalCompositeOperation = 'source-over';\n    ctx.strokeStyle = color;\n    ctx.lineWidth = canvasSize;\n    ctx.beginPath();\n    if (tool === 'strokeTool') {\n      ctx.moveTo(startX, startY);\n      ctx.lineTo(lastX, lastY);\n      ctx.stroke();\n      drawCtx.clearRect(0, 0, width, width);\n    } else if (tool === 'rectangleTool') {\n      ctx.moveTo(startX, startY);\n      ctx.lineTo(lastX, startY);\n      ctx.lineTo(lastX, lastY);\n      ctx.lineTo(startX, lastY);\n      ctx.lineTo(startX, startY);\n      ctx.stroke();\n      drawCtx.clearRect(0, 0, width, width);\n    } else if (tool === 'circleTool') {\n      ctx.arc(startX, startY, radius, 0, 2 * Math.PI);\n      ctx.stroke();\n      drawCtx.clearRect(0, 0, width, width);\n    }\n    $('#drawCanvas').off('mouseup')\n  });\n}\n\nexport function startStroke(e, currentCanvas, tool, customWidth, color) {\n  const drawCanv = document.querySelector('#drawCanvas');\n  const rect = drawCanv.getBoundingClientRect();\n  const x = Math.floor(e.clientX - rect.left);\n  const y = Math.floor(e.clientY - rect.top);\n  startX = x;\n  startY = y;\n\n  $('#drawCanvas').mousemove(endStroke(e, currentCanvas, tool, customWidth, color));\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport $ from 'jquery';\nimport 'jquery-ui-sortable-npm';\nimport store from 'store/store';\nimport bg1 from 'assets/images/bg/bg1.png';\nimport { makeImage } from 'components/functions/preview';\nimport 'components/screens/frames/frames.css';\nimport { makeRandomId } from 'components/functions/random';\nimport * as canvas from 'components/functions/canvasManager';\n\nexport default class FramesWrapper extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      activeFrame: '',\n      hovered: ''\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.framesArray.length < 1) {\n      const id = makeRandomId();\n      this.setState({ activeFrame: id });\n      store.dispatch({ type: 'framesArray', value: { id, frameSRC: '' } });\n      store.dispatch({ type: 'currentCanvas', value: id });\n    } else {\n      this.setState({ activeFrame: this.props.framesArray[0].id });\n      store.dispatch({ type: 'currentCanvas', value: this.props.framesArray[0].id });\n    }\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.updateImagePreview()\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    store.dispatch({ type: 'framesArray', value: null });\n  }\n\n  onMouseEnterHandler(id) {\n    this.setState({ hovered: id });\n  }\n\n  onMouseLeaveHandler() {\n    this.setState({ hovered: '' });\n  }\n\n  updateImagePreview() {\n    this.props.framesArray.map(item => makeImage(item.id));\n  }\n\n  openCanvasHandler(frame) {\n    this.setState({ activeFrame: frame });\n    store.dispatch({ type: 'currentCanvas', value: frame });\n    setTimeout(() => {\n      this.updateImagePreview();\n    }, 200);\n  }\n\n  copyFrameHandler(frameID) {\n    const newFrameID = makeRandomId();\n    const obj = {\n      copy: frameID,\n      stateObj: { id: newFrameID, frameSRC: '' }\n    }\n    store.dispatch({ type: 'framesArray', value: obj });\n\n    setTimeout(() => {\n      canvas.copyCanvas(frameID, newFrameID);\n      this.openCanvasHandler(newFrameID);\n    }, 200);\n  }\n\n  addNewFrameHandler() {\n    const newFrameID = makeRandomId();\n    this.setState({ activeFrame: newFrameID });\n    store.dispatch({ type: 'framesArray', value: { id: newFrameID, frameSRC: '' } });\n    setTimeout(() => {\n      this.openCanvasHandler(newFrameID);\n    }, 200);\n  }\n\n  removeFrameHandler(id) {\n    store.dispatch({ type: 'framesArray', value: { delete: id } });\n    setTimeout(() => {\n      this.openCanvasHandler($('.frame-list').children().last()[0].id.split('frame')[1]);\n    }, 200);\n  }\n\n  dragFrameOnClick() {\n    $('#sortable').sortable();\n    $('#sortable').sortable('option', 'disabled', false);\n    $('#sortable').disableSelection();\n  }\n\n  dragOffOnClick(id, draggedFrom) {\n    $('#sortable').sortable('option', 'disabled', true);\n    Array.from($('#sortable').children()).forEach((item, i) => {\n      if (item.id === `frame${id}`) {\n        store.dispatch({ type: 'framesArray', value: { drag: draggedFrom, target: i, draggedFrame: id } });\n      }\n    })\n    setTimeout(() => {\n      this.openCanvasHandler(id);\n    }, 200);\n  }\n\n  render() {\n    return (\n      <div className=\"frame-box\"\n      >\n        <ul\n          id=\"sortable\"\n          className=\"frame-list\"\n        >\n          {this.props.framesArray.map((item, i) => (\n            <li\n              key={`frame-list-item-${item.id}`}\n              className={`ui-state-default frame ${this.state.activeFrame === item.id ? 'activeFrame' : ''}`}\n              id={`frame${item.id}`}\n              style={{ background: this.props.bg || `url(${bg1})` }}\n              onMouseEnter={() => this.onMouseEnterHandler(item.id)}\n              onMouseLeave={() => this.onMouseLeaveHandler()}\n              onClick={() => this.openCanvasHandler(item.id)}\n            >\n              <img\n                id={`preview-box${item.id}`}\n                className=\"preview-box\"\n                src={item.frameSRC}\n                alt=\"\"\n              />\n              <title className=\"number\">{i + 1}</title>\n              <span\n                className={\n                  `removeFrame ${\n                  (this.props.framesArray.length !== 1 && this.state.hovered === item.id)\n                    || (this.state.hovered === item.id && this.props.framesArray[0].id !== item.id)\n                    ? '' : 'minorZ'}`}\n                onClick={() => this.removeFrameHandler(item.id)}>\n                <i className=\"fas fa-trash-alt\" />\n              </span>\n              <span\n                id={item.id}\n                className={\n                  `dragFrame ${\n                  (this.props.framesArray.length !== 1 && this.state.hovered === item.id)\n                    || (this.state.hovered === item.id && this.props.framesArray[0].id !== item.id)\n                    ? '' : 'minorZ'}`}\n                onMouseDown={() => this.dragFrameOnClick()}\n                onMouseUp={() => this.dragOffOnClick(item.id, i)}\n              >\n                <i className=\"fas fa-arrows-alt\" />\n              </span>\n              <span\n                className={`copyFrame ${this.state.hovered === item.id ? '' : 'minorZ'}`}\n                onClick={() => this.copyFrameHandler(item.id)}>\n                <i className=\"fas fa-copy\" />\n              </span>\n            </li>\n          ))}\n        </ul>\n        <button\n          className=\"addNewFrame\"\n          onClick={() => this.addNewFrameHandler()}\n          type=\"button\"\n        >\n          Add new frame\n        </button>\n      </div>\n    );\n  }\n}\n\nFramesWrapper.propTypes = {\n  framesArray: PropTypes.array.isRequired,\n  bg: PropTypes.string.isRequired\n};\n","import $ from 'jquery';\n\n// copy target frame's canvas with content if the frame was cloned\nexport function copyCanvas(oldID, newID) {\n  const originalContext = $(`#canvas${oldID}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(\n    0,\n    0,\n    $(`#canvas${oldID}`).width(),\n    $(`#canvas${oldID}`).width()\n  );\n  const cloneContext = $(`#canvas${newID}`).get(0).getContext('2d');\n  cloneContext.putImageData(imageData, 0, 0);\n}\n\nexport function copyCanvasContext(n) {\n  const originalContext = $(`#canvas${n}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(\n    0,\n    0,\n    $(`#canvas${n}`).width(),\n    $(`#canvas${n}`).width()\n  );\n  return imageData;\n}\n\nexport function putImage(n, imageData) {\n  const cloneContext = $(`#canvas${n}`)\n    .get(0)\n    .getContext('2d');\n  cloneContext.putImageData(imageData, 0, 0);\n}\n","import { hexToRGB } from 'components/functions/colors';\n\nfunction getColorAtPixel(imageData, x, y) {\n  const { width, data } = imageData;\n\n  return {\n    r: data[4 * (width * y + x) + 0],\n    g: data[4 * (width * y + x) + 1],\n    b: data[4 * (width * y + x) + 2],\n    a: data[4 * (width * y + x) + 3]\n  };\n}\n\nfunction setColorAtPixel(imageData, color, x, y) {\n  const { width, data } = imageData;\n\n  data[4 * (width * y + x) + 0] = color.r;\n  data[4 * (width * y + x) + 1] = color.g;\n  data[4 * (width * y + x) + 2] = color.b;\n  data[4 * (width * y + x) + 3] = color.a;\n}\n\nfunction colorMatch(a, b) {\n  return a.r === b.r && a.g === b.g && a.b === b.b && a.a === b.a;\n}\n\nfunction floodFill(imageData, newColor, x, y) {\n  const { width, height } = imageData;\n  const stack = [];\n  const baseColor = getColorAtPixel(imageData, x, y);\n  let clicked = { x, y };\n\n  // Check if base color and new color are the same\n  if (colorMatch(baseColor, newColor)) {\n    return;\n  }\n\n  // Add the clicked location to stack\n  stack.push({ x: clicked.x, y: clicked.y });\n\n  while (stack.length) {\n    clicked = stack.pop();\n    let goDown = true; // Vertical is assumed to be true\n    let goUp = true; // Vertical is assumed to be true\n    let goLeft = false;\n    let goRight = false;\n\n    // Move to top most goDown pixel\n    while (goUp && clicked.y >= 0) {\n      clicked.y -= 1;\n      goUp = colorMatch(getColorAtPixel(imageData, clicked.x, clicked.y), baseColor);\n    }\n\n    // Move downward\n    while (goDown && clicked.y < height) {\n      setColorAtPixel(imageData, newColor, clicked.x, clicked.y);\n\n      // Check left\n      if (\n        clicked.x - 1 >= 0 &&\n        colorMatch(getColorAtPixel(imageData, clicked.x - 1, clicked.y), baseColor)\n      ) {\n        if (!goLeft) {\n          goLeft = true;\n          stack.push({ x: clicked.x - 1, y: clicked.y });\n        }\n      } else {\n        goLeft = false;\n      }\n\n      // Check right\n      if (\n        clicked.x + 1 < width &&\n        colorMatch(getColorAtPixel(imageData, clicked.x + 1, clicked.y), baseColor)\n      ) {\n        if (!goRight) {\n          stack.push({ x: clicked.x + 1, y: clicked.y });\n          goRight = true;\n        }\n      } else {\n        goRight = false;\n      }\n\n      clicked.y += 1;\n      goDown = colorMatch(getColorAtPixel(imageData, clicked.x, clicked.y), baseColor);\n    }\n  }\n}\n\nexport default function paintIt(e, num, color) {\n  const curCanv = document.querySelector(`#canvas${num}`);\n  const ctx = curCanv.getContext('2d');\n  const rgbColor = hexToRGB(color);\n  const col = { r: rgbColor.r, g: rgbColor.g, b: rgbColor.b, a: 255 };\n  ctx.fillStyle = color;\n  ctx.strokeStyle = color;\n  const rect = curCanv.getBoundingClientRect();\n  const x = Math.round(e.clientX - rect.left);\n  const y = Math.round(e.clientY - rect.top);\n  const imageData = ctx.getImageData(0, 0, curCanv.width, curCanv.height);\n  floodFill(imageData, col, x, y);\n  ctx.putImageData(imageData, 0, 0);\n}\n","export function rgbaToHex(r, g, b) {\n  let hexR = r.toString(16);\n  let hexG = g.toString(16);\n  let hexB = b.toString(16);\n  if (hexR.length < 2) {\n    hexR = `0${hexR}`;\n  }\n  if (hexG.length < 2) {\n    hexG = `0${hexG}`;\n  }\n  if (hexB.length < 2) {\n    hexB = `0${hexB}`;\n  }\n  return `#${hexR}${hexG}${hexB}`;\n}\n\nexport function rgbToHex(color) {\n  const hex = `${color}`;\n\n  const nums = /(.*?)rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/i.exec(hex);\n  const r = parseInt(nums[2], 10).toString(16);\n  const g = parseInt(nums[3], 10).toString(16);\n  const b = parseInt(nums[4], 10).toString(16);\n\n  return `#${r.length === 1 ? `0${r}` : r}${g.length === 1 ? `0${g}` : g}${\n    b.length === 1 ? `0${b}` : b\n    }`;\n}\n\nexport function hexToRGB(hexColor) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hexColor);\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null;\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport $ from 'jquery';\nimport store from 'store/store';\nimport 'components/screens/canvas/canvasDomBuilder.css';\nimport bg1 from 'assets/images/bg/bg1.png';\nimport { createCursorShadow, clearCanvas, endCursorMove } from 'components/functions/toolsFunctions/cursorShadow';\nimport { startDraw, endDraw, startStroke, endStroke } from 'components/functions/toolsFunctions/drawing';\nimport { makeImage } from 'components/functions/preview';\nimport paintIt from 'components/functions/toolsFunctions/paint';\nimport { rgbaToHex } from 'components/functions/colors';\n\nexport default class CanvasWrapper extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      size: '',\n      draw: false,\n      lines: false\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    const canvasWidth =\n      window.innerWidth - 500 < window.innerHeight - 155\n        ? window.innerWidth - 500\n        : window.innerHeight - 155;\n    this.setState({ size: canvasWidth > 350 ? canvasWidth : 350 });\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  mouseDownHandler(e) {\n    const tool = this.props.toolState.currentTool;\n    const curCanvas = this.props.currentCanvas;\n    const customWidth = this.props.settings.customWidth;\n    const color = this.props.toolState.currentColor;\n    if (tool === 'penTool' || tool === 'eraserTool') {\n      this.setState({ draw: true });\n      clearCanvas();\n      startDraw(e, curCanvas, tool, customWidth, color);\n      store.dispatch({ type: 'palette', value: color });\n    } else if (tool === 'strokeTool' || tool === 'rectangleTool' || tool === 'circleTool') {\n      this.setState({ lines: true });\n      clearCanvas();\n      startStroke(e, curCanvas, tool, customWidth, color);\n      store.dispatch({ type: 'palette', value: color });\n    } else if (tool === 'colorPickerTool') {\n      if ($(e.target).is('.canvas')) {\n        const curCanv = document.querySelector(`#canvas${curCanvas}`);\n        const rect = curCanv.getBoundingClientRect();\n        const x = Math.round(e.clientX - rect.left);\n        const y = Math.round(e.clientY - rect.top);\n        const ctx = curCanv.getContext('2d').getImageData(x, y, 1, 1).data;\n        if (ctx[3] > 0) {\n          const hexColor = rgbaToHex(ctx[0], ctx[1], ctx[2]);\n          store.dispatch({ type: 'toolState', value: ['currentColor', hexColor] });\n          store.dispatch({ type: 'palette', value: hexColor });\n        }\n      }\n    }\n  }\n\n  mouseMoveHandler(e) {\n    const tool = this.props.toolState.currentTool;\n    const curCanvas = this.props.currentCanvas;\n    const customWidth = this.props.settings.customWidth;\n    const color = this.props.toolState.currentColor;\n    if (tool) {\n      if (this.state.draw === true) {\n        endDraw(e, curCanvas, tool, customWidth, color);\n      } else {\n        endCursorMove(e);\n      }\n      if (this.state.lines === true) {\n        endStroke(e, curCanvas, tool, customWidth, color);\n      }\n    }\n  }\n\n  mouseUpHandler() {\n    const tool = this.props.toolState.currentTool;\n    const curCanvas = this.props.currentCanvas;\n    this.setState({ draw: false, lines: false });\n    if (!tool) {\n      return;\n    }\n    clearCanvas();\n    setTimeout(() => {\n      makeImage(curCanvas);\n    }, 500);\n  }\n\n  render() {\n    return (\n      <div className=\"canvas-wrapper\">\n        <div id=\"canvas-block\" className=\"canvas-block\">\n          {this.props.framesArray.length >= 1 ? this.props.framesArray.map((item, i) => {\n            return (\n              <canvas\n                key={item.id}\n                id={`canvas${item.id}`}\n                className={`canvas ${this.props.currentCanvas === item.id ? '' : 'hidden'}`}\n                style={{ background: this.props.settings.currentBG || `url(${bg1}) repeat` }}\n                width={this.state.size}\n                height={this.state.size}\n                onClick={e => this.mouseDownHandler(e)}\n              />\n            )\n          }) :\n            (\n              <canvas\n                id={this.props.currentCanvas}\n                className='canvas'\n                style={{ background: `url(${bg1}) repeat` }}\n                width={this.state.size}\n                height={this.state.size}\n                onClick={e => this.mouseDownHandler(e)}\n              />\n            )\n          }\n        </div>\n        <canvas\n          id=\"drawCanvas\"\n          className=\"drawCanvas\"\n          onMouseOver={e => {\n            if (this.props.toolState.currentTool) {\n              if (this.state.draw === false) {\n                createCursorShadow(e);\n              }\n            }\n          }}\n          onClick={e => {\n            if (this.props.toolState.currentTool === 'paintBucketTool') {\n              const curColor = this.props.toolState.currentColor;\n              paintIt(e, this.props.currentCanvas, curColor);\n              store.dispatch({ type: 'palette', value: curColor });\n            }\n          }}\n          onMouseDown={e => this.mouseDownHandler(e)}\n          onMouseMove={e => this.mouseMoveHandler(e)}\n          onMouseLeave={() => {\n            if (this.state.draw === false) {\n              clearCanvas();\n            }\n          }}\n          onMouseUp={e => this.mouseUpHandler(e)}\n          onFocus={() => undefined}\n          width={this.state.size}\n          height={this.state.size}\n        />\n      </div>\n    );\n  }\n}\n\nCanvasWrapper.propTypes = {\n  toolState: PropTypes.object.isRequired,\n  currentCanvas: PropTypes.string.isRequired,\n  settings: PropTypes.object.isRequired,\n  framesArray: PropTypes.array.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport 'components/screens/preview/preview.css';\nimport { fullSizePreview } from 'components/functions/preview';\n\nexport default class PreviewBlock extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: ''\n    };\n  }\n\n  hoverIn() {\n    if (this.mounted) {\n      this.setState({ active: true });\n    }\n  }\n\n  hoverOut() {\n    if (this.mounted) {\n      this.setState({ active: false });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        id=\"preview-area\"\n        className=\"preview-area\"\n        onMouseEnter={() => this.hoverIn()}\n        onMouseLeave={() => this.hoverOut()}\n      >\n        <div className=\"preview\">\n          {this.props.framesArray.map(item => (\n            <img\n              key={`image${item.id}`}\n              id={`imagePreview${item.id}`}\n              src={item.frameSRC}\n              style={{ width: '100%' }}\n              alt=\"\"\n            />\n          ))}\n        </div>\n        <div\n          className={`preview-open ${this.state.active ? '' : 'hidden'}`}\n          id=\"preview-open\"\n          role=\"button\"\n          tabIndex=\"-1\"\n          onKeyPress={undefined}\n          onClick={fullSizePreview}\n        >\n          <i className=\"fas fa-external-link-alt\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nPreviewBlock.propTypes = {\n  framesArray: PropTypes.array.isRequired\n};","import React from 'react';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\nimport 'components/menuComponents/layers-list/layers-list.css';\r\n\r\nclass Layers extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      hovered: '',\r\n      mouseEnter: false\r\n    };\r\n  }\r\n\r\n  popHintOnMouseOver(e) {\r\n    const hovered = e.target.getAttribute('id');\r\n    if (this.state.hovered === hovered) {\r\n      this.setState({ hovered: '' });\r\n    } else {\r\n      this.setState({ hovered });\r\n    }\r\n  }\r\n\r\n  mouseIn() {\r\n    this.setState({ mouseEnter: true });\r\n  }\r\n\r\n  mouseOut() {\r\n    this.setState({ mouseEnter: false });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"layers-box\"\r\n        onMouseOver={e => this.popHintOnMouseOver(e)}\r\n        onFocus={() => undefined}\r\n      >\r\n        <div className=\"layer-outlet\">\r\n          <span className=\"layer-title\">Layers</span>\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button layer-preview\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-eye\"\r\n            active={null}\r\n            title=\"Preview all layers\"\r\n            placement=\"top-end\"\r\n          />\r\n        </div>\r\n        <div className=\"layer-buttons-box\">\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-plus\"\r\n            active={null}\r\n            title=\"Create a layer\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-arrow-up\"\r\n            active={null}\r\n            title=\"Move layer up\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-arrow-down\"\r\n            active={null}\r\n            title=\"Move layer down\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-pen\"\r\n            active={null}\r\n            title=\"Edit layer name\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-compress\"\r\n            active={null}\r\n            title=\"Merge with layer below\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-times\"\r\n            active={null}\r\n            title=\"Delete selected layer\"\r\n            placement=\"top-end\"\r\n          />\r\n        </div>\r\n        <ul className=\"layer-list\">\r\n          <li className=\"layer-item\">Layer 1</li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Layers;\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class SampleButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <button\n        type=\"button\"\n        style={{ background: this.props.color }}\n        className={`palette-sample ${\n          this.props.state === this.props.color ? 'active-palette-sample' : ''\n          }`}\n        onClick={this.props.onClickHandler}\n      />\n    );\n  }\n}\n\nSampleButton.propTypes = {\n  color: PropTypes.string.isRequired,\n  state: PropTypes.string.isRequired,\n  onClickHandler: PropTypes.func.isRequired\n};\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\nimport SampleButton from 'components/buttons/paletteSampleButton';\r\nimport 'components/menuComponents/palettes/palettes.css';\r\nimport store from 'store/store';\r\nimport { rgbToHex } from 'components/functions/colors';\r\n\r\nclass Palettes extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      hovered: '',\r\n      mouseEnter: false,\r\n      color: [],\r\n      changed: false\r\n    };\r\n  }\r\n\r\n  addPalettesOnClick() { }\r\n\r\n  editPalettesOnClick() { }\r\n\r\n  choosePalettesOnClick() { }\r\n\r\n  changeCurColor(e) {\r\n    const color = $(e.target).css('background-color');\r\n    const hexColor = rgbToHex(color)\r\n    store.dispatch({ type: 'toolState', value: ['currentColor', hexColor] });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"palettes-box\">\r\n        <div className=\"palettes-outlet\">\r\n          <span className=\"palettes-title\">Palettes</span>\r\n        </div>\r\n        <div className=\"palettes-buttons-box\">\r\n          <AwesomeButton\r\n            buttonClass=\"palettes-button\"\r\n            onClickHandler={() => this.addPalettesOnClick()}\r\n            iconClass=\"fas fa-plus\"\r\n            active={null}\r\n            title=\"Create a new palette\"\r\n            placement=\"top-end\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            id=\"palettes-dropdown-list\"\r\n            className=\"palettes-button colors-list\"\r\n            onMouseEnter={() => this.setState({ hovered: true })}\r\n            onMouseLeave={() => this.setState({ hovered: false })}\r\n            onClick={() => this.choosePalettesOnClick()}\r\n          >\r\n            Current colors\r\n            <i\r\n              className={`colors-list-arrow fas fa-sort-down ${\r\n                this.state.hovered ? 'colors-list-arrow-hovered' : ''\r\n                }`}\r\n            />\r\n          </button>\r\n          <AwesomeButton\r\n            buttonClass=\"palettes-button\"\r\n            onClickHandler={() => this.editPalettesOnClick()}\r\n            iconClass=\"fas fa-pen\"\r\n            active={null}\r\n            title=\"Palette options\"\r\n            placement=\"top-end\"\r\n          />\r\n        </div>\r\n        <ul className=\"palettes-list\">\r\n          <span className={`palette-colors-isempty ${this.props.colorSamples.length > 0 ? 'hidden' : ''}`}>\r\n            No colors in this palette yet\r\n          </span>\r\n          {this.props.colorSamples.map(item => (\r\n            <li key={item} id={item} className=\"palette-sample-list\">\r\n              <SampleButton\r\n                color={item}\r\n                state={this.props.toolState.currentColor}\r\n                onClickHandler={e => this.changeCurColor(e)}\r\n              />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPalettes.propTypes = {\r\n  colorSamples: PropTypes.array.isRequired,\r\n  toolState: PropTypes.object.isRequired\r\n}\r\n\r\nexport default Palettes;\r\n","import React from 'react';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/settings/settings.css';\r\nimport PropTypes from 'prop-types';\r\nimport store from 'store/store';\r\n\r\nexport default class Settings extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      active: 'bg1'\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  addActiveOnClick(e) {\r\n    const clicked = e.target.getAttribute('id');\r\n    const bg = $(e.target).css('background-image');\r\n    this.setState({ active: clicked });\r\n    store.dispatch({ type: 'settings', value: ['currentBG', bg] });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`general-settings-block ${this.props.active === 'settings' ? 'flexed' : 'hidden'}`}\r\n      >\r\n        <div className=\"current-bg\">\r\n          <span className=\"default-bg bold\">Background</span>\r\n          <div className=\"general-settings-buttons-area\">\r\n            {['bg1', 'bg2', 'bg3', 'bg4'].map(item => (\r\n              <button\r\n                key={item}\r\n                type=\"button\"\r\n                id={item}\r\n                onClick={e => this.addActiveOnClick(e)}\r\n                className={`general-settings-button ${item} ${\r\n                  this.state.active === item ? 'active-button' : 'not-active-button'\r\n                  }`}\r\n              />\r\n            ))}\r\n          </div>\r\n          <p>Set default background</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSettings.propTypes = {\r\n  active: PropTypes.string.isRequired\r\n}\r\n","import React from 'react';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/resize/resize.css';\r\nimport store from 'store/store';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class ResizeCanvas extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      customWidth: 33,\r\n      maxWidth: '',\r\n      newWidth: '',\r\n      error: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ maxWidth: $('#drawCanvas').width() });\r\n  }\r\n\r\n  resizeCanvasOnClickHandler() {\r\n    const newWidth = this.state.newWidth;\r\n    if (newWidth > 0 && newWidth < this.state.maxWidth) {\r\n      this.setState({ customWidth: newWidth });\r\n      store.dispatch({ type: 'settings', value: ['customWidth', newWidth] });\r\n    } else {\r\n      this.setState({ error: true });\r\n    }\r\n    $('#resize-input').val('');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`resize-canvas-block ${\r\n          this.props.active === 'resize-settings' ? 'flexed' : 'hidden'\r\n          }`}\r\n      >\r\n        <div className=\"current-size\">\r\n          <span className=\"default-size bold\">current size</span>\r\n          <p>\r\n            {`Width `}\r\n            <span className=\"default-width bold\" id=\"current-width\">\r\n              {this.state.customWidth}\r\n            </span>\r\n            px\r\n          </p>\r\n          <p>\r\n            Height\r\n            <span className=\"default-width bold\" id=\"current-height\">\r\n              {this.state.customWidth}\r\n            </span>\r\n            px\r\n          </p>\r\n        </div>\r\n        <div className=\"resize-canvas\">\r\n          <span className=\"resize bold\">resize</span>\r\n          <p className=\"new-width-block\">\r\n            <span>1 - </span>\r\n            <span id=\"new-width\" className=\"canvas-width\">\r\n              {this.state.maxWidth}\r\n            </span>\r\n            <span>px</span>\r\n            <input\r\n              type=\"number\"\r\n              className=\"resize-input\"\r\n              id=\"resize-input\"\r\n              min=\"1\"\r\n              onKeyPress={e => {\r\n                if (e.key === 'Enter') {\r\n                  this.resizeCanvasOnClickHandler(e);\r\n                }\r\n              }}\r\n              onChange={e => this.setState({ newWidth: e.target.value })}\r\n            />\r\n          </p>\r\n          <p id=\"error-message\" className={`error-message ${this.state.error ? '' : 'hidden'}`}>\r\n            {`Size can be from 1 to ${this.state.maxWidth} px`}\r\n          </p>\r\n          <button\r\n            id=\"resize-button\"\r\n            className=\"resize-button\"\r\n            type=\"button\"\r\n            onClick={() => this.resizeCanvasOnClickHandler()}\r\n          >\r\n            Change canvas size\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nResizeCanvas.propTypes = {\r\n  active: PropTypes.string.isRequired,\r\n  currentCanvas: PropTypes.string.isRequired\r\n}\r\n","import * as firebase from 'firebase';\n\nconst config = {\n  apiKey: 'AIzaSyB7L9YDQre3TEMDbonPKJh9oiT0LB8MPME',\n  authDomain: 'piskel-clone-1561243542927.firebaseapp.com',\n  databaseURL: 'https://piskel-clone-1561243542927.firebaseio.com',\n  projectId: 'piskel-clone-1561243542927',\n  storageBucket: '',\n  messagingSenderId: '842905832916',\n  appId: '1:842905832916:web:bd7859a38165e1b7'\n};\n\nfirebase.initializeApp(config);\n\nexport default firebase;\n","import firebase from '../../firebase/firebase';\nimport store from 'store/store';\n\nexport function writeUserData(userId, project, frames, gif, date, time, title, description, fps) {\n  firebase\n    .database()\n    .ref(`users/${userId}/${project}`)\n    .set({\n      frames,\n      gif,\n      date,\n      time,\n      title,\n      description,\n      fps\n    });\n}\n\nexport function deleteFromDB(DBitem) {\n  firebase\n    .database()\n    .ref(DBitem)\n    .set(null);\n}\n\nexport function getDBdata(DBitem) {\n  let projects = {};\n  projects[DBitem] = {}\n  firebase\n    .database()\n    .ref(`/users/${DBitem}`)\n    .once('value')\n    .then(snapshot => {\n      projects[DBitem] = snapshot.val();\n      store.dispatch({ type: 'allProjects', value: projects });\n    });\n}\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable prettier/prettier */\n/* eslint-disable func-names */\n/* eslint-disable no-bitwise */\n/* eslint-disable prefer-rest-params */\n/* eslint-disable no-empty */\n/* eslint-disable no-var */\n/* eslint-disable no-use-before-define */\n/* eslint-disable no-lonely-if */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-shadow */\n/* eslint-disable prefer-const */\n/*\n * NeuQuant Neural-Net Quantization Algorithm\n * ------------------------------------------\n *\n * Copyright (c) 1994 Anthony Dekker\n *\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\n * the algorithm.\n *\n * Any party obtaining a copy of these files from the author, directly or\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\n * this software and documentation files (the \"Software\"), including without\n * limitation the rights to use, copy, modify, merge, publish, distribute,\n * sublicense, and/or sell copies of the Software, and to permit persons who\n * receive copies from any such party to do so, with the only requirement being\n * that this copyright notice remain intact.\n */\n\n/*\n * This class handles Neural-Net quantization algorithm\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\n\nconst NeuQuant = function () {\n  let exports = {};\n  let netsize = 256; /* number of colours used */\n\n  /* four primes near 500 - assume no image has a length so large */\n  /* that it is divisible by all four primes */\n\n  let prime1 = 499;\n  let prime2 = 491;\n  let prime3 = 487;\n  let prime4 = 503;\n  let minpicturebytes = 3 * prime4; /* minimum size for input image */\n\n  /*\n   * Program Skeleton ---------------- [select samplefac in range 1..30] [read\n   * image from input file] pic = (unsigned char*) malloc(3*width*height);\n   * initnet(pic,3*width*height,samplefac); learn(); unbiasnet(); [write output\n   * image header, using writecolourmap(f)] inxbuild(); write output image using\n   * inxsearch(b,g,r)\n   */\n\n  /*\n   * Network Definitions -------------------\n   */\n\n  let maxnetpos = netsize - 1;\n  let netbiasshift = 4; /* bias for colour values */\n  let ncycles = 100; /* no. of learning cycles */\n\n  /* defs for freq and bias */\n  let intbiasshift = 16; /* bias for fractions */\n  let intbias = 1 << intbiasshift;\n  let gammashift = 10; /* gamma = 1024 */\n  let gamma = 1 << gammashift;\n  let betashift = 10;\n  let beta = intbias >> betashift; /* beta = 1/1024 */\n  let betagamma = intbias << (gammashift - betashift);\n\n  /* defs for decreasing radius factor */\n  let initrad = netsize >> 3; /* for 256 cols, radius starts */\n  let radiusbiasshift = 6; /* at 32.0 biased by 6 bits */\n  let radiusbias = 1 << radiusbiasshift;\n  let initradius = initrad * radiusbias; /* and decreases by a */\n  let radiusdec = 30; /* factor of 1/30 each cycle */\n\n  /* defs for decreasing alpha factor */\n  let alphabiasshift = 10; /* alpha starts at 1.0 */\n  let initalpha = 1 << alphabiasshift;\n  let alphadec; /* biased by 10 bits */\n\n  /* radbias and alpharadbias used for radpower calculation */\n  let radbiasshift = 8;\n  let radbias = 1 << radbiasshift;\n  let alpharadbshift = alphabiasshift + radbiasshift;\n  let alpharadbias = 1 << alpharadbshift;\n\n  /*\n   * Types and Global Variables --------------------------\n   */\n\n  let thepicture; /* the input image itself */\n  let lengthcount; /* lengthcount = H*W*3 */\n  let samplefac; /* sampling factor 1..30 */\n\n  // typedef int pixel[4]; /* BGRc */\n  let network; /* the network itself - [netsize][4] */\n  let netindex = [];\n\n  /* for network lookup - really 256 */\n  let bias = [];\n\n  /* bias and freq arrays for learning */\n  let freq = [];\n  let radpower = [];\n\n  let NeuQuant = (exports.NeuQuant = function NeuQuant(thepic, len, sample) {\n    let i;\n    let p;\n\n    thepicture = thepic;\n    lengthcount = len;\n    samplefac = sample;\n\n    network = new Array(netsize);\n\n    for (i = 0; i < netsize; i++) {\n      network[i] = new Array(4);\n      p = network[i];\n      p[0] = p[1] = p[2] = (i << (netbiasshift + 8)) / netsize;\n      freq[i] = intbias / netsize; /* 1/netsize */\n      bias[i] = 0;\n    }\n  });\n\n  let colorMap = function colorMap() {\n    let map = [];\n    let index = new Array(netsize);\n\n    for (let i = 0; i < netsize; i++) index[network[i][3]] = i;\n\n    let k = 0;\n    for (let l = 0; l < netsize; l++) {\n      let j = index[l];\n      map[k++] = network[j][0];\n      map[k++] = network[j][1];\n      map[k++] = network[j][2];\n    }\n\n    return map;\n  };\n\n  /*\n   * Insertion sort of network and building of netindex[0..255] (to do after\n   * unbias)\n   * -------------------------------------------------------------------------------\n   */\n\n  let inxbuild = function inxbuild() {\n    let i;\n    let j;\n    let smallpos;\n    let smallval;\n    let p;\n    let q;\n    let previouscol;\n    let startpos;\n\n    previouscol = 0;\n    startpos = 0;\n    for (i = 0; i < netsize; i++) {\n      p = network[i];\n      smallpos = i;\n      smallval = p[1]; /* index on g */\n\n      /* find smallest in i..netsize-1 */\n      for (j = i + 1; j < netsize; j++) {\n        q = network[j];\n        if (q[1] < smallval) {\n          /* index on g */\n          smallpos = j;\n          smallval = q[1]; /* index on g */\n        }\n      }\n      q = network[smallpos];\n\n      /* swap p (i) and q (smallpos) entries */\n      if (i != smallpos) {\n        j = q[0];\n        q[0] = p[0];\n        p[0] = j;\n        j = q[1];\n        q[1] = p[1];\n        p[1] = j;\n        j = q[2];\n        q[2] = p[2];\n        p[2] = j;\n        j = q[3];\n        q[3] = p[3];\n        p[3] = j;\n      }\n\n      /* smallval entry is now in position i */\n\n      if (smallval != previouscol) {\n        netindex[previouscol] = (startpos + i) >> 1;\n\n        for (j = previouscol + 1; j < smallval; j++) netindex[j] = i;\n\n        previouscol = smallval;\n        startpos = i;\n      }\n    }\n\n    netindex[previouscol] = (startpos + maxnetpos) >> 1;\n    for (j = previouscol + 1; j < 256; j++) netindex[j] = maxnetpos; /* really 256 */\n  };\n\n  /*\n   * Main Learning Loop ------------------\n   */\n\n  let learn = function learn() {\n    let i;\n    let j;\n    let b;\n    let g;\n    let r;\n    let radius;\n    let rad;\n    let alpha;\n    let step;\n    let delta;\n    let samplepixels;\n    let p;\n    let pix;\n    let lim;\n\n    if (lengthcount < minpicturebytes) samplefac = 1;\n\n    alphadec = 30 + (samplefac - 1) / 3;\n    p = thepicture;\n    pix = 0;\n    lim = lengthcount;\n    samplepixels = lengthcount / (3 * samplefac);\n    delta = (samplepixels / ncycles) | 0;\n    alpha = initalpha;\n    radius = initradius;\n\n    rad = radius >> radiusbiasshift;\n    if (rad <= 1) rad = 0;\n\n    for (i = 0; i < rad; i++) radpower[i] = alpha * (((rad * rad - i * i) * radbias) / (rad * rad));\n\n    if (lengthcount < minpicturebytes) step = 3;\n    else if (lengthcount % prime1 !== 0) step = 3 * prime1;\n    else {\n      if (lengthcount % prime2 !== 0) step = 3 * prime2;\n      else if ((lengthcount % prime3) !== 0) step = 3 * prime3;\n      else step = 3 * prime4;\n    }\n\n    i = 0;\n    while (i < samplepixels) {\n      b = (p[pix + 0] & 0xff) << netbiasshift;\n      g = (p[pix + 1] & 0xff) << netbiasshift;\n      r = (p[pix + 2] & 0xff) << netbiasshift;\n      j = contest(b, g, r);\n\n      altersingle(alpha, j, b, g, r);\n      if (rad !== 0) alterneigh(rad, j, b, g, r); /* alter neighbours */\n\n      pix += step;\n      if (pix >= lim) pix -= lengthcount;\n\n      i++;\n\n      if (delta === 0) delta = 1;\n\n      if (i % delta === 0) {\n        alpha -= alpha / alphadec;\n        radius -= radius / radiusdec;\n        rad = radius >> radiusbiasshift;\n\n        if (rad <= 1) rad = 0;\n\n        for (j = 0; j < rad; j++)\n          radpower[j] = alpha * (((rad * rad - j * j) * radbias) / (rad * rad));\n      }\n    }\n  };\n\n  /*\n   ** Search for BGR values 0..255 (after net is unbiased) and return colour\n   * index\n   * ----------------------------------------------------------------------------\n   */\n\n  let map = (exports.map = function map(b, g, r) {\n    let i;\n    let j;\n    let dist;\n    let a;\n    let bestd;\n    let p;\n    let best;\n\n    bestd = 1000; /* biggest possible dist is 256*3 */\n    best = -1;\n    i = netindex[g]; /* index on g */\n    j = i - 1; /* start at netindex[g] and work outwards */\n\n    while (i < netsize || j >= 0) {\n      if (i < netsize) {\n        p = network[i];\n        dist = p[1] - g; /* inx key */\n\n        if (dist >= bestd) i = netsize;\n        /* stop iter */ else {\n          i++;\n          if (dist < 0) dist = -dist;\n          a = p[0] - b;\n          if (a < 0) a = -a;\n          dist += a;\n\n          if (dist < bestd) {\n            a = p[2] - r;\n            if (a < 0) a = -a;\n            dist += a;\n\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n\n      if (j >= 0) {\n        p = network[j];\n        dist = g - p[1]; /* inx key - reverse dif */\n\n        if (dist >= bestd) j = -1;\n        /* stop iter */ else {\n          j--;\n          if (dist < 0) dist = -dist;\n          a = p[0] - b;\n          if (a < 0) a = -a;\n          dist += a;\n\n          if (dist < bestd) {\n            a = p[2] - r;\n            if (a < 0) a = -a;\n            dist += a;\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n    }\n\n    return best;\n  });\n\n  let process = (exports.process = function process() {\n    learn();\n    unbiasnet();\n    inxbuild();\n    return colorMap();\n  });\n\n  /*\n   * Unbias network to give byte values 0..255 and record position i to prepare\n   * for sort\n   * -----------------------------------------------------------------------------------\n   */\n\n  var unbiasnet = function unbiasnet() {\n    let i;\n    let j;\n\n    for (i = 0; i < netsize; i++) {\n      network[i][0] >>= netbiasshift;\n      network[i][1] >>= netbiasshift;\n      network[i][2] >>= netbiasshift;\n      network[i][3] = i; /* record colour no */\n    }\n  };\n\n  /*\n   * Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2)) in\n   * radpower[|i-j|]\n   * ---------------------------------------------------------------------------------\n   */\n\n  var alterneigh = function alterneigh(rad, i, b, g, r) {\n    let j;\n    let k;\n    let lo;\n    let hi;\n    let a;\n    let m;\n    let p;\n\n    lo = i - rad;\n    if (lo < -1) lo = -1;\n\n    hi = i + rad;\n    if (hi > netsize) hi = netsize;\n\n    j = i + 1;\n    k = i - 1;\n    m = 1;\n\n    while (j < hi || k > lo) {\n      a = radpower[m++];\n\n      if (j < hi) {\n        p = network[j++];\n\n        try {\n          p[0] -= (a * (p[0] - b)) / alpharadbias;\n          p[1] -= (a * (p[1] - g)) / alpharadbias;\n          p[2] -= (a * (p[2] - r)) / alpharadbias;\n        } catch (e) { } // prevents 1.3 miscompilation\n      }\n\n      if (k > lo) {\n        p = network[k--];\n\n        try {\n          p[0] -= (a * (p[0] - b)) / alpharadbias;\n          p[1] -= (a * (p[1] - g)) / alpharadbias;\n          p[2] -= (a * (p[2] - r)) / alpharadbias;\n        } catch (e) { }\n      }\n    }\n  };\n\n  /*\n   * Move neuron i towards biased (b,g,r) by factor alpha\n   * ----------------------------------------------------\n   */\n\n  var altersingle = function altersingle(alpha, i, b, g, r) {\n    /* alter hit neuron */\n    let n = network[i];\n    n[0] -= (alpha * (n[0] - b)) / initalpha;\n    n[1] -= (alpha * (n[1] - g)) / initalpha;\n    n[2] -= (alpha * (n[2] - r)) / initalpha;\n  };\n\n  /*\n   * Search for biased BGR values ----------------------------\n   */\n\n  var contest = function contest(b, g, r) {\n    /* finds closest neuron (min dist) and updates freq */\n    /* finds best neuron (min dist-bias) and returns position */\n    /* for frequently chosen neurons, freq[i] is high and bias[i] is negative */\n    /* bias[i] = gamma*((1/netsize)-freq[i]) */\n\n    let i;\n    let dist;\n    let a;\n    let biasdist;\n    let betafreq;\n    let bestpos;\n    let bestbiaspos;\n    let bestd;\n    let bestbiasd;\n    let n;\n\n    bestd = ~(1 << 31);\n    bestbiasd = bestd;\n    bestpos = -1;\n    bestbiaspos = bestpos;\n\n    for (i = 0; i < netsize; i++) {\n      n = network[i];\n      dist = n[0] - b;\n      if (dist < 0) dist = -dist;\n      a = n[1] - g;\n      if (a < 0) a = -a;\n      dist += a;\n      a = n[2] - r;\n      if (a < 0) a = -a;\n      dist += a;\n\n      if (dist < bestd) {\n        bestd = dist;\n        bestpos = i;\n      }\n\n      biasdist = dist - (bias[i] >> (intbiasshift - netbiasshift));\n\n      if (biasdist < bestbiasd) {\n        bestbiasd = biasdist;\n        bestbiaspos = i;\n      }\n\n      betafreq = freq[i] >> betashift;\n      freq[i] -= betafreq;\n      bias[i] += betafreq << gammashift;\n    }\n\n    freq[bestpos] += beta;\n    bias[bestpos] -= betagamma;\n    return bestbiaspos;\n  };\n\n  NeuQuant.apply(this, arguments);\n  return exports;\n};\n\nexport { NeuQuant };\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-continue */\n/* eslint-disable no-unused-vars */\n/* eslint-disable prefer-rest-params */\n/* eslint-disable func-names */\n/* eslint-disable camelcase */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-shadow */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-labels */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-use-before-define */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-var */\n/* eslint-disable prefer-const */\n/**\n * This class handles LZW encoding\n * Adapted from Jef Poskanzer's Java port by way of J. M. G. Elliott.\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\n\nconst LZWEncoder = function() {\n  let exports = {};\n  let EOF = -1;\n  let imgW;\n  let imgH;\n  let pixAry;\n  let initCodeSize;\n  let remaining;\n  let curPixel;\n\n  // GIFCOMPR.C - GIF Image compression routines\n  // Lempel-Ziv compression based on 'compress'. GIF modifications by\n  // David Rowley (mgardi@watdcsu.waterloo.edu)\n  // General DEFINEs\n\n  let BITS = 12;\n  let HSIZE = 5003; // 80% occupancy\n\n  // GIF Image compression - modified 'compress'\n  // Based on: compress.c - File compression ala IEEE Computer, June 1984.\n  // By Authors: Spencer W. Thomas (decvax!harpo!utah-cs!utah-gr!thomas)\n  // Jim McKie (decvax!mcvax!jim)\n  // Steve Davies (decvax!vax135!petsd!peora!srd)\n  // Ken Turkowski (decvax!decwrl!turtlevax!ken)\n  // James A. Woods (decvax!ihnp4!ames!jaw)\n  // Joe Orost (decvax!vax135!petsd!joe)\n\n  let n_bits; // number of bits/code\n  let maxbits = BITS; // user settable max # bits/code\n  let maxcode; // maximum code, given n_bits\n  let maxmaxcode = 1 << BITS; // should NEVER generate this code\n  let htab = [];\n  let codetab = [];\n  let hsize = HSIZE; // for dynamic table sizing\n  let free_ent = 0; // first unused entry\n\n  // block compression parameters -- after all codes are used up,\n  // and compression rate changes, start over.\n\n  let clear_flg = false;\n\n  // Algorithm: use open addressing double hashing (no chaining) on the\n  // prefix code / next character combination. We do a variant of Knuth's\n  // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime\n  // secondary probe. Here, the modular division first probe is gives way\n  // to a faster exclusive-or manipulation. Also do block compression with\n  // an adaptive reset, whereby the code table is cleared when the compression\n  // ratio decreases, but after the table fills. The variable-length output\n  // codes are re-sized at this point, and a special CLEAR code is generated\n  // for the decompressor. Late addition: construct the table according to\n  // file size for noticeable speed improvement on small files. Please direct\n  // questions about this implementation to ames!jaw.\n\n  let g_init_bits;\n  let ClearCode;\n  let EOFCode;\n\n  // output\n  // Output the given code.\n  // Inputs:\n  // code: A n_bits-bit integer. If == -1, then EOF. This assumes\n  // that n_bits =< wordsize - 1.\n  // Outputs:\n  // Outputs code to the file.\n  // Assumptions:\n  // Chars are 8 bits long.\n  // Algorithm:\n  // Maintain a BITS character long buffer (so that 8 codes will\n  // fit in it exactly). Use the VAX insv instruction to insert each\n  // code in turn. When the buffer fills up empty it and start over.\n\n  let cur_accum = 0;\n  let cur_bits = 0;\n  let masks = [\n    0x0000,\n    0x0001,\n    0x0003,\n    0x0007,\n    0x000f,\n    0x001f,\n    0x003f,\n    0x007f,\n    0x00ff,\n    0x01ff,\n    0x03ff,\n    0x07ff,\n    0x0fff,\n    0x1fff,\n    0x3fff,\n    0x7fff,\n    0xffff\n  ];\n\n  // Number of characters so far in this 'packet'\n  let a_count;\n\n  // Define the storage for the packet accumulator\n  let accum = [];\n\n  let LZWEncoder = (exports.LZWEncoder = function LZWEncoder(width, height, pixels, color_depth) {\n    imgW = width;\n    imgH = height;\n    pixAry = pixels;\n    initCodeSize = Math.max(2, color_depth);\n  });\n\n  // Add a character to the end of the current packet, and if it is 254\n  // characters, flush the packet to disk.\n  let char_out = function char_out(c, outs) {\n    accum[a_count++] = c;\n    if (a_count >= 254) flush_char(outs);\n  };\n\n  // Clear out the hash table\n  // table clear for block compress\n\n  let cl_block = function cl_block(outs) {\n    cl_hash(hsize);\n    free_ent = ClearCode + 2;\n    clear_flg = true;\n    output(ClearCode, outs);\n  };\n\n  // reset code table\n  var cl_hash = function cl_hash(hsize) {\n    for (let i = 0; i < hsize; ++i) htab[i] = -1;\n  };\n\n  let compress = (exports.compress = function compress(init_bits, outs) {\n    let fcode;\n    let i; /* = 0 */\n    let c;\n    let ent;\n    let disp;\n    let hsize_reg;\n    let hshift;\n\n    // Set up the globals: g_init_bits - initial number of bits\n    g_init_bits = init_bits;\n\n    // Set up the necessary values\n    clear_flg = false;\n    n_bits = g_init_bits;\n    maxcode = MAXCODE(n_bits);\n\n    ClearCode = 1 << (init_bits - 1);\n    EOFCode = ClearCode + 1;\n    free_ent = ClearCode + 2;\n\n    a_count = 0; // clear packet\n\n    ent = nextPixel();\n\n    hshift = 0;\n    for (fcode = hsize; fcode < 65536; fcode *= 2) ++hshift;\n    hshift = 8 - hshift; // set hash code range bound\n\n    hsize_reg = hsize;\n    cl_hash(hsize_reg); // clear hash table\n\n    output(ClearCode, outs);\n\n    outer_loop: while ((c = nextPixel()) != EOF) {\n      fcode = (c << maxbits) + ent;\n      i = (c << hshift) ^ ent; // xor hashing\n\n      if (htab[i] == fcode) {\n        ent = codetab[i];\n        continue;\n      } else if (htab[i] >= 0) {\n        // non-empty slot\n\n        disp = hsize_reg - i; // secondary hash (after G. Knott)\n        if (i === 0) disp = 1;\n\n        do {\n          if ((i -= disp) < 0) i += hsize_reg;\n\n          if (htab[i] == fcode) {\n            ent = codetab[i];\n            continue outer_loop;\n          }\n        } while (htab[i] >= 0);\n      }\n\n      output(ent, outs);\n      ent = c;\n      if (free_ent < maxmaxcode) {\n        codetab[i] = free_ent++; // code -> hashtable\n        htab[i] = fcode;\n      } else cl_block(outs);\n    }\n\n    // Put out the final code.\n    output(ent, outs);\n    output(EOFCode, outs);\n  });\n\n  // ----------------------------------------------------------------------------\n  let encode = (exports.encode = function encode(os) {\n    os.writeByte(initCodeSize); // write \"initial code size\" byte\n    remaining = imgW * imgH; // reset navigation variables\n    curPixel = 0;\n    compress(initCodeSize + 1, os); // compress and write the pixel data\n    os.writeByte(0); // write block terminator\n  });\n\n  // Flush the packet to disk, and reset the accumulator\n  var flush_char = function flush_char(outs) {\n    if (a_count > 0) {\n      outs.writeByte(a_count);\n      outs.writeBytes(accum, 0, a_count);\n      a_count = 0;\n    }\n  };\n\n  var MAXCODE = function MAXCODE(n_bits) {\n    return (1 << n_bits) - 1;\n  };\n\n  // ----------------------------------------------------------------------------\n  // Return the next pixel from the image\n  // ----------------------------------------------------------------------------\n\n  var nextPixel = function nextPixel() {\n    if (remaining === 0) return EOF;\n    --remaining;\n    let pix = pixAry[curPixel++];\n    return pix & 0xff;\n  };\n\n  var output = function output(code, outs) {\n    cur_accum &= masks[cur_bits];\n\n    if (cur_bits > 0) cur_accum |= code << cur_bits;\n    else cur_accum = code;\n\n    cur_bits += n_bits;\n\n    while (cur_bits >= 8) {\n      char_out(cur_accum & 0xff, outs);\n      cur_accum >>= 8;\n      cur_bits -= 8;\n    }\n\n    // If the next entry is going to be too big for the code size,\n    // then increase it, if possible.\n\n    if (free_ent > maxcode || clear_flg) {\n      if (clear_flg) {\n        maxcode = MAXCODE((n_bits = g_init_bits));\n        clear_flg = false;\n      } else {\n        ++n_bits;\n        if (n_bits == maxbits) maxcode = maxmaxcode;\n        else maxcode = MAXCODE(n_bits);\n      }\n    }\n\n    if (code == EOFCode) {\n      // At EOF, write the rest of the buffer.\n      while (cur_bits > 0) {\n        char_out(cur_accum & 0xff, outs);\n        cur_accum >>= 8;\n        cur_bits -= 8;\n      }\n\n      flush_char(outs);\n    }\n  };\n\n  LZWEncoder.apply(this, arguments);\n  return exports;\n};\n\nexport { LZWEncoder };\n","/* eslint-disable consistent-return */\n/* eslint-disable no-console */\n/* eslint-disable func-names */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-useless-concat */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-return-assign */\n/* eslint-disable no-nested-ternary */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-empty */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-use-before-define */\n/* eslint-disable camelcase */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-unused-vars */\n/* eslint-disable block-scoped-var */\n/* eslint-disable no-shadow */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-var */\n/* eslint-disable vars-on-top */\n/**\n * This class lets you encode animated GIF files\n * Base class :  http://www.java2s.com/Code/Java/2D-Graphics-GUI/AnimatedGifEncoder.htm\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\nimport $ from 'jquery';\nimport { NeuQuant } from './NeuQuant';\nimport { LZWEncoder } from './LZWEncoder';\n\nconst GIFEncoder = function() {\n  for (var i = 0, chr = {}; i < 256; i++) chr[i] = String.fromCharCode(i);\n\n  function ByteArray() {\n    this.bin = [];\n  }\n\n  ByteArray.prototype.getData = function() {\n    for (var v = '', l = this.bin.length, i = 0; i < l; i++) v += chr[this.bin[i]];\n    return v;\n  };\n\n  ByteArray.prototype.writeByte = function(val) {\n    this.bin.push(val);\n  };\n\n  ByteArray.prototype.writeUTFBytes = function(string) {\n    for (let l = string.length, i = 0; i < l; i++) this.writeByte(string.charCodeAt(i));\n  };\n\n  ByteArray.prototype.writeBytes = function(array, offset, length) {\n    for (let l = length || array.length, i = offset || 0; i < l; i++) this.writeByte(array[i]);\n  };\n\n  const exports = {};\n  let width; // image size\n  let height;\n  let transparent = null; // transparent color if given\n  let transIndex; // transparent index in color table\n  let repeat = -1; // no repeat\n  let delay = 0; // frame delay (hundredths)\n  let started = false; // ready to output frames\n  let out;\n  let image; // current frame\n  let pixels; // BGR byte array from frame\n  let indexedPixels; // converted frame indexed to palette\n  let colorDepth; // number of bit planes\n  let colorTab; // RGB palette\n  const usedEntry = []; // active palette entries\n  let palSize = 7; // color table size (bits-1)\n  let dispose = -1; // disposal code (-1 = use default)\n  let closeStream = false; // close stream when finished\n  let firstFrame = true;\n  let sizeSet = false; // if false, get size from first frame\n  let sample = 10; // default sample interval for quantizer\n  let comment = 'Generated by jsgif (https://github.com/antimatter15/jsgif/)'; // default comment for generated gif\n\n  /**\n   * Sets the delay time between each frame, or changes it for subsequent frames\n   * (applies to last frame added)\n   * int delay time in milliseconds\n   * @param ms\n   */\n\n  const setDelay = (exports.setDelay = function setDelay(ms) {\n    delay = Math.round(ms / 10);\n  });\n\n  /**\n   * Sets the GIF frame disposal code for the last added frame and any\n   *\n   * subsequent frames. Default is 0 if no transparent color has been set,\n   * otherwise 2.\n   * @param code\n   * int disposal code.\n   */\n\n  const setDispose = (exports.setDispose = function setDispose(code) {\n    if (code >= 0) dispose = code;\n  });\n\n  /**\n   * Sets the number of times the set of GIF frames should be played. Default is\n   * 1; 0 means play indefinitely. Must be invoked before the first image is\n   * added.\n   *\n   * @param iter\n   * int number of iterations.\n   * @return\n   */\n\n  const setRepeat = (exports.setRepeat = function setRepeat(iter) {\n    if (iter >= 0) repeat = iter;\n  });\n\n  /**\n   * Sets the transparent color for the last added frame and any subsequent\n   * frames. Since all colors are subject to modification in the quantization\n   * process, the color in the final palette for each frame closest to the given\n   * color becomes the transparent color for that frame. May be set to null to\n   * indicate no transparent color.\n   * @param\n   * Color to be treated as transparent on display.\n   */\n\n  const setTransparent = (exports.setTransparent = function setTransparent(c) {\n    transparent = c;\n  });\n\n  /**\n   * Sets the comment for the block comment\n   * @param\n   * string to be insterted as comment\n   */\n\n  const setComment = (exports.setComment = function setComment(c) {\n    comment = c;\n  });\n\n  /**\n   * The addFrame method takes an incoming BitmapData object to create each frames\n   * @param\n   * BitmapData object to be treated as a GIF's frame\n   */\n\n  const addFrame = (exports.addFrame = function addFrame(im, is_imageData) {\n    if (im === null || !started || out === null) {\n      throw new Error('Please call start method before calling addFrame');\n    }\n\n    let ok = true;\n\n    try {\n      if (!is_imageData) {\n        image = im.getImageData(0, 0, im.canvas.width, im.canvas.height).data;\n        if (!sizeSet) setSize(im.canvas.width, im.canvas.height);\n      } else if (im instanceof ImageData) {\n        image = im.data;\n        if (width != im.width || height != im.height) {\n          setSize(im.width, im.height);\n        } else {\n        }\n      } else if (im instanceof Uint8ClampedArray) {\n        if (im.length == width * height * 4) {\n          image = im;\n        } else {\n          console.log('Please set the correct size: ImageData length mismatch');\n          ok = false;\n        }\n      } else {\n        console.log('Please provide correct input');\n        ok = false;\n      }\n      getImagePixels(); // convert to correct format if necessary\n      analyzePixels(); // build color table & map pixels\n\n      if (firstFrame) {\n        writeLSD(); // logical screen descriptior\n        writePalette(); // global color table\n        if (repeat >= 0) {\n          // use NS app extension to indicate reps\n          writeNetscapeExt();\n        }\n      }\n\n      writeGraphicCtrlExt(); // write graphic control extension\n      if (comment !== '') {\n        writeCommentExt(); // write comment extension\n      }\n      writeImageDesc(); // image descriptor\n      if (!firstFrame) writePalette(); // local color table\n      writePixels(); // encode and write pixel data\n      firstFrame = false;\n    } catch (e) {\n      ok = false;\n    }\n\n    return ok;\n  });\n\n  /**\n   * @description: Downloads the encoded gif with the given name\n   * No need of any conversion from the stream data (out) to base64\n   * Solves the issue of large file sizes when there are more frames\n   * and does not involve in creation of any temporary data in the process\n   * so no wastage of memory, and speeds up the process of downloading\n   * to just calling this function.\n   * @parameter {String} filename filename used for downloading the gif\n   */\n\n  const download = (exports.download = function download(filename) {\n    if (out === null || closeStream == false) {\n      console.log(\n        'Please call start method and add frames and call finish method before calling download'\n      );\n    } else {\n      filename =\n        filename !== undefined ? (filename.endsWith('.gif') ? filename : filename) : 'download.gif';\n      const templink = document.createElement('a');\n      templink.download = filename;\n      templink.href = URL.createObjectURL(\n        new Blob([new Uint8Array(out.bin)], { type: 'image/gif' })\n      );\n      templink.click();\n    }\n  });\n\n  const upload = (exports.upload = function upload(filename) {\n    if (out === null || closeStream == false) {\n      console.log(\n        'Please call start method and add frames and call finish method before calling download'\n      );\n    } else {\n      filename =\n        filename !== undefined ? (filename.endsWith('.gif') ? filename : filename) : 'download.gif';\n      const templink = document.createElement('a');\n      templink.target = '_blank';\n      templink.href = URL.createObjectURL(\n        new Blob([new Uint8Array(out.bin)], { type: 'image/gif' })\n      );\n      const link = $(templink)\n        .attr('href')\n        .replace('blob:', '');\n      return new Uint8Array(out.bin);\n    }\n  });\n\n  /**\n   * Adds final trailer to the GIF stream, if you don't call the finish method\n   * the GIF stream will not be valid.\n   */\n\n  const finish = (exports.finish = function finish() {\n    if (!started) return false;\n\n    let ok = true;\n    started = false;\n\n    try {\n      out.writeByte(0x3b); // gif trailer\n      closeStream = true;\n    } catch (e) {\n      ok = false;\n    }\n\n    return ok;\n  });\n\n  /**\n   * Resets some members so that a new stream can be started.\n   * This method is actually called by the start method\n   */\n\n  const reset = function reset() {\n    // reset for subsequent use\n    transIndex = 0;\n    image = null;\n    pixels = null;\n    indexedPixels = null;\n    colorTab = null;\n    closeStream = false;\n    firstFrame = true;\n  };\n\n  /**\n   * * Sets frame rate in frames per second. Equivalent to\n   * <code>setDelay(1000/fps)</code>.\n   * @param fps\n   * float frame rate (frames per second)\n   */\n\n  const setFrameRate = (exports.setFrameRate = function setFrameRate(fps) {\n    if (fps != 0xf) delay = Math.round(100 / fps);\n  });\n\n  /**\n   * Sets quality of color quantization (conversion of images to the maximum 256\n   * colors allowed by the GIF specification). Lower values (minimum = 1)\n   * produce better colors, but slow processing significantly. 10 is the\n   * default, and produces good color mapping at reasonable speeds. Values\n   * greater than 20 do not yield significant improvements in speed.\n   * @param quality\n   * int greater than 0.\n   * @return\n   */\n\n  const setQuality = (exports.setQuality = function setQuality(quality) {\n    if (quality < 1) quality = 1;\n    sample = quality;\n  });\n\n  /**\n   * Sets the GIF frame size. The default size is the size of the first frame\n   * added if this method is not invoked.\n   * @param w\n   * int frame width.\n   * @param h\n   * int frame width.\n   */\n\n  var setSize = (exports.setSize = function setSize(w, h) {\n    if (started && !firstFrame) return;\n    width = w;\n    height = h;\n    if (width < 1) width = 320;\n    if (height < 1) height = 240;\n    sizeSet = true;\n  });\n\n  /**\n   * Initiates GIF file creation on the given stream.\n   * @param os\n   * OutputStream on which GIF images are written.\n   * @return false if initial write failed.\n   */\n\n  const start = (exports.start = function start() {\n    reset();\n    let ok = true;\n    closeStream = false;\n    out = new ByteArray();\n    try {\n      out.writeUTFBytes('GIF89a'); // header\n    } catch (e) {\n      ok = false;\n    }\n\n    return (started = ok);\n  });\n\n  const cont = (exports.cont = function cont() {\n    reset();\n    const ok = true;\n    closeStream = false;\n    out = new ByteArray();\n\n    return (started = ok);\n  });\n\n  /**\n   * Analyzes image colors and creates color map.\n   */\n\n  var analyzePixels = function analyzePixels() {\n    const len = pixels.length;\n    const nPix = len / 3;\n    indexedPixels = [];\n    const nq = new NeuQuant(pixels, len, sample);\n\n    // initialize quantizer\n    colorTab = nq.process(); // create reduced palette\n\n    // map image pixels to new palette\n    let k = 0;\n    for (let j = 0; j < nPix; j++) {\n      const index = nq.map(pixels[k++] & 0xff, pixels[k++] & 0xff, pixels[k++] & 0xff);\n      usedEntry[index] = true;\n      indexedPixels[j] = index;\n    }\n\n    pixels = null;\n    colorDepth = 8;\n    palSize = 7;\n\n    // get closest match to transparent color if specified\n    if (transparent !== null) {\n      transIndex = findClosest(transparent);\n    }\n  };\n\n  /**\n   * Returns index of palette color closest to c\n   */\n\n  var findClosest = function findClosest(c) {\n    if (colorTab === null) return -1;\n    const r = (c & 0xff0000) >> 16;\n    const g = (c & 0x00ff00) >> 8;\n    const b = c & 0x0000ff;\n    let minpos = 0;\n    let dmin = 256 * 256 * 256;\n    const len = colorTab.length;\n\n    for (let i = 0; i < len; ) {\n      const dr = r - (colorTab[i++] & 0xff);\n      const dg = g - (colorTab[i++] & 0xff);\n      const db = b - (colorTab[i] & 0xff);\n      const d = dr * dr + dg * dg + db * db;\n      const index = i / 3;\n      if (usedEntry[index] && d < dmin) {\n        dmin = d;\n        minpos = index;\n      }\n      i++;\n    }\n    return minpos;\n  };\n\n  /**\n   * Extracts image pixels into byte array \"pixels\n   */\n\n  var getImagePixels = function getImagePixels() {\n    const w = width;\n    const h = height;\n    pixels = [];\n    const data = image;\n    let count = 0;\n\n    for (let i = 0; i < h; i++) {\n      for (let j = 0; j < w; j++) {\n        const b = i * w * 4 + j * 4;\n        pixels[count++] = data[b];\n        pixels[count++] = data[b + 1];\n        pixels[count++] = data[b + 2];\n      }\n    }\n  };\n\n  /**\n   * Writes Graphic Control Extension\n   */\n\n  var writeGraphicCtrlExt = function writeGraphicCtrlExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xf9); // GCE label\n    out.writeByte(4); // data block size\n    let transp;\n    let disp;\n    if (transparent === null) {\n      transp = 0;\n      disp = 0; // dispose = no action\n    } else {\n      transp = 1;\n      disp = 2; // force clear if using transparent color\n    }\n    if (dispose >= 0) {\n      disp = dispose & 7; // user override\n    }\n    disp <<= 2;\n    // packed fields\n    out.writeByte(\n      0 | // 1:3 reserved\n      disp | // 4:6 disposal\n      0 | // 7 user input - 0 = none\n        transp\n    ); // 8 transparency flag\n\n    WriteShort(delay); // delay x 1/100 sec\n    out.writeByte(transIndex); // transparent color index\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes Comment Extention\n   */\n\n  var writeCommentExt = function writeCommentExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xfe); // comment label\n    out.writeByte(comment.length); // Block Size (s)\n    out.writeUTFBytes(comment);\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes Image Descriptor\n   */\n\n  var writeImageDesc = function writeImageDesc() {\n    out.writeByte(0x2c); // image separator\n    WriteShort(0); // image position x,y = 0,0\n    WriteShort(0);\n    WriteShort(width); // image size\n    WriteShort(height);\n\n    // packed fields\n    if (firstFrame) {\n      // no LCT - GCT is used for first (or only) frame\n      out.writeByte(0);\n    } else {\n      // specify normal LCT\n      out.writeByte(\n        0x80 | // 1 local color table 1=yes\n        0 | // 2 interlace - 0=no\n        0 | // 3 sorted - 0=no\n        0 | // 4-5 reserved\n          palSize\n      ); // 6-8 size of color table\n    }\n  };\n\n  /**\n   * Writes Logical Screen Descriptor\n   */\n\n  var writeLSD = function writeLSD() {\n    // logical screen size\n    WriteShort(width);\n    WriteShort(height);\n    // packed fields\n    out.writeByte(\n      0x80 | // 1 : global color table flag = 1 (gct used)\n      0x70 | // 2-4 : color resolution = 7\n      0x00 | // 5 : gct sort flag = 0\n        palSize\n    ); // 6-8 : gct size\n\n    out.writeByte(0); // background color index\n    out.writeByte(0); // pixel aspect ratio - assume 1:1\n  };\n\n  /**\n   * Writes Netscape application extension to define repeat count.\n   */\n\n  var writeNetscapeExt = function writeNetscapeExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xff); // app extension label\n    out.writeByte(11); // block size\n    out.writeUTFBytes('NETSCAPE' + '2.0'); // app id + auth code\n    out.writeByte(3); // sub-block size\n    out.writeByte(1); // loop sub-block id\n    WriteShort(repeat); // loop count (extra iterations, 0=repeat forever)\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes color table\n   */\n\n  var writePalette = function writePalette() {\n    out.writeBytes(colorTab);\n    const n = 3 * 256 - colorTab.length;\n    for (let i = 0; i < n; i++) out.writeByte(0);\n  };\n\n  var WriteShort = function WriteShort(pValue) {\n    out.writeByte(pValue & 0xff);\n    out.writeByte((pValue >> 8) & 0xff);\n  };\n\n  /**\n   * Encodes and writes pixel data\n   */\n\n  var writePixels = function writePixels() {\n    const myencoder = new LZWEncoder(width, height, indexedPixels, colorDepth);\n    myencoder.encode(out);\n  };\n\n  /**\n   * Retrieves the GIF stream\n   */\n\n  const stream = (exports.stream = function stream() {\n    return out;\n  });\n\n  const setProperties = (exports.setProperties = function setProperties(has_start, is_first) {\n    started = has_start;\n    firstFrame = is_first;\n  });\n\n  return exports;\n};\n\nexport { GIFEncoder };\n","import $ from 'jquery';\nimport { GIFEncoder } from 'services/jsgif-master/GIFEncoder';\nimport encode64 from 'services/jsgif-master/b64';\n\nexport function debugBase64(base64URL) {\n  const win = window.open();\n  $(win.document.body).css({\n    display: 'flex',\n    width: '100vw',\n    heigh: '100vh',\n    'justify-content': 'center',\n    'align-items': 'center',\n    background: 'whitesmoke'\n  });\n  $('<img></img>', {\n    src: base64URL\n  }).appendTo(win.document.body);\n}\n\nexport function debugBase64WithText(array, base64URL) {\n  const win = window.open();\n  $(win.document.body).css({\n    display: 'flex',\n    'flex-direction': 'column',\n    width: '100vw',\n    height: '100vh',\n    'align-items': 'center',\n    background: 'whitesmoke',\n    overflow: 'hidden'\n  });\n  const ancor = $('<div></div>', {\n    id: 'ancor',\n    width: '100%',\n    height: '50%'\n  })\n    .appendTo(win.document.body)\n    .css({\n      width: '80%',\n      height: '50%',\n      background: 'white',\n      'overflow-y': 'scroll',\n      'margin-bottom': '25px',\n      border: '1px solid black'\n    });\n  for (let i = 0; i < array.length; i += 1) {\n    $('<img></img>', {\n      src: array[i],\n      width: '25%'\n    })\n      .appendTo(ancor)\n      .css({ border: '1px solid black' });\n  }\n  $('<div></div>', {\n    text: base64URL\n  })\n    .appendTo(win.document.body)\n    .css({\n      display: 'flex',\n      'flex-wrap': 'wrap',\n      width: '80%',\n      height: '40%',\n      'overflow-y': 'scroll',\n      'word-break': 'break-word'\n    });\n}\n\nexport function saveAsGif(upload, fps, filename, frames) {\n  const delay = 1000 / fps;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  frames.forEach(item => {\n    const curCanv = document.querySelector(`#canvas${frames[0].id}`);\n    const originalContext = $(`#canvas${item.id}`)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(\n      0,\n      0,\n      $(`#canvas${item.id}`).width(),\n      $(`#canvas${item.id}`).width()\n    );\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  });\n  encoder.finish();\n  filename = filename || 'New Piskel-clone';\n  if (upload) {\n    return encoder.upload(`${filename}.gif`);\n  }\n  return encoder.download(`${filename}.gif`);\n}\n\nexport function uploadToUrl(fps, frames) {\n  const delay = 1000 / fps;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  frames.forEach(item => {\n    const curCanv = document.querySelector(`#canvas${frames[0].id}`);\n    const originalContext = $(`#canvas${item.id}`)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(\n      0,\n      0,\n      $(`#canvas${item.id}`).width(),\n      $(`#canvas${item.id}`).width()\n    );\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  });\n  encoder.finish();\n  const binaryGif = encoder.stream().getData();\n  const dataUrl = `data:image/gif;base64,${encode64(binaryGif)}`;\n  return dataUrl;\n}\n\nexport function downloadPng(currentCanvas, fps, filename) {\n  const delay = 1000 / fps;\n  const i = currentCanvas;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n  const width = $(`#canvas${i}`).width();\n  const originalContext = $(`#canvas${i}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(0, 0, width, width);\n  let len = imageData.data.length;\n  const newArr = [];\n  let map1;\n  let map2;\n  let count = 0;\n  while (len > 0) {\n    map1 = imageData.data.slice(count, count + 4);\n    map2 = map1;\n    if (map2.every(item => item === 0)) {\n      map2 = map2.map(() => 255);\n    }\n    newArr.push(...map2);\n    count += 4;\n    len -= 4;\n  }\n  const fixedNewArray = Uint8ClampedArray.from(newArr);\n  const newImage = new ImageData(fixedNewArray, width, width);\n  encoder.setSize(width, width);\n  encoder.addFrame(newImage, true);\n  encoder.finish();\n  filename = filename || 'New Piskel-clone';\n  encoder.download(`${filename}.png`);\n}\n","/* eslint-disable no-multi-assign */\n/* eslint-disable no-restricted-globals */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-plusplus */\nexport default function encode64(input) {\n  let output = '';\n  let i = 0;\n  const l = input.length;\n  const key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  let chr1;\n  let chr2;\n  let chr3;\n  let enc1;\n  let enc2;\n  let enc3;\n  let enc4;\n  while (i < l) {\n    chr1 = input.charCodeAt(i++);\n    chr2 = input.charCodeAt(i++);\n    chr3 = input.charCodeAt(i++);\n    enc1 = chr1 >> 2;\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    enc4 = chr3 & 63;\n    if (isNaN(chr2)) enc3 = enc4 = 64;\n    else if (isNaN(chr3)) enc4 = 64;\n    output = output + key.charAt(enc1) + key.charAt(enc2) + key.charAt(enc3) + key.charAt(enc4);\n  }\n  return output;\n}\n","/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\nimport { writeUserData } from 'components/functions/requestToDB';\nimport { uploadToUrl } from 'components/functions/menuFunctions/fromCanvasToFile';\nimport { getDate } from 'components/functions/random';\nimport store from 'store/store';\n\nexport function makeObjectToSave(newTitle, newDescription, fps, frames) {\n  const dataUrl = uploadToUrl(fps, frames);\n  const date = getDate().split('  ');\n  const project = {\n    gif: dataUrl,\n    frames,\n    title: newTitle || 'New Piskel-clone',\n    description: newDescription,\n    date: date[0],\n    time: date[1],\n    fps: fps\n  };\n  store.dispatch({ type: 'project', value: project });\n  return project;\n}\n\nexport function saveLocally(storage, projectID, newTitle, newDescription, fps, frames) {\n  const currentProject = makeObjectToSave(newTitle, newDescription, fps, frames);\n  // restrict saving piskels locally more than 20\n  let totalSaves;\n  if (storage) {\n    if (Object.keys(storage).length < 20) {\n      totalSaves = true;\n    } else if (\n      Object.entries(storage).some(item => item[0] === projectID)\n    ) {\n      totalSaves = true;\n    } else {\n      totalSaves = false;\n    }\n  } else {\n    totalSaves = true;\n  }\n  // update local projects\n  let newStorage = storage;\n  if (newStorage) {\n    if (Object.keys(newStorage).length === 0) {\n      newStorage[projectID] = currentProject;\n    } else {\n      for (const project in newStorage) {\n        if (project === projectID) {\n          newStorage[project] = currentProject;\n        } else {\n          newStorage[projectID] = currentProject;\n        }\n      }\n    }\n  } else {\n    newStorage = {};\n    newStorage[projectID] = currentProject;\n  }\n  return [totalSaves, newStorage];\n}\n\nexport function saveToGalery(storage, projectID, newTitle, newDescription, fps, frames, userID, allProjects) {\n  const saves = saveLocally(storage, projectID, newTitle, newDescription, fps, frames)\n  let updatedAllProjects = allProjects;\n  if (updatedAllProjects) {\n    if (Object.keys(updatedAllProjects).length === 0) {\n      updatedAllProjects[userID] = saves[1];\n    } else {\n      for (const user in updatedAllProjects) {\n        if (user === userID) {\n          updatedAllProjects[user] = saves[1];\n        } else {\n          updatedAllProjects[userID] = saves[1];\n        }\n      }\n    }\n  } else {\n    updatedAllProjects = {};\n    updatedAllProjects[userID] = saves[1];\n  }\n  // send user projects to firebase Realtime Database\n  const objForDB = Object.entries(updatedAllProjects[userID]);\n  for (let i = 0; i < objForDB.length; i += 1) {\n    const projectName = objForDB[i][0];\n    const projectItems = objForDB[i][1];\n    if (projectName === projectID) {\n      writeUserData(\n        userID,\n        projectName,\n        projectItems.frames,\n        projectItems.gif,\n        projectItems.date,\n        projectItems.time,\n        projectItems.title,\n        projectItems.description,\n        projectItems.fps\n      );\n    }\n  }\n  return [saves[0], updatedAllProjects];\n}\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/save/save.css';\r\nimport store from 'store/store';\r\nimport { saveLocally, saveToGalery } from 'components/functions/menuFunctions/saveProject';\r\n\r\nexport default class SaveOptions extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      isFull: false,\r\n      isSaved: false,\r\n      newTitle: false,\r\n      newDescription: false\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n    this.setState(null);\r\n  }\r\n\r\n  saveLocallyHandler() {\r\n    const storage = this.props.state.localProjects;\r\n    const localSaves = saveLocally(\r\n      storage,\r\n      this.props.state.projectID,\r\n      this.state.newTitle || this.props.state.project.title,\r\n      this.state.newDescription || this.props.state.project.description,\r\n      this.props.state.project.fps,\r\n      this.props.state.framesArray\r\n    );\r\n    store.dispatch({ type: 'localProjects', value: localSaves[1] });\r\n    if (localSaves[0]) {\r\n      this.setState({ isSaved: true });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isSaved: false });\r\n        }\r\n      }, 5000);\r\n    } else {\r\n      this.setState({ isFull: 'local' });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isFull: false });\r\n        }\r\n      }, 5000);\r\n      return;\r\n    }\r\n  }\r\n\r\n  saveToGaleryHandler() {\r\n    if (!this.props.state.userData.isAuthed) {\r\n      $('#signOuted').click();\r\n      return;\r\n    }\r\n    const storage = this.props.state.allProjects[this.props.state.userData.info.id];\r\n    const allProjects = this.props.state.allProjects;\r\n    const updatedAllProjects = saveToGalery(\r\n      storage,\r\n      this.props.state.projectID,\r\n      this.state.newTitle || this.props.state.project.title,\r\n      this.state.newDescription || this.props.state.project.description,\r\n      this.props.state.project.fps,\r\n      this.props.state.framesArray,\r\n      this.props.state.userData.info.id,\r\n      allProjects\r\n    )\r\n    store.dispatch({ type: 'allProjects', value: updatedAllProjects[1] });\r\n    if (updatedAllProjects[0]) {\r\n      this.setState({ isSaved: true });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isSaved: false });\r\n        }\r\n      }, 5000);\r\n    } else {\r\n      this.setState({ isFull: 'personal' });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isFull: false });\r\n        }\r\n      }, 5000);\r\n      return;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`save-settings-block ${\r\n          this.props.active === 'save-settings' ? 'flexed' : 'hidden'\r\n          }`}\r\n      >\r\n        <div className=\"sprite-info-block\">\r\n          <span className=\"sprite-info bold\">Sprite information</span>\r\n          <span className=\"label-title\">Title:</span>\r\n          <input\r\n            className=\"title-input\"\r\n            id=\"title-input\"\r\n            defaultValue={this.props.state.project.title}\r\n            onChange={e => this.setState({ newTitle: $(e.target).val() })}\r\n          />\r\n          <span className=\"label-description\">Description:</span>\r\n          <textarea\r\n            rows=\"1\"\r\n            cols=\"6\"\r\n            className=\"description-input\"\r\n            id=\"description-input\"\r\n            defaultValue={this.props.state.project.description}\r\n            onChange={e => this.setState({ newDescription: $(e.target).val() })}\r\n          />\r\n        </div>\r\n        <div className=\"save-online-block\">\r\n          <span className=\"save-online bold\">Save online</span>\r\n          <button\r\n            id=\"save-locally-button\"\r\n            className=\"save-online-button\"\r\n            type=\"button\"\r\n            onClick={() => this.saveLocallyHandler()}\r\n          >\r\n            Save locally\r\n          </button>\r\n          <p className=\"save-online-info\">\r\n            Your piskel will be saved and available only from this browser\r\n          </p>\r\n          <button\r\n            id=\"save-gallery-button\"\r\n            className={`save-online-button ${this.mounted && this.props.state.userData.isAuthed ? '' : 'hidden'}`}\r\n            type=\"button\"\r\n            onClick={() => this.saveToGaleryHandler()}\r\n          >\r\n            Save to your gallery\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              $('.abcRioButton.abcRioButtonLightBlue').click();\r\n            }}\r\n            className={`save-online-button ${this.mounted && this.props.state.userData.isAuthed ? 'hidden' : ''}`}\r\n          >\r\n            Sign in to save to your gallery\r\n          </button>\r\n          <p className=\"save-online-info\">Your piskel will be stored online in your gallery</p>\r\n          <p\r\n            id=\"error\"\r\n            className={`${this.mounted && this.state.isFull ? 'storage-warning error' : 'hidden'}`}\r\n          >\r\n            {`Your ${this.state.isFull} storage is full, please delete old piskels`}\r\n          </p>\r\n          <p\r\n            id=\"success\"\r\n            className={`${\r\n              this.mounted && this.state.isSaved ? 'storage-warning success' : 'hidden'\r\n              }`}\r\n          >\r\n            Your animation successfully saved!\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSaveOptions.propTypes = {\r\n  active: PropTypes.string.isRequired,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-multi-assign */\n/* eslint-disable func-names */\n/* eslint-disable no-param-reassign */\n/* eslint-disable eqeqeq */\n/* eslint-disable prettier/prettier */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n/* eslint-disable no-underscore-dangle */\n// upload.js, from https://github.com/googledrive/cors-upload-sample\n// Contributors Steve Bazyl, Mike Procopio, Jeffrey Posnick, Renaud Sauvain\n// License: Apache 2.0 http://www.apache.org/licenses/LICENSE-2.0\n//\n// Implements Resumable Upload for Google Drive as described by\n// https://developers.google.com/drive/v3/web/resumable-upload\n//\n// Modified by Paul Brewer, Economic and Financial Technology Consulting LLC\n// Nov. 1 2017\n//  1. use Google Drive API V3 instead of V2\n//  2. wrap code in a \"use strict\" IIFE, only exposing MediaUploader\n//  3. explicitly export MediaUploader as window.UploaderForGoogleDrive\n//  4. if options.token undefined, get access token from existing window.gapi instance, if any\n//\n// Nov. 7, 2017\n//  5. Change file metadata \"title\" to \"name\" in line with Drive API v2-->v3 migration advisory\n//  6. export promise wrapper as window.pUploaderForGoogleDrive\n\n// jshint browser:true, strict:true\n\nconst Uploader = window.UploaderForGoogleDrive = (function () {\n\n\n  /**\n   * Helper for implementing retries with backoff. Initial retry\n   * delay is 1 second, increasing by 2x (+jitter) for subsequent retries\n   *\n   * @constructor\n   */\n\n  const RetryHandler = function () {\n    this.interval = 1000; // Start at one second\n    this.maxInterval = 60 * 1000; // Don't wait longer than a minute\n  };\n\n  /**\n   * Invoke the function after waiting\n   *\n   * @param {function} fn Function to invoke\n   */\n  RetryHandler.prototype.retry = function (fn) {\n    setTimeout(fn, this.interval);\n    this.interval = this.nextInterval_();\n  };\n\n  /**\n   * Reset the counter (e.g. after successful request.)\n   */\n  RetryHandler.prototype.reset = function () {\n    this.interval = 1000;\n  };\n\n  /**\n   * Calculate the next wait time.\n   * @return {number} Next wait interval, in milliseconds\n   *\n   * @private\n   */\n  RetryHandler.prototype.nextInterval_ = function () {\n    const interval = this.interval * 2 + this.getRandomInt_(0, 1000);\n    return Math.min(interval, this.maxInterval);\n  };\n\n  /**\n   * Get a random int in the range of min to max. Used to add jitter to wait times.\n   *\n   * @param {number} min Lower bounds\n   * @param {number} max Upper bounds\n   * @private\n   */\n  RetryHandler.prototype.getRandomInt_ = function (min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n  };\n\n  /**\n   * Helper class for resumable uploads using XHR/CORS. Can upload any Blob-like item, whether\n   * files or in-memory constructs.\n   *\n   * @example\n   * var content = new Blob([\"Hello world\"], {\"type\": \"text/plain\"});\n   * var uploader = new MediaUploader({\n   *   file: content,\n   *   token: accessToken,\n   *   onComplete: function(data) { ... }\n   *   onError: function(data) { ... }\n   * });\n   * uploader.upload();\n   *\n   * @constructor\n   * @param {object} options Hash of options\n   * @param {string} options.token Access token\n   * @param {blob} options.file Blob-like item to upload\n   * @param {string} [options.fileId] ID of file if replacing\n   * @param {object} [options.params] Additional query parameters\n   * @param {string} [options.contentType] Content-type, if overriding the type of the blob.\n   * @param {object} [options.metadata] File metadata\n   * @param {function} [options.onComplete] Callback for when upload is complete\n   * @param {function} [options.onProgress] Callback for status for the in-progress upload\n   * @param {function} [options.onError] Callback if upload fails\n   */\n  const MediaUploader = function (options) {\n    const noop = function () { };\n    this.file = options.file;\n    this.contentType = options.contentType || this.file.type || 'application/octet-stream';\n    this.metadata = options.metadata || {\n      name: this.file.name,\n      mimeType: this.contentType\n    };\n    // if options.token omitted, get access_token from existing window.gapi instance, if any : PJB 2017-11-01\n    // see https://developers.google.com/api-client-library/javascript/reference/referencedocs\n    if (options.token) {\n      this.token = options.token;\n    } else {\n      try {\n        this.token = window.gapi.auth2\n          .getAuthInstance()\n          .currentUser.get()\n          .getAuthResponse(true).access_token;\n      } catch (e) {\n        console.log(e);\n        throw new Error('Uploader: missing Google OAuth2 access_token');\n      }\n    }\n    // end access_token patch -- PJB 2017-11-01\n    this.onComplete = options.onComplete || noop;\n    this.onProgress = options.onProgress || noop;\n    this.onError = options.onError || noop;\n    this.offset = options.offset || 0;\n    this.chunkSize = options.chunkSize || 0;\n    this.retryHandler = new RetryHandler();\n\n    this.url = options.url;\n    if (!this.url) {\n      const params = options.params || {};\n      params.uploadType = 'resumable';\n      this.url = this.buildUrl_(options.fileId, params, options.baseUrl);\n    }\n    // PJB 2018.01.22 Change \"update/replace\" method from \"PUT\" to \"PATCH\"\n    //   per https://developers.google.com/drive/v3/reference/files/update\n    this.httpMethod = options.fileId ? 'PATCH' : 'POST';\n  };\n\n  /**\n   * Initiate the upload.\n   */\n  MediaUploader.prototype.upload = function () {\n    const self = this;\n    const xhr = new XMLHttpRequest();\n\n    xhr.open(this.httpMethod, this.url, true);\n    xhr.setRequestHeader('Authorization', `Bearer ${this.token}`);\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    xhr.setRequestHeader('X-Upload-Content-Length', this.file.size);\n    xhr.setRequestHeader('X-Upload-Content-Type', this.contentType);\n    xhr.setRequestHeader('writersCanShare', true);\n\n    xhr.onload = function (e) {\n      if (e.target.status < 400) {\n        const location = e.target.getResponseHeader('Location');\n        this.url = location;\n        this.sendFile_();\n      } else {\n        this.onUploadError_(e);\n      }\n    }.bind(this);\n    xhr.onerror = this.onUploadError_.bind(this);\n    xhr.send(JSON.stringify(this.metadata));\n  };\n\n  /**\n   * Send the actual file content.\n   *\n   * @private\n   */\n  MediaUploader.prototype.sendFile_ = function () {\n    let content = this.file;\n    let end = this.file.size;\n\n    if (this.offset || this.chunkSize) {\n      // Only bother to slice the file if we're either resuming or uploading in chunks\n      if (this.chunkSize) {\n        end = Math.min(this.offset + this.chunkSize, this.file.size);\n      }\n      content = content.slice(this.offset, end);\n    }\n\n    const xhr = new XMLHttpRequest();\n    xhr.open('PUT', this.url, true);\n    xhr.setRequestHeader('Content-Type', this.contentType);\n    xhr.setRequestHeader(\n      'Content-Range',\n      `bytes ${this.offset}-${end - 1}/${this.file.size}`\n    );\n    xhr.setRequestHeader('X-Upload-Content-Type', this.file.type);\n    xhr.setRequestHeader('writersCanShare', true);\n    if (xhr.upload) {\n      xhr.upload.addEventListener('progress', this.onProgress);\n    }\n    xhr.onload = this.onContentUploadSuccess_.bind(this);\n    xhr.onerror = this.onContentUploadError_.bind(this);\n    xhr.send(content);\n  };\n\n  /**\n   * Query for the state of the file for resumption.\n   *\n   * @private\n   */\n  MediaUploader.prototype.resume_ = function () {\n    const xhr = new XMLHttpRequest();\n    xhr.open('PUT', this.url, true);\n    xhr.setRequestHeader('Content-Range', `bytes */${this.file.size}`);\n    xhr.setRequestHeader('X-Upload-Content-Type', this.file.type);\n    xhr.setRequestHeader('writersCanShare', true);\n    if (xhr.upload) {\n      xhr.upload.addEventListener('progress', this.onProgress);\n    }\n    xhr.onload = this.onContentUploadSuccess_.bind(this);\n    xhr.onerror = this.onContentUploadError_.bind(this);\n    xhr.send();\n  };\n\n  /**\n   * Extract the last saved range if available in the request.\n   *\n   * @param {XMLHttpRequest} xhr Request object\n   */\n  MediaUploader.prototype.extractRange_ = function (xhr) {\n    const range = xhr.getResponseHeader('Range');\n    if (range) {\n      this.offset = parseInt(range.match(/\\d+/g).pop(), 10) + 1;\n    }\n  };\n\n  /**\n   * Handle successful responses for uploads. Depending on the context,\n   * may continue with uploading the next chunk of the file or, if complete,\n   * invokes the caller's callback.\n   *\n   * @private\n   * @param {object} e XHR event\n   */\n  MediaUploader.prototype.onContentUploadSuccess_ = function (e) {\n    if (e.target.status == 200 || e.target.status == 201) {\n      this.onComplete(e.target.response);\n    } else if (e.target.status == 308) {\n      this.extractRange_(e.target);\n      this.retryHandler.reset();\n      this.sendFile_();\n    } else {\n      this.onContentUploadError_(e);\n    }\n  };\n\n  /**\n   * Handles errors for uploads. Either retries or aborts depending\n   * on the error.\n   *\n   * @private\n   * @param {object} e XHR event\n   */\n  MediaUploader.prototype.onContentUploadError_ = function (e) {\n    if (e.target.status && e.target.status < 500) {\n      this.onError(e.target.response);\n    } else {\n      this.retryHandler.retry(this.resume_.bind(this));\n    }\n  };\n\n  /**\n   * Handles errors for the initial request.\n   *\n   * @private\n   * @param {object} e XHR event\n   */\n  MediaUploader.prototype.onUploadError_ = function (e) {\n    this.onError(e.target.response); // TODO - Retries for initial upload\n  };\n\n  /**\n   * Construct a query string from a hash/object\n   *\n   * @private\n   * @param {object} [params] Key/value pairs for query string\n   * @return {string} query string\n   */\n  MediaUploader.prototype.buildQuery_ = function (params) {\n    params = params || {};\n    return Object.keys(params)\n      .map(function (key) {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`;\n      })\n      .join('&');\n  };\n\n  /**\n   * Build the drive upload URL\n   *\n   * @private\n   * @param {string} [id] File ID if replacing\n   * @param {object} [params] Query parameters\n   * @return {string} URL\n   */\n  MediaUploader.prototype.buildUrl_ = function (id, params, baseUrl) {\n    // modified next line to use v3, not v2 -- PJB, 2017-11-01\n    let url = baseUrl || 'https://www.googleapis.com/upload/drive/v3/files/';\n    if (id) {\n      url += id;\n    }\n    const query = this.buildQuery_(params);\n    if (query) {\n      url += `?${query}`;\n    }\n    return url;\n  };\n\n  return MediaUploader;\n})();\n\nwindow.pUploaderForGoogleDrive = function (options) {\n\n\n  return new Promise(function (resolve, reject) {\n    options.onComplete = function (r) {\n      let response;\n      try {\n        response = typeof r === 'string' ? JSON.parse(r) : r;\n      } catch (e) {\n        response = r;\n      }\n      resolve(response);\n    };\n    options.onError = function (e) {\n      reject(e);\n    };\n    const uploader = new window.UploaderForGoogleDrive(options);\n    uploader.upload();\n  });\n};\n\nexport { Uploader };\n","import { saveAsGif } from 'components/functions/menuFunctions/fromCanvasToFile';\nimport { Uploader } from 'services/google-uploader/googleUploader';\nimport store from 'store/store';\n\nconst apikey = 'AIzaSyD8p3NmO-jrbUeGpC9EYDHzH8FWOl3ivss';\n\nexport function loadClient() {\n  window.gapi.client.setApiKey(apikey);\n  return window.gapi.client\n    .load('https://content.googleapis.com/discovery/v1/apis/drive/v3/rest')\n    .then(\n      () => {\n        console.log('GAPI client loaded for API');\n      },\n      err => {\n        console.error('Error loading GAPI client for API', err);\n      }\n    );\n}\n\nexport function uploadToGoogle(filename, fps, frames) {\n  loadClient();\n  const content = new Blob([saveAsGif('upload', fps, filename, frames)], { type: 'image/gif' });\n  const uploader = new Uploader({\n    file: content,\n    metadata: {\n      name: filename\n    },\n    onComplete(data) {\n      const info = JSON.parse(data);\n      const fileId = info.id;\n      const googleUrl = `https://drive.google.com/open?id=${fileId}`;\n      const urlToGif = `https://drive.google.com/thumbnail?id=${fileId}`;\n      store.dispatch({ type: 'googleLinks', value: [googleUrl, urlToGif] });\n      window.gapi.client.drive.permissions\n        .create({\n          fileId: `${fileId}`,\n          resource: {\n            role: 'reader',\n            type: 'anyone'\n          }\n        })\n        .then(\n          response => {\n            // Handle the results here (response.result has the parsed body).\n            console.log('Response', response);\n          },\n          err => {\n            console.error('Execute error', err);\n          }\n        );\n    },\n    onError(data) {\n      console.log(data);\n    }\n  });\n  uploader.upload();\n}\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/export/export.css';\r\nimport {\r\n  saveAsGif,\r\n  uploadToUrl,\r\n  downloadPng,\r\n  debugBase64,\r\n  debugBase64WithText\r\n} from 'components/functions/menuFunctions/fromCanvasToFile';\r\nimport { uploadToGoogle } from 'components/functions/menuFunctions/exportToGoogle';\r\nimport { pageNavigator } from 'components/functions/navigation';\r\n\r\nexport default class ExportOptions extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      active: 'show-gif-block',\r\n      dataUrl: '',\r\n      links: false\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  showExportOptions(e) {\r\n    const clicked = e.target.getAttribute('id');\r\n    this.setState({ active: clicked });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`export-settings-block ${\r\n          this.props.active === 'export-settings' ? 'flexed' : 'hidden'\r\n          }`}\r\n      >\r\n        <span className=\"export-info bold\">Export</span>\r\n        <div className=\"file-format-buttons\">\r\n          <button\r\n            id=\"show-gif-block\"\r\n            className={`show-gif-block ${\r\n              this.state.active === 'show-gif-block'\r\n                ? 'active-show-button'\r\n                : 'not-active-show-button'\r\n              }`}\r\n            type=\"button\"\r\n            onClick={e => this.showExportOptions(e)}\r\n          >\r\n            GIF\r\n          </button>\r\n          <button\r\n            id=\"show-png-block\"\r\n            className={`show-png-block ${\r\n              this.state.active === 'show-png-block'\r\n                ? 'active-show-button'\r\n                : 'not-active-show-button'\r\n              }`}\r\n            type=\"button\"\r\n            onClick={e => this.showExportOptions(e)}\r\n          >\r\n            PNG\r\n          </button>\r\n        </div>\r\n        <div\r\n          className={`gif-block ${this.state.active === 'show-gif-block' ? 'flexed' : 'hidden'}`}\r\n        >\r\n          <span className=\"gif-title\">Convert your sprite to an animated GIF</span>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"download-gif\"\r\n              className=\"gif-button\"\r\n              type=\"button\"\r\n              onClick={\r\n                () => saveAsGif(\r\n                  null,\r\n                  this.props.state.project.fps,\r\n                  this.props.state.project.title,\r\n                  this.props.state.framesArray\r\n                )}\r\n            >\r\n              Download\r\n            </button>\r\n            <span className=\"download-gif-title\">Download as an animated GIF</span>\r\n          </div>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"upload-gif\"\r\n              className=\"gif-button\"\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const dataUrl = uploadToUrl(this.props.state.project.fps, this.props.state.framesArray);\r\n                this.setState({ dataUrl, links: false });\r\n                setTimeout(() => {\r\n                  if (this.mounted) {\r\n                    this.setState({ dataUrl: '' });\r\n                  }\r\n                }, 150000);\r\n              }}\r\n            >\r\n              Open in new tab\r\n            </button>\r\n            <span className=\"upload-gif-title\">Watch an animated GIF in new tab</span>\r\n            <div className={`link-to-gif ${this.state.dataUrl ? '' : 'hidden'}`}>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  debugBase64(this.state.dataUrl);\r\n                  this.setState({ dataUrl: '' });\r\n                }}\r\n              >\r\n                your animation file\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"upload-google\"\r\n              className={`gif-button ${this.props.state.userData.isAuthed ? '' : 'hidden'}`}\r\n              type=\"button\"\r\n              onClick={() => {\r\n                if (!this.props.state.userData.isAuthed) {\r\n                  pageNavigator(null, 'create', 'about', false);\r\n                  $('#signOuted').click();\r\n                  return;\r\n                }\r\n                uploadToGoogle(\r\n                  this.props.state.project.title,\r\n                  this.props.state.project.fps,\r\n                  this.props.state.framesArray);\r\n                this.setState({ dataUrl: '' });\r\n                setTimeout(() => {\r\n                  if (this.props.state.googleLinks.length > 0) {\r\n                    this.setState({ links: true });\r\n                  }\r\n                }, 3000);\r\n                setTimeout(() => {\r\n                  if (this.mounted) {\r\n                    this.setState({ links: false });\r\n                  }\r\n                }, 150000);\r\n              }}\r\n            >\r\n              Get link\r\n            </button>\r\n            <span className={`upload-gif-google ${this.props.state.userData.isAuthed ? 'blocked' : 'hidden'}`}>\r\n              Save your animation to Google disk to share\r\n            </span>\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                $('.abcRioButton.abcRioButtonLightBlue').click();\r\n              }}\r\n              className={`save-online-button ${this.props.state.userData.isAuthed ? 'hidden' : ''}`}\r\n            >\r\n              Sign in to save to Google disk\r\n            </button>\r\n\r\n            <div className={`link-to-gif ${this.state.links ? '' : 'hidden'}`}>\r\n              <span>Click the link</span>\r\n              <a\r\n                className=\"google-link\"\r\n                id=\"google-link\"\r\n                rel=\"noopener noreferrer\"\r\n                target=\"_blank\"\r\n                href={this.props.state.googleLinks[0]}\r\n              >\r\n                {'Link to file on Google disk'}\r\n              </a>\r\n              <a\r\n                className=\"google-link\"\r\n                id=\"span-link\"\r\n                rel=\"noopener noreferrer\"\r\n                target=\"_blank\"\r\n                href={this.props.state.googleLinks[1]}\r\n              >\r\n                {'Direct link to your GIF'}\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className={`png-block ${this.state.active === 'show-png-block' ? 'flexed' : 'hidden'}`}\r\n        >\r\n          <span className=\"png-title\">Export your animation as a PNG file</span>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"download-png\"\r\n              className=\"png-button\"\r\n              type=\"button\"\r\n              onClick={() =>\r\n                downloadPng(\r\n                  this.props.state.currentCanvas,\r\n                  this.props.state.project.fps,\r\n                  this.props.state.project.title\r\n                )}\r\n            >\r\n              Download\r\n            </button>\r\n            <span className=\"download-png-title\">Download selected frame as PNG file</span>\r\n          </div>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"open-png\"\r\n              className=\"png-button\"\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const array = [];\r\n                for (let i = 0; i < $('.preview').children().length; i += 1) {\r\n                  array.push($('.preview').children()[i].src);\r\n                }\r\n                const dataUrl = uploadToUrl(this.props.state.project.fps, this.props.state.framesArray);\r\n                debugBase64WithText(array, dataUrl);\r\n              }}\r\n            >\r\n              Open\r\n            </button>\r\n            <span className=\"open-png-title\">Open the spritesheet as a data uri</span>\r\n          </div>\r\n        </div>\r\n        <div id=\"hidden\" className=\"hidden\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nExportOptions.propTypes = {\r\n  active: PropTypes.string.isRequired,\r\n  state: PropTypes.object.isRequired\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'components/menuComponents/import/import.css';\r\nimport store from 'store/store';\r\n\r\nexport default function ImportOptions(props) {\r\n  return (\r\n    <div\r\n      className={`general-settings-block ${\r\n        props.active === 'import-settings' ? 'flexed' : 'hidden'\r\n        }`}\r\n    >\r\n      <div className=\"current-bg\">\r\n        <span className=\"default-bg bold\">Load from browser</span>\r\n        <p>Load your animation saved in this browser</p>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => store.dispatch({ type: 'showLocalSaves', value: true })}\r\n          className=\"browse-local-piskels-button\"\r\n        >\r\n          Browse local saves\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nImportOptions.propTypes = {\r\n  active: PropTypes.string.isRequired\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'containers/menu/optionsDomBuilder.css';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\nimport store from 'store/store';\r\nimport Layers from 'components/menuComponents/layers-list/layers-list';\r\nimport Palettes from 'components/menuComponents/palettes/palettes';\r\nimport Settings from 'components/menuComponents/settings/settings';\r\nimport ResizeCanvas from 'components/menuComponents/resize/resizeCanvas';\r\nimport SaveOptions from 'components/menuComponents/save/save';\r\nimport ExportOptions from 'components/menuComponents/export/export';\r\nimport ImportOptions from 'components/menuComponents/import/import';\r\n\r\nexport default class Options extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      fps: 3,\r\n      active: 'none'\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n    this.setState({ fps: this.props.state.project.fps });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  showOptionsOnClick(id) {\r\n    if (this.mounted) {\r\n      if (this.state.active === id) {\r\n        this.setState({ active: 'none' });\r\n      } else {\r\n        this.setState({ active: id });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"optionsBox\" id=\"optionsBox\">\r\n        <div className=\"fps-options\">\r\n          <span id=\"display-fps\" className=\"display-fps\">\r\n            {`${this.state.fps} FPS`}\r\n          </span>\r\n          <input\r\n            type=\"range\"\r\n            min=\"1\"\r\n            max=\"24\"\r\n            step=\"1\"\r\n            defaultValue={this.state.fps}\r\n            id=\"fps-bar\"\r\n            className=\"fps-bar\"\r\n            onChange={e => {\r\n              store.dispatch({ type: 'project', value: ['fps', e.target.value] });\r\n              this.setState({ fps: e.target.value });\r\n            }}\r\n          />\r\n        </div>\r\n        <Layers />\r\n        <Palettes colorSamples={this.props.state.palette} toolState={this.props.state.toolState} />\r\n        <div className={`options-blocks-area ${this.state.active === 'none' ? '' : 'slide'}`}>\r\n          <Settings active={this.state.active} />\r\n          <ResizeCanvas\r\n            active={this.state.active}\r\n            currentCanvas={this.props.state.currentCanvas} />\r\n          <SaveOptions\r\n            active={this.state.active}\r\n            state={this.props.state}\r\n          />\r\n          <ExportOptions\r\n            active={this.state.active}\r\n            state={this.props.state}\r\n          />\r\n          <ImportOptions active={this.state.active} />\r\n        </div>\r\n        <div\r\n          className={`settings-buttons ${\r\n            this.state.active && this.state.active === 'none' ? '' : 'slide'\r\n            }`}\r\n        >\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('settings')}\r\n            iconClass=\"fas fa-cog\"\r\n            active={this.state.active}\r\n            buttonId=\"settings\"\r\n            title=\"Settings\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('resize-settings')}\r\n            iconClass=\"fas fa-crop\"\r\n            active={this.state.active}\r\n            buttonId=\"resize-settings\"\r\n            title=\"Resize the drawing area\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('save-settings')}\r\n            iconClass=\"fas fa-save\"\r\n            active={this.state.active}\r\n            buttonId=\"save-settings\"\r\n            title=\"Save to your galery\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('export-settings')}\r\n            iconClass=\"fas fa-file-download\"\r\n            active={this.state.active}\r\n            buttonId=\"export-settings\"\r\n            title=\"Export as image or animated gif\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('import-settings')}\r\n            iconClass=\"fas fa-file-upload\"\r\n            active={this.state.active}\r\n            buttonId=\"import-settings\"\r\n            title=\"Import your animation\"\r\n            placement=\"left\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nOptions.propTypes = {\r\n  state: PropTypes.object.isRequired\r\n}\r\n","import $ from 'jquery';\nimport { GIFEncoder } from 'services/jsgif-master/GIFEncoder';\n\nexport function fromImageToCanvas() {\n  const newCanv = $('<canvas></canvas>', {\n    id: 'canvasSave1',\n    width: '421px',\n    height: '421px'\n  })\n    .appendTo('#hidden')\n    .attr('width', 421)\n    .attr('height', 421)\n    .css({ width: '421px', height: '421px' });\n\n  const originalContext = $(newCanv)\n    .get(0)\n    .getContext('2d');\n  originalContext.scale(1, 1);\n  const image = new Image();\n  image.onload = () => {\n    originalContext.drawImage(image, 0, 0, 421, 421);\n    image.style.display = 'none';\n  };\n}\n\nexport function makeFgif() {\n  const delay = 1000 / 3;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  for (let i = 0; i < $('#hidden').children().length; i += 1) {\n    const curCanv = $('#hidden').children()[i];\n    const originalContext = $(curCanv)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(0, 0, curCanv.width, curCanv.height);\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  }\n  encoder.finish();\n  const filename = 'New Piskel-clone';\n  encoder.download(`${filename}.gif`);\n}\n\nexport function fromDataToCanvas(frames) {\n  const width = $('#drawCanvas').width();\n  frames.forEach(item => {\n    if ($('#canvas-block')) {\n      const ctx = $(`#canvas${item.id}`)\n        .get(0)\n        .getContext('2d');\n      const image = new Image();\n      image.src = item.frameSRC;\n      setTimeout(() => {\n        ctx.drawImage(image, 0, 0, width, width);\n      }, 200);\n    }\n  });\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport store from 'store/store';\nimport { fromDataToCanvas } from 'components/functions/menuFunctions/fromImageToCanvas';\nimport { pageNavigator } from 'components/functions/navigation';\n\nexport default function LocalSaves(props) {\n  const sorted = Object.entries(props.localProjects).sort((a, b) => b[1].time - a[1].time);\n  return (\n    <div className=\"local-saves-block\">\n      <div>\n        <span className=\"local-saves-title\">Browse local piskels</span>\n        <i\n          className=\"far fa-window-close local-saves-button\"\n          onClick={() => store.dispatch({ type: 'showLocalSaves', value: false })}\n          onKeyPress={undefined}\n          tabIndex=\"-1\"\n          role=\"button\"\n        />\n      </div>\n      <div className=\"table-wrapper\">\n        <table className=\"table-local-saves\" cellPadding=\"20\" cellSpacing=\"10\">\n          <thead>\n            <tr>\n              <th className=\"table-title\">Name</th>\n              <th className=\"table-title\">Date</th>\n              <th className=\"table-title\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {sorted.map(item => (\n              <tr key={item[0]}>\n                <td className=\"table-data\">\n                  {item[1].title}\n                </td>\n                <td className=\"table-data\">\n                  {item[1].date}\n                </td>\n                <td className=\"table-data table-data-buttons\">\n                  <button\n                    type=\"button\"\n                    className=\"table-button\"\n                    onClick={() => {\n                      store.dispatch({ type: 'projectID', value: item[0] });\n                      store.dispatch({ type: 'project', value: item[1] });\n                      store.dispatch({ type: 'framesArray', value: null });\n                      store.dispatch({ type: 'framesArray', value: item[1].frames });\n                      store.dispatch({ type: 'currentCanvas', value: item[1].frames[0].id });\n                      store.dispatch({ type: 'showLocalSaves', value: false });\n                      pageNavigator(null, 'general', 'create', null, item[0]);\n                      setTimeout(() => {\n                        fromDataToCanvas(item[1].frames);\n                      }, 500);\n                    }}\n                  >\n                    Load\n                    </button>\n                  <button\n                    type=\"button\"\n                    className=\"table-button\"\n                    onClick={() => store.dispatch({ type: 'localProjects', value: ['delete', item[0]] })}\n                  >\n                    Delete\n                    </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nLocalSaves.propTypes = {\n  localProjects: PropTypes.object.isRequired\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport $ from 'jquery';\nimport ToolsPanel from 'components/tools/toolsDomBuilder';\nimport FramesWrapper from 'components/screens/frames/frameDomBuilder';\nimport CanvasWrapper from 'components/screens/canvas/canvasDomBuilder';\nimport PreviewBlock from 'components/screens/preview/previewDomBuilder';\nimport Options from 'containers/menu/optionsDomBuilder';\nimport LocalSaves from 'containers/pages/localSaves/localSaves';\nimport 'containers/pages/create/create.css';\nimport store from 'store/store';\n\nclass CreateAnimation extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      showSaves: false,\n      size: '',\n      changeWidth: ''\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    const canvasWidth =\n      window.innerWidth - 500 < window.innerHeight - 155\n        ? window.innerWidth - 500\n        : window.innerHeight - 155;\n    this.setState({ size: canvasWidth > 350 ? canvasWidth : 350, changeWidth: canvasWidth });\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    $(window).bind('beforeunload', () => 'are you sure you want to leave?');\n    $(window).bind('resize', () => {\n      const changeWidth =\n        window.innerWidth - 500 < window.innerHeight - 155\n          ? window.innerWidth - 500\n          : window.innerHeight - 155;\n      this.setState({ changeWidth });\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    store.dispatch({ type: 'project', value: 'initial' });\n  }\n\n  render() {\n    return (\n      <div id=\"container\" className=\"create-page-wrapper\">\n        <section className=\"tool-pannel\" id=\"tool-pannel\">\n          <ToolsPanel toolState={this.props.state.toolState} />\n        </section>\n        <section className=\"frame-area\" id=\"frame-area\">\n          <FramesWrapper\n            framesArray={this.props.state.framesArray}\n            bg={this.props.state.settings.currentBG}\n          />\n        </section>\n        <section\n          className=\"canvas-area\"\n          id=\"canvas-area\"\n          style={{ overflow: `${this.state.size > this.state.changeWidth ? 'scroll' : ''}` }}\n        >\n          <CanvasWrapper\n            currentCanvas={this.props.state.currentCanvas}\n            toolState={this.props.state.toolState}\n            settings={this.props.state.settings}\n            framesArray={this.props.state.framesArray} />\n        </section>\n        <div className=\"right-side-panel\">\n          <section className=\"preview-area noselect\" id=\"preview-area\">\n            <PreviewBlock\n              framesArray={this.props.state.framesArray}\n            />\n          </section>\n          <section className=\"options-area\" id=\"options-area\">\n            <Options state={this.props.state} />\n          </section>\n        </div>\n        <div className={`local-saves-page ${this.mounted && this.props.state.showLocalSaves ? '' : 'hidden'}`}>\n          <div className=\"local-saves-background\" />\n          <LocalSaves localProjects={this.props.state.localProjects} />\n        </div>\n      </div>\n    );\n  }\n}\n\nCreateAnimation.propTypes = {\n  state: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  state: state\n});\n\nexport default connect(mapStateToProps)(CreateAnimation);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport makeAnimate from 'components/functions/animation';\nimport errorImage from 'assets/images/pages/error.jpg';\nimport 'containers/pages/error/error.css';\n\n\nexport default function ErrorPage(props) {\n  if (props.error) {\n    makeAnimate();\n  }\n  return (\n    <div className={`error-section ${props.error ? 'error-page' : 'hidden'}`}>\n      <div className=\"error-image-wrapper\" id=\"error-image-wrapper\">\n        <img src={errorImage} alt=\"Oops! Somthing went wrong\" />\n      </div>\n      <div className=\"error-text-wrapper\">\n        <span>Oops! Something went wrong :(</span>\n        <span>Please refresh the Webpage!</span>\n      </div>\n    </div>\n  );\n}\n\nErrorPage.propTypes = {\n  error: PropTypes.bool.isRequired\n};\n","import { makeRandomNumber } from 'components/functions/random';\n\nexport default function makeAnimate() {\n  const width = 100 - (480 * 100) / window.innerWidth;\n  const height = 100 - (375 * 100) / window.innerHeight;\n  const top = (55 * 100) / window.innerHeight;\n  const bottom = window.innerHeight - 370;\n  const node = document.getElementById('error-image-wrapper');\n  if (node) {\n    const animation = node.animate(\n      [\n        { top: '55px', left: '0' }, // 0\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 10%\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 20%\n        { top: `${bottom}px`, left: `${makeRandomNumber(width / 2, width)}%` }, // 30%\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(width / 2, width)}%` }, // 40%\n        { top: '55px', left: `${width}%` }, // 50%\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(width / 2, width)}%` }, // 60%\n        { top: `${bottom}px`, left: `${makeRandomNumber(width / 2, width)}%` }, // 70%\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 80%\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 90%\n        { top: '55px', left: '0' } // 100%\n      ],\n      {\n        duration: 30000,\n        delay: 0,\n        easing: 'linear'\n      }\n    );\n    animation.play();\n    setTimeout(() => {\n      makeAnimate();\n    }, 30000);\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport 'components/projectCards/projectCard.css';\nimport AwesomeButton from 'components/buttons/awesomeButton';\n\nexport default class ProjectCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: ''\n    };\n  }\n\n  hoverIn(e) {\n    this.setState({ active: e.currentTarget.id });\n  }\n\n  hoverOut() {\n    this.setState({ active: false });\n  }\n\n  render() {\n    return (\n      <div\n        className=\"preview-wrapper\"\n        id={this.props.infoObj[0]}\n        onMouseEnter={e => this.hoverIn(e)}\n        onMouseLeave={() => this.hoverOut()}\n      >\n        <img className=\"preview-gif\" src={this.props.infoObj[1].gif} alt=\"preview\" />\n        <span className=\"preview-gif-title\">\n          {this.props.infoObj[1].title}\n        </span>\n        <span className=\"preview-gif-date\">\n          {this.props.infoObj[1].date}\n        </span>\n        <div className={`piskel-preview-button-block ${\n          this.state.active === this.props.infoObj[0] ? '' : 'hidden'\n          }`}>\n          <AwesomeButton\n            buttonClass='piskel-preview-button'\n            onClickHandler={() => this.props.deletePiskelOnClick(this.props.infoObj[0])}\n            iconClass='fas fa-trash-alt'\n            title='Delete piskel'\n            placement='bottom'\n          />\n          <AwesomeButton\n            buttonClass='piskel-preview-button'\n            onClickHandler={() =>\n              this.props.onClickHandler(this.props.infoObj[0], this.props.infoObj[1].frames, this.props.infoObj[1])}\n            iconClass='fas fa-pencil-alt'\n            title='Edit piskel'\n            placement='bottom'\n          />\n          <AwesomeButton\n            buttonClass='piskel-preview-button'\n            onClickHandler={() =>\n              this.props.onClickHandler(false, this.props.infoObj[1].frames, this.props.infoObj[1])}\n            iconClass='fas fa-copy'\n            title='Copy piskel'\n            placement='bottom'\n          />\n          <AwesomeButton\n            buttonClass='piskel-preview-button'\n            onClickHandler={() => this.props.onClickHandler(this.props.infoObj[0], false, this.props.infoObj)}\n            iconClass='fas fa-eye'\n            title='Preview piskel details'\n            placement='bottom'\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nProjectCard.propTypes = {\n  onClickHandler: PropTypes.func.isRequired,\n  deletePiskelOnClick: PropTypes.func.isRequired,\n  infoObj: PropTypes.array.isRequired,\n  isAuthed: PropTypes.bool.isRequired\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport $ from 'jquery';\nimport { getDBdata, deleteFromDB } from 'components/functions/requestToDB';\nimport { fromDataToCanvas } from 'components/functions/menuFunctions/fromImageToCanvas';\nimport { pageNavigator } from 'components/functions/navigation';\nimport ProjectCard from 'components/projectCards/projectCard';\nimport 'containers/pages/user/user.css';\nimport store from 'store/store';\n\nclass User extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      height: '',\n      projects: {}\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    if (!this.props.allProjects !== {} && !this.props.allProjects[this.props.userData.info.id]) {\n      getDBdata(this.props.userData.info.id);\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      height: window.innerHeight,\n      projects: this.props.allProjects[this.props.userData.info.id]\n    });\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onClickHandler(projectId, projectFrames, preview) {\n    if (projectFrames) {\n      if (projectId) {\n        // edit piskel with projectID\n        pageNavigator(null, 'user', 'create', this.props.userData.isAuthed, projectId);\n      } else {\n        // copy piskel\n        pageNavigator(null, 'user', 'create', this.props.userData.isAuthed)\n      }\n      store.dispatch({ type: 'project', value: preview });\n      store.dispatch({ type: 'framesArray', value: projectFrames });\n      setTimeout(() => {\n        fromDataToCanvas(projectFrames);\n      }, 200);\n    } else if (preview) {\n      // preview & details of piskel\n      store.dispatch({ type: 'project', value: preview[1] });\n      store.dispatch({ type: 'projectID', value: preview[0] });\n      pageNavigator(\n        null,\n        'user',\n        `projects/user${this.props.userData.info.id}/${preview[0]}`,\n        this.props.userData.isAuthed\n      );\n    }\n  }\n\n  deletePiskel(item) {\n    if (!this.props.userData.isAuthed) {\n      this.setState({ isEmpty: true });\n      pageNavigator(null, this.props.page, 'about', false);\n      $('#signOuted').click();\n      return;\n    }\n    const projects = Object.entries(this.props.allProjects[this.props.userData.info.id]);\n    for (let i = 0; i < projects.length; i += 1) {\n      if (projects[i][0] === item) {\n        deleteFromDB(`users/${this.props.userData.info.id}/${projects[i][0]}`);\n        store.dispatch({ type: 'allProjects', value: ['delete', this.props.userData.info.id, item] });\n        this.setState({ projects: this.props.allProjects[this.props.userData.info.id] })\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"user-page\" style={{ height: this.state.height - 110 }}>\n        <div\n          className=\"user-image\"\n          style={{\n            backgroundImage: `url(${this.props.userData.info.image})`,\n            backgroundSize: 'contain'\n          }}\n        />\n        <h2 className=\"user-name\">{this.props.userData.info.name}</h2>\n        <ul className=\"piskel-list\">\n          <li>all</li>\n          <li>public</li>\n          <li>private</li>\n          <li>deleted</li>\n        </ul>\n        <div id=\"user-piskel-preview-area\" className=\"user-piskel-preview-area\">\n          <div className=\"user-preview-piskel-block flexed\">\n            {!this.state.projects || Object.entries(this.state.projects).length === 0\n              ? <span>No piskel available in &#39;all&#39; category.</span>\n              : Object.entries(this.state.projects)\n                .sort((a, b) => b[1].time - a[1].time)\n                .map(item => (\n                  <ProjectCard\n                    key={item[0]}\n                    infoObj={item}\n                    onClickHandler={(...args) => this.onClickHandler(...args)}\n                    deletePiskelOnClick={(...args) => this.deletePiskel(...args)}\n                    isAuthed={this.props.userData.isAuthed}\n                  />\n                ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nUser.propTypes = {\n  userData: PropTypes.object.isRequired,\n  page: PropTypes.string.isRequired,\n  allProjects: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n  page: state.page,\n  allProjects: state.allProjects\n});\n\nexport default connect(mapStateToProps)(User);","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport 'containers/pages/projectPage/project.css';\n\nfunction ProjectInfo(props) {\n  return (\n    <div className=\"project-section\">\n      <div className=\"project-wrapper\">\n        <div className=\"piskel-page-gif-wrapper\">\n          <img src={props.project.gif} alt=\"preview-gif\" />\n        </div>\n        <div className=\"piskel-page-info-wrapper\">\n          <span className=\"sprite-info-title bold\">\n            Title\n              </span>\n          <h3 className=\"sprite-title\">\n            {props.project.title}\n          </h3>\n          <span className=\"sprite-info-title bold\">\n            Description\n              </span>\n          <h3 className=\"sprite-description\">\n            {`${props.project.description || 'no-description yet'}`}\n          </h3>\n          <span className=\"sprite-info-title bold\">\n            Created:\n              </span>\n          <h3 className=\"sprite-date bold\">\n            {props.project.date}\n          </h3>\n          <div>\n            <span className=\"sprite-info-title bold\">\n              Animation info:\n                </span>\n            <h3 className=\"sprite-options bold\">\n              Frames:\n                </h3>\n            <span>{props.project.frames.length ? props.project.frames.length : 0}</span>\n            <h3 className=\"sprite-options bold\">\n              FPS:\n                </h3>\n            <span>\n              {`${props.project.frames.length && props.project.frames.length === 1\n                ? 0\n                : props.project.fps} frames per second`}\n            </span>\n            <h3 className=\"sprite-options bold\">\n              The total duration:\n                </h3>\n            <span>\n              {`${(props.project.frames.length && props.project.frames.length === 1\n                ? 0\n                : props.project.frames.length / props.project.fps\n              ).toFixed(1)} seconds`}\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nProjectInfo.propTypes = {\n  project: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  project: state.project\n});\n\nexport default connect(mapStateToProps)(ProjectInfo);","import React from 'react';\nimport { Route, HashRouter, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Header from 'components/header/header';\nimport About from 'containers/pages/about/about';\nimport CreateAnimation from 'containers/pages/create/create';\nimport ErrorPage from 'containers/pages/error/error';\nimport User from 'containers/pages/user/user';\nimport ProjectInfo from 'containers/pages/projectPage/project';\nimport store from 'store/store';\nimport { googleAuth, onSuccessHandler } from 'services/googleAuth/authApi';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userData: {},\n      error: false\n    };\n    this.onSuccess = this.onSuccess.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      googleAuth(this.onSuccess);\n    }, 200);\n  }\n\n  onSuccess(googleUser) {\n    const userData = onSuccessHandler(googleUser);\n    store.dispatch({ type: 'userData', value: userData });\n  }\n\n  componentWillUnmount() {\n    this.setState(null);\n  }\n\n  render() {\n    return (\n      <HashRouter>\n        <Header isAuthed={this.props.userData.isAuthed} page={this.props.page} />\n        <ErrorPage error={this.props.error} />\n        <div className={`${this.props.error ? 'hidden' : 'page-wrapper'}`}>\n          <Route path={`/${this.props.locale}/about`} component={About} />\n          <Route path={`/${this.props.locale}/user/*`} component={User} />\n          <Route path={`/${this.props.locale}/create-animation/*`} component={CreateAnimation} />\n          <Route path={`/${this.props.locale}/projects/*`} component={ProjectInfo} />\n          <Route path={`*`}>\n            {this.props.locale && this.props.page !== ''\n              ? this.props.page === 'user'\n                ? this.props.userData.isAuthed\n                  ? <Redirect to={`/${this.props.locale}/user/${this.props.userData.info.id}`} />\n                  : <Redirect to={`/${this.props.locale}/about`} />\n                : <Redirect to={`/${this.props.locale}/${this.props.page}`} />\n              : <Redirect to={`/${this.props.locale}/about`} />}\n          </Route>\n        </div>\n      </HashRouter>\n    );\n  }\n}\n\nApp.propTypes = {\n  locale: PropTypes.string.isRequired,\n  userData: PropTypes.object.isRequired,\n  page: PropTypes.string.isRequired,\n  error: PropTypes.bool.isRequired,\n  project: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => ({\n  locale: state.locales.locale,\n  userData: state.userData,\n  page: state.page,\n  error: state.error,\n  project: state.project\n});\n\nexport default connect(mapStateToProps)(App);\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-console */\n/* eslint-disable no-use-before-define */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { connect } from 'react-redux';\r\nimport { IntlProvider } from 'react-intl';\r\n\r\nfunction mapStateToProps(state) {\r\n  const { locale, messages } = state.locales;\r\n  return { key: locale, locale: locale, messages };\r\n}\r\n\r\nexport default connect(mapStateToProps)(IntlProvider);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { addLocaleData } from 'react-intl';\nimport en from 'react-intl/locale-data/en';\nimport ru from 'react-intl/locale-data/ru';\nimport App from 'app';\nimport store from 'store/store';\nimport * as serviceWorker from './serviceWorker';\nimport ConnectedIntlProvider from './ConnectedIntlProvider';\nimport 'index.css';\nimport 'reset.css';\n\naddLocaleData([...en, ...ru]);\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedIntlProvider>\n      <App />\n    </ConnectedIntlProvider>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}