(this["webpackJsonppiskel-clone"]=this["webpackJsonppiskel-clone"]||[]).push([[0],Array(27).concat([function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABlBMVEXf39////8zI3BgAAAAHklEQVR4AWNghAIGCMDgjwgFCDDSw2M0PSCD0fQAACRcAgF4ciGUAAAAAElFTkSuQmCC"},,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,function(e){e.exports=JSON.parse('{"palettesPlus":"Create a new palette","palettesEdit":"Palette options","palettesList":"Choose your palette from list","palettesTitle":"Palettes","palettesDropDown":"Current colors","palettesIsEmpty":"No colors in this palette yet","exportTitle":"Export","exportGifTitle":"Convert your sprite to an animated GIF","exportDownload":"Download","exportGifDownload":"Download as an animated GIF","exportOpen":"Open in a new tab","exportWatch":"Watch an animated GIF in new tab","exportLink":"your animation file","exportGetLink":"Get link","exportToGoogle":"Save your animation to Google disk to share","exportSignIn":"Sign in to save to Google disk","exportClick":"Click the link","exportLinkToGoogle":"Link to file on Google disk","exportLinkToGif":"Direct link to your GIF","exportPngTitle":"Export your animation as a PNG file","exportGetFrame":"Download selected frame as PNG file","exportOpenButton":"Open","exportDataOpen":"Open the spritesheet as a data uri"}')},function(e){e.exports=JSON.parse('{"create":"Create Animation","palettesPlus":"Create a new palette","palettesEdit":"Palette options","palettesList":"Choose your palette from list","palettesTitle":"Palettes","palettesDropDown":"Current colors","palettesIsEmpty":"No colors in this palette yet","exportTitle":"Export","exportGifTitle":"Convert your sprite to an animated GIF","exportDownload":"Download","exportGifDownload":"Download as an animated GIF","exportOpen":"Open in a new tab","exportWatch":"Watch an animated GIF in new tab","exportLink":"your animation file","exportGetLink":"Get link","exportToGoogle":"Save your animation to Google disk to share","exportSignIn":"Sign in to save to Google disk","exportClick":"Click the link","exportLinkToGoogle":"Link to file on Google disk","exportLinkToGif":"Direct link to your GIF","exportPngTitle":"Export your animation as a PNG file","exportGetFrame":"Download selected frame as PNG file","exportOpenButton":"Open","exportDataOpen":"Open the spritesheet as a data uri"}')},,function(e,t,a){e.exports=a.p+"static/media/preview-example.e3ca5e51.gif"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABSlBMVEX////qQzU0qFNChfT7vAX2+f4qe/M8gvR2pPb7uAD7ugDi6/3qPi8wp1DqQTPpOCgppUwYokLpOirpNCLpMB04gPT1sq7pLRj8wgAUoUAho0f73tz62dbrSDrrTD/xkozucmn3wr786+r+8/L4y8jtaWDzoZzwhX797u3tZFrpNzb93pz+9+T803i70PpsnPZbk/WVzaJBrV1tvIC1277F48zc7uCDxZKh0qwzqkPo9OtRs2r2u7f0q6bsXFHyl5HvfHToHgDwcSr0kzH4rSTuZTv+6sDyhDf8ylP2oSvsWDvwdTr7win6th793JMLcfOauvj94qn8z2KMsfj8xj//+/HJ2vuRw4D81oLSuzP957mktkVwsFHgvCy6uT6Fs05TrVXovCIwm5M/qG1Ilc5Fnqc+pXyqxPlGkNtEmrY/ooxDiOyhw+phuHZ96HNKAAAHS0lEQVR4nO2aaXvTRhCAHcU4RNFpKRFWnPhI4hASIL4d2yTQg9KWAuVqoSfQlraU//+1ki07kqyV1jp2JZ55v6+efbOzM7Pj5HIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACTCXr1cq423DMa1/e36Hu39xMne/p3Dc05RVWWOqoorBxfjbdpbi4G9/YtzTRWLnCCsOBAErqio4kGjTHuLUahvHahK0aXm9OREVa3WMhqytaqqcD52l5aKeLhPe7dLU7/QsPQsyaK6s0V7y0tRrmq+weklqRQbmQnW8oGGf3w2R1G7yIRjvRrKb+ooZiBWL0L7TRyV85RXj/KOuOT9c8NpFdoSflS0iH4m4m5qW53tHTG6n4Gg3aGt4s2dOA5winqXtowXVTU2QTNSr9P2cbN3Hk+EzuC4lF3GejFKjfBC0FLVqm5HrRGLcEKdtpWNcpxX0BLcSdNFTEQwTR3qthK/4G6aBOsJ3MFUCeZ2486iK8V0CR4VYxc8p+3koKJg71zgiuJklCiao7esCI41TLuiou1WK42tWm083mocHqxoiCFc8Yi2k4PrWM22IKo7lX3X3aqPKyvqoqSYLsHcOUaW4dTdBqLHLFc4V6URD8gKBNEIvoSceuTbX27t2B3TJlgPvISCdhQ4dtni5q8SpUpg18twFBSj4grW+2A2+0id4FgNOkDcmVJZMIuqcjfJ3YbBp6aZcNwSc8GqsqIcJrfVcDT8H/Xi+VKtV+Ve6gT3/F8US4dcLYlNRuL4sxs+gmqqx7p45K99jlb8FASP1/PXvthBBGr6kkYI8mze4EvPYyxWae8uBu6vm4L5a195KHK7tHcXBw8mR2gofn3DHamClrJZbihOpkdoKn73jesY1Qz8yBnM8dzQ4FuHIpeyB15IHrI2Q0fZENQ0japDc2I/wryjbIgXtDcXC8dOQ1vZEETae4uHB6zbcFY2lE8izeRyC4KzsiFwtLcWD/cXgnRWNsQG7b3FwyMvw0nZ0NL0k1gEFq/hrGx8GrXQ8xpaHGOsvhKaxMVmnCCCNJ9fPwlevfG4EJLHT5J3m+KZaEzYhxirNwqrIVm7mriaxfdIw5sYq8Mbrq4lrmbxI+oerr/GWB3BsEDqJj5FGmJcw0iGG4m7TUEVi/w6zuoIhpu3klazeIgwZPM4q6MYvk9azQJxgnn2Oc7qKJnmWdJqFkjDpziroxiSKheoa5i84e2k1SyQ5TBxw9Ok1SwiFfxMGNKLUlKG9DINdcMHOKuzYIis+DhPi0wYUuvaiFULap03sYp/E2l4H2N1Frq2xYn37CI+wlgdpfMmNcZATzFwWu8svC18JlEvgldHMXyZvNwUtCHGGGOjsBYA0pDYGz/3HFUQ3/wQvHjj9tUATpGGxCamiFEU+4qR4/j8k02UYhxfx+K1Z5iyPzGM3onh87cRcUqs4OdyLzwM2fzPDMPwrehfv4K6iMSKRc6rM2V/YSbI3cgff4lKtuRSqcdFZH+dCsZxiM9QZ0gulS7UfDb/GzMj+k1E5hlyiSbneuazb36fCzI8E/HT71GG5H6YMbE330aRsKM3o336A+oEiU28J1yGKWsWCQelXpQv30I2deTq/YQ8ay8SDqIlG2TPRuyBb2G9oGZFwoHUD//dZ8g8Q+xhYTEt+vMi4UQOnU+RtZBsrZhg5Bp7kXBdxZB1H9nOkA9S85HoKBLuUwyneIo2JB2kBk9fIf3CKl5FF3vSmdRkKPsZhlH0EyQ2hLLTl3wVS4Mlv+cnSD7PmAx1X0NGbi/ztSunfoIEn4Z2mgGKUgu/u7nlM56hdYQGRpvtC1/Crf3tt76GlI4wl+v6JxsDncEp/h1JOnv3wS+RUjpC40/vn2zMY9RbQY4dxox2XvoD2c+QfTc5GAYamo7MYIj8Qq/J69NY58/+3ERE6ib5WjinWwpWNI6nNBp4JZ1usyXb/kZnf33wVKTQztjoB+TT+UHKfLvZ7U0PczjsdZr9lq5LzlQlMX97XEbyHamTUUA+tR+lLsuyJOklWTbkJI+F/Nk/i5eRXpqZMvTaaXjO/l11RWqBaoya9HCuIj66q2xQK4U2OvEq8mf2srG2SjGPzhkEFv7lOHt7WTZoX0KLZtyK72Zlo0BwkO9L3IoSPy0bBaIjUl/6MSsaDU4hDWnUxiDedGM2OOkSNDKqHGtdNBuc/2g7uejFW/qZUsTfPxJgOMLrUbHgS3H8Xh478eUbqYV+cFGlK2E8GDFYbohFlnYMCUeSUhmhM7qtiLeRlyP8dEWGgRwhVHl9iREkNYb9sI68zqc6QC8Z9kshHHm82WNKGDYZfbmcI8mj6P9tRJbuxxK2pKSX+hm4fwsMByNZDx4aSzLfztrxXTLstHXZPTW0yem6PGpm8fQc9Dr9j4w1QbSQDDXDfNQfZPfw3Ax73UGz3/44ao1Go3a/Oeh0M390AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQ4H8FDtOs5aFMewAAAABJRU5ErkJggg=="},function(e,t,a){e.exports=a.p+"static/media/export-gif.ae1e58e5.png"},function(e,t,a){e.exports=a.p+"static/media/private-page.d4571089.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADCSURBVDhP7dAxCwFhGMDxh00Gk4nBYDAZFIvNJ/BBDOwGiUlJklAWPov4FqSUDEqUSfyf91zdqTuv3b9+3fte3b13j1hUwxpLJPWGTRHE0cLTYw6rGtjC+7BawVf0ff0sgYyz9GX1BW3cUMUG7un6O1/r4YKy2Ynk8cAeMb0RVhdnFM1OJIsdFqhDBxtYBXeUzE4khwMmCJqTrzGmzlIKOGKA0FPdUjihgz6uaMK6IXTK+pIZ3AFap9MdIW12/35M5AUsFCcIOdPfYQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEdSURBVEhL3dU/a8JAHMbxIChYlQ52aIeCU6Gbk2+hXcV306lDofSttIvuQsGhk4uLIIiCVVF0KxQ6td9HchDkvDvSdKgPfCC55H4PJP6Jjj4tPKOwO8s4ZSzxjTb+pKSODVTSwf8sKeIVKsi85ARdaPAa2/g4k5IKetBAvexr6HFlUnKKN2jQDFcw+fU7qaIPDZighv2kLjnDANo4wiUOJVXJC7RhiAsteJIsudeCK3l84RPnWghMAyqY7s4cyeEDujkNb4HyBNvmEN5HpOhF6YfNNsDFvORmzBndqA22QTZmeAnzmI6dCS1JfjzvYNZ17I2vJDlcGcNc03FQDpXY/oDeYa7r5yU4+n48YIEVHrE/XLmFBsuNFo4hUfQDRmuR/2vYwfIAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAWZJREFUOI2t0jFI1VEUx/FPGjlki9ai0CQIDQ5pCqbNTxJdykGdWmxxsUAHXYJwqMVBNHVzKWh2EAdBTDCQFhWKrMW2aFTiyXO4f+GP/u//8dQfHLiXe+73nvs7h2tWdYX5PZhDF6rwCyeXffwZVtCIZkxgHe9wv1LYIJZwM+OsDbOYjpxf0BBmcCMnpxa/0VEONoz5MrB7+IgDwdeoBgXDh3NymvAZvXiVB3uOIkpJ7OE1GlI5rVhFndD5OzFYAf9TsHScYAMfsIl6PBA6nqlW/IvAzmIL+7greLuI21mwGvzENhawjL8pUBHvsYPu5M5bPI5VN3qukgNMYQCTQpP2EiCM4WkMVoPDyBeLaE8eKGEcL9EXg8FIBHbWiBep/Tf058Gq8D0H+AWfkvWxMHO5epIDKwnGHyVRKAerxp/kYhtuZeR8xcOksrVywLTqBMN/pKrbFQa4sxJQlh7hjTCLLVeFXUmnRmtxEV/Efn8AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAOdJREFUOI3t0zErhWEUAOCnK9Pd76a4kjALGQ0+1ySrwXgXg9WPMBjFYJMSZTGom1kppJj9BBYZGL4zfG4ZvnPv6Cxv5z29T+e8dUbkYxK72EATL/huJLEC54FcoYNTpLwC79jpuz+Jbmtjd2ijh61KrYP9DNaKfAFfFXQbe1lsDg+Yx61y/HuMDYLNRN5W/mkxDKwV9TT2iNl/7M9YGybWxAcuMR3YU5y1MVjHIVZwg7dBMDjwe7F7mMpi8IrFSr6Kiyw2gWflBixhE0dqrFM1GtHNJ0ZxjGWcKce9rguKLroYzzzujx/AVUNl5zj/7wAAAABJRU5ErkJggg=="},,,function(e,t,a){e.exports=a.p+"static/media/error.d70d2a0b.jpg"},,,,function(e,t,a){e.exports=a(127)},,,,,,,,,,,,,,,,function(e,t){},,,,,,function(e,t){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(23),o=a(0),r=a.n(o),i=a(15),s=a.n(i),c=a(13),l=a(41),u=a(51),p=a.n(u),d=a(52),m=a.n(d),h=a(5),f=a(6),v=a(9),g=a(7),b=a(38),y=a(8),w=a(24),k=a(25),A=(a(93),a(29)),E=a(37),C={ru:a(53),en:a(54)},j=a(1),N=a.n(j),S=a(27),O=a.n(S),x={locales:{locale:localStorage.getItem("locale")||"en",messages:C.ru},page:localStorage.getItem("page")?-1!==localStorage.getItem("page").indexOf("projects")?"user":localStorage.getItem("page"):"",userData:JSON.parse(localStorage.getItem("userData"))||{info:{id:"none",name:"none",image:"none"},isAuthed:!1},error:!1,toolState:{currentTool:"",currentColor:"#161030",backColor:"#c0c0c0"},settings:{currentBG:"url(".concat(O.a,")"),customWidth:33},projectID:localStorage.getItem("projectID")||"",project:{gif:"",frames:"",title:"New Piskel-clone",description:"",date:"",time:"",fps:3},currentCanvas:"",googleLinks:[],palette:[],showLocalSaves:!1,localProjects:JSON.parse(localStorage.getItem("localProjects"))||{},allProjects:JSON.parse(localStorage.getItem("allProjects"))||{},framesArray:[]};var D=Object(E.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"locale":return localStorage.setItem("locale",t.value),Object.assign({},e,{locale:t.value});case"page":return localStorage.setItem("page",t.value),Object.assign({},e,{page:t.value});case"userData":var a={info:{id:t.value.id,name:t.value.name,image:t.value.image},isAuthed:""!==t.value};return localStorage.setItem("userData",JSON.stringify(a)),Object(A.a)({},e,{userData:a});case"error":return Object.assign({},e,{error:t.value});case"toolState":if(t.value instanceof Array){for(var n in e.toolState)t.value[0]===n&&(e.toolState[n]=t.value[1]),"currentColor"===t.value[0]?N()("#customed1").val(t.value[1]):"backColor"===t.value[0]&&N()("#customed2").val(t.value[1]);return Object(A.a)({},e,{},e.toolState)}return Object.assign({},e,{toolState:t.value});case"settings":for(var o in e.settings)t.value[0]===o&&(e.settings[o]=t.value[1]);return Object(A.a)({},e,{},e.settings);case"projectID":return localStorage.setItem("projectID",t.value),Object.assign({},e,{projectID:t.value});case"project":if(t.value instanceof Array){for(var r in e.project)t.value[0]===r&&(e.project[r]=t.value[1]);return Object(A.a)({},e,{},e.project)}if("initial"===t.value){var i=x.project;return Object.assign({},e,{project:i})}return Object.assign({},e,{project:t.value});case"currentCanvas":return Object.assign({},e,{currentCanvas:t.value});case"showLocalSaves":return Object.assign({},e,{showLocalSaves:t.value});case"googleLinks":return Object.assign({},e,{googleLinks:t.value});case"palette":var s=e.palette;return-1===s.indexOf(t.value)&&s.push(t.value),Object.assign({},e,{palette:s});case"localProjects":if(t.value instanceof Array){var c=e.localProjects;return"delete"===t.value[0]&&(delete c[t.value[1]],localStorage.setItem("localProjects",JSON.stringify(c))),Object(A.a)({},e,{},c)}return localStorage.setItem("localProjects",JSON.stringify(t.value)),Object.assign({},e,{localProjects:t.value});case"allProjects":if(t.value instanceof Array){var l=e.allProjects;return"delete"===t.value[0]&&(delete l[t.value[1]][t.value[2]],localStorage.setItem("allProjects",JSON.stringify(l))),Object(A.a)({},e,{},l)}return localStorage.setItem("allProjects",JSON.stringify(t.value)),Object.assign({},e,{allProjects:t.value});case"framesArray":var u=e.framesArray;if(t.value instanceof Object)if(u.length>=1)if(void 0!==t.value.copy)u.forEach((function(e,a){e.id===t.value.copy&&u.splice(a+1,0,t.value.stateObj)}));else if(void 0!==t.value.delete)u.forEach((function(e,a){e.id===t.value.delete&&u.splice(a,1)}));else if(void 0!==t.value.update)u.forEach((function(e,a){e.id===t.value.update&&(u[a].frameSRC=t.value.src)}));else if(void 0!==t.value.drag){var p=u[t.value.target],d=u[t.value.drag];u[t.value.target]=d,u[t.value.drag]=p}else{if(null===t.value)return Object.assign({},e,{framesArray:[]});u.every((function(e){return e.id!==t.value.id}))&&u.push(t.value)}else t.value.length>0?t.value.map((function(e){return u.push(e)})):u=[{id:t.value.id,frameSRC:t.value.frameSRC}];else if(null===t.value)return Object.assign({},e,{framesArray:[]});return Object.assign({},e,{framesArray:u});default:return e}}));a(94);function I(e,t){return Math.ceil(t-(t-e)*Math.random())}function T(){for(var e,t=[],a=0;a<20;a+=1)e=[[48,57],[65,90],[97,122]][3*Math.random()>>0],t[a]=String.fromCharCode((Math.random()*(e[1]-e[0]+1)>>0)+e[0]);return t.join("")}function P(e,t,a,n,o){if(-1!==t.indexOf("create")){if(-1!==a.indexOf("user"))return n?window.confirm("Are you sure you want to leave?")?(D.dispatch({type:"page",value:a}),void N()(document.body).css({cursor:"default"})):void e.preventDefault():(D.dispatch({type:"page",value:"about"}),D.dispatch({type:"userData",value:""}),void D.dispatch({type:"error",value:!0}));if("create"===a){if(window.confirm("Are you sure you want to leave?")){var r=T(),i="create-animation/".concat(r);return D.dispatch({type:"page",value:i}),D.dispatch({type:"projectID",value:r}),void N()(document.body).css({cursor:"default"})}return void e.preventDefault()}return window.confirm("Are you sure you want to leave?")?(D.dispatch({type:"page",value:a}),void N()(document.body).css({cursor:"default"})):void e.preventDefault()}if("create"===a){if(o)return D.dispatch({type:"page",value:"create-animation/".concat(o)}),D.dispatch({type:"projectID",value:o}),void N()(document.body).css({cursor:"default"});var s=T(),c="create-animation/".concat(s);return D.dispatch({type:"page",value:c}),D.dispatch({type:"projectID",value:s}),void N()(document.body).css({cursor:"default"})}D.dispatch({type:"page",value:a}),N()(document.body).css({cursor:"default"})}var B=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={active:""},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"addActiveClass",value:function(e){var t=e.currentTarget.getAttribute("id");this.state.active===t?this.setState({active:""}):this.setState({active:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"menu-item ".concat(this.props.userData.isAuthed?"account flexed":"hidden"),id:"list",role:"button",tabIndex:"-1",onKeyPress:void 0,onClick:function(t){if(!localStorage.getItem("userData"))return P(t,e.props.page,"about",!1),D.dispatch({type:"userData",value:""}),void D.dispatch({type:"error",value:!0});e.addActiveClass(t)},onBlur:function(){setTimeout((function(){e.setState({active:""})}),300)}},r.a.createElement("div",{className:"account-image",style:{backgroundImage:"url(".concat(this.props.userData.info.image,")"),backgroundSize:"contain"}}),r.a.createElement("span",{className:"account-button"},this.props.userData.info.name),r.a.createElement("i",{className:"fas fa-sort-down"}),r.a.createElement("ul",{className:"dropdown ".concat("list"===this.state.active?"active flexed":"hidden")},r.a.createElement("li",{className:"list top ".concat("list"===this.state.active?"flexed":"hidden")},r.a.createElement(w.b,{to:"/user/".concat(this.props.userData.info.id),id:"/user/".concat(this.props.userData.info.id),className:"account-item",onClick:function(t){return P(t,e.props.page,"user/".concat(e.props.userData.info.id),e.props.userData.isAuthed)}},"My Galery")),r.a.createElement("li",{className:"list bottom ".concat("list"===this.state.active?"flexed":"hidden")},r.a.createElement(w.b,{to:"/",id:"logout",className:"account-item",onClick:function(t){!0===window.confirm("Are you sure you want to leave?")?(P(t,e.props.page,"about",e.props.userData.isAuthed),window.gapi.auth2.getAuthInstance().signOut().then((function(){D.dispatch({type:"userData",value:""}),D.dispatch({type:"page",value:""})}))):t.preventDefault()}},"Log out"))))}}]),t}(r.a.Component),M=Object(c.b)((function(e){return{userData:e.userData,page:e.page}}))(B);function H(e){return r.a.createElement("header",{className:"header"},r.a.createElement("ul",{className:"header-menu"},r.a.createElement("li",{className:"logo"},r.a.createElement(w.b,{id:"/about",to:"/about",className:"logo-text",onClick:function(t){return P(t,e.page,"about",e.isAuthed)}},"Piskel-clone")),r.a.createElement("li",{className:"header-buttons"},r.a.createElement("div",{className:"create menu-item flexed"},r.a.createElement(w.b,{id:"/create",to:"/create-animation",className:"create-link",onClick:function(t){return P(t,e.page,"create",e.isAuthed)}},"Create Animation")),r.a.createElement("div",{className:"signin"},r.a.createElement(M,null),r.a.createElement("div",{id:"my-signIn",className:"".concat(e.isAuthed?"hidden":"shown")})))))}a(96);var G=a(56),U=a.n(G),R=a(57),F=a.n(R),L=a(58),z=a.n(L),W=a(59),q=a.n(W);var K=Object(c.b)((function(e){return{isAuthed:e.userData.isAuthed}}))((function(e){return r.a.createElement("div",{className:"homepage-section"},r.a.createElement("div",{className:"about-app-wrapper"},r.a.createElement("div",{className:"home-about"},r.a.createElement("h1",null,r.a.createElement("span",{className:"piskel"},"Piskel-clone "),"is a free online editor for animated sprites & pixel art"),r.a.createElement("h2",null,"Create animations in your browser."),r.a.createElement("h2",null,r.a.createElement("span",{className:"description-link"},"Try an example"),", use ",r.a.createElement("span",{role:"button",tabIndex:"-1",onKeyPress:void 0,className:"description-link",onClick:function(){return N()(".abcRioButton.abcRioButtonLightBlue").click()}},"Google sign in")," to access your gallery or simply ",r.a.createElement("button",{type:"button",className:"text-button",onClick:function(t){return P(t,"about","create",e.isAuthed)}},r.a.createElement("span",{className:"description-link"},"Create a new Sprite"))),r.a.createElement("div",{className:"home-buttons"},r.a.createElement("button",{type:"button",className:"login-button",onClick:function(){return N()(".abcRioButton.abcRioButtonLightBlue").click()}},"Sign in"),r.a.createElement("button",{type:"button",className:"create-button",onClick:function(t){return P(t,"about","create",e.isAuthed)}},r.a.createElement("span",{className:"link"},"Create Sprite")))),r.a.createElement("div",{className:"home-image"},r.a.createElement("div",{className:"screen"}),r.a.createElement("div",{className:"home-preview"}))),r.a.createElement("div",{className:"app-description-wrapper"},r.a.createElement("div",{className:"description-item"},r.a.createElement("img",{className:"description-image",src:U.a,alt:"piskel-example"}),r.a.createElement("div",{className:"description-body"},r.a.createElement("h3",{className:"description-title"},"Live preview"),r.a.createElement("p",{className:"description-text"},"Check a preview of your animation in real time as you draw. Adjust the frame delay on the fly."))),r.a.createElement("div",{className:"description-item"},r.a.createElement("img",{className:"description-image",src:F.a,alt:"google-icon"}),r.a.createElement("div",{className:"description-body"},r.a.createElement("h3",{className:"description-title"},"Google Sign in"),r.a.createElement("p",{className:"description-text"},"No need to remember yet another password, just use your Google account to sign in."))),r.a.createElement("div",{className:"description-item"},r.a.createElement("img",{className:"description-image",src:z.a,alt:"export-icon"}),r.a.createElement("div",{className:"description-body"},r.a.createElement("h3",{className:"description-title"},"Export to GIF, PNG"),r.a.createElement("p",{className:"description-text"},"Several export modes supported. Animated GIFs for sharing, spritesheet PNG/ZIP for bigger projects"))),r.a.createElement("div",{className:"description-item"},r.a.createElement("img",{className:"description-image",src:q.a,alt:"personal-page-icon"}),r.a.createElement("div",{className:"description-body"},r.a.createElement("h3",{className:"description-title"},"Private gallery"),r.a.createElement("p",{className:"description-text"},"You can chose to make any of your sprites public or private. Private sprites are only visible to you.")))))})),Y=(a(97),a(60)),J=a.n(Y),Q=a(61),X=a.n(Q),V=a(62),Z=a.n(V),_=a(63),$=a.n(_);function ee(e){N()("#drawCanvas").show(),"paintBucketTool"===e?N()(document.body).css({cursor:"url(".concat(X.a,") 15 15, auto")}):"colorPickerTool"===e?(N()("#drawCanvas").hide(),N()(document.body).css({cursor:"url(".concat(J.a,") 1 10, auto")})):"penTool"===e||"strokeTool"===e||"rectangleTool"===e||"circleTool"===e?N()(document.body).css({cursor:"url(".concat($.a,") 1 18, auto")}):"eraserTool"===e?N()(document.body).css({cursor:"url(".concat(Z.a,") 1 18, auto")}):N()(document.body).css({cursor:"default"})}var te=a(67),ae=a(68),ne=a(146),oe=a(148);var re=Object(ne.a)((function(e){return{arrow:{position:"absolute",fontSize:6,"&::before":{content:'""',margin:"auto",display:"block",width:0,height:0,borderStyle:"solid"}},popper:(t="#6bebeb",{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-9px",width:"20px",height:"10px","&::before":{borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent ".concat(t," transparent")}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-9px",width:"20px",height:"10px","&::before":{borderWidth:"10px 10px 0 10px",borderColor:"".concat(t," transparent transparent transparent")}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-9px",height:"20px",width:"10px","&::before":{borderWidth:"10px 10px 10px 0",borderColor:"transparent ".concat(t," transparent transparent")}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-9px",height:"20px",width:"10px","&::before":{borderWidth:"10px 0 10px 10px",borderColor:"transparent transparent transparent ".concat(t)}}}),tooltip:{position:"relative",color:"black",fontSize:"18px",backgroundColor:"#6bebeb",border:"1px solid #3c8484"},tooltipPlacementLeft:{right:"-15px",margin:"0 8px"},tooltipPlacementRight:{margin:"0 8px"},tooltipPlacementTop:{right:"-15px",margin:"8px 0"},tooltipPlacementBottom:{top:"5px",margin:"8px 0"}};var t}));function ie(e){var t=re(),a=t.arrow,n=Object(ae.a)(t,["arrow"]),o=r.a.useState(null),i=Object(te.a)(o,2),s=i[0],c=i[1];return r.a.createElement(oe.a,Object.assign({classes:n,PopperProps:{popperOptions:{modifiers:{arrow:{enabled:Boolean(s),element:s}}}}},e,{title:r.a.createElement(r.a.Fragment,null,e.title,r.a.createElement("span",{className:a,ref:c}))}))}function se(e){return r.a.createElement(ie,Object.assign({},e,{title:e.title,placement:e.placement}))}var ce=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={mouseEnter:!1},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"mouseIn",value:function(){this.setState({mouseEnter:!0})}},{key:"mouseOut",value:function(){this.setState({mouseEnter:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement(se,{title:this.props.title,placement:this.props.placement,enterDelay:500},r.a.createElement("button",{type:"button",className:"".concat(this.props.buttonClass," ").concat(this.state.mouseEnter||this.props.active===this.props.buttonId?"".concat(this.props.buttonClass,"-hovered"):""),onMouseEnter:function(){return e.mouseIn()},onMouseLeave:function(){return e.mouseOut()},onClick:function(){return e.props.onClickHandler()}},r.a.createElement("i",{className:this.props.iconClass})))}}]),t}(r.a.Component);ce.defaultProps={buttonClass:"awesome-button",text:""};var le,ue=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={active:""},e.mounted=!1,e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"activeToolSetter",value:function(e){this.state.active===e?(this.setState({active:null}),D.dispatch({type:"toolState",value:["currentTool",""]}),ee(null)):(this.setState({active:e}),D.dispatch({type:"toolState",value:["currentTool",e]}),ee(e))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{name:"Tools"},r.a.createElement("div",{className:"tool-panel",id:"tool-panel"},r.a.createElement("div",{className:"tool-buttons-block"},r.a.createElement(ce,{buttonId:"paintBucketTool",buttonClass:"tool-button",onClickHandler:function(){return e.activeToolSetter("paintBucketTool")},iconClass:"fas fa-fill-drip",active:this.state.active,title:"Click on the area to paint it in chosen color",placement:"right"}),r.a.createElement(ce,{buttonId:"colorPickerTool",buttonClass:"tool-button",onClickHandler:function(){return e.activeToolSetter("colorPickerTool")},iconClass:"fas fa-eye-dropper",active:this.state.active,title:"Click on any fragment to pick its color",placement:"right"}),r.a.createElement(ce,{buttonId:"penTool",buttonClass:"tool-button",onClickHandler:function(){return e.activeToolSetter("penTool")},iconClass:"fas fa-pencil-alt",active:this.state.active,title:"Click and move the mouse to draw",placement:"right"}),r.a.createElement(ce,{buttonId:"eraserTool",buttonClass:"tool-button",onClickHandler:function(){return e.activeToolSetter("eraserTool")},iconClass:"fas fa-eraser",active:this.state.active,title:"Click on the area to erase it",placement:"right"}),r.a.createElement(ce,{buttonId:"strokeTool",buttonClass:"tool-button",onClickHandler:function(){return e.activeToolSetter("strokeTool")},iconClass:"fas fa-slash",active:this.state.active,title:"Click and move the mouse to draw a line",placement:"right"}),r.a.createElement(ce,{buttonId:"rectangleTool",buttonClass:"tool-button",onClickHandler:function(){return e.activeToolSetter("rectangleTool")},iconClass:"far fa-square",active:this.state.active,title:"Click and move the mouse to draw a rectangle",placement:"right"}),r.a.createElement(ce,{buttonId:"circleTool",buttonClass:"tool-button",onClickHandler:function(){return e.activeToolSetter("circleTool")},iconClass:"far fa-circle",active:this.state.active,title:"Click and move the mouse to draw a circle",placement:"right"}))),r.a.createElement("div",{className:"color-panel"},r.a.createElement(ce,{buttonClass:"color-switcher",onClickHandler:function(){var t=e.props.toolState.currentColor,a=e.props.toolState.backColor;D.dispatch({type:"toolState",value:["currentColor",a]}),D.dispatch({type:"toolState",value:["backColor",t]})},iconClass:"fas fa-retweet",title:"Switch colors on click",placement:"bottom-start",buttonId:null,active:this.state.active}),r.a.createElement("div",{className:"color-block-upper"},r.a.createElement("input",{type:"color",name:"colors",className:"input-color",id:"customed1",defaultValue:this.props.toolState.currentColor,onChange:function(e){return D.dispatch({type:"toolState",value:["currentColor",N()(e.target).val()]})}})),r.a.createElement("div",{className:"color-block-under"},r.a.createElement("input",{type:"color",name:"colors",className:"input-color",id:"customed2",defaultValue:this.props.toolState.backColor,onChange:function(e){return D.dispatch({type:"toolState",value:["backColor",N()(e.target).val()]})}}))))}}]),t}(r.a.Component);a(98);D.subscribe((function(){le=D.getState().fps||3}));var pe,de,me=0;function he(){clearTimeout(pe);var e=1e3/le;N()(".preview").children().css({display:"none"}),N()(".preview").children()[me]&&(N()(".preview").children()[me].style.display="block"),(me+=1)===N()(".preview").children().length&&(me=0),pe=setTimeout(he,e)}function fe(e){var t={update:e,src:N()("#canvas".concat(e))[0].toDataURL("image/png")};D.dispatch({type:"framesArray",value:t}),N()(".preview").children().length>1?(me=0,he()):clearTimeout(pe)}var ve=0;function ge(){de&&(ve+=1,de.close()),de=window.open("about:blank","window".concat(ve),"width=300,height=300");var e=N()(".preview").clone().appendTo(de.document.body).css({display:"flex","justify-content":"center","align-items":"center",height:"100%"});N()(de.document.body).css({display:"flex","justify-content":"center","align-items":"center"});var t=le,a=0;N()(de).ready((function n(){var o=1e3/t;e.children().css({display:"none"}),e.children()[a]&&(e.children()[a].style.display="block"),(a+=1)===e.children().length&&(a=0),setTimeout(n,o)}))}a(99);var be,ye,we,ke,Ae,Ee,Ce,je,Ne,Se,Oe,xe,De,Ie,Te=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={activeFrame:"",hovered:""},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){if(this.props.framesArray.length<1){var e=T();this.setState({activeFrame:e}),D.dispatch({type:"framesArray",value:{id:e,frameSRC:""}}),D.dispatch({type:"currentCanvas",value:e})}else this.setState({activeFrame:this.props.framesArray[0].id}),D.dispatch({type:"currentCanvas",value:this.props.framesArray[0].id})}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.updateImagePreview()}),1e3)}},{key:"componentWillUnmount",value:function(){D.dispatch({type:"framesArray",value:null})}},{key:"onMouseEnterHandler",value:function(e){this.setState({hovered:e})}},{key:"onMouseLeaveHandler",value:function(){this.setState({hovered:""})}},{key:"updateImagePreview",value:function(){this.props.framesArray.map((function(e){return fe(e.id)}))}},{key:"openCanvasHandler",value:function(e){var t=this;this.setState({activeFrame:e}),D.dispatch({type:"currentCanvas",value:e}),setTimeout((function(){t.updateImagePreview()}),200)}},{key:"copyFrameHandler",value:function(e){var t=this,a=T(),n={copy:e,stateObj:{id:a,frameSRC:""}};D.dispatch({type:"framesArray",value:n}),setTimeout((function(){!function(e,t){var a=N()("#canvas".concat(e)).get(0).getContext("2d").getImageData(0,0,N()("#canvas".concat(e)).width(),N()("#canvas".concat(e)).width());N()("#canvas".concat(t)).get(0).getContext("2d").putImageData(a,0,0)}(e,a),t.openCanvasHandler(a)}),200)}},{key:"addNewFrameHandler",value:function(){var e=this,t=T();this.setState({activeFrame:t}),D.dispatch({type:"framesArray",value:{id:t,frameSRC:""}}),setTimeout((function(){e.openCanvasHandler(t)}),200)}},{key:"removeFrameHandler",value:function(e){var t=this;D.dispatch({type:"framesArray",value:{delete:e}}),setTimeout((function(){t.openCanvasHandler(N()(".frame-list").children().last()[0].id.split("frame")[1])}),200)}},{key:"dragFrameOnClick",value:function(){N()("#sortable").sortable(),N()("#sortable").sortable("option","disabled",!1),N()("#sortable").disableSelection()}},{key:"dragOffOnClick",value:function(e,t){var a=this;N()("#sortable").sortable("option","disabled",!0),Array.from(N()("#sortable").children()).forEach((function(a,n){a.id==="frame".concat(e)&&D.dispatch({type:"framesArray",value:{drag:t,target:n,draggedFrame:e}})})),setTimeout((function(){a.openCanvasHandler(e)}),200)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"frame-box"},r.a.createElement("ul",{id:"sortable",className:"frame-list"},this.props.framesArray.map((function(t,a){return r.a.createElement("li",{key:"frame-list-item-".concat(t.id),className:"ui-state-default frame ".concat(e.state.activeFrame===t.id?"activeFrame":""),id:"frame".concat(t.id),style:{background:e.props.bg||"url(".concat(O.a,")")},onMouseEnter:function(){return e.onMouseEnterHandler(t.id)},onMouseLeave:function(){return e.onMouseLeaveHandler()},onClick:function(){return e.openCanvasHandler(t.id)}},r.a.createElement("img",{id:"preview-box".concat(t.id),className:"preview-box",src:t.frameSRC,alt:""}),r.a.createElement("title",{className:"number"},a+1),r.a.createElement("span",{className:"removeFrame ".concat(1!==e.props.framesArray.length&&e.state.hovered===t.id||e.state.hovered===t.id&&e.props.framesArray[0].id!==t.id?"":"minorZ"),onClick:function(){return e.removeFrameHandler(t.id)}},r.a.createElement("i",{className:"fas fa-trash-alt"})),r.a.createElement("span",{id:t.id,className:"dragFrame ".concat(1!==e.props.framesArray.length&&e.state.hovered===t.id||e.state.hovered===t.id&&e.props.framesArray[0].id!==t.id?"":"minorZ"),onMouseDown:function(){return e.dragFrameOnClick()},onMouseUp:function(){return e.dragOffOnClick(t.id,a)}},r.a.createElement("i",{className:"fas fa-arrows-alt"})),r.a.createElement("span",{className:"copyFrame ".concat(e.state.hovered===t.id?"":"minorZ"),onClick:function(){return e.copyFrameHandler(t.id)}},r.a.createElement("i",{className:"fas fa-copy"})))}))),r.a.createElement("button",{className:"addNewFrame",onClick:function(){return e.addNewFrameHandler()},type:"button"},"Add new frame"))}}]),t}(r.a.Component);a(100);function Pe(){var e=N()("#drawCanvas").get(0).getContext("2d"),t=N()("#drawCanvas").width();e.clearRect(0,0,t,t)}function Be(e,t,a,n,o){var r=document.querySelector("#drawCanvas").getBoundingClientRect(),i=Math.floor(e.clientX-r.left),s=Math.floor(e.clientY-r.top),c=Math.ceil(N()("#canvas".concat(t)).width()/n),l=N()("#drawCanvas").get(0).getContext("2d"),u=N()("#drawCanvas").width();xe=i,De=s,l.clearRect(0,0,u,u),l.globalCompositeOperation="source-over",l.strokeStyle=o,l.lineWidth=c,l.beginPath(),"strokeTool"===a?(l.moveTo(Se,Oe),l.lineTo(xe,De),l.stroke()):"rectangleTool"===a?(l.moveTo(Se,Oe),l.lineTo(xe,Oe),l.lineTo(xe,De),l.lineTo(Se,De),l.lineTo(Se,Oe),l.stroke()):"circleTool"===a&&(Ie=Math.sqrt((Se-xe)*(Se-xe)+(Oe-De)*(Oe-De))/2,l.arc(Se,Oe,Ie,0,2*Math.PI),l.stroke()),N()("#drawCanvas").mouseup((function(){var e=N()("#canvas".concat(t)).get(0).getContext("2d");e.globalCompositeOperation="source-over",e.strokeStyle=o,e.lineWidth=c,e.beginPath(),"strokeTool"===a?(e.moveTo(Se,Oe),e.lineTo(xe,De),e.stroke(),l.clearRect(0,0,u,u)):"rectangleTool"===a?(e.moveTo(Se,Oe),e.lineTo(xe,Oe),e.lineTo(xe,De),e.lineTo(Se,De),e.lineTo(Se,Oe),e.stroke(),l.clearRect(0,0,u,u)):"circleTool"===a&&(e.arc(Se,Oe,Ie,0,2*Math.PI),e.stroke(),l.clearRect(0,0,u,u)),N()("#drawCanvas").off("mouseup")}))}function Me(e,t,a){var n=e.width,o=e.data;return{r:o[4*(n*a+t)+0],g:o[4*(n*a+t)+1],b:o[4*(n*a+t)+2],a:o[4*(n*a+t)+3]}}function He(e,t,a,n){var o=e.width,r=e.data;r[4*(o*n+a)+0]=t.r,r[4*(o*n+a)+1]=t.g,r[4*(o*n+a)+2]=t.b,r[4*(o*n+a)+3]=t.a}function Ge(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}function Ue(e,t,a){var n=document.querySelector("#canvas".concat(t)),o=n.getContext("2d"),r=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}(a),i={r:r.r,g:r.g,b:r.b,a:255};o.fillStyle=a,o.strokeStyle=a;var s=n.getBoundingClientRect(),c=Math.round(e.clientX-s.left),l=Math.round(e.clientY-s.top),u=o.getImageData(0,0,n.width,n.height);!function(e,t,a,n){var o=e.width,r=e.height,i=[],s=Me(e,a,n),c={x:a,y:n};if(!Ge(s,t))for(i.push({x:c.x,y:c.y});i.length;){c=i.pop();for(var l=!0,u=!0,p=!1,d=!1;u&&c.y>=0;)c.y-=1,u=Ge(Me(e,c.x,c.y),s);for(;l&&c.y<r;)He(e,t,c.x,c.y),c.x-1>=0&&Ge(Me(e,c.x-1,c.y),s)?p||(p=!0,i.push({x:c.x-1,y:c.y})):p=!1,c.x+1<o&&Ge(Me(e,c.x+1,c.y),s)?d||(i.push({x:c.x+1,y:c.y}),d=!0):d=!1,c.y+=1,l=Ge(Me(e,c.x,c.y),s)}}(u,i,c,l),o.putImageData(u,0,0)}D.subscribe((function(){be=D.getState().customWidth||33}));var Re=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={size:"",draw:!1,lines:!1},e.mounted=!1,e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){var e=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155;this.setState({size:e>350?e:350})}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"mouseDownHandler",value:function(e){var t=this.props.toolState.currentTool,a=this.props.currentCanvas,n=this.props.settings.customWidth,o=this.props.toolState.currentColor;if("penTool"===t||"eraserTool"===t)this.setState({draw:!0}),Pe(),function(e,t,a,n,o){var r=Math.ceil(N()("#canvas".concat(t)).width()/n),i=document.querySelector("#drawCanvas").getBoundingClientRect(),s=Math.round(e.clientX-i.left),c=Math.round(e.clientY-i.top);if(je=Math.floor(s/r)*r,Ne=Math.floor(c/r)*r,"penTool"===a||"eraserTool"===a){var l=N()("#canvas".concat(t)).get(0).getContext("2d");"penTool"===a?(l.globalCompositeOperation="source-over",l.fillStyle=o,l.strokeStyle=o):"eraserTool"===a&&(l.fillStyle="rgba(0, 0, 0, 1)",l.strokeStyle="rgba(0, 0, 0, 1)",l.globalCompositeOperation="destination-out"),l.fillRect(je,Ne,r,r)}}(e,a,t,n,o),D.dispatch({type:"palette",value:o});else if("strokeTool"===t||"rectangleTool"===t||"circleTool"===t)this.setState({lines:!0}),Pe(),function(e,t,a,n,o){var r=document.querySelector("#drawCanvas").getBoundingClientRect(),i=Math.floor(e.clientX-r.left),s=Math.floor(e.clientY-r.top);Se=i,Oe=s,N()("#drawCanvas").mousemove(Be(e,t,a,n,o))}(e,a,t,n,o),D.dispatch({type:"palette",value:o});else if("colorPickerTool"===t&&N()(e.target).is(".canvas")){var r=document.querySelector("#canvas".concat(a)),i=r.getBoundingClientRect(),s=Math.round(e.clientX-i.left),c=Math.round(e.clientY-i.top),l=r.getContext("2d").getImageData(s,c,1,1).data;if(l[3]>0){var u=function(e,t,a){var n=e.toString(16),o=t.toString(16),r=a.toString(16);return n.length<2&&(n="0".concat(n)),o.length<2&&(o="0".concat(o)),r.length<2&&(r="0".concat(r)),"#".concat(n).concat(o).concat(r)}(l[0],l[1],l[2]);D.dispatch({type:"toolState",value:["currentColor",u]}),D.dispatch({type:"palette",value:u})}}}},{key:"mouseMoveHandler",value:function(e){var t=this.props.toolState.currentTool,a=this.props.currentCanvas,n=this.props.settings.customWidth,o=this.props.toolState.currentColor;t&&(!0===this.state.draw?function(e,t,a,n,o){var r=document.querySelector("#drawCanvas").getBoundingClientRect(),i=Math.round(e.clientX-r.left),s=Math.round(e.clientY-r.top),c=N()("#canvas".concat(t)).get(0).getContext("2d");Ee=i,Ce=s,"penTool"===a?(c.fillStyle=o,c.strokeStyle=o):"eraserTool"===a&&(c.fillStyle="rgba(0, 0, 0, 1)",c.strokeStyle="rgba(0, 0, 0, 1)");var l=Math.ceil(N()("#canvas".concat(t)).width()/n),u=Math.floor(i/l)*l,p=Math.floor(s/l)*l;(je>Ee||Ne>Ce||je+l<Ee||Ne+l<Ce)&&c.fillRect(u,p,l,l)}(e,a,t,n,o):function(e){var t=document.querySelector("#drawCanvas").getBoundingClientRect(),a=Math.round(e.clientX-t.left),n=Math.round(e.clientY-t.top),o=N()("#drawCanvas").get(0).getContext("2d");o.globalCompositeOperation="source-over",o.fillStyle="gray",o.strokeStyle="gray";var r=N()("#drawCanvas").width(),i=Math.ceil(r/be);ye=a,we=n;var s=Math.floor(a/i)*i,c=Math.floor(n/i)*i;(ke>ye||Ae>we||ke+i<ye||Ae+i<we)&&(o.clearRect(0,0,r,r),o.fillRect(s,c,i,i))}(e),!0===this.state.lines&&Be(e,a,t,n,o))}},{key:"mouseUpHandler",value:function(){var e=this.props.toolState.currentTool,t=this.props.currentCanvas;this.setState({draw:!1,lines:!1}),e&&(Pe(),setTimeout((function(){fe(t)}),500))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"canvas-wrapper"},r.a.createElement("div",{id:"canvas-block",className:"canvas-block"},this.props.framesArray.length>=1?this.props.framesArray.map((function(t,a){return r.a.createElement("canvas",{key:t.id,id:"canvas".concat(t.id),className:"canvas ".concat(e.props.currentCanvas===t.id?"":"hidden"),style:{background:e.props.settings.currentBG||"url(".concat(O.a,") repeat")},width:e.state.size,height:e.state.size,onClick:function(t){return e.mouseDownHandler(t)}})})):r.a.createElement("canvas",{id:this.props.currentCanvas,className:"canvas",style:{background:"url(".concat(O.a,") repeat")},width:this.state.size,height:this.state.size,onClick:function(t){return e.mouseDownHandler(t)}})),r.a.createElement("canvas",{id:"drawCanvas",className:"drawCanvas",onMouseOver:function(t){e.props.toolState.currentTool&&!1===e.state.draw&&function(e){var t=N()("#drawCanvas").width(),a=document.querySelector("#drawCanvas"),n=Math.ceil(t/be),o=a.getBoundingClientRect(),r=Math.round(e.clientX-o.left),i=Math.round(e.clientY-o.top);ke=Math.floor(r/n)*n,Ae=Math.floor(i/n)*n;var s=N()("#drawCanvas").get(0).getContext("2d");s.globalCompositeOperation="source-over",s.fillStyle="gray",s.strokeStyle="gray",s.fillRect(ke,Ae,n,n)}(t)},onClick:function(t){if("paintBucketTool"===e.props.toolState.currentTool){var a=e.props.toolState.currentColor;Ue(t,e.props.currentCanvas,a),D.dispatch({type:"palette",value:a})}},onMouseDown:function(t){return e.mouseDownHandler(t)},onMouseMove:function(t){return e.mouseMoveHandler(t)},onMouseLeave:function(){!1===e.state.draw&&Pe()},onMouseUp:function(t){return e.mouseUpHandler(t)},onFocus:function(){},width:this.state.size,height:this.state.size}))}}]),t}(r.a.Component),Fe=(a(101),function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={active:""},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"hoverIn",value:function(){this.mounted&&this.setState({active:!0})}},{key:"hoverOut",value:function(){this.mounted&&this.setState({active:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"preview-area",className:"preview-area",onMouseEnter:function(){return e.hoverIn()},onMouseLeave:function(){return e.hoverOut()}},r.a.createElement("div",{className:"preview"},this.props.framesArray.map((function(e){return r.a.createElement("img",{key:"image".concat(e.id),id:"imagePreview".concat(e.id),src:e.frameSRC,style:{width:"100%"},alt:""})}))),r.a.createElement("div",{className:"preview-open ".concat(this.state.active?"":"hidden"),id:"preview-open",role:"button",tabIndex:"-1",onKeyPress:void 0,onClick:ge},r.a.createElement("i",{className:"fas fa-external-link-alt"})))}}]),t}(r.a.Component)),Le=(a(102),a(103),function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={hovered:"",mouseEnter:!1},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"popHintOnMouseOver",value:function(e){var t=e.target.getAttribute("id");this.state.hovered===t?this.setState({hovered:""}):this.setState({hovered:t})}},{key:"mouseIn",value:function(){this.setState({mouseEnter:!0})}},{key:"mouseOut",value:function(){this.setState({mouseEnter:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"layers-box",onMouseOver:function(t){return e.popHintOnMouseOver(t)},onFocus:function(){}},r.a.createElement("div",{className:"layer-outlet"},r.a.createElement("span",{className:"layer-title"},"Layers"),r.a.createElement(ce,{buttonClass:"layer-button layer-preview",onClickHandler:function(){},iconClass:"fas fa-eye",active:null,title:"Preview all layers",placement:"top-end"})),r.a.createElement("div",{className:"layer-buttons-box"},r.a.createElement(ce,{buttonClass:"layer-button",onClickHandler:function(){},iconClass:"fas fa-plus",active:null,title:"Create a layer",placement:"top-end"}),r.a.createElement(ce,{buttonClass:"layer-button",onClickHandler:function(){},iconClass:"fas fa-arrow-up",active:null,title:"Move layer up",placement:"top-end"}),r.a.createElement(ce,{buttonClass:"layer-button",onClickHandler:function(){},iconClass:"fas fa-arrow-down",active:null,title:"Move layer down",placement:"top-end"}),r.a.createElement(ce,{buttonClass:"layer-button",onClickHandler:function(){},iconClass:"fas fa-pen",active:null,title:"Edit layer name",placement:"top-end"}),r.a.createElement(ce,{buttonClass:"layer-button",onClickHandler:function(){},iconClass:"fas fa-compress",active:null,title:"Merge with layer below",placement:"top-end"}),r.a.createElement(ce,{buttonClass:"layer-button",onClickHandler:function(){},iconClass:"fas fa-times",active:null,title:"Delete selected layer",placement:"top-end"})),r.a.createElement("ul",{className:"layer-list"},r.a.createElement("li",{className:"layer-item"},"Layer 1")))}}]),t}(r.a.Component)),ze=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("button",{type:"button",style:{background:this.props.color},className:"palette-sample ".concat(this.props.state===this.props.color?"active-palette-sample":""),onClick:this.props.onClickHandler})}}]),t}(r.a.Component),We=(a(104),function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={hovered:"",mouseEnter:!1,color:[],changed:!1},e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"addPalettesOnClick",value:function(){}},{key:"editPalettesOnClick",value:function(){}},{key:"choosePalettesOnClick",value:function(){}},{key:"changeCurColor",value:function(e){var t=function(e){var t="".concat(e),a=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(t),n=parseInt(a[2],10).toString(16),o=parseInt(a[3],10).toString(16),r=parseInt(a[4],10).toString(16);return"#".concat(1===n.length?"0".concat(n):n).concat(1===o.length?"0".concat(o):o).concat(1===r.length?"0".concat(r):r)}(N()(e.target).css("background-color"));D.dispatch({type:"toolState",value:["currentColor",t]})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"palettes-box"},r.a.createElement("div",{className:"palettes-outlet"},r.a.createElement("span",{className:"palettes-title"},"Palettes")),r.a.createElement("div",{className:"palettes-buttons-box"},r.a.createElement(ce,{buttonClass:"palettes-button",onClickHandler:function(){return e.addPalettesOnClick()},iconClass:"fas fa-plus",active:null,title:"Create a new palette",placement:"top-end"}),r.a.createElement("button",{type:"button",id:"palettes-dropdown-list",className:"palettes-button colors-list",onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})},onClick:function(){return e.choosePalettesOnClick()}},"Current colors",r.a.createElement("i",{className:"colors-list-arrow fas fa-sort-down ".concat(this.state.hovered?"colors-list-arrow-hovered":"")})),r.a.createElement(ce,{buttonClass:"palettes-button",onClickHandler:function(){return e.editPalettesOnClick()},iconClass:"fas fa-pen",active:null,title:"Palette options",placement:"top-end"})),r.a.createElement("ul",{className:"palettes-list"},r.a.createElement("span",{className:"palette-colors-isempty ".concat(this.props.colorSamples.length>0?"hidden":"")},"No colors in this palette yet"),this.props.colorSamples.map((function(t){return r.a.createElement("li",{key:t,id:t,className:"palette-sample-list"},r.a.createElement(ze,{color:t,state:e.props.toolState.currentColor,onClickHandler:function(t){return e.changeCurColor(t)}}))}))))}}]),t}(r.a.Component)),qe=(a(105),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={active:"bg1"},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"addActiveOnClick",value:function(e){var t=e.target.getAttribute("id"),a=N()(e.target).css("background-image");this.setState({active:t}),D.dispatch({type:"settings",value:["currentBG",a]})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"general-settings-block ".concat("settings"===this.props.active?"flexed":"hidden")},r.a.createElement("div",{className:"current-bg"},r.a.createElement("span",{className:"default-bg bold"},"Background"),r.a.createElement("div",{className:"general-settings-buttons-area"},["bg1","bg2","bg3","bg4"].map((function(t){return r.a.createElement("button",{key:t,type:"button",id:t,onClick:function(t){return e.addActiveOnClick(t)},className:"general-settings-button ".concat(t," ").concat(e.state.active===t?"active-button":"not-active-button")})}))),r.a.createElement("p",null,"Set default background")))}}]),t}(r.a.Component)),Ke=(a(106),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={customWidth:33,maxWidth:"",newWidth:"",error:!1},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({maxWidth:N()("#drawCanvas").width()})}},{key:"resizeCanvasOnClickHandler",value:function(){var e=this.state.newWidth;e>0&&e<this.state.maxWidth?(this.setState({customWidth:e}),D.dispatch({type:"settings",value:["customWidth",e]})):this.setState({error:!0}),N()("#resize-input").val("")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"resize-canvas-block ".concat("resize-settings"===this.props.active?"flexed":"hidden")},r.a.createElement("div",{className:"current-size"},r.a.createElement("span",{className:"default-size bold"},"current size"),r.a.createElement("p",null,"Width ",r.a.createElement("span",{className:"default-width bold",id:"current-width"},this.state.customWidth),"px"),r.a.createElement("p",null,"Height",r.a.createElement("span",{className:"default-width bold",id:"current-height"},this.state.customWidth),"px")),r.a.createElement("div",{className:"resize-canvas"},r.a.createElement("span",{className:"resize bold"},"resize"),r.a.createElement("p",{className:"new-width-block"},r.a.createElement("span",null,"1 - "),r.a.createElement("span",{id:"new-width",className:"canvas-width"},this.state.maxWidth),r.a.createElement("span",null,"px"),r.a.createElement("input",{type:"number",className:"resize-input",id:"resize-input",min:"1",onKeyPress:function(t){"Enter"===t.key&&e.resizeCanvasOnClickHandler(t)},onChange:function(t){return e.setState({newWidth:t.target.value})}})),r.a.createElement("p",{id:"error-message",className:"error-message ".concat(this.state.error?"":"hidden")},"Size can be from 1 to ".concat(this.state.maxWidth," px")),r.a.createElement("button",{id:"resize-button",className:"resize-button",type:"button",onClick:function(){return e.resizeCanvasOnClickHandler()}},"Change canvas size")))}}]),t}(r.a.Component)),Ye=(a(107),a(46));Ye.initializeApp({apiKey:"AIzaSyB7L9YDQre3TEMDbonPKJh9oiT0LB8MPME",authDomain:"piskel-clone-1561243542927.firebaseapp.com",databaseURL:"https://piskel-clone-1561243542927.firebaseio.com",projectId:"piskel-clone-1561243542927",storageBucket:"",messagingSenderId:"842905832916",appId:"1:842905832916:web:bd7859a38165e1b7"});var Je=Ye;function Qe(e,t,a,n,o,r,i,s,c){Je.database().ref("users/".concat(e,"/").concat(t)).set({frames:a,gif:n,date:o,time:r,title:i,description:s,fps:c})}var Xe=function(){var e,t,a,n,o,r={},i=256,s=499,c=491,l=487,u=503,p=3*u,d=i-1,m=4,h=100,f=16,v=1<<f,g=10,b=10,y=v>>b,w=v<<g-b,k=i>>3,A=6,E=1<<A,C=k*E,j=30,N=10,S=1<<N,O=8,x=1<<O,D=N+O,I=1<<D,T=[],P=[],B=[],M=[],H=r.NeuQuant=function(e,r,s){var c,l;for(t=e,a=r,n=s,o=new Array(i),c=0;c<i;c++)o[c]=new Array(4),(l=o[c])[0]=l[1]=l[2]=(c<<m+8)/i,B[c]=v/i,P[c]=0},G=function(){for(var e=[],t=new Array(i),a=0;a<i;a++)t[o[a][3]]=a;for(var n=0,r=0;r<i;r++){var s=t[r];e[n++]=o[s][0],e[n++]=o[s][1],e[n++]=o[s][2]}return e},U=function(){var e,t,a,n,r,s,c,l;for(c=0,l=0,e=0;e<i;e++){for(a=e,n=(r=o[e])[1],t=e+1;t<i;t++)(s=o[t])[1]<n&&(a=t,n=s[1]);if(s=o[a],e!=a&&(t=s[0],s[0]=r[0],r[0]=t,t=s[1],s[1]=r[1],r[1]=t,t=s[2],s[2]=r[2],r[2]=t,t=s[3],s[3]=r[3],r[3]=t),n!=c){for(T[c]=l+e>>1,t=c+1;t<n;t++)T[t]=e;c=n,l=e}}for(T[c]=l+d>>1,t=c+1;t<256;t++)T[t]=d},R=function(){var o,r,i,d,f,v,g,b,y,w,k,E,N,O;for(a<p&&(n=1),e=30+(n-1)/3,E=t,N=0,O=a,w=(k=a/(3*n))/h|0,b=S,(g=(v=C)>>A)<=1&&(g=0),o=0;o<g;o++)M[o]=b*((g*g-o*o)*x/(g*g));for(y=a<p?3:a%s!==0?3*s:a%c!==0?3*c:a%l!==0?3*l:3*u,o=0;o<k;)if(i=(255&E[N+0])<<m,d=(255&E[N+1])<<m,f=(255&E[N+2])<<m,r=W(i,d,f),z(b,r,i,d,f),0!==g&&L(g,r,i,d,f),(N+=y)>=O&&(N-=a),0===w&&(w=1),++o%w===0)for(b-=b/e,(g=(v-=v/j)>>A)<=1&&(g=0),r=0;r<g;r++)M[r]=b*((g*g-r*r)*x/(g*g))},F=(r.map=function(e,t,a){var n,r,s,c,l,u,p;for(l=1e3,p=-1,r=(n=T[t])-1;n<i||r>=0;)n<i&&((s=(u=o[n])[1]-t)>=l?n=i:(n++,s<0&&(s=-s),(c=u[0]-e)<0&&(c=-c),(s+=c)<l&&((c=u[2]-a)<0&&(c=-c),(s+=c)<l&&(l=s,p=u[3])))),r>=0&&((s=t-(u=o[r])[1])>=l?r=-1:(r--,s<0&&(s=-s),(c=u[0]-e)<0&&(c=-c),(s+=c)<l&&((c=u[2]-a)<0&&(c=-c),(s+=c)<l&&(l=s,p=u[3]))));return p},r.process=function(){return R(),F(),U(),G()},function(){var e;for(e=0;e<i;e++)o[e][0]>>=m,o[e][1]>>=m,o[e][2]>>=m,o[e][3]=e}),L=function(e,t,a,n,r){var s,c,l,u,p,d,m;for((l=t-e)<-1&&(l=-1),(u=t+e)>i&&(u=i),s=t+1,c=t-1,d=1;s<u||c>l;){if(p=M[d++],s<u){m=o[s++];try{m[0]-=p*(m[0]-a)/I,m[1]-=p*(m[1]-n)/I,m[2]-=p*(m[2]-r)/I}catch(h){}}if(c>l){m=o[c--];try{m[0]-=p*(m[0]-a)/I,m[1]-=p*(m[1]-n)/I,m[2]-=p*(m[2]-r)/I}catch(h){}}}},z=function(e,t,a,n,r){var i=o[t];i[0]-=e*(i[0]-a)/S,i[1]-=e*(i[1]-n)/S,i[2]-=e*(i[2]-r)/S},W=function(e,t,a){var n,r,s,c,l,u,p,d,h,v;for(h=d=~(1<<31),p=u=-1,n=0;n<i;n++)(r=(v=o[n])[0]-e)<0&&(r=-r),(s=v[1]-t)<0&&(s=-s),r+=s,(s=v[2]-a)<0&&(s=-s),(r+=s)<d&&(d=r,u=n),(c=r-(P[n]>>f-m))<h&&(h=c,p=n),l=B[n]>>b,B[n]-=l,P[n]+=l<<g;return B[u]+=y,P[u]-=w,p};return H.apply(this,arguments),r},Ve=function(){var e,t,a,n,o,r,i,s,c,l,u,p,d={},m=-1,h=12,f=5003,v=h,g=1<<h,b=[],y=[],w=f,k=0,A=!1,E=0,C=0,j=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],N=[],S=d.LZWEncoder=function(o,r,i,s){e=o,t=r,a=i,n=Math.max(2,s)},O=function(e,t){N[p++]=e,p>=254&&T(t)},x=function(e){D(w),k=l+2,A=!0,M(l,e)},D=function(e){for(var t=0;t<e;++t)b[t]=-1},I=d.compress=function(e,t){var a,n,o,r,d,h,f;for(A=!1,s=P(i=c=e),u=(l=1<<e-1)+1,k=l+2,p=0,r=B(),f=0,a=w;a<65536;a*=2)++f;f=8-f,D(h=w),M(l,t);e:for(;(o=B())!=m;)if(a=(o<<v)+r,b[n=o<<f^r]!=a){if(b[n]>=0){d=h-n,0===n&&(d=1);do{if((n-=d)<0&&(n+=h),b[n]==a){r=y[n];continue e}}while(b[n]>=0)}M(r,t),r=o,k<g?(y[n]=k++,b[n]=a):x(t)}else r=y[n];M(r,t),M(u,t)},T=(d.encode=function(a){a.writeByte(n),o=e*t,r=0,I(n+1,a),a.writeByte(0)},function(e){p>0&&(e.writeByte(p),e.writeBytes(N,0,p),p=0)}),P=function(e){return(1<<e)-1},B=function(){return 0===o?m:(--o,255&a[r++])},M=function(e,t){for(E&=j[C],C>0?E|=e<<C:E=e,C+=i;C>=8;)O(255&E,t),E>>=8,C-=8;if((k>s||A)&&(A?(s=P(i=c),A=!1):(++i,s=i==v?g:P(i))),e==u){for(;C>0;)O(255&E,t),E>>=8,C-=8;T(t)}};return S.apply(this,arguments),d},Ze=function(){for(var e=0,t={};e<256;e++)t[e]=String.fromCharCode(e);function a(){this.bin=[]}a.prototype.getData=function(){for(var e="",a=this.bin.length,n=0;n<a;n++)e+=t[this.bin[n]];return e},a.prototype.writeByte=function(e){this.bin.push(e)},a.prototype.writeUTFBytes=function(e){for(var t=e.length,a=0;a<t;a++)this.writeByte(e.charCodeAt(a))},a.prototype.writeBytes=function(e,t,a){for(var n=a||e.length,o=t||0;o<n;o++)this.writeByte(e[o])};var n,o,r,i,s,c,l,u,p,d={},m=null,h=-1,f=0,v=!1,g=[],b=7,y=-1,w=!1,k=!0,A=!1,E=10,C="Generated by jsgif (https://github.com/antimatter15/jsgif/)",j=(d.setDelay=function(e){f=Math.round(e/10)},d.setDispose=function(e){e>=0&&(y=e)},d.setRepeat=function(e){e>=0&&(h=e)},d.setTransparent=function(e){m=e},d.setComment=function(e){C=e},d.addFrame=function(e,t){if(null===e||!v||null===i)throw new Error("Please call start method before calling addFrame");var a=!0;try{t?e instanceof ImageData?(s=e.data,n==e.width&&o==e.height||S(e.width,e.height)):e instanceof Uint8ClampedArray?e.length==n*o*4?s=e:(console.log("Please set the correct size: ImageData length mismatch"),a=!1):(console.log("Please provide correct input"),a=!1):(s=e.getImageData(0,0,e.canvas.width,e.canvas.height).data,A||S(e.canvas.width,e.canvas.height)),D(),O(),k&&(B(),H(),h>=0&&M()),I(),""!==C&&T(),P(),k||H(),U(),k=!1}catch(r){a=!1}return a},d.download=function(e){if(null===i||0==w)console.log("Please call start method and add frames and call finish method before calling download");else{e=void 0!==e?(e.endsWith(".gif"),e):"download.gif";var t=document.createElement("a");t.download=e,t.href=URL.createObjectURL(new Blob([new Uint8Array(i.bin)],{type:"image/gif"})),t.click()}},d.upload=function(e){if(null!==i&&0!=w){e=void 0!==e?(e.endsWith(".gif"),e):"download.gif";var t=document.createElement("a");t.target="_blank",t.href=URL.createObjectURL(new Blob([new Uint8Array(i.bin)],{type:"image/gif"}));N()(t).attr("href").replace("blob:","");return new Uint8Array(i.bin)}console.log("Please call start method and add frames and call finish method before calling download")},d.finish=function(){if(!v)return!1;var e=!0;v=!1;try{i.writeByte(59),w=!0}catch(t){e=!1}return e},function(){r=0,s=null,c=null,l=null,p=null,w=!1,k=!0}),S=(d.setFrameRate=function(e){15!=e&&(f=Math.round(100/e))},d.setQuality=function(e){e<1&&(e=1),E=e},d.setSize=function(e,t){v&&!k||((n=e)<1&&(n=320),(o=t)<1&&(o=240),A=!0)}),O=(d.start=function(){j();var e=!0;w=!1,i=new a;try{i.writeUTFBytes("GIF89a")}catch(t){e=!1}return v=e},d.cont=function(){j();return w=!1,i=new a,v=!0},function(){var e=c.length,t=e/3;l=[];var a=new Xe(c,e,E);p=a.process();for(var n=0,o=0;o<t;o++){var i=a.map(255&c[n++],255&c[n++],255&c[n++]);g[i]=!0,l[o]=i}c=null,u=8,b=7,null!==m&&(r=x(m))}),x=function(e){if(null===p)return-1;for(var t=(16711680&e)>>16,a=(65280&e)>>8,n=255&e,o=0,r=16777216,i=p.length,s=0;s<i;){var c=t-(255&p[s++]),l=a-(255&p[s++]),u=n-(255&p[s]),d=c*c+l*l+u*u,m=s/3;g[m]&&d<r&&(r=d,o=m),s++}return o},D=function(){var e=n,t=o;c=[];for(var a=s,r=0,i=0;i<t;i++)for(var l=0;l<e;l++){var u=i*e*4+4*l;c[r++]=a[u],c[r++]=a[u+1],c[r++]=a[u+2]}},I=function(){var e,t;i.writeByte(33),i.writeByte(249),i.writeByte(4),null===m?(e=0,t=0):(e=1,t=2),y>=0&&(t=7&y),t<<=2,i.writeByte(0|t|e),G(f),i.writeByte(r),i.writeByte(0)},T=function(){i.writeByte(33),i.writeByte(254),i.writeByte(C.length),i.writeUTFBytes(C),i.writeByte(0)},P=function(){i.writeByte(44),G(0),G(0),G(n),G(o),k?i.writeByte(0):i.writeByte(128|b)},B=function(){G(n),G(o),i.writeByte(240|b),i.writeByte(0),i.writeByte(0)},M=function(){i.writeByte(33),i.writeByte(255),i.writeByte(11),i.writeUTFBytes("NETSCAPE2.0"),i.writeByte(3),i.writeByte(1),G(h),i.writeByte(0)},H=function(){i.writeBytes(p);for(var e=768-p.length,t=0;t<e;t++)i.writeByte(0)},G=function(e){i.writeByte(255&e),i.writeByte(e>>8&255)},U=function(){new Ve(n,o,l,u).encode(i)};d.stream=function(){return i},d.setProperties=function(e,t){v=e,k=t};return d};function _e(e,t,a,o){var r=1e3/t,i=new Ze;return i.setRepeat(0),i.setDelay(r),i.start(),o.forEach((function(e){for(var t,a=document.querySelector("#canvas".concat(o[0].id)),r=N()("#canvas".concat(e.id)).get(0).getContext("2d").getImageData(0,0,N()("#canvas".concat(e.id)).width(),N()("#canvas".concat(e.id)).width()),s=r.data.length,c=[],l=0;s>0;)(t=r.data.slice(l,l+4)).every((function(e){return 0===e}))&&(t=t.map((function(){return 255}))),c.push.apply(c,Object(n.a)(t)),l+=4,s-=4;var u=Uint8ClampedArray.from(c),p=new ImageData(u,a.width,a.height);i.setSize(a.height,a.width),i.addFrame(p,!0)})),i.finish(),a=a||"New Piskel-clone",e?i.upload("".concat(a,".gif")):i.download("".concat(a,".gif"))}function $e(e,t){var a=1e3/e,o=new Ze;o.setRepeat(0),o.setDelay(a),o.start(),t.forEach((function(e){for(var a,r=document.querySelector("#canvas".concat(t[0].id)),i=N()("#canvas".concat(e.id)).get(0).getContext("2d").getImageData(0,0,N()("#canvas".concat(e.id)).width(),N()("#canvas".concat(e.id)).width()),s=i.data.length,c=[],l=0;s>0;)(a=i.data.slice(l,l+4)).every((function(e){return 0===e}))&&(a=a.map((function(){return 255}))),c.push.apply(c,Object(n.a)(a)),l+=4,s-=4;var u=Uint8ClampedArray.from(c),p=new ImageData(u,r.width,r.height);o.setSize(r.height,r.width),o.addFrame(p,!0)})),o.finish();var r=o.stream().getData();return"data:image/gif;base64,".concat(function(e){for(var t,a,n,o,r,i,s,c="",l=0,u=e.length,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l<u;)o=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(a=e.charCodeAt(l++))>>4,i=(15&a)<<2|(n=e.charCodeAt(l++))>>6,s=63&n,isNaN(a)?i=s=64:isNaN(n)&&(s=64),c=c+p.charAt(o)+p.charAt(r)+p.charAt(i)+p.charAt(s);return c}(r))}function et(e,t,a,n){var o=$e(a,n),r=function(){var e=new Date,t=e.getDate();t<10&&(t="0".concat(t));var a=e.getMonth()+1;a<10&&(a="0".concat(a));var n=e.getHours();n<10&&(n="0".concat(n));var o=e.getMinutes();o<10&&(o="0".concat(o));var r=new Date("".concat(n,":").concat(o," ").concat(a,"/").concat(t,"/").concat(e.getFullYear())).getTime();return"".concat(n,":").concat(o," ").concat(t,"/").concat(a,"/").concat(e.getFullYear(),"  ").concat(r)}().split("  "),i={gif:o,frames:n,title:e||"New Piskel-clone",description:t,date:r[0],time:r[1],fps:a};return D.dispatch({type:"project",value:i}),i}function tt(e,t,a,n,o,r){var i,s=et(a,n,o,r);i=!e||(Object.keys(e).length<20||!!Object.entries(e).some((function(e){return e[0]===t})));var c=e;if(c)if(0===Object.keys(c).length)c[t]=s;else for(var l in c)l===t?c[l]=s:c[t]=s;else(c={})[t]=s;return[i,c]}var at=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={isFull:!1,isSaved:!1,newTitle:!1,newDescription:!1},e.mounted=!1,e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.setState(null)}},{key:"saveLocallyHandler",value:function(){var e=this,t=tt(this.props.state.localProjects,this.props.state.projectID,this.state.newTitle||this.props.state.project.title,this.state.newDescription||this.props.state.project.description,this.props.state.project.fps,this.props.state.framesArray);if(D.dispatch({type:"localProjects",value:t[1]}),!t[0])return this.setState({isFull:"local"}),void setTimeout((function(){e.mounted&&e.setState({isFull:!1})}),5e3);this.setState({isSaved:!0}),setTimeout((function(){e.mounted&&e.setState({isSaved:!1})}),5e3)}},{key:"saveToGaleryHandler",value:function(){var e=this;if(this.props.state.userData.isAuthed){var t=this.props.state.allProjects[this.props.state.userData.info.id],a=this.props.state.allProjects,n=function(e,t,a,n,o,r,i,s){var c=tt(e,t,a,n,o,r),l=s;if(l)if(0===Object.keys(l).length)l[i]=c[1];else for(var u in l)u===i?l[u]=c[1]:l[i]=c[1];else(l={})[i]=c[1];for(var p=Object.entries(l[i]),d=0;d<p.length;d+=1){var m=p[d][0],h=p[d][1];m===t&&Qe(i,m,h.frames,h.gif,h.date,h.time,h.title,h.description,h.fps)}return[c[0],l]}(t,this.props.state.projectID,this.state.newTitle||this.props.state.project.title,this.state.newDescription||this.props.state.project.description,this.props.state.project.fps,this.props.state.framesArray,this.props.state.userData.info.id,a);if(D.dispatch({type:"allProjects",value:n[1]}),!n[0])return this.setState({isFull:"personal"}),void setTimeout((function(){e.mounted&&e.setState({isFull:!1})}),5e3);this.setState({isSaved:!0}),setTimeout((function(){e.mounted&&e.setState({isSaved:!1})}),5e3)}else N()("#signOuted").click()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"save-settings-block ".concat("save-settings"===this.props.active?"flexed":"hidden")},r.a.createElement("div",{className:"sprite-info-block"},r.a.createElement("span",{className:"sprite-info bold"},"Sprite information"),r.a.createElement("span",{className:"label-title"},"Title:"),r.a.createElement("input",{className:"title-input",id:"title-input",defaultValue:this.props.state.project.title,onChange:function(t){return e.setState({newTitle:N()(t.target).val()})}}),r.a.createElement("span",{className:"label-description"},"Description:"),r.a.createElement("textarea",{rows:"1",cols:"6",className:"description-input",id:"description-input",defaultValue:this.props.state.project.description,onChange:function(t){return e.setState({newDescription:N()(t.target).val()})}})),r.a.createElement("div",{className:"save-online-block"},r.a.createElement("span",{className:"save-online bold"},"Save online"),r.a.createElement("button",{id:"save-locally-button",className:"save-online-button",type:"button",onClick:function(){return e.saveLocallyHandler()}},"Save locally"),r.a.createElement("p",{className:"save-online-info"},"Your piskel will be saved and available only from this browser"),r.a.createElement("button",{id:"save-gallery-button",className:"save-online-button ".concat(this.mounted&&this.props.state.userData.isAuthed?"":"hidden"),type:"button",onClick:function(){return e.saveToGaleryHandler()}},"Save to your gallery"),r.a.createElement("button",{type:"button",onClick:function(){N()(".abcRioButton.abcRioButtonLightBlue").click()},className:"save-online-button ".concat(this.mounted&&this.props.state.userData.isAuthed?"hidden":"")},"Sign in to save to your gallery"),r.a.createElement("p",{className:"save-online-info"},"Your piskel will be stored online in your gallery"),r.a.createElement("p",{id:"error",className:"".concat(this.mounted&&this.state.isFull?"storage-warning error":"hidden")},"Your ".concat(this.state.isFull," storage is full, please delete old piskels")),r.a.createElement("p",{id:"success",className:"".concat(this.mounted&&this.state.isSaved?"storage-warning success":"hidden")},"Your animation successfully saved!")))}}]),t}(r.a.Component),nt=(a(118),window.UploaderForGoogleDrive=function(){var e=function(){this.interval=1e3,this.maxInterval=6e4};e.prototype.retry=function(e){setTimeout(e,this.interval),this.interval=this.nextInterval_()},e.prototype.reset=function(){this.interval=1e3},e.prototype.nextInterval_=function(){var e=2*this.interval+this.getRandomInt_(0,1e3);return Math.min(e,this.maxInterval)},e.prototype.getRandomInt_=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};var t=function(t){var a=function(){};if(this.file=t.file,this.contentType=t.contentType||this.file.type||"application/octet-stream",this.metadata=t.metadata||{name:this.file.name,mimeType:this.contentType},t.token)this.token=t.token;else try{this.token=window.gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse(!0).access_token}catch(o){throw console.log(o),new Error("Uploader: missing Google OAuth2 access_token")}if(this.onComplete=t.onComplete||a,this.onProgress=t.onProgress||a,this.onError=t.onError||a,this.offset=t.offset||0,this.chunkSize=t.chunkSize||0,this.retryHandler=new e,this.url=t.url,!this.url){var n=t.params||{};n.uploadType="resumable",this.url=this.buildUrl_(t.fileId,n,t.baseUrl)}this.httpMethod=t.fileId?"PATCH":"POST"};return t.prototype.upload=function(){var e=new XMLHttpRequest;e.open(this.httpMethod,this.url,!0),e.setRequestHeader("Authorization","Bearer ".concat(this.token)),e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("X-Upload-Content-Length",this.file.size),e.setRequestHeader("X-Upload-Content-Type",this.contentType),e.setRequestHeader("writersCanShare",!0),e.onload=function(e){if(e.target.status<400){var t=e.target.getResponseHeader("Location");this.url=t,this.sendFile_()}else this.onUploadError_(e)}.bind(this),e.onerror=this.onUploadError_.bind(this),e.send(JSON.stringify(this.metadata))},t.prototype.sendFile_=function(){var e=this.file,t=this.file.size;(this.offset||this.chunkSize)&&(this.chunkSize&&(t=Math.min(this.offset+this.chunkSize,this.file.size)),e=e.slice(this.offset,t));var a=new XMLHttpRequest;a.open("PUT",this.url,!0),a.setRequestHeader("Content-Type",this.contentType),a.setRequestHeader("Content-Range","bytes ".concat(this.offset,"-").concat(t-1,"/").concat(this.file.size)),a.setRequestHeader("X-Upload-Content-Type",this.file.type),a.setRequestHeader("writersCanShare",!0),a.upload&&a.upload.addEventListener("progress",this.onProgress),a.onload=this.onContentUploadSuccess_.bind(this),a.onerror=this.onContentUploadError_.bind(this),a.send(e)},t.prototype.resume_=function(){var e=new XMLHttpRequest;e.open("PUT",this.url,!0),e.setRequestHeader("Content-Range","bytes */".concat(this.file.size)),e.setRequestHeader("X-Upload-Content-Type",this.file.type),e.setRequestHeader("writersCanShare",!0),e.upload&&e.upload.addEventListener("progress",this.onProgress),e.onload=this.onContentUploadSuccess_.bind(this),e.onerror=this.onContentUploadError_.bind(this),e.send()},t.prototype.extractRange_=function(e){var t=e.getResponseHeader("Range");t&&(this.offset=parseInt(t.match(/\d+/g).pop(),10)+1)},t.prototype.onContentUploadSuccess_=function(e){200==e.target.status||201==e.target.status?this.onComplete(e.target.response):308==e.target.status?(this.extractRange_(e.target),this.retryHandler.reset(),this.sendFile_()):this.onContentUploadError_(e)},t.prototype.onContentUploadError_=function(e){e.target.status&&e.target.status<500?this.onError(e.target.response):this.retryHandler.retry(this.resume_.bind(this))},t.prototype.onUploadError_=function(e){this.onError(e.target.response)},t.prototype.buildQuery_=function(e){return e=e||{},Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")},t.prototype.buildUrl_=function(e,t,a){var n=a||"https://www.googleapis.com/upload/drive/v3/files/";e&&(n+=e);var o=this.buildQuery_(t);return o&&(n+="?".concat(o)),n},t}());window.pUploaderForGoogleDrive=function(e){return new Promise((function(t,a){e.onComplete=function(e){var a;try{a="string"===typeof e?JSON.parse(e):e}catch(n){a=e}t(a)},e.onError=function(e){a(e)},new window.UploaderForGoogleDrive(e).upload()}))};function ot(e,t,a){window.gapi.client.setApiKey("AIzaSyD8p3NmO-jrbUeGpC9EYDHzH8FWOl3ivss"),window.gapi.client.load("https://content.googleapis.com/discovery/v1/apis/drive/v3/rest").then((function(){console.log("GAPI client loaded for API")}),(function(e){console.error("Error loading GAPI client for API",e)}));var n=new Blob([_e("upload",t,e,a)],{type:"image/gif"});new nt({file:n,metadata:{name:e},onComplete:function(e){var t=JSON.parse(e).id,a="https://drive.google.com/open?id=".concat(t),n="https://drive.google.com/thumbnail?id=".concat(t);D.dispatch({type:"googleLinks",value:[a,n]}),window.gapi.client.drive.permissions.create({fileId:"".concat(t),resource:{role:"reader",type:"anyone"}}).then((function(e){console.log("Response",e)}),(function(e){console.error("Execute error",e)}))},onError:function(e){console.log(e)}}).upload()}var rt=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={active:"show-gif-block",dataUrl:"",links:!1},e.mounted=!1,e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"showExportOptions",value:function(e){var t=e.target.getAttribute("id");this.setState({active:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"export-settings-block ".concat("export-settings"===this.props.active?"flexed":"hidden")},r.a.createElement("span",{className:"export-info bold"},"Export"),r.a.createElement("div",{className:"file-format-buttons"},r.a.createElement("button",{id:"show-gif-block",className:"show-gif-block ".concat("show-gif-block"===this.state.active?"active-show-button":"not-active-show-button"),type:"button",onClick:function(t){return e.showExportOptions(t)}},"GIF"),r.a.createElement("button",{id:"show-png-block",className:"show-png-block ".concat("show-png-block"===this.state.active?"active-show-button":"not-active-show-button"),type:"button",onClick:function(t){return e.showExportOptions(t)}},"PNG")),r.a.createElement("div",{className:"gif-block ".concat("show-gif-block"===this.state.active?"flexed":"hidden")},r.a.createElement("span",{className:"gif-title"},"Convert your sprite to an animated GIF"),r.a.createElement("div",{className:"download-block"},r.a.createElement("button",{id:"download-gif",className:"gif-button",type:"button",onClick:function(){return _e(null,e.props.state.project.fps,e.props.state.project.title,e.props.state.framesArray)}},"Download"),r.a.createElement("span",{className:"download-gif-title"},"Download as an animated GIF")),r.a.createElement("div",{className:"download-block"},r.a.createElement("button",{id:"upload-gif",className:"gif-button",type:"button",onClick:function(){var t=$e(e.props.state.project.fps,e.props.state.framesArray);e.setState({dataUrl:t,links:!1}),setTimeout((function(){e.mounted&&e.setState({dataUrl:""})}),15e4)}},"Open in new tab"),r.a.createElement("span",{className:"upload-gif-title"},"Watch an animated GIF in new tab"),r.a.createElement("div",{className:"link-to-gif ".concat(this.state.dataUrl?"":"hidden")},r.a.createElement("button",{type:"button",onClick:function(){!function(e){var t=window.open();N()(t.document.body).css({display:"flex",width:"100vw",heigh:"100vh","justify-content":"center","align-items":"center",background:"whitesmoke"}),N()("<img></img>",{src:e}).appendTo(t.document.body)}(e.state.dataUrl),e.setState({dataUrl:""})}},"your animation file"))),r.a.createElement("div",{className:"download-block"},r.a.createElement("button",{id:"upload-google",className:"gif-button ".concat(this.props.state.userData.isAuthed?"":"hidden"),type:"button",onClick:function(){if(!e.props.state.userData.isAuthed)return P(null,"create","about",!1),void N()("#signOuted").click();ot(e.props.state.project.title,e.props.state.project.fps,e.props.state.framesArray),e.setState({dataUrl:""}),setTimeout((function(){e.props.state.googleLinks.length>0&&e.setState({links:!0})}),3e3),setTimeout((function(){e.mounted&&e.setState({links:!1})}),15e4)}},"Get link"),r.a.createElement("span",{className:"upload-gif-google ".concat(this.props.state.userData.isAuthed?"blocked":"hidden")},"Save your animation to Google disk to share"),r.a.createElement("button",{type:"button",onClick:function(){N()(".abcRioButton.abcRioButtonLightBlue").click()},className:"save-online-button ".concat(this.props.state.userData.isAuthed?"hidden":"")},"Sign in to save to Google disk"),r.a.createElement("div",{className:"link-to-gif ".concat(this.state.links?"":"hidden")},r.a.createElement("span",null,"Click the link"),r.a.createElement("a",{className:"google-link",id:"google-link",rel:"noopener noreferrer",target:"_blank",href:this.props.state.googleLinks[0]},"Link to file on Google disk"),r.a.createElement("a",{className:"google-link",id:"span-link",rel:"noopener noreferrer",target:"_blank",href:this.props.state.googleLinks[1]},"Direct link to your GIF")))),r.a.createElement("div",{className:"png-block ".concat("show-png-block"===this.state.active?"flexed":"hidden")},r.a.createElement("span",{className:"png-title"},"Export your animation as a PNG file"),r.a.createElement("div",{className:"download-block"},r.a.createElement("button",{id:"download-png",className:"png-button",type:"button",onClick:function(){return function(e,t,a){var o=1e3/t,r=e,i=new Ze;i.setRepeat(0),i.setDelay(o),i.start();for(var s,c=N()("#canvas".concat(r)).width(),l=N()("#canvas".concat(r)).get(0).getContext("2d").getImageData(0,0,c,c),u=l.data.length,p=[],d=0;u>0;)(s=l.data.slice(d,d+4)).every((function(e){return 0===e}))&&(s=s.map((function(){return 255}))),p.push.apply(p,Object(n.a)(s)),d+=4,u-=4;var m=Uint8ClampedArray.from(p),h=new ImageData(m,c,c);i.setSize(c,c),i.addFrame(h,!0),i.finish(),a=a||"New Piskel-clone",i.download("".concat(a,".png"))}(e.props.state.currentCanvas,e.props.state.project.fps,e.props.state.project.title)}},"Download"),r.a.createElement("span",{className:"download-png-title"},"Download selected frame as PNG file")),r.a.createElement("div",{className:"download-block"},r.a.createElement("button",{id:"open-png",className:"png-button",type:"button",onClick:function(){for(var t=[],a=0;a<N()(".preview").children().length;a+=1)t.push(N()(".preview").children()[a].src);!function(e,t){var a=window.open();N()(a.document.body).css({display:"flex","flex-direction":"column",width:"100vw",height:"100vh","align-items":"center",background:"whitesmoke",overflow:"hidden"});for(var n=N()("<div></div>",{id:"ancor",width:"100%",height:"50%"}).appendTo(a.document.body).css({width:"80%",height:"50%",background:"white","overflow-y":"scroll","margin-bottom":"25px",border:"1px solid black"}),o=0;o<e.length;o+=1)N()("<img></img>",{src:e[o],width:"25%"}).appendTo(n).css({border:"1px solid black"});N()("<div></div>",{text:t}).appendTo(a.document.body).css({display:"flex","flex-wrap":"wrap",width:"80%",height:"40%","overflow-y":"scroll","word-break":"break-word"})}(t,$e(e.props.state.project.fps,e.props.state.framesArray))}},"Open"),r.a.createElement("span",{className:"open-png-title"},"Open the spritesheet as a data uri"))),r.a.createElement("div",{id:"hidden",className:"hidden"}))}}]),t}(r.a.Component);a(119);function it(e){return r.a.createElement("div",{className:"general-settings-block ".concat("import-settings"===e.active?"flexed":"hidden")},r.a.createElement("div",{className:"current-bg"},r.a.createElement("span",{className:"default-bg bold"},"Load from browser"),r.a.createElement("p",null,"Load your animation saved in this browser"),r.a.createElement("button",{type:"button",onClick:function(){return D.dispatch({type:"showLocalSaves",value:!0})},className:"browse-local-piskels-button"},"Browse local saves")))}var st=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={fps:3,active:"none"},e.mounted=!1,e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.setState({fps:this.props.state.project.fps})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"showOptionsOnClick",value:function(e){this.mounted&&(this.state.active===e?this.setState({active:"none"}):this.setState({active:e}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"optionsBox",id:"optionsBox"},r.a.createElement("div",{className:"fps-options"},r.a.createElement("span",{id:"display-fps",className:"display-fps"},"".concat(this.state.fps," FPS")),r.a.createElement("input",{type:"range",min:"1",max:"24",step:"1",defaultValue:this.state.fps,id:"fps-bar",className:"fps-bar",onChange:function(t){D.dispatch({type:"project",value:["fps",t.target.value]}),e.setState({fps:t.target.value})}})),r.a.createElement(Le,null),r.a.createElement(We,{colorSamples:this.props.state.palette,toolState:this.props.state.toolState}),r.a.createElement("div",{className:"options-blocks-area ".concat("none"===this.state.active?"":"slide")},r.a.createElement(qe,{active:this.state.active}),r.a.createElement(Ke,{active:this.state.active,currentCanvas:this.props.state.currentCanvas}),r.a.createElement(at,{active:this.state.active,state:this.props.state}),r.a.createElement(rt,{active:this.state.active,state:this.props.state}),r.a.createElement(it,{active:this.state.active})),r.a.createElement("div",{className:"settings-buttons ".concat(this.state.active&&"none"===this.state.active?"":"slide")},r.a.createElement(ce,{buttonClass:"settings-button",onClickHandler:function(){return e.showOptionsOnClick("settings")},iconClass:"fas fa-cog",active:this.state.active,buttonId:"settings",title:"Settings",placement:"left"}),r.a.createElement(ce,{buttonClass:"settings-button",onClickHandler:function(){return e.showOptionsOnClick("resize-settings")},iconClass:"fas fa-crop",active:this.state.active,buttonId:"resize-settings",title:"Resize the drawing area",placement:"left"}),r.a.createElement(ce,{buttonClass:"settings-button",onClickHandler:function(){return e.showOptionsOnClick("save-settings")},iconClass:"fas fa-save",active:this.state.active,buttonId:"save-settings",title:"Save to your galery",placement:"left"}),r.a.createElement(ce,{buttonClass:"settings-button",onClickHandler:function(){return e.showOptionsOnClick("export-settings")},iconClass:"fas fa-file-download",active:this.state.active,buttonId:"export-settings",title:"Export as image or animated gif",placement:"left"}),r.a.createElement(ce,{buttonClass:"settings-button",onClickHandler:function(){return e.showOptionsOnClick("import-settings")},iconClass:"fas fa-file-upload",active:this.state.active,buttonId:"import-settings",title:"Import your animation",placement:"left"})))}}]),t}(r.a.Component);function ct(e){var t=N()("#drawCanvas").width();e.forEach((function(e){if(N()("#canvas-block")){var a=N()("#canvas".concat(e.id)).get(0).getContext("2d"),n=new Image;n.src=e.frameSRC,setTimeout((function(){a.drawImage(n,0,0,t,t)}),200)}}))}function lt(e){var t=Object.entries(e.localProjects).sort((function(e,t){return t[1].time-e[1].time}));return r.a.createElement("div",{className:"local-saves-block"},r.a.createElement("div",null,r.a.createElement("span",{className:"local-saves-title"},"Browse local piskels"),r.a.createElement("i",{className:"far fa-window-close local-saves-button",onClick:function(){return D.dispatch({type:"showLocalSaves",value:!1})},onKeyPress:void 0,tabIndex:"-1",role:"button"})),r.a.createElement("div",{className:"table-wrapper"},r.a.createElement("table",{className:"table-local-saves",cellPadding:"20",cellSpacing:"10"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"table-title"},"Name"),r.a.createElement("th",{className:"table-title"},"Date"),r.a.createElement("th",{className:"table-title"},"Actions"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e[0]},r.a.createElement("td",{className:"table-data"},e[1].title),r.a.createElement("td",{className:"table-data"},e[1].date),r.a.createElement("td",{className:"table-data table-data-buttons"},r.a.createElement("button",{type:"button",className:"table-button",onClick:function(){D.dispatch({type:"projectID",value:e[0]}),D.dispatch({type:"project",value:e[1]}),D.dispatch({type:"framesArray",value:null}),D.dispatch({type:"framesArray",value:e[1].frames}),D.dispatch({type:"currentCanvas",value:e[1].frames[0].id}),D.dispatch({type:"showLocalSaves",value:!1}),P(null,"general","create",null,e[0]),setTimeout((function(){ct(e[1].frames)}),500)}},"Load"),r.a.createElement("button",{type:"button",className:"table-button",onClick:function(){return D.dispatch({type:"localProjects",value:["delete",e[0]]})}},"Delete")))}))))))}a(120);var ut=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).state={showSaves:!1,size:"",changeWidth:""},e.mounted=!1,e}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){var e=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155;this.setState({size:e>350?e:350,changeWidth:e})}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,N()(window).bind("beforeunload",(function(){return"are you sure you want to leave?"})),N()(window).bind("resize",(function(){var t=window.innerWidth-500<window.innerHeight-155?window.innerWidth-500:window.innerHeight-155;e.setState({changeWidth:t})}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1,D.dispatch({type:"project",value:"initial"})}},{key:"render",value:function(){return r.a.createElement("div",{id:"container",className:"create-page-wrapper"},r.a.createElement("section",{className:"tool-pannel",id:"tool-pannel"},r.a.createElement(ue,{toolState:this.props.state.toolState})),r.a.createElement("section",{className:"frame-area",id:"frame-area"},r.a.createElement(Te,{framesArray:this.props.state.framesArray,bg:this.props.state.settings.currentBG})),r.a.createElement("section",{className:"canvas-area",id:"canvas-area",style:{overflow:"".concat(this.state.size>this.state.changeWidth?"scroll":"")}},r.a.createElement(Re,{currentCanvas:this.props.state.currentCanvas,toolState:this.props.state.toolState,settings:this.props.state.settings,framesArray:this.props.state.framesArray})),r.a.createElement("div",{className:"right-side-panel"},r.a.createElement("section",{className:"preview-area noselect",id:"preview-area"},r.a.createElement(Fe,{framesArray:this.props.state.framesArray})),r.a.createElement("section",{className:"options-area",id:"options-area"},r.a.createElement(st,{state:this.props.state}))),r.a.createElement("div",{className:"local-saves-page ".concat(this.mounted&&this.props.state.showLocalSaves?"":"hidden")},r.a.createElement("div",{className:"local-saves-background"}),r.a.createElement(lt,{localProjects:this.props.state.localProjects})))}}]),t}(r.a.Component),pt=Object(c.b)((function(e){return{state:e}}))(ut);var dt=a(66),mt=a.n(dt);a(121);function ht(e){return e.error&&function e(){var t=100-48e3/window.innerWidth,a=100-37500/window.innerHeight,n=5500/window.innerHeight,o=window.innerHeight-370,r=document.getElementById("error-image-wrapper");r&&(r.animate([{top:"55px",left:"0"},{top:"".concat(I(n,a),"%"),left:"".concat(I(0,t/2),"%")},{top:"".concat(I(n,a),"%"),left:"".concat(I(0,t/2),"%")},{top:"".concat(o,"px"),left:"".concat(I(t/2,t),"%")},{top:"".concat(I(n,a),"%"),left:"".concat(I(t/2,t),"%")},{top:"55px",left:"".concat(t,"%")},{top:"".concat(I(n,a),"%"),left:"".concat(I(t/2,t),"%")},{top:"".concat(o,"px"),left:"".concat(I(t/2,t),"%")},{top:"".concat(I(n,a),"%"),left:"".concat(I(0,t/2),"%")},{top:"".concat(I(n,a),"%"),left:"".concat(I(0,t/2),"%")},{top:"55px",left:"0"}],{duration:3e4,delay:0,easing:"linear"}).play(),setTimeout((function(){e()}),3e4))}(),r.a.createElement("div",{className:"error-section ".concat(e.error?"error-page":"hidden")},r.a.createElement("div",{className:"error-image-wrapper",id:"error-image-wrapper"},r.a.createElement("img",{src:mt.a,alt:"Oops! Somthing went wrong"})),r.a.createElement("div",{className:"error-text-wrapper"},r.a.createElement("span",null,"Oops! Something went wrong :("),r.a.createElement("span",null,"Please refresh the Webpage!")))}a(122);var ft=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={active:""},a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"hoverIn",value:function(e){this.setState({active:e.currentTarget.id})}},{key:"hoverOut",value:function(){this.setState({active:!1})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"preview-wrapper",id:this.props.infoObj[0],onMouseEnter:function(t){return e.hoverIn(t)},onMouseLeave:function(){return e.hoverOut()}},r.a.createElement("img",{className:"preview-gif",src:this.props.infoObj[1].gif,alt:"preview"}),r.a.createElement("span",{className:"preview-gif-title"},this.props.infoObj[1].title),r.a.createElement("span",{className:"preview-gif-date"},this.props.infoObj[1].date),r.a.createElement("div",{className:"piskel-preview-button-block ".concat(this.state.active===this.props.infoObj[0]?"":"hidden")},r.a.createElement(ce,{buttonClass:"piskel-preview-button",onClickHandler:function(){return e.props.deletePiskelOnClick(e.props.infoObj[0])},iconClass:"fas fa-trash-alt",title:"Delete piskel",placement:"bottom"}),r.a.createElement(ce,{buttonClass:"piskel-preview-button",onClickHandler:function(){return e.props.onClickHandler(e.props.infoObj[0],e.props.infoObj[1].frames,e.props.infoObj[1])},iconClass:"fas fa-pencil-alt",title:"Edit piskel",placement:"bottom"}),r.a.createElement(ce,{buttonClass:"piskel-preview-button",onClickHandler:function(){return e.props.onClickHandler(!1,e.props.infoObj[1].frames,e.props.infoObj[1])},iconClass:"fas fa-copy",title:"Copy piskel",placement:"bottom"}),r.a.createElement(ce,{buttonClass:"piskel-preview-button",onClickHandler:function(){return e.props.onClickHandler(e.props.infoObj[0],!1,e.props.infoObj)},iconClass:"fas fa-eye",title:"Preview piskel details",placement:"bottom"})))}}]),t}(r.a.Component),vt=(a(123),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={height:"",projects:{}},a.mounted=!1,a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentWillMount",value:function(){!this.props.allProjects==={}||this.props.allProjects[this.props.userData.info.id]||function(e){var t={};t[e]={},Je.database().ref("/users/".concat(e)).once("value").then((function(a){t[e]=a.val(),D.dispatch({type:"allProjects",value:t})}))}(this.props.userData.info.id)}},{key:"componentDidMount",value:function(){this.setState({height:window.innerHeight,projects:this.props.allProjects[this.props.userData.info.id]}),this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"onClickHandler",value:function(e,t,a){t?(e?P(null,"user","create",this.props.userData.isAuthed,e):P(null,"user","create",this.props.userData.isAuthed),D.dispatch({type:"project",value:a}),D.dispatch({type:"framesArray",value:t}),setTimeout((function(){ct(t)}),200)):a&&(D.dispatch({type:"project",value:a[1]}),D.dispatch({type:"projectID",value:a[0]}),P(null,"user","projects/user".concat(this.props.userData.info.id,"/").concat(a[0]),this.props.userData.isAuthed))}},{key:"deletePiskel",value:function(e){if(!this.props.userData.isAuthed)return this.setState({isEmpty:!0}),P(null,this.props.page,"about",!1),void N()("#signOuted").click();for(var t,a=Object.entries(this.props.allProjects[this.props.userData.info.id]),n=0;n<a.length;n+=1)a[n][0]===e&&(t="users/".concat(this.props.userData.info.id,"/").concat(a[n][0]),Je.database().ref(t).set(null),D.dispatch({type:"allProjects",value:["delete",this.props.userData.info.id,e]}),this.setState({projects:this.props.allProjects[this.props.userData.info.id]}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"user-page",style:{height:this.state.height-110}},r.a.createElement("div",{className:"user-image",style:{backgroundImage:"url(".concat(this.props.userData.info.image,")"),backgroundSize:"contain"}}),r.a.createElement("h2",{className:"user-name"},this.props.userData.info.name),r.a.createElement("ul",{className:"piskel-list"},r.a.createElement("li",null,"all"),r.a.createElement("li",null,"public"),r.a.createElement("li",null,"private"),r.a.createElement("li",null,"deleted")),r.a.createElement("div",{id:"user-piskel-preview-area",className:"user-piskel-preview-area"},r.a.createElement("div",{className:"user-preview-piskel-block flexed"},this.state.projects&&0!==Object.entries(this.state.projects).length?Object.entries(this.state.projects).sort((function(e,t){return t[1].time-e[1].time})).map((function(t){return r.a.createElement(ft,{key:t[0],infoObj:t,onClickHandler:function(){return e.onClickHandler.apply(e,arguments)},deletePiskelOnClick:function(){return e.deletePiskel.apply(e,arguments)},isAuthed:e.props.userData.isAuthed})})):r.a.createElement("span",null,"No piskel available in 'all' category."))))}}]),t}(r.a.Component)),gt=Object(c.b)((function(e){return{userData:e.userData,page:e.page,allProjects:e.allProjects}}))(vt);a(124);var bt=Object(c.b)((function(e){return{project:e.project}}))((function(e){return r.a.createElement("div",{className:"project-section"},r.a.createElement("div",{className:"project-wrapper"},r.a.createElement("div",{className:"piskel-page-gif-wrapper"},r.a.createElement("img",{src:e.project.gif,alt:"preview-gif"})),r.a.createElement("div",{className:"piskel-page-info-wrapper"},r.a.createElement("span",{className:"sprite-info-title bold"},"Title"),r.a.createElement("h3",{className:"sprite-title"},e.project.title),r.a.createElement("span",{className:"sprite-info-title bold"},"Description"),r.a.createElement("h3",{className:"sprite-description"},"".concat(e.project.description||"no-description yet")),r.a.createElement("span",{className:"sprite-info-title bold"},"Created:"),r.a.createElement("h3",{className:"sprite-date bold"},e.project.date),r.a.createElement("div",null,r.a.createElement("span",{className:"sprite-info-title bold"},"Animation info:"),r.a.createElement("h3",{className:"sprite-options bold"},"Frames:"),r.a.createElement("span",null,e.project.frames.length?e.project.frames.length:0),r.a.createElement("h3",{className:"sprite-options bold"},"FPS:"),r.a.createElement("span",null,"".concat(e.project.frames.length&&1===e.project.frames.length?0:e.project.fps," frames per second")),r.a.createElement("h3",{className:"sprite-options bold"},"The total duration:"),r.a.createElement("span",null,"".concat((e.project.frames.length&&1===e.project.frames.length?0:e.project.frames.length/e.project.fps).toFixed(1)," seconds"))))))})),yt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).state={userData:{},error:!1},a.onSuccess=a.onSuccess.bind(Object(b.a)(a)),a}return Object(y.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){var t;t=e.onSuccess,window.gapi.load("client:auth2",(function(){window.gapi.auth2.init({client_id:"842905832916-kcnptlm4pbd6ji1lpqbka2p6jpdr5i0q.apps.googleusercontent.com"}).then((function(){window.gapi.signin2.render("my-signIn",{scope:"https://www.googleapis.com/auth/drive.file",width:"auto",height:37,longtitle:!0,onsuccess:t,onfailure:Error("try again")})}))}))}),200)}},{key:"onSuccess",value:function(e){var t=function(e){var t=e.getBasicProfile(),a={id:t.getId(),name:t.getName(),image:t.getImageUrl()};return N()(document.body).css({cursor:"default"}),a}(e);D.dispatch({type:"userData",value:t})}},{key:"componentWillUnmount",value:function(){this.setState(null)}},{key:"render",value:function(){return r.a.createElement(w.a,null,r.a.createElement(H,{isAuthed:this.props.userData.isAuthed,page:this.props.page}),r.a.createElement(ht,{error:this.props.error}),r.a.createElement("div",{className:"".concat(this.props.error?"hidden":"page-wrapper")},r.a.createElement(k.b,{path:"/".concat(this.props.locale,"/about"),component:K}),r.a.createElement(k.b,{path:"/".concat(this.props.locale,"/user/*"),component:gt}),r.a.createElement(k.b,{path:"/".concat(this.props.locale,"/create-animation/*"),component:pt}),r.a.createElement(k.b,{path:"/".concat(this.props.locale,"/projects/*"),component:bt}),r.a.createElement(k.b,{path:"*"},this.props.locale&&""!==this.props.page?"user"===this.props.page?this.props.userData.isAuthed?r.a.createElement(k.a,{to:"/".concat(this.props.locale,"/user/").concat(this.props.userData.info.id)}):r.a.createElement(k.a,{to:"/".concat(this.props.locale,"/about")}):r.a.createElement(k.a,{to:"/".concat(this.props.locale,"/").concat(this.props.page)}):r.a.createElement(k.a,{to:"/".concat(this.props.locale,"/about")}))))}}]),t}(r.a.Component),wt=Object(c.b)((function(e){return{locale:e.locales.locale,userData:e.userData,page:e.page,error:e.error,project:e.project}}))(yt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var kt=Object(c.b)((function(e){var t=e.locales,a=t.locale;return{key:a,locale:a,messages:t.messages}}))(l.a);a(125),a(126);Object(l.b)([].concat(Object(n.a)(p.a),Object(n.a)(m.a))),s.a.render(r.a.createElement(c.a,{store:D},r.a.createElement(kt,null,r.a.createElement(wt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}]),[[70,1,2]]]);
//# sourceMappingURL=main.ef30eed6.chunk.js.map