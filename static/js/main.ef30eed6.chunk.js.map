{"version":3,"sources":["assets/images/bg/bg1.png","assets/images/pages/preview-example.gif","assets/images/pages/google-icon.png","assets/images/pages/export-gif.png","assets/images/pages/private-page.png","assets/images/toolIcons/colorpicker.png","assets/images/toolIcons/bucket.png","assets/images/toolIcons/eraser.png","assets/images/toolIcons/pen.png","assets/images/pages/error.jpg","locales/index.js","store/store.js","components/functions/random.js","components/functions/navigation.js","containers/accountButton/accountButton.js","services/googleAuth/authApi.js","components/header/header.js","containers/pages/about/about.js","components/functions/toolsFunctions/buttonsClickHandlers.js","components/tooltips/tooltip.js","components/buttons/awesomeButton.js","components/functions/preview.js","components/tools/toolsDomBuilder.js","components/functions/toolsFunctions/cursorShadow.js","components/functions/toolsFunctions/drawing.js","components/screens/frames/frameDomBuilder.js","components/functions/canvasManager.js","components/functions/toolsFunctions/paint.js","components/functions/colors.js","components/screens/canvas/canvasDomBuilder.js","components/screens/preview/previewDomBuilder.js","components/menuComponents/layers-list/layers-list.js","components/buttons/paletteSampleButton.js","components/menuComponents/palettes/palettes.js","components/menuComponents/settings/settings.js","components/menuComponents/resize/resizeCanvas.js","firebase/firebase.js","components/functions/requestToDB.js","services/jsgif-master/NeuQuant.js","services/jsgif-master/LZWEncoder.js","services/jsgif-master/GIFEncoder.js","components/functions/menuFunctions/fromCanvasToFile.js","services/jsgif-master/b64.js","components/functions/menuFunctions/saveProject.js","components/menuComponents/save/save.js","services/google-uploader/googleUploader.js","components/functions/menuFunctions/exportToGoogle.js","components/menuComponents/export/export.js","components/menuComponents/import/import.js","containers/menu/optionsDomBuilder.js","components/functions/menuFunctions/fromImageToCanvas.js","containers/pages/localSaves/localSaves.js","containers/pages/create/create.js","containers/pages/error/error.js","components/functions/animation.js","components/projectCards/projectCard.js","containers/pages/user/user.js","containers/pages/projectPage/project.js","app.js","serviceWorker.js","ConnectedIntlProvider.js","index.js"],"names":["module","exports","ru","en","initialState","locales","locale","localStorage","getItem","messages","page","indexOf","userData","JSON","parse","info","id","name","image","isAuthed","error","toolState","currentTool","currentColor","backColor","settings","currentBG","bg1","customWidth","projectID","project","gif","frames","title","description","date","time","fps","currentCanvas","googleLinks","palette","showLocalSaves","localProjects","allProjects","framesArray","store","createStore","state","action","type","setItem","value","Object","assign","stringify","Array","key","$","val","obj","array","push","projects","framesID","length","undefined","copy","forEach","item","i","splice","stateObj","delete","update","frameSRC","src","drag","target","dragged","every","map","makeRandomNumber","from","to","Math","ceil","random","makeRandomId","x","j","String","fromCharCode","join","pageNavigator","e","projectId","window","confirm","dispatch","document","body","css","cursor","preventDefault","AccountButton","active","clicked","currentTarget","getAttribute","this","setState","className","props","role","tabIndex","onKeyPress","onClick","addActiveClass","onBlur","setTimeout","style","backgroundImage","backgroundSize","gapi","auth2","getAuthInstance","signOut","then","React","Component","connect","Header","click","previewExampleGif","alt","googleIcon","exportIcon","privatePage","toolButtonsClickHandler","activeTool","show","bucket","hide","picker","pen","eraser","useStylesBootstrap","makeStyles","theme","arrow","position","fontSize","content","margin","display","width","height","borderStyle","popper","color","top","left","marginTop","borderWidth","borderColor","bottom","marginBottom","marginLeft","right","marginRight","tooltip","backgroundColor","border","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","BootstrapTooltip","classes","useState","arrowRef","setArrowRef","Tooltip","PopperProps","popperOptions","modifiers","enabled","Boolean","element","Fragment","ref","CustomizedTooltips","placement","AwesomeButton","mouseEnter","enterDelay","buttonClass","buttonId","onMouseEnter","mouseIn","onMouseLeave","mouseOut","onClickHandler","iconClass","defaultProps","text","ToolsPanel","mounted","tool","activeToolSetter","current","back","defaultValue","onChange","subscribe","getState","anim","newWindow","count","animate","clearTimeout","children","makeImage","framesSrcUpdate","toDataURL","fullSizePreview","close","open","newPreview","clone","appendTo","newFps","newCount","ready","newAnimate","endX","endY","mouseOverX","mouseOverY","mouseDownX","mouseDownY","startX","startY","lastX","lastY","radius","FramesWrapper","activeFrame","hovered","updateImagePreview","frame","frameID","newFrameID","oldID","newID","imageData","get","getContext","getImageData","putImageData","canvas","openCanvasHandler","last","split","sortable","disableSelection","draggedFrom","draggedFrame","background","bg","onMouseEnterHandler","onMouseLeaveHandler","removeFrameHandler","onMouseDown","dragFrameOnClick","onMouseUp","dragOffOnClick","copyFrameHandler","addNewFrameHandler","clearCanvas","ctx","clearRect","endStroke","rect","querySelector","getBoundingClientRect","floor","clientX","y","clientY","canvasSize","drawCtx","globalCompositeOperation","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","sqrt","arc","PI","mouseup","off","getColorAtPixel","data","r","g","b","a","setColorAtPixel","colorMatch","paintIt","num","curCanv","rgbColor","hexColor","result","exec","parseInt","hexToRGB","col","fillStyle","round","newColor","stack","baseColor","pop","goDown","goUp","goLeft","goRight","floodFill","CanvasWrapper","size","draw","lines","canvasWidth","innerWidth","innerHeight","curCanvas","fillRect","startDraw","mousemove","startStroke","is","hexR","toString","hexG","hexB","rgbaToHex","mouseMoveX","mouseMoveY","endDraw","endCursorMove","mouseDownHandler","onMouseOver","createCursorShadow","curColor","onMouseMove","mouseMoveHandler","mouseUpHandler","onFocus","PreviewBlock","hoverIn","hoverOut","Layers","popHintOnMouseOver","SampleButton","Palettes","changed","hex","nums","rgbToHex","addPalettesOnClick","choosePalettesOnClick","editPalettesOnClick","colorSamples","changeCurColor","Settings","addActiveOnClick","ResizeCanvas","maxWidth","newWidth","min","resizeCanvasOnClickHandler","firebase","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","appId","writeUserData","userId","database","set","NeuQuant","alphadec","thepicture","lengthcount","samplefac","network","netsize","prime1","prime2","prime3","prime4","minpicturebytes","maxnetpos","netbiasshift","ncycles","intbiasshift","intbias","gammashift","betashift","beta","betagamma","initrad","radiusbiasshift","radiusbias","initradius","radiusdec","alphabiasshift","initalpha","radbiasshift","radbias","alpharadbshift","alpharadbias","netindex","bias","freq","radpower","thepic","len","sample","p","colorMap","index","k","l","inxbuild","smallpos","smallval","q","previouscol","startpos","learn","rad","alpha","step","delta","samplepixels","pix","lim","contest","altersingle","alterneigh","unbiasnet","dist","bestd","best","process","lo","hi","m","n","biasdist","betafreq","bestpos","bestbiaspos","bestbiasd","apply","arguments","LZWEncoder","imgW","imgH","pixAry","initCodeSize","remaining","curPixel","n_bits","maxcode","g_init_bits","ClearCode","EOFCode","a_count","EOF","BITS","HSIZE","maxbits","maxmaxcode","htab","codetab","hsize","free_ent","clear_flg","cur_accum","cur_bits","masks","accum","pixels","color_depth","max","char_out","c","outs","flush_char","cl_block","cl_hash","output","compress","init_bits","fcode","ent","disp","hsize_reg","hshift","MAXCODE","nextPixel","outer_loop","encode","os","writeByte","writeBytes","code","GIFEncoder","chr","ByteArray","bin","prototype","getData","v","writeUTFBytes","string","charCodeAt","offset","transIndex","out","indexedPixels","colorDepth","colorTab","transparent","repeat","delay","started","usedEntry","palSize","dispose","closeStream","firstFrame","sizeSet","comment","reset","setDelay","ms","setDispose","setRepeat","iter","setTransparent","setComment","addFrame","im","is_imageData","Error","ok","ImageData","setSize","Uint8ClampedArray","console","log","getImagePixels","analyzePixels","writeLSD","writePalette","writeNetscapeExt","writeGraphicCtrlExt","writeCommentExt","writeImageDesc","writePixels","download","filename","endsWith","templink","createElement","href","URL","createObjectURL","Blob","Uint8Array","upload","attr","replace","finish","setFrameRate","setQuality","quality","w","h","start","cont","nPix","nq","findClosest","minpos","dmin","dr","dg","db","d","transp","WriteShort","pValue","stream","setProperties","has_start","is_first","saveAsGif","encoder","map2","newArr","slice","fixedNewArray","newImage","uploadToUrl","binaryGif","input","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","encode64","makeObjectToSave","newTitle","newDescription","dataUrl","Date","day","getDate","month","getMonth","hour","getHours","minutes","getMinutes","getFullYear","getTime","saveLocally","storage","totalSaves","currentProject","keys","entries","some","newStorage","SaveOptions","isFull","isSaved","localSaves","updatedAllProjects","userID","saves","user","objForDB","projectName","projectItems","saveToGalery","rows","cols","saveLocallyHandler","saveToGaleryHandler","Uploader","UploaderForGoogleDrive","RetryHandler","interval","maxInterval","retry","fn","nextInterval_","getRandomInt_","MediaUploader","options","noop","file","contentType","metadata","mimeType","token","currentUser","getAuthResponse","access_token","onComplete","onProgress","onError","chunkSize","retryHandler","url","params","uploadType","buildUrl_","fileId","baseUrl","httpMethod","xhr","XMLHttpRequest","setRequestHeader","onload","status","location","getResponseHeader","sendFile_","onUploadError_","bind","onerror","send","end","addEventListener","onContentUploadSuccess_","onContentUploadError_","resume_","extractRange_","range","match","response","buildQuery_","encodeURIComponent","query","pUploaderForGoogleDrive","Promise","resolve","reject","uploadToGoogle","client","setApiKey","load","err","googleUrl","urlToGif","drive","permissions","create","resource","ExportOptions","links","showExportOptions","base64URL","win","heigh","debugBase64","rel","downloadPng","overflow","ancor","debugBase64WithText","ImportOptions","Options","showOptionsOnClick","fromDataToCanvas","Image","drawImage","LocalSaves","sorted","sort","cellPadding","cellSpacing","CreateAnimation","showSaves","changeWidth","ErrorPage","makeAnimate","node","getElementById","duration","easing","play","errorImage","ProjectCard","infoObj","deletePiskelOnClick","User","DBitem","once","snapshot","getDBdata","projectFrames","preview","isEmpty","deletePiskel","toFixed","App","onSuccess","init","client_id","signin2","render","scope","longtitle","onsuccess","onfailure","googleUser","profile","getBasicProfile","getId","getName","getImageUrl","onSuccessHandler","path","component","About","ProjectInfo","hostname","IntlProvider","addLocaleData","ReactDOM","ConnectedIntlProvider","navigator","serviceWorker","registration","unregister"],"mappings":"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","file":"static/js/main.ef30eed6.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABlBMVEXf39////8zI3BgAAAAHklEQVR4AWNghAIGCMDgjwgFCDDSw2M0PSCD0fQAACRcAgF4ciGUAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/preview-example.e3ca5e51.gif\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/export-gif.ae1e58e5.png\";","module.exports = __webpack_public_path__ + \"static/media/private-page.d4571089.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADCSURBVDhP7dAxCwFhGMDxh00Gk4nBYDAZFIvNJ/BBDOwGiUlJklAWPov4FqSUDEqUSfyf91zdqTuv3b9+3fte3b13j1hUwxpLJPWGTRHE0cLTYw6rGtjC+7BawVf0ff0sgYyz9GX1BW3cUMUG7un6O1/r4YKy2Ynk8cAeMb0RVhdnFM1OJIsdFqhDBxtYBXeUzE4khwMmCJqTrzGmzlIKOGKA0FPdUjihgz6uaMK6IXTK+pIZ3AFap9MdIW12/35M5AUsFCcIOdPfYQAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEdSURBVEhL3dU/a8JAHMbxIChYlQ52aIeCU6Gbk2+hXcV306lDofSttIvuQsGhk4uLIIiCVVF0KxQ6td9HchDkvDvSdKgPfCC55H4PJP6Jjj4tPKOwO8s4ZSzxjTb+pKSODVTSwf8sKeIVKsi85ARdaPAa2/g4k5IKetBAvexr6HFlUnKKN2jQDFcw+fU7qaIPDZighv2kLjnDANo4wiUOJVXJC7RhiAsteJIsudeCK3l84RPnWghMAyqY7s4cyeEDujkNb4HyBNvmEN5HpOhF6YfNNsDFvORmzBndqA22QTZmeAnzmI6dCS1JfjzvYNZ17I2vJDlcGcNc03FQDpXY/oDeYa7r5yU4+n48YIEVHrE/XLmFBsuNFo4hUfQDRmuR/2vYwfIAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAWZJREFUOI2t0jFI1VEUx/FPGjlki9ai0CQIDQ5pCqbNTxJdykGdWmxxsUAHXYJwqMVBNHVzKWh2EAdBTDCQFhWKrMW2aFTiyXO4f+GP/u//8dQfHLiXe+73nvs7h2tWdYX5PZhDF6rwCyeXffwZVtCIZkxgHe9wv1LYIJZwM+OsDbOYjpxf0BBmcCMnpxa/0VEONoz5MrB7+IgDwdeoBgXDh3NymvAZvXiVB3uOIkpJ7OE1GlI5rVhFndD5OzFYAf9TsHScYAMfsIl6PBA6nqlW/IvAzmIL+7greLuI21mwGvzENhawjL8pUBHvsYPu5M5bPI5VN3qukgNMYQCTQpP2EiCM4WkMVoPDyBeLaE8eKGEcL9EXg8FIBHbWiBep/Tf058Gq8D0H+AWfkvWxMHO5epIDKwnGHyVRKAerxp/kYhtuZeR8xcOksrVywLTqBMN/pKrbFQa4sxJQlh7hjTCLLVeFXUmnRmtxEV/Efn8AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAOdJREFUOI3t0zErhWEUAOCnK9Pd76a4kjALGQ0+1ySrwXgXg9WPMBjFYJMSZTGom1kppJj9BBYZGL4zfG4ZvnPv6Cxv5z29T+e8dUbkYxK72EATL/huJLEC54FcoYNTpLwC79jpuz+Jbmtjd2ijh61KrYP9DNaKfAFfFXQbe1lsDg+Yx61y/HuMDYLNRN5W/mkxDKwV9TT2iNl/7M9YGybWxAcuMR3YU5y1MVjHIVZwg7dBMDjwe7F7mMpi8IrFSr6Kiyw2gWflBixhE0dqrFM1GtHNJ0ZxjGWcKce9rguKLroYzzzujx/AVUNl5zj/7wAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/error.d70d2a0b.jpg\";","import ru from 'locales/ru.json';\nimport en from 'locales/en.json';\n\nexport default { ru, en };\n","import { createStore } from 'redux';\nimport messages from 'locales';\nimport $ from 'jquery';\nimport bg1 from 'assets/images/bg/bg1.png';\n\nconst initialState = {\n  locales: {\n    locale: localStorage.getItem('locale') || 'en',\n    messages: messages.ru,\n  },\n  page: localStorage.getItem('page')\n    ? localStorage.getItem('page').indexOf('projects') !== -1\n      ? 'user'\n      : localStorage.getItem('page')\n    : '',\n  userData: JSON.parse(localStorage.getItem('userData')) || {\n    info: {\n      id: 'none',\n      name: 'none',\n      image: 'none'\n    },\n    isAuthed: false\n  },\n  error: false,\n  toolState: {\n    currentTool: '',\n    currentColor: '#161030',\n    backColor: '#c0c0c0'\n  },\n  settings: {\n    currentBG: `url(${bg1})`,\n    customWidth: 33\n  },\n  projectID: localStorage.getItem('projectID') || '',\n  project: {\n    gif: '',\n    frames: '',\n    title: 'New Piskel-clone',\n    description: '',\n    date: '',\n    time: '',\n    fps: 3\n  },\n  currentCanvas: '',\n  googleLinks: [],\n  palette: [],\n  showLocalSaves: false,\n  localProjects: JSON.parse(localStorage.getItem('localProjects')) || {},\n  allProjects: JSON.parse(localStorage.getItem('allProjects')) || {},\n  framesArray: []\n};\n\nfunction appState(state = initialState, action) {\n  switch (action.type) {\n    case 'locale':\n      localStorage.setItem('locale', action.value);\n      return Object.assign({}, state, {\n        locale: action.value\n      });\n    case 'page':\n      localStorage.setItem('page', action.value);\n      return Object.assign({}, state, {\n        page: action.value\n      });\n    case 'userData':\n      const userData = {\n        info: {\n          id: action.value.id,\n          name: action.value.name,\n          image: action.value.image\n        },\n        isAuthed: action.value !== ''\n      }\n      localStorage.setItem('userData', JSON.stringify(userData));\n      return {\n        ...state,\n        userData\n      };\n    case 'error':\n      return Object.assign({}, state, {\n        error: action.value\n      });\n    case 'toolState':\n      if (action.value instanceof Array) {\n        for (let key in state.toolState) {\n          if (action.value[0] === key) {\n            state.toolState[key] = action.value[1]\n          }\n          if (action.value[0] === 'currentColor') {\n            $('#customed1').val(action.value[1]);\n          } else if (action.value[0] === 'backColor') {\n            $('#customed2').val(action.value[1]);\n          }\n        }\n        return {\n          ...state,\n          ...state.toolState\n        };\n      } else {\n        return Object.assign({}, state, {\n          toolState: action.value\n        });\n      }\n    case 'settings':\n      for (let key in state.settings) {\n        if (action.value[0] === key) {\n          state.settings[key] = action.value[1]\n        }\n      }\n      return {\n        ...state,\n        ...state.settings\n      };\n    case 'projectID':\n      localStorage.setItem('projectID', action.value);\n      return Object.assign({}, state, {\n        projectID: action.value\n      });\n    case 'project':\n      if (action.value instanceof Array) {\n        for (let key in state.project) {\n          if (action.value[0] === key) {\n            state.project[key] = action.value[1]\n          }\n        }\n        return {\n          ...state,\n          ...state.project\n        };\n      } else if (action.value === 'initial') {\n        const obj = initialState.project;\n        return Object.assign({}, state, {\n          project: obj\n        });\n      } else {\n        return Object.assign({}, state, {\n          project: action.value\n        });\n      }\n    case 'currentCanvas':\n      return Object.assign({}, state, {\n        currentCanvas: action.value\n      });\n    case 'showLocalSaves':\n      return Object.assign({}, state, {\n        showLocalSaves: action.value\n      });\n    case 'googleLinks':\n      return Object.assign({}, state, {\n        googleLinks: action.value\n      });\n    case 'palette':\n      const array = state.palette;\n      if (array.indexOf(action.value) === -1) {\n        array.push(action.value);\n      }\n      return Object.assign({}, state, {\n        palette: array\n      });\n    case 'localProjects':\n      if (action.value instanceof Array) {\n        const projects = state.localProjects;\n        if (action.value[0] === 'delete') {\n          delete projects[action.value[1]];\n          localStorage.setItem('localProjects', JSON.stringify(projects));\n        }\n        return {\n          ...state,\n          ...projects\n        };\n      } else {\n        localStorage.setItem('localProjects', JSON.stringify(action.value));\n        return Object.assign({}, state, {\n          localProjects: action.value\n        });\n      }\n    case 'allProjects':\n      if (action.value instanceof Array) {\n        const projects = state.allProjects;\n        if (action.value[0] === 'delete') {\n          delete projects[action.value[1]][action.value[2]];\n          localStorage.setItem('allProjects', JSON.stringify(projects));\n        }\n        return {\n          ...state,\n          ...projects\n        };\n      } else {\n        localStorage.setItem('allProjects', JSON.stringify(action.value));\n        return Object.assign({}, state, {\n          allProjects: action.value\n        });\n      }\n    case 'framesArray':\n      let framesID = state.framesArray;\n      if (action.value instanceof Object) {\n        if (framesID.length >= 1) {\n          if (action.value.copy !== undefined) {\n            framesID.forEach((item, i) => {\n              if (item.id === action.value.copy) {\n                framesID.splice(i + 1, 0, action.value.stateObj);\n              }\n            });\n          } else if (action.value.delete !== undefined) {\n            framesID.forEach((item, i) => {\n              if (item.id === action.value.delete) {\n                framesID.splice(i, 1);\n              }\n            });\n          } else if (action.value.update !== undefined) {\n            framesID.forEach((item, i) => {\n              if (item.id === action.value.update) {\n                framesID[i].frameSRC = action.value.src;\n              }\n            });\n          } else if (action.value.drag !== undefined) {\n            let target = framesID[action.value.target];\n            let dragged = framesID[action.value.drag];\n            framesID[action.value.target] = dragged;\n            framesID[action.value.drag] = target;\n          } else if (action.value === null) {\n            return Object.assign({}, state, {\n              framesArray: []\n            });\n          } else {\n            if (framesID.every(item => item.id !== action.value.id)) {\n              framesID.push(action.value);\n            }\n          }\n        } else {\n          if (action.value.length > 0) {\n            action.value.map(item => framesID.push(item))\n          } else {\n            framesID = [{ id: action.value.id, frameSRC: action.value.frameSRC }];\n          }\n        }\n      } else if (action.value === null) {\n        return Object.assign({}, state, {\n          framesArray: []\n        });\n      }\n      return Object.assign({}, state, {\n        framesArray: framesID\n      });\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(appState);\n\nexport default store;\n","/* eslint-disable no-bitwise */\nexport function makeRandomNumber(from, to) {\n  const number = Math.ceil(to - (to - from) * Math.random());\n  return number;\n}\n\nexport function makeRandomId() {\n  const j = [];\n  let x;\n  for (let i = 0; i < 20; i += 1) {\n    x = [[48, 57], [65, 90], [97, 122]][(Math.random() * 3) >> 0];\n    j[i] = String.fromCharCode(((Math.random() * (x[1] - x[0] + 1)) >> 0) + x[0]);\n  }\n  return j.join('');\n}\n\nexport function getDate() {\n  const data = new Date();\n  let day = data.getDate();\n  if (day < 10) {\n    day = `0${day}`;\n  }\n  let month = data.getMonth() + 1;\n  if (month < 10) {\n    month = `0${month}`;\n  }\n  let hour = data.getHours();\n  if (hour < 10) {\n    hour = `0${hour}`;\n  }\n  let minutes = data.getMinutes();\n  if (minutes < 10) {\n    minutes = `0${minutes}`;\n  }\n  const time = new Date(`${hour}:${minutes} ${month}/${day}/${data.getFullYear()}`).getTime();\n  return `${hour}:${minutes} ${day}/${month}/${data.getFullYear()}  ${time}`;\n}\n","import $ from 'jquery';\nimport store from 'store/store';\nimport { makeRandomId } from 'components/functions/random';\n\nexport function pageNavigator(e, from, to, isAuthed, projectId) {\n  if (from.indexOf('create') !== -1) {\n    if (to.indexOf('user') !== -1) {\n      // navigate from createPage to userPage if authed\n      if (isAuthed) {\n        if (window.confirm('Are you sure you want to leave?')) {\n          store.dispatch({ type: 'page', value: to });\n          $(document.body).css({ cursor: 'default' });\n          return;\n        }\n        e.preventDefault();\n        return;\n      }\n      // navigate from createPage to userPage, if not authed redirect to erorPage\n      store.dispatch({ type: 'page', value: 'about' });\n      store.dispatch({ type: 'userData', value: '' });\n      store.dispatch({ type: 'error', value: true });\n      return;\n    }\n    // navigate from createPage to createPage - create new project\n    if (to === 'create') {\n      if (window.confirm('Are you sure you want to leave?')) {\n        const projectID = makeRandomId();\n        const page = `create-animation/${projectID}`;\n        store.dispatch({ type: 'page', value: page });\n        store.dispatch({ type: 'projectID', value: projectID });\n        $(document.body).css({ cursor: 'default' });\n        return;\n      }\n      e.preventDefault();\n      return;\n    }\n    // navigate from createPage to general pages\n    if (window.confirm('Are you sure you want to leave?')) {\n      store.dispatch({ type: 'page', value: to });\n      $(document.body).css({ cursor: 'default' });\n      return;\n    }\n    e.preventDefault();\n    return;\n  }\n  // navigate from general pages to createPage\n  if (to === 'create') {\n    if (projectId) {\n      store.dispatch({ type: 'page', value: `create-animation/${projectId}` });\n      store.dispatch({ type: 'projectID', value: projectId });\n      $(document.body).css({ cursor: 'default' });\n      return;\n    }\n    const projectID = makeRandomId();\n    const page = `create-animation/${projectID}`;\n    store.dispatch({ type: 'page', value: page });\n    store.dispatch({ type: 'projectID', value: projectID });\n    $(document.body).css({ cursor: 'default' });\n    return;\n  }\n  // navigate from other pages to general pages\n  store.dispatch({ type: 'page', value: to });\n  $(document.body).css({ cursor: 'default' });\n}\n\nexport function toCreatePage() { }\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport store from 'store/store';\nimport { signOut } from 'services/googleAuth/authApi';\nimport 'containers/accountButton/accountButton.css';\nimport { pageNavigator } from 'components/functions/navigation';\n\nclass AccountButton extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: ''\n    };\n  }\n\n  addActiveClass(e) {\n    const clicked = e.currentTarget.getAttribute('id');\n    if (this.state.active === clicked) {\n      this.setState({ active: '' });\n    } else {\n      this.setState({ active: clicked });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={`menu-item ${this.props.userData.isAuthed ? 'account flexed' : 'hidden'}`}\n        id=\"list\"\n        role=\"button\"\n        tabIndex=\"-1\"\n        onKeyPress={undefined}\n        onClick={e => {\n          if (!localStorage.getItem('userData')) {\n            pageNavigator(e, this.props.page, 'about', false);\n            store.dispatch({ type: 'userData', value: '' });\n            store.dispatch({ type: 'error', value: true });\n            return;\n          }\n          this.addActiveClass(e);\n        }}\n        onBlur={() => {\n          setTimeout(() => {\n            this.setState({ active: '' });\n\n          }, 300);\n        }}\n      >\n        <div\n          className=\"account-image\"\n          style={{\n            backgroundImage: `url(${this.props.userData.info.image})`,\n            backgroundSize: 'contain'\n          }}\n        />\n        <span className=\"account-button\">{this.props.userData.info.name}</span>\n        <i className=\"fas fa-sort-down\" />\n        <ul className={`dropdown ${this.state.active === 'list' ? 'active flexed' : 'hidden'}`}>\n          <li className={`list top ${this.state.active === 'list' ? 'flexed' : 'hidden'}`}>\n            <Link\n              to={`/user/${this.props.userData.info.id}`}\n              id={`/user/${this.props.userData.info.id}`}\n              className=\"account-item\"\n              onClick={e => pageNavigator(e, this.props.page, `user/${this.props.userData.info.id}`, this.props.userData.isAuthed)}\n            >\n              My Galery\n            </Link>\n          </li>\n          <li className={`list bottom ${this.state.active === 'list' ? 'flexed' : 'hidden'}`}>\n            <Link\n              to=\"/\"\n              id=\"logout\"\n              className=\"account-item\"\n              onClick={e => {\n                if (window.confirm('Are you sure you want to leave?') === true) {\n                  pageNavigator(e, this.props.page, 'about', this.props.userData.isAuthed)\n                  signOut();\n                } else {\n                  e.preventDefault();\n                }\n              }}\n            >\n              Log out\n            </Link>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nAccountButton.propTypes = {\n  userData: PropTypes.object.isRequired,\n  page: PropTypes.string.isRequired\n};\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n  page: state.page\n});\n\nexport default connect(mapStateToProps)(AccountButton);\n","import $ from 'jquery';\nimport store from 'store/store';\n\nexport function authenticate() {\n  return window.gapi.auth2\n    .getAuthInstance()\n    .signIn({\n      scope: 'https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file'\n    })\n    .then(\n      () => {\n        console.log('Sign-in successful');\n      },\n      err => {\n        console.error('Error signing in', err);\n      }\n    );\n}\n\nexport function loadClient() {\n  window.gapi.client.setApiKey('AIzaSyD8p3NmO-jrbUeGpC9EYDHzH8FWOl3ivss');\n  return window.gapi.client\n    .load('https://content.googleapis.com/discovery/v1/apis/drive/v3/rest')\n    .then(\n      () => {\n        console.log('GAPI client loaded for API');\n      },\n      err => {\n        console.error('Error loading GAPI client for API', err);\n      }\n    );\n}\n\n// Make sure the client is loaded and sign-in is complete before calling this method.\nexport function execute() {\n  return window.gapi.client.drive.permissions\n    .create({\n      resource: {\n        role: '',\n        type: ''\n      }\n    })\n    .then(\n      response => {\n        // Handle the results here (response.result has the parsed body).\n        console.log('Response', response);\n      },\n      err => {\n        console.error('Execute error', err);\n      }\n    );\n}\n\nexport function onSuccessHandler(googleUser) {\n  const profile = googleUser.getBasicProfile();\n  const userData = {\n    id: profile.getId(),\n    name: profile.getName(),\n    image: profile.getImageUrl()\n  };\n  $(document.body).css({ cursor: 'default' });\n  return userData;\n}\n\nexport function googleAuth(onSuccess) {\n  window.gapi.load('client:auth2', () => {\n    window.gapi.auth2\n      .init({\n        client_id: '842905832916-kcnptlm4pbd6ji1lpqbka2p6jpdr5i0q.apps.googleusercontent.com'\n      })\n      .then(() => {\n        window.gapi.signin2.render('my-signIn', {\n          scope: 'https://www.googleapis.com/auth/drive.file',\n          width: 'auto',\n          height: 37,\n          longtitle: true,\n          onsuccess: onSuccess,\n          onfailure: Error('try again')\n        });\n      });\n  });\n}\n\nexport function signOut() {\n  const auth2 = window.gapi.auth2.getAuthInstance();\n  auth2.signOut().then(() => {\n    store.dispatch({ type: 'userData', value: '' });\n    store.dispatch({ type: 'page', value: '' });\n  });\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport 'components/header/header.css';\nimport AccountButton from 'containers/accountButton/accountButton';\nimport { pageNavigator } from 'components/functions/navigation';\n\nexport default function Header(props) {\n  return (\n    <header className=\"header\">\n      <ul className=\"header-menu\">\n        <li className=\"logo\">\n          <Link\n            id=\"/about\"\n            to=\"/about\"\n            className=\"logo-text\"\n            onClick={e => pageNavigator(e, props.page, 'about', props.isAuthed)}>\n            Piskel-clone\n            </Link>\n        </li>\n        <li className=\"header-buttons\">\n          <div className=\"create menu-item flexed\">\n            <Link\n              id=\"/create\"\n              to=\"/create-animation\"\n              className=\"create-link\"\n              onClick={e => pageNavigator(e, props.page, 'create', props.isAuthed)}\n            >\n              Create Animation\n            </Link>\n          </div>\n          <div className=\"signin\">\n            <AccountButton />\n            <div id=\"my-signIn\" className={`${props.isAuthed ? 'hidden' : 'shown'}`} />\n          </div>\n        </li>\n      </ul>\n    </header>\n  );\n}\n\nHeader.propTypes = {\n  isAuthed: PropTypes.bool.isRequired,\n  page: PropTypes.string.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport $ from 'jquery';\nimport { pageNavigator } from 'components/functions/navigation';\nimport 'containers/pages/about/about.css';\nimport previewExampleGif from 'assets/images/pages/preview-example.gif';\nimport googleIcon from 'assets/images/pages/google-icon.png';\nimport exportIcon from 'assets/images/pages/export-gif.png';\nimport privatePage from 'assets/images/pages/private-page.png';\n\nfunction About(props) {\n  return (\n    <div className=\"homepage-section\">\n      <div className=\"about-app-wrapper\">\n        <div className=\"home-about\">\n          <h1>\n            <span className=\"piskel\">Piskel-clone </span>\n            is a free online editor for animated sprites & pixel art\n          </h1>\n          <h2>Create animations in your browser.</h2>\n          <h2>\n            <span className=\"description-link\">Try an example</span>\n            {', use '}\n            <span\n              role=\"button\"\n              tabIndex=\"-1\"\n              onKeyPress={undefined}\n              className=\"description-link\"\n              onClick={() => $('.abcRioButton.abcRioButtonLightBlue').click()}\n            >\n              Google sign in\n            </span>\n            {' to access your gallery or simply '}\n            <button\n              type=\"button\"\n              className=\"text-button\"\n              onClick={e => pageNavigator(e, 'about', 'create', props.isAuthed)}\n            >\n              <span className=\"description-link\">Create a new Sprite</span>\n            </button>\n          </h2>\n          <div className=\"home-buttons\">\n            <button\n              type=\"button\"\n              className=\"login-button\"\n              onClick={() => $('.abcRioButton.abcRioButtonLightBlue').click()}\n            >\n              Sign in\n            </button>\n            <button\n              type=\"button\"\n              className=\"create-button\"\n              onClick={e => pageNavigator(e, 'about', 'create', props.isAuthed)}\n            >\n              <span className=\"link\">Create Sprite</span>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"home-image\">\n          <div className=\"screen\" />\n          <div className=\"home-preview\" />\n        </div>\n      </div>\n      <div className=\"app-description-wrapper\">\n        <div className=\"description-item\">\n          <img className=\"description-image\" src={previewExampleGif} alt=\"piskel-example\" />\n          <div className=\"description-body\">\n            <h3 className=\"description-title\">\n              Live preview\n              </h3>\n            <p className=\"description-text\">\n              Check a preview of your animation in real time as you draw. Adjust the frame delay on the fly.\n              </p>\n          </div>\n        </div>\n        <div className=\"description-item\">\n          <img className=\"description-image\" src={googleIcon} alt=\"google-icon\" />\n          <div className=\"description-body\">\n            <h3 className=\"description-title\">\n              Google Sign in\n              </h3>\n            <p className=\"description-text\">\n              No need to remember yet another password, just use your Google account to sign in.\n              </p>\n          </div>\n        </div>\n        <div className=\"description-item\">\n          <img className=\"description-image\" src={exportIcon} alt=\"export-icon\" />\n          <div className=\"description-body\">\n            <h3 className=\"description-title\">\n              Export to GIF, PNG\n              </h3>\n            <p className=\"description-text\">\n              Several export modes supported. Animated GIFs for sharing, spritesheet PNG/ZIP for bigger projects\n              </p>\n          </div>\n        </div>\n        <div className=\"description-item\">\n          <img className=\"description-image\" src={privatePage} alt=\"personal-page-icon\" />\n          <div className=\"description-body\">\n            <h3 className=\"description-title\">\n              Private gallery\n              </h3>\n            <p className=\"description-text\">\n              You can chose to make any of your sprites public or private.\n              Private sprites are only visible to you.\n              </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nAbout.propTypes = {\n  isAuthed: PropTypes.bool.isRequired\n}\n\nconst mapStateToProps = state => ({ isAuthed: state.userData.isAuthed });\nexport default connect(mapStateToProps)(About);\n","import $ from 'jquery';\nimport picker from 'assets/images/toolIcons/colorpicker.png';\nimport bucket from 'assets/images/toolIcons/bucket.png';\nimport eraser from 'assets/images/toolIcons/eraser.png';\nimport pen from 'assets/images/toolIcons/pen.png';\n\nexport default function toolButtonsClickHandler(activeTool) {\n  $('#drawCanvas').show();\n  if (activeTool === 'paintBucketTool') {\n    $(document.body).css({ cursor: `url(${bucket}) 15 15, auto` });\n  } else if (activeTool === 'colorPickerTool') {\n    $('#drawCanvas').hide();\n    $(document.body).css({ cursor: `url(${picker}) 1 10, auto` });\n  } else if (\n    activeTool === 'penTool'\n    || activeTool === 'strokeTool'\n    || activeTool === 'rectangleTool'\n    || activeTool === 'circleTool'\n  ) {\n    $(document.body).css({ cursor: `url(${pen}) 1 18, auto` });\n  } else if (activeTool === 'eraserTool') {\n    $(document.body).css({ cursor: `url(${eraser}) 1 18, auto` });\n  } else {\n    $(document.body).css({ cursor: 'default' });\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nfunction arrowGenerator(color) {\n  return {\n    '&[x-placement*=\"bottom\"] $arrow': {\n      top: 0,\n      left: 0,\n      marginTop: '-9px',\n      width: '20px',\n      height: '10px',\n      '&::before': {\n        borderWidth: '0 10px 10px 10px',\n        borderColor: `transparent transparent ${color} transparent`,\n      },\n    },\n    '&[x-placement*=\"top\"] $arrow': {\n      bottom: 0,\n      left: 0,\n      marginBottom: '-9px',\n      width: '20px',\n      height: '10px',\n      '&::before': {\n        borderWidth: '10px 10px 0 10px',\n        borderColor: `${color} transparent transparent transparent`,\n      },\n    },\n    '&[x-placement*=\"right\"] $arrow': {\n      left: 0,\n      marginLeft: '-9px',\n      height: '20px',\n      width: '10px',\n      '&::before': {\n        borderWidth: '10px 10px 10px 0',\n        borderColor: `transparent ${color} transparent transparent`,\n      },\n    },\n    '&[x-placement*=\"left\"] $arrow': {\n      right: 0,\n      marginRight: '-9px',\n      height: '20px',\n      width: '10px',\n      '&::before': {\n        borderWidth: '10px 0 10px 10px',\n        borderColor: `transparent transparent transparent ${color}`,\n      },\n    },\n  };\n}\n\nconst useStylesBootstrap = makeStyles(theme => ({\n  arrow: {\n    position: 'absolute',\n    fontSize: 6,\n    '&::before': {\n      content: '\"\"',\n      margin: 'auto',\n      display: 'block',\n      width: 0,\n      height: 0,\n      borderStyle: 'solid',\n    },\n  },\n  popper: arrowGenerator('#6bebeb'),\n  tooltip: {\n    position: 'relative',\n    color: 'black',\n    fontSize: '18px',\n    backgroundColor: '#6bebeb',\n    border: '1px solid #3c8484'\n  },\n  tooltipPlacementLeft: {\n    right: '-15px',\n    margin: '0 8px',\n  },\n  tooltipPlacementRight: {\n    margin: '0 8px',\n  },\n  tooltipPlacementTop: {\n    right: '-15px',\n    margin: '8px 0',\n  },\n  tooltipPlacementBottom: {\n    top: '5px',\n    margin: '8px 0',\n  },\n}));\n\nfunction BootstrapTooltip(props) {\n  const { arrow, ...classes } = useStylesBootstrap();\n  const [arrowRef, setArrowRef] = React.useState(null);\n\n  return (\n    <Tooltip\n      classes={classes}\n      PopperProps={{\n        popperOptions: {\n          modifiers: {\n            arrow: {\n              enabled: Boolean(arrowRef),\n              element: arrowRef,\n            },\n          },\n        },\n      }}\n      {...props}\n      title={\n        <React.Fragment>\n          {props.title}\n          <span className={arrow} ref={setArrowRef} />\n        </React.Fragment>\n      }\n    />\n  );\n}\n\nBootstrapTooltip.propTypes = {\n  title: PropTypes.node,\n};\n\nexport default function CustomizedTooltips(props) {\n  return (\n    <BootstrapTooltip {...props} title={props.title} placement={props.placement} />\n  );\n}\nCustomizedTooltips.propTypes = {\n  title: PropTypes.string.isRequired,\n  placement: PropTypes.string.isRequired\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CustomizedTooltips from 'components/tooltips/tooltip';\n\nexport default class AwesomeButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mouseEnter: false\n    };\n  }\n\n  mouseIn() {\n    this.setState({ mouseEnter: true });\n  }\n\n  mouseOut() {\n    this.setState({ mouseEnter: false });\n  }\n\n  render() {\n    return (\n      <CustomizedTooltips\n        title={this.props.title}\n        placement={this.props.placement}\n        enterDelay={500}\n      >\n        <button\n          type=\"button\"\n          className={\n            `${this.props.buttonClass} ${this.state.mouseEnter || this.props.active === this.props.buttonId\n              ? `${this.props.buttonClass}-hovered`\n              : ''}`}\n          onMouseEnter={() => this.mouseIn()}\n          onMouseLeave={() => this.mouseOut()}\n          onClick={() => this.props.onClickHandler()}\n        >\n          <i\n            className={this.props.iconClass}\n          />\n        </button>\n      </CustomizedTooltips>\n    );\n  }\n}\n\nAwesomeButton.propTypes = {\n  buttonId: PropTypes.string,\n  buttonClass: PropTypes.string,\n  iconClass: PropTypes.string.isRequired,\n  onClickHandler: PropTypes.func.isRequired,\n  active: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  placement: PropTypes.string.isRequired\n};\n\nAwesomeButton.defaultProps = {\n  buttonClass: 'awesome-button',\n  text: ''\n};\n","import $ from 'jquery';\nimport store from 'store/store';\n\nlet fps;\nstore.subscribe(() => {\n  fps = store.getState().fps || 3;\n});\nlet count = 0;\nlet anim;\n\nexport function animate() {\n  clearTimeout(anim); // stop old animation\n  const time = 1000 / fps; // calc animation speed\n  $('.preview')\n    .children()\n    .css({ display: 'none' }); // hide all canvas-images\n  if ($('.preview').children()[count]) {\n    $('.preview').children()[count].style.display = 'block'; // show only the \"count\"-th image\n  }\n  count += 1;\n  if (count === $('.preview').children().length) {\n    count = 0; // restart counting if all images were shown\n  }\n\n  anim = setTimeout(animate, time); // repeat animation\n}\n\n// make image from canvas drawing\nexport function makeImage(id) {\n  const imageSRC = $(`#canvas${id}`)[0].toDataURL('image/png');\n  const framesSrcUpdate = {\n    update: id,\n    src: imageSRC\n  }\n  store.dispatch({ type: 'framesArray', value: framesSrcUpdate });\n  if ($('.preview').children().length > 1) {\n    count = 0;\n    animate();\n  } else {\n    clearTimeout(anim);\n  }\n}\n\nlet newWindow;\nlet id = 0;\n\n// open new window to watch animation in full-size mode\nexport function fullSizePreview() {\n  if (newWindow) {\n    id += 1;\n    newWindow.close();\n  }\n  newWindow = window.open('about:blank', `window${id}`, 'width=300,height=300');\n\n  // cloning animation box with images to new window\n  const newPreview = $('.preview')\n    .clone()\n    .appendTo(newWindow.document.body)\n    .css({ display: 'flex', 'justify-content': 'center', 'align-items': 'center', height: '100%' });\n  $(newWindow.document.body).css({\n    display: 'flex',\n    'justify-content': 'center',\n    'align-items': 'center'\n  });\n\n  const newFps = fps;\n  let newCount = 0;\n\n  function newAnimate() {\n    // clearTimeout(newAnim);\n    const time = 1000 / newFps;\n    newPreview.children().css({ display: 'none' });\n    if (newPreview.children()[newCount]) {\n      newPreview.children()[newCount].style.display = 'block';\n    }\n    newCount += 1;\n    if (newCount === newPreview.children().length) {\n      newCount = 0;\n    }\n    setTimeout(newAnimate, time);\n  }\n  // when new window loaded should start animation\n  $(newWindow).ready(newAnimate);\n}\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport 'components/tools/tools.css';\r\nimport toolButtonsClickHandler from 'components/functions/toolsFunctions/buttonsClickHandlers';\r\nimport store from 'store/store';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\n\r\nexport default class ToolsPanel extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      active: ''\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  activeToolSetter(tool) {\r\n    if (this.state.active === tool) {\r\n      this.setState({ active: null });\r\n      store.dispatch({ type: 'toolState', value: ['currentTool', ''] });\r\n      toolButtonsClickHandler(null);\r\n    } else {\r\n      this.setState({ active: tool });\r\n      store.dispatch({ type: 'toolState', value: ['currentTool', tool] });\r\n      toolButtonsClickHandler(tool);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div name=\"Tools\">\r\n        <div className=\"tool-panel\" id=\"tool-panel\">\r\n          <div className=\"tool-buttons-block\">\r\n            <AwesomeButton\r\n              buttonId=\"paintBucketTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('paintBucketTool')}\r\n              iconClass=\"fas fa-fill-drip\"\r\n              active={this.state.active}\r\n              title=\"Click on the area to paint it in chosen color\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"colorPickerTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('colorPickerTool')}\r\n              iconClass=\"fas fa-eye-dropper\"\r\n              active={this.state.active}\r\n              title=\"Click on any fragment to pick its color\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"penTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('penTool')}\r\n              iconClass=\"fas fa-pencil-alt\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"eraserTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('eraserTool')}\r\n              iconClass=\"fas fa-eraser\"\r\n              active={this.state.active}\r\n              title=\"Click on the area to erase it\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"strokeTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('strokeTool')}\r\n              iconClass=\"fas fa-slash\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw a line\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"rectangleTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('rectangleTool')}\r\n              iconClass=\"far fa-square\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw a rectangle\"\r\n              placement=\"right\"\r\n            />\r\n            <AwesomeButton\r\n              buttonId=\"circleTool\"\r\n              buttonClass=\"tool-button\"\r\n              onClickHandler={() => this.activeToolSetter('circleTool')}\r\n              iconClass=\"far fa-circle\"\r\n              active={this.state.active}\r\n              title=\"Click and move the mouse to draw a circle\"\r\n              placement=\"right\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"color-panel\">\r\n          <AwesomeButton\r\n            buttonClass=\"color-switcher\"\r\n            onClickHandler={() => {\r\n              const current = this.props.toolState.currentColor;\r\n              const back = this.props.toolState.backColor;\r\n              store.dispatch({ type: 'toolState', value: ['currentColor', back] });\r\n              store.dispatch({ type: 'toolState', value: ['backColor', current] });\r\n            }}\r\n            iconClass=\"fas fa-retweet\"\r\n            title=\"Switch colors on click\"\r\n            placement=\"bottom-start\"\r\n            buttonId={null}\r\n            active={this.state.active}\r\n          />\r\n          <div className=\"color-block-upper\">\r\n            <input\r\n              type=\"color\"\r\n              name=\"colors\"\r\n              className=\"input-color\"\r\n              id=\"customed1\"\r\n              defaultValue={this.props.toolState.currentColor}\r\n              onChange={e => store.dispatch({ type: 'toolState', value: ['currentColor', $(e.target).val()] })}\r\n            />\r\n          </div>\r\n          <div className=\"color-block-under\">\r\n            <input\r\n              type=\"color\"\r\n              name=\"colors\"\r\n              className=\"input-color\"\r\n              id=\"customed2\"\r\n              defaultValue={this.props.toolState.backColor}\r\n              onChange={e => store.dispatch({ type: 'toolState', value: ['backColor', $(e.target).val()] })}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nToolsPanel.propTypes = {\r\n  toolState: PropTypes.object.isRequired\r\n};\r\n","import $ from 'jquery';\nimport store from 'store/store';\n\nlet customWidth;\nstore.subscribe(() => {\n  customWidth = store.getState().customWidth || 33;\n});\n\nlet endX;\nlet endY;\nlet mouseOverX;\nlet mouseOverY;\n\nexport function endCursorMove(e) {\n  const curCanv = document.querySelector('#drawCanvas');\n  const rect = curCanv.getBoundingClientRect();\n  const x = Math.round(e.clientX - rect.left);\n  const y = Math.round(e.clientY - rect.top);\n  const ctx = $('#drawCanvas')\n    .get(0)\n    .getContext('2d');\n  ctx.globalCompositeOperation = 'source-over';\n  ctx.fillStyle = 'gray';\n  ctx.strokeStyle = 'gray';\n  const width = $('#drawCanvas').width();\n  const canvasSize = Math.ceil(width / customWidth); // todo pass store as argument\n  endX = x;\n  endY = y;\n  const mouseMoveX = Math.floor(x / canvasSize) * canvasSize;\n  const mouseMoveY = Math.floor(y / canvasSize) * canvasSize;\n  if (mouseOverX > endX || mouseOverY > endY) {\n    ctx.clearRect(0, 0, width, width);\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  } else if (mouseOverX + canvasSize < endX || mouseOverY + canvasSize < endY) {\n    ctx.clearRect(0, 0, width, width);\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  }\n}\n\nexport function createCursorShadow(e) {\n  const width = $('#drawCanvas').width();\n  const curCanv = document.querySelector('#drawCanvas');\n  const canvasSize = Math.ceil(width / customWidth);\n  const rect = curCanv.getBoundingClientRect();\n  const x = Math.round(e.clientX - rect.left);\n  const y = Math.round(e.clientY - rect.top);\n  mouseOverX = Math.floor(x / canvasSize) * canvasSize;\n  mouseOverY = Math.floor(y / canvasSize) * canvasSize;\n  const ctx = $('#drawCanvas')\n    .get(0)\n    .getContext('2d');\n  ctx.globalCompositeOperation = 'source-over';\n  ctx.fillStyle = 'gray';\n  ctx.strokeStyle = 'gray';\n  ctx.fillRect(mouseOverX, mouseOverY, canvasSize, canvasSize);\n}\n\nexport function clearCanvas() {\n  const ctx = $('#drawCanvas')\n    .get(0)\n    .getContext('2d');\n  const width = $('#drawCanvas').width();\n  ctx.clearRect(0, 0, width, width);\n}\n","import $ from 'jquery';\n\nlet endX;\nlet endY;\nlet mouseDownX;\nlet mouseDownY;\n\n// drawing on mouse move\nexport function endDraw(e, currentCanvas, tool, customWidth, color) {\n  const drawCanv = document.querySelector('#drawCanvas');\n  const rect = drawCanv.getBoundingClientRect();\n  const x = Math.round(e.clientX - rect.left);\n  const y = Math.round(e.clientY - rect.top);\n  const ctx = $(`#canvas${currentCanvas}`)\n    .get(0)\n    .getContext('2d');\n  endX = x;\n  endY = y;\n  if (tool === 'penTool') {\n    ctx.fillStyle = color; // color depends on chosen color\n    ctx.strokeStyle = color;\n  } else if (tool === 'eraserTool') {\n    ctx.fillStyle = 'rgba(0, 0, 0, 1)';\n    ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\n  }\n\n  // calc pen size according to chosen canvas width\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n  // calc position and size of canvas rectangles according to pen size\n  const mouseMoveX = Math.floor(x / canvasSize) * canvasSize;\n  const mouseMoveY = Math.floor(y / canvasSize) * canvasSize;\n  if (mouseDownX > endX || mouseDownY > endY) {\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  } else if (mouseDownX + canvasSize < endX || mouseDownY + canvasSize < endY) {\n    ctx.fillRect(mouseMoveX, mouseMoveY, canvasSize, canvasSize);\n  }\n}\n\n// drawing on mouse click\nexport function startDraw(e, currentCanvas, tool, customWidth, color) {\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n  const drawCanv = document.querySelector('#drawCanvas');\n  const rect = drawCanv.getBoundingClientRect();\n  const x = Math.round(e.clientX - rect.left);\n  const y = Math.round(e.clientY - rect.top);\n  mouseDownX = Math.floor(x / canvasSize) * canvasSize;\n  mouseDownY = Math.floor(y / canvasSize) * canvasSize;\n  if (tool === 'penTool' || tool === 'eraserTool') {\n    const ctx = $(`#canvas${currentCanvas}`)\n      .get(0)\n      .getContext('2d');\n    if (tool === 'penTool') {\n      ctx.globalCompositeOperation = 'source-over';\n      ctx.fillStyle = color;\n      ctx.strokeStyle = color;\n    } else if (tool === 'eraserTool') {\n      ctx.fillStyle = 'rgba(0, 0, 0, 1)';\n      ctx.strokeStyle = 'rgba(0, 0, 0, 1)';\n      ctx.globalCompositeOperation = 'destination-out';\n    }\n    ctx.fillRect(mouseDownX, mouseDownY, canvasSize, canvasSize);\n  }\n}\n\nlet startX;\nlet startY;\nlet lastX;\nlet lastY;\nlet radius;\n\nexport function endStroke(e, currentCanvas, tool, customWidth, color) {\n  const drawCanv = document.querySelector('#drawCanvas');\n  const rect = drawCanv.getBoundingClientRect();\n  const x = Math.floor(e.clientX - rect.left);\n  const y = Math.floor(e.clientY - rect.top);\n  const canvasSize = Math.ceil($(`#canvas${currentCanvas}`).width() / customWidth);\n  const drawCtx = $('#drawCanvas')\n    .get(0)\n    .getContext('2d');\n  const width = $('#drawCanvas').width();\n\n  lastX = x;\n  lastY = y;\n  drawCtx.clearRect(0, 0, width, width);\n  drawCtx.globalCompositeOperation = 'source-over';\n  drawCtx.strokeStyle = color;\n  drawCtx.lineWidth = canvasSize;\n  drawCtx.beginPath();\n  if (tool === 'strokeTool') {\n    drawCtx.moveTo(startX, startY);\n    drawCtx.lineTo(lastX, lastY);\n    drawCtx.stroke();\n  } else if (tool === 'rectangleTool') {\n    drawCtx.moveTo(startX, startY);\n    drawCtx.lineTo(lastX, startY);\n    drawCtx.lineTo(lastX, lastY);\n    drawCtx.lineTo(startX, lastY);\n    drawCtx.lineTo(startX, startY);\n    drawCtx.stroke();\n  } else if (tool === 'circleTool') {\n    radius =\n      Math.sqrt((startX - lastX) * (startX - lastX) + (startY - lastY) * (startY - lastY)) / 2;\n    drawCtx.arc(startX, startY, radius, 0, 2 * Math.PI);\n    drawCtx.stroke();\n  }\n  $('#drawCanvas').mouseup(() => {\n    const ctx = $(`#canvas${currentCanvas}`)\n      .get(0)\n      .getContext('2d');\n    ctx.globalCompositeOperation = 'source-over';\n    ctx.strokeStyle = color;\n    ctx.lineWidth = canvasSize;\n    ctx.beginPath();\n    if (tool === 'strokeTool') {\n      ctx.moveTo(startX, startY);\n      ctx.lineTo(lastX, lastY);\n      ctx.stroke();\n      drawCtx.clearRect(0, 0, width, width);\n    } else if (tool === 'rectangleTool') {\n      ctx.moveTo(startX, startY);\n      ctx.lineTo(lastX, startY);\n      ctx.lineTo(lastX, lastY);\n      ctx.lineTo(startX, lastY);\n      ctx.lineTo(startX, startY);\n      ctx.stroke();\n      drawCtx.clearRect(0, 0, width, width);\n    } else if (tool === 'circleTool') {\n      ctx.arc(startX, startY, radius, 0, 2 * Math.PI);\n      ctx.stroke();\n      drawCtx.clearRect(0, 0, width, width);\n    }\n    $('#drawCanvas').off('mouseup')\n  });\n}\n\nexport function startStroke(e, currentCanvas, tool, customWidth, color) {\n  const drawCanv = document.querySelector('#drawCanvas');\n  const rect = drawCanv.getBoundingClientRect();\n  const x = Math.floor(e.clientX - rect.left);\n  const y = Math.floor(e.clientY - rect.top);\n  startX = x;\n  startY = y;\n\n  $('#drawCanvas').mousemove(endStroke(e, currentCanvas, tool, customWidth, color));\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport $ from 'jquery';\nimport 'jquery-ui-sortable-npm';\nimport store from 'store/store';\nimport bg1 from 'assets/images/bg/bg1.png';\nimport { makeImage } from 'components/functions/preview';\nimport 'components/screens/frames/frames.css';\nimport { makeRandomId } from 'components/functions/random';\nimport * as canvas from 'components/functions/canvasManager';\n\nexport default class FramesWrapper extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      activeFrame: '',\n      hovered: ''\n    };\n  }\n\n  componentWillMount() {\n    if (this.props.framesArray.length < 1) {\n      const id = makeRandomId();\n      this.setState({ activeFrame: id });\n      store.dispatch({ type: 'framesArray', value: { id, frameSRC: '' } });\n      store.dispatch({ type: 'currentCanvas', value: id });\n    } else {\n      this.setState({ activeFrame: this.props.framesArray[0].id });\n      store.dispatch({ type: 'currentCanvas', value: this.props.framesArray[0].id });\n    }\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.updateImagePreview()\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    store.dispatch({ type: 'framesArray', value: null });\n  }\n\n  onMouseEnterHandler(id) {\n    this.setState({ hovered: id });\n  }\n\n  onMouseLeaveHandler() {\n    this.setState({ hovered: '' });\n  }\n\n  updateImagePreview() {\n    this.props.framesArray.map(item => makeImage(item.id));\n  }\n\n  openCanvasHandler(frame) {\n    this.setState({ activeFrame: frame });\n    store.dispatch({ type: 'currentCanvas', value: frame });\n    setTimeout(() => {\n      this.updateImagePreview();\n    }, 200);\n  }\n\n  copyFrameHandler(frameID) {\n    const newFrameID = makeRandomId();\n    const obj = {\n      copy: frameID,\n      stateObj: { id: newFrameID, frameSRC: '' }\n    }\n    store.dispatch({ type: 'framesArray', value: obj });\n\n    setTimeout(() => {\n      canvas.copyCanvas(frameID, newFrameID);\n      this.openCanvasHandler(newFrameID);\n    }, 200);\n  }\n\n  addNewFrameHandler() {\n    const newFrameID = makeRandomId();\n    this.setState({ activeFrame: newFrameID });\n    store.dispatch({ type: 'framesArray', value: { id: newFrameID, frameSRC: '' } });\n    setTimeout(() => {\n      this.openCanvasHandler(newFrameID);\n    }, 200);\n  }\n\n  removeFrameHandler(id) {\n    store.dispatch({ type: 'framesArray', value: { delete: id } });\n    setTimeout(() => {\n      this.openCanvasHandler($('.frame-list').children().last()[0].id.split('frame')[1]);\n    }, 200);\n  }\n\n  dragFrameOnClick() {\n    $('#sortable').sortable();\n    $('#sortable').sortable('option', 'disabled', false);\n    $('#sortable').disableSelection();\n  }\n\n  dragOffOnClick(id, draggedFrom) {\n    $('#sortable').sortable('option', 'disabled', true);\n    Array.from($('#sortable').children()).forEach((item, i) => {\n      if (item.id === `frame${id}`) {\n        store.dispatch({ type: 'framesArray', value: { drag: draggedFrom, target: i, draggedFrame: id } });\n      }\n    })\n    setTimeout(() => {\n      this.openCanvasHandler(id);\n    }, 200);\n  }\n\n  render() {\n    return (\n      <div className=\"frame-box\"\n      >\n        <ul\n          id=\"sortable\"\n          className=\"frame-list\"\n        >\n          {this.props.framesArray.map((item, i) => (\n            <li\n              key={`frame-list-item-${item.id}`}\n              className={`ui-state-default frame ${this.state.activeFrame === item.id ? 'activeFrame' : ''}`}\n              id={`frame${item.id}`}\n              style={{ background: this.props.bg || `url(${bg1})` }}\n              onMouseEnter={() => this.onMouseEnterHandler(item.id)}\n              onMouseLeave={() => this.onMouseLeaveHandler()}\n              onClick={() => this.openCanvasHandler(item.id)}\n            >\n              <img\n                id={`preview-box${item.id}`}\n                className=\"preview-box\"\n                src={item.frameSRC}\n                alt=\"\"\n              />\n              <title className=\"number\">{i + 1}</title>\n              <span\n                className={\n                  `removeFrame ${\n                  (this.props.framesArray.length !== 1 && this.state.hovered === item.id)\n                    || (this.state.hovered === item.id && this.props.framesArray[0].id !== item.id)\n                    ? '' : 'minorZ'}`}\n                onClick={() => this.removeFrameHandler(item.id)}>\n                <i className=\"fas fa-trash-alt\" />\n              </span>\n              <span\n                id={item.id}\n                className={\n                  `dragFrame ${\n                  (this.props.framesArray.length !== 1 && this.state.hovered === item.id)\n                    || (this.state.hovered === item.id && this.props.framesArray[0].id !== item.id)\n                    ? '' : 'minorZ'}`}\n                onMouseDown={() => this.dragFrameOnClick()}\n                onMouseUp={() => this.dragOffOnClick(item.id, i)}\n              >\n                <i className=\"fas fa-arrows-alt\" />\n              </span>\n              <span\n                className={`copyFrame ${this.state.hovered === item.id ? '' : 'minorZ'}`}\n                onClick={() => this.copyFrameHandler(item.id)}>\n                <i className=\"fas fa-copy\" />\n              </span>\n            </li>\n          ))}\n        </ul>\n        <button\n          className=\"addNewFrame\"\n          onClick={() => this.addNewFrameHandler()}\n          type=\"button\"\n        >\n          Add new frame\n        </button>\n      </div>\n    );\n  }\n}\n\nFramesWrapper.propTypes = {\n  framesArray: PropTypes.array.isRequired,\n  bg: PropTypes.string.isRequired\n};\n","import $ from 'jquery';\n\n// copy target frame's canvas with content if the frame was cloned\nexport function copyCanvas(oldID, newID) {\n  const originalContext = $(`#canvas${oldID}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(\n    0,\n    0,\n    $(`#canvas${oldID}`).width(),\n    $(`#canvas${oldID}`).width()\n  );\n  const cloneContext = $(`#canvas${newID}`).get(0).getContext('2d');\n  cloneContext.putImageData(imageData, 0, 0);\n}\n\nexport function copyCanvasContext(n) {\n  const originalContext = $(`#canvas${n}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(\n    0,\n    0,\n    $(`#canvas${n}`).width(),\n    $(`#canvas${n}`).width()\n  );\n  return imageData;\n}\n\nexport function putImage(n, imageData) {\n  const cloneContext = $(`#canvas${n}`)\n    .get(0)\n    .getContext('2d');\n  cloneContext.putImageData(imageData, 0, 0);\n}\n","import { hexToRGB } from 'components/functions/colors';\n\nfunction getColorAtPixel(imageData, x, y) {\n  const { width, data } = imageData;\n\n  return {\n    r: data[4 * (width * y + x) + 0],\n    g: data[4 * (width * y + x) + 1],\n    b: data[4 * (width * y + x) + 2],\n    a: data[4 * (width * y + x) + 3]\n  };\n}\n\nfunction setColorAtPixel(imageData, color, x, y) {\n  const { width, data } = imageData;\n\n  data[4 * (width * y + x) + 0] = color.r;\n  data[4 * (width * y + x) + 1] = color.g;\n  data[4 * (width * y + x) + 2] = color.b;\n  data[4 * (width * y + x) + 3] = color.a;\n}\n\nfunction colorMatch(a, b) {\n  return a.r === b.r && a.g === b.g && a.b === b.b && a.a === b.a;\n}\n\nfunction floodFill(imageData, newColor, x, y) {\n  const { width, height } = imageData;\n  const stack = [];\n  const baseColor = getColorAtPixel(imageData, x, y);\n  let clicked = { x, y };\n\n  // Check if base color and new color are the same\n  if (colorMatch(baseColor, newColor)) {\n    return;\n  }\n\n  // Add the clicked location to stack\n  stack.push({ x: clicked.x, y: clicked.y });\n\n  while (stack.length) {\n    clicked = stack.pop();\n    let goDown = true; // Vertical is assumed to be true\n    let goUp = true; // Vertical is assumed to be true\n    let goLeft = false;\n    let goRight = false;\n\n    // Move to top most goDown pixel\n    while (goUp && clicked.y >= 0) {\n      clicked.y -= 1;\n      goUp = colorMatch(getColorAtPixel(imageData, clicked.x, clicked.y), baseColor);\n    }\n\n    // Move downward\n    while (goDown && clicked.y < height) {\n      setColorAtPixel(imageData, newColor, clicked.x, clicked.y);\n\n      // Check left\n      if (\n        clicked.x - 1 >= 0 &&\n        colorMatch(getColorAtPixel(imageData, clicked.x - 1, clicked.y), baseColor)\n      ) {\n        if (!goLeft) {\n          goLeft = true;\n          stack.push({ x: clicked.x - 1, y: clicked.y });\n        }\n      } else {\n        goLeft = false;\n      }\n\n      // Check right\n      if (\n        clicked.x + 1 < width &&\n        colorMatch(getColorAtPixel(imageData, clicked.x + 1, clicked.y), baseColor)\n      ) {\n        if (!goRight) {\n          stack.push({ x: clicked.x + 1, y: clicked.y });\n          goRight = true;\n        }\n      } else {\n        goRight = false;\n      }\n\n      clicked.y += 1;\n      goDown = colorMatch(getColorAtPixel(imageData, clicked.x, clicked.y), baseColor);\n    }\n  }\n}\n\nexport default function paintIt(e, num, color) {\n  const curCanv = document.querySelector(`#canvas${num}`);\n  const ctx = curCanv.getContext('2d');\n  const rgbColor = hexToRGB(color);\n  const col = { r: rgbColor.r, g: rgbColor.g, b: rgbColor.b, a: 255 };\n  ctx.fillStyle = color;\n  ctx.strokeStyle = color;\n  const rect = curCanv.getBoundingClientRect();\n  const x = Math.round(e.clientX - rect.left);\n  const y = Math.round(e.clientY - rect.top);\n  const imageData = ctx.getImageData(0, 0, curCanv.width, curCanv.height);\n  floodFill(imageData, col, x, y);\n  ctx.putImageData(imageData, 0, 0);\n}\n","export function rgbaToHex(r, g, b) {\n  let hexR = r.toString(16);\n  let hexG = g.toString(16);\n  let hexB = b.toString(16);\n  if (hexR.length < 2) {\n    hexR = `0${hexR}`;\n  }\n  if (hexG.length < 2) {\n    hexG = `0${hexG}`;\n  }\n  if (hexB.length < 2) {\n    hexB = `0${hexB}`;\n  }\n  return `#${hexR}${hexG}${hexB}`;\n}\n\nexport function rgbToHex(color) {\n  const hex = `${color}`;\n\n  const nums = /(.*?)rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/i.exec(hex);\n  const r = parseInt(nums[2], 10).toString(16);\n  const g = parseInt(nums[3], 10).toString(16);\n  const b = parseInt(nums[4], 10).toString(16);\n\n  return `#${r.length === 1 ? `0${r}` : r}${g.length === 1 ? `0${g}` : g}${\n    b.length === 1 ? `0${b}` : b\n    }`;\n}\n\nexport function hexToRGB(hexColor) {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hexColor);\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null;\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport $ from 'jquery';\nimport store from 'store/store';\nimport 'components/screens/canvas/canvasDomBuilder.css';\nimport bg1 from 'assets/images/bg/bg1.png';\nimport { createCursorShadow, clearCanvas, endCursorMove } from 'components/functions/toolsFunctions/cursorShadow';\nimport { startDraw, endDraw, startStroke, endStroke } from 'components/functions/toolsFunctions/drawing';\nimport { makeImage } from 'components/functions/preview';\nimport paintIt from 'components/functions/toolsFunctions/paint';\nimport { rgbaToHex } from 'components/functions/colors';\n\nexport default class CanvasWrapper extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      size: '',\n      draw: false,\n      lines: false\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    const canvasWidth =\n      window.innerWidth - 500 < window.innerHeight - 155\n        ? window.innerWidth - 500\n        : window.innerHeight - 155;\n    this.setState({ size: canvasWidth > 350 ? canvasWidth : 350 });\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  mouseDownHandler(e) {\n    const tool = this.props.toolState.currentTool;\n    const curCanvas = this.props.currentCanvas;\n    const customWidth = this.props.settings.customWidth;\n    const color = this.props.toolState.currentColor;\n    if (tool === 'penTool' || tool === 'eraserTool') {\n      this.setState({ draw: true });\n      clearCanvas();\n      startDraw(e, curCanvas, tool, customWidth, color);\n      store.dispatch({ type: 'palette', value: color });\n    } else if (tool === 'strokeTool' || tool === 'rectangleTool' || tool === 'circleTool') {\n      this.setState({ lines: true });\n      clearCanvas();\n      startStroke(e, curCanvas, tool, customWidth, color);\n      store.dispatch({ type: 'palette', value: color });\n    } else if (tool === 'colorPickerTool') {\n      if ($(e.target).is('.canvas')) {\n        const curCanv = document.querySelector(`#canvas${curCanvas}`);\n        const rect = curCanv.getBoundingClientRect();\n        const x = Math.round(e.clientX - rect.left);\n        const y = Math.round(e.clientY - rect.top);\n        const ctx = curCanv.getContext('2d').getImageData(x, y, 1, 1).data;\n        if (ctx[3] > 0) {\n          const hexColor = rgbaToHex(ctx[0], ctx[1], ctx[2]);\n          store.dispatch({ type: 'toolState', value: ['currentColor', hexColor] });\n          store.dispatch({ type: 'palette', value: hexColor });\n        }\n      }\n    }\n  }\n\n  mouseMoveHandler(e) {\n    const tool = this.props.toolState.currentTool;\n    const curCanvas = this.props.currentCanvas;\n    const customWidth = this.props.settings.customWidth;\n    const color = this.props.toolState.currentColor;\n    if (tool) {\n      if (this.state.draw === true) {\n        endDraw(e, curCanvas, tool, customWidth, color);\n      } else {\n        endCursorMove(e);\n      }\n      if (this.state.lines === true) {\n        endStroke(e, curCanvas, tool, customWidth, color);\n      }\n    }\n  }\n\n  mouseUpHandler() {\n    const tool = this.props.toolState.currentTool;\n    const curCanvas = this.props.currentCanvas;\n    this.setState({ draw: false, lines: false });\n    if (!tool) {\n      return;\n    }\n    clearCanvas();\n    setTimeout(() => {\n      makeImage(curCanvas);\n    }, 500);\n  }\n\n  render() {\n    return (\n      <div className=\"canvas-wrapper\">\n        <div id=\"canvas-block\" className=\"canvas-block\">\n          {this.props.framesArray.length >= 1 ? this.props.framesArray.map((item, i) => {\n            return (\n              <canvas\n                key={item.id}\n                id={`canvas${item.id}`}\n                className={`canvas ${this.props.currentCanvas === item.id ? '' : 'hidden'}`}\n                style={{ background: this.props.settings.currentBG || `url(${bg1}) repeat` }}\n                width={this.state.size}\n                height={this.state.size}\n                onClick={e => this.mouseDownHandler(e)}\n              />\n            )\n          }) :\n            (\n              <canvas\n                id={this.props.currentCanvas}\n                className='canvas'\n                style={{ background: `url(${bg1}) repeat` }}\n                width={this.state.size}\n                height={this.state.size}\n                onClick={e => this.mouseDownHandler(e)}\n              />\n            )\n          }\n        </div>\n        <canvas\n          id=\"drawCanvas\"\n          className=\"drawCanvas\"\n          onMouseOver={e => {\n            if (this.props.toolState.currentTool) {\n              if (this.state.draw === false) {\n                createCursorShadow(e);\n              }\n            }\n          }}\n          onClick={e => {\n            if (this.props.toolState.currentTool === 'paintBucketTool') {\n              const curColor = this.props.toolState.currentColor;\n              paintIt(e, this.props.currentCanvas, curColor);\n              store.dispatch({ type: 'palette', value: curColor });\n            }\n          }}\n          onMouseDown={e => this.mouseDownHandler(e)}\n          onMouseMove={e => this.mouseMoveHandler(e)}\n          onMouseLeave={() => {\n            if (this.state.draw === false) {\n              clearCanvas();\n            }\n          }}\n          onMouseUp={e => this.mouseUpHandler(e)}\n          onFocus={() => undefined}\n          width={this.state.size}\n          height={this.state.size}\n        />\n      </div>\n    );\n  }\n}\n\nCanvasWrapper.propTypes = {\n  toolState: PropTypes.object.isRequired,\n  currentCanvas: PropTypes.string.isRequired,\n  settings: PropTypes.object.isRequired,\n  framesArray: PropTypes.array.isRequired\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport 'components/screens/preview/preview.css';\nimport { fullSizePreview } from 'components/functions/preview';\n\nexport default class PreviewBlock extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: ''\n    };\n  }\n\n  hoverIn() {\n    if (this.mounted) {\n      this.setState({ active: true });\n    }\n  }\n\n  hoverOut() {\n    if (this.mounted) {\n      this.setState({ active: false });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        id=\"preview-area\"\n        className=\"preview-area\"\n        onMouseEnter={() => this.hoverIn()}\n        onMouseLeave={() => this.hoverOut()}\n      >\n        <div className=\"preview\">\n          {this.props.framesArray.map(item => (\n            <img\n              key={`image${item.id}`}\n              id={`imagePreview${item.id}`}\n              src={item.frameSRC}\n              style={{ width: '100%' }}\n              alt=\"\"\n            />\n          ))}\n        </div>\n        <div\n          className={`preview-open ${this.state.active ? '' : 'hidden'}`}\n          id=\"preview-open\"\n          role=\"button\"\n          tabIndex=\"-1\"\n          onKeyPress={undefined}\n          onClick={fullSizePreview}\n        >\n          <i className=\"fas fa-external-link-alt\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nPreviewBlock.propTypes = {\n  framesArray: PropTypes.array.isRequired\n};","import React from 'react';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\nimport 'components/menuComponents/layers-list/layers-list.css';\r\n\r\nclass Layers extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      hovered: '',\r\n      mouseEnter: false\r\n    };\r\n  }\r\n\r\n  popHintOnMouseOver(e) {\r\n    const hovered = e.target.getAttribute('id');\r\n    if (this.state.hovered === hovered) {\r\n      this.setState({ hovered: '' });\r\n    } else {\r\n      this.setState({ hovered });\r\n    }\r\n  }\r\n\r\n  mouseIn() {\r\n    this.setState({ mouseEnter: true });\r\n  }\r\n\r\n  mouseOut() {\r\n    this.setState({ mouseEnter: false });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"layers-box\"\r\n        onMouseOver={e => this.popHintOnMouseOver(e)}\r\n        onFocus={() => undefined}\r\n      >\r\n        <div className=\"layer-outlet\">\r\n          <span className=\"layer-title\">Layers</span>\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button layer-preview\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-eye\"\r\n            active={null}\r\n            title=\"Preview all layers\"\r\n            placement=\"top-end\"\r\n          />\r\n        </div>\r\n        <div className=\"layer-buttons-box\">\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-plus\"\r\n            active={null}\r\n            title=\"Create a layer\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-arrow-up\"\r\n            active={null}\r\n            title=\"Move layer up\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-arrow-down\"\r\n            active={null}\r\n            title=\"Move layer down\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-pen\"\r\n            active={null}\r\n            title=\"Edit layer name\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-compress\"\r\n            active={null}\r\n            title=\"Merge with layer below\"\r\n            placement=\"top-end\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"layer-button\"\r\n            onClickHandler={() => undefined}\r\n            iconClass=\"fas fa-times\"\r\n            active={null}\r\n            title=\"Delete selected layer\"\r\n            placement=\"top-end\"\r\n          />\r\n        </div>\r\n        <ul className=\"layer-list\">\r\n          <li className=\"layer-item\">Layer 1</li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Layers;\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class SampleButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <button\n        type=\"button\"\n        style={{ background: this.props.color }}\n        className={`palette-sample ${\n          this.props.state === this.props.color ? 'active-palette-sample' : ''\n          }`}\n        onClick={this.props.onClickHandler}\n      />\n    );\n  }\n}\n\nSampleButton.propTypes = {\n  color: PropTypes.string.isRequired,\n  state: PropTypes.string.isRequired,\n  onClickHandler: PropTypes.func.isRequired\n};\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\nimport SampleButton from 'components/buttons/paletteSampleButton';\r\nimport 'components/menuComponents/palettes/palettes.css';\r\nimport store from 'store/store';\r\nimport { rgbToHex } from 'components/functions/colors';\r\n\r\nclass Palettes extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      hovered: '',\r\n      mouseEnter: false,\r\n      color: [],\r\n      changed: false\r\n    };\r\n  }\r\n\r\n  addPalettesOnClick() { }\r\n\r\n  editPalettesOnClick() { }\r\n\r\n  choosePalettesOnClick() { }\r\n\r\n  changeCurColor(e) {\r\n    const color = $(e.target).css('background-color');\r\n    const hexColor = rgbToHex(color)\r\n    store.dispatch({ type: 'toolState', value: ['currentColor', hexColor] });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"palettes-box\">\r\n        <div className=\"palettes-outlet\">\r\n          <span className=\"palettes-title\">Palettes</span>\r\n        </div>\r\n        <div className=\"palettes-buttons-box\">\r\n          <AwesomeButton\r\n            buttonClass=\"palettes-button\"\r\n            onClickHandler={() => this.addPalettesOnClick()}\r\n            iconClass=\"fas fa-plus\"\r\n            active={null}\r\n            title=\"Create a new palette\"\r\n            placement=\"top-end\"\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            id=\"palettes-dropdown-list\"\r\n            className=\"palettes-button colors-list\"\r\n            onMouseEnter={() => this.setState({ hovered: true })}\r\n            onMouseLeave={() => this.setState({ hovered: false })}\r\n            onClick={() => this.choosePalettesOnClick()}\r\n          >\r\n            Current colors\r\n            <i\r\n              className={`colors-list-arrow fas fa-sort-down ${\r\n                this.state.hovered ? 'colors-list-arrow-hovered' : ''\r\n                }`}\r\n            />\r\n          </button>\r\n          <AwesomeButton\r\n            buttonClass=\"palettes-button\"\r\n            onClickHandler={() => this.editPalettesOnClick()}\r\n            iconClass=\"fas fa-pen\"\r\n            active={null}\r\n            title=\"Palette options\"\r\n            placement=\"top-end\"\r\n          />\r\n        </div>\r\n        <ul className=\"palettes-list\">\r\n          <span className={`palette-colors-isempty ${this.props.colorSamples.length > 0 ? 'hidden' : ''}`}>\r\n            No colors in this palette yet\r\n          </span>\r\n          {this.props.colorSamples.map(item => (\r\n            <li key={item} id={item} className=\"palette-sample-list\">\r\n              <SampleButton\r\n                color={item}\r\n                state={this.props.toolState.currentColor}\r\n                onClickHandler={e => this.changeCurColor(e)}\r\n              />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPalettes.propTypes = {\r\n  colorSamples: PropTypes.array.isRequired,\r\n  toolState: PropTypes.object.isRequired\r\n}\r\n\r\nexport default Palettes;\r\n","import React from 'react';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/settings/settings.css';\r\nimport PropTypes from 'prop-types';\r\nimport store from 'store/store';\r\n\r\nexport default class Settings extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      active: 'bg1'\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  addActiveOnClick(e) {\r\n    const clicked = e.target.getAttribute('id');\r\n    const bg = $(e.target).css('background-image');\r\n    this.setState({ active: clicked });\r\n    store.dispatch({ type: 'settings', value: ['currentBG', bg] });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`general-settings-block ${this.props.active === 'settings' ? 'flexed' : 'hidden'}`}\r\n      >\r\n        <div className=\"current-bg\">\r\n          <span className=\"default-bg bold\">Background</span>\r\n          <div className=\"general-settings-buttons-area\">\r\n            {['bg1', 'bg2', 'bg3', 'bg4'].map(item => (\r\n              <button\r\n                key={item}\r\n                type=\"button\"\r\n                id={item}\r\n                onClick={e => this.addActiveOnClick(e)}\r\n                className={`general-settings-button ${item} ${\r\n                  this.state.active === item ? 'active-button' : 'not-active-button'\r\n                  }`}\r\n              />\r\n            ))}\r\n          </div>\r\n          <p>Set default background</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSettings.propTypes = {\r\n  active: PropTypes.string.isRequired\r\n}\r\n","import React from 'react';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/resize/resize.css';\r\nimport store from 'store/store';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class ResizeCanvas extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      customWidth: 33,\r\n      maxWidth: '',\r\n      newWidth: '',\r\n      error: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ maxWidth: $('#drawCanvas').width() });\r\n  }\r\n\r\n  resizeCanvasOnClickHandler() {\r\n    const newWidth = this.state.newWidth;\r\n    if (newWidth > 0 && newWidth < this.state.maxWidth) {\r\n      this.setState({ customWidth: newWidth });\r\n      store.dispatch({ type: 'settings', value: ['customWidth', newWidth] });\r\n    } else {\r\n      this.setState({ error: true });\r\n    }\r\n    $('#resize-input').val('');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`resize-canvas-block ${\r\n          this.props.active === 'resize-settings' ? 'flexed' : 'hidden'\r\n          }`}\r\n      >\r\n        <div className=\"current-size\">\r\n          <span className=\"default-size bold\">current size</span>\r\n          <p>\r\n            {`Width `}\r\n            <span className=\"default-width bold\" id=\"current-width\">\r\n              {this.state.customWidth}\r\n            </span>\r\n            px\r\n          </p>\r\n          <p>\r\n            Height\r\n            <span className=\"default-width bold\" id=\"current-height\">\r\n              {this.state.customWidth}\r\n            </span>\r\n            px\r\n          </p>\r\n        </div>\r\n        <div className=\"resize-canvas\">\r\n          <span className=\"resize bold\">resize</span>\r\n          <p className=\"new-width-block\">\r\n            <span>1 - </span>\r\n            <span id=\"new-width\" className=\"canvas-width\">\r\n              {this.state.maxWidth}\r\n            </span>\r\n            <span>px</span>\r\n            <input\r\n              type=\"number\"\r\n              className=\"resize-input\"\r\n              id=\"resize-input\"\r\n              min=\"1\"\r\n              onKeyPress={e => {\r\n                if (e.key === 'Enter') {\r\n                  this.resizeCanvasOnClickHandler(e);\r\n                }\r\n              }}\r\n              onChange={e => this.setState({ newWidth: e.target.value })}\r\n            />\r\n          </p>\r\n          <p id=\"error-message\" className={`error-message ${this.state.error ? '' : 'hidden'}`}>\r\n            {`Size can be from 1 to ${this.state.maxWidth} px`}\r\n          </p>\r\n          <button\r\n            id=\"resize-button\"\r\n            className=\"resize-button\"\r\n            type=\"button\"\r\n            onClick={() => this.resizeCanvasOnClickHandler()}\r\n          >\r\n            Change canvas size\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nResizeCanvas.propTypes = {\r\n  active: PropTypes.string.isRequired,\r\n  currentCanvas: PropTypes.string.isRequired\r\n}\r\n","import * as firebase from 'firebase';\n\nconst config = {\n  apiKey: 'AIzaSyB7L9YDQre3TEMDbonPKJh9oiT0LB8MPME',\n  authDomain: 'piskel-clone-1561243542927.firebaseapp.com',\n  databaseURL: 'https://piskel-clone-1561243542927.firebaseio.com',\n  projectId: 'piskel-clone-1561243542927',\n  storageBucket: '',\n  messagingSenderId: '842905832916',\n  appId: '1:842905832916:web:bd7859a38165e1b7'\n};\n\nfirebase.initializeApp(config);\n\nexport default firebase;\n","import firebase from '../../firebase/firebase';\nimport store from 'store/store';\n\nexport function writeUserData(userId, project, frames, gif, date, time, title, description, fps) {\n  firebase\n    .database()\n    .ref(`users/${userId}/${project}`)\n    .set({\n      frames,\n      gif,\n      date,\n      time,\n      title,\n      description,\n      fps\n    });\n}\n\nexport function deleteFromDB(DBitem) {\n  firebase\n    .database()\n    .ref(DBitem)\n    .set(null);\n}\n\nexport function getDBdata(DBitem) {\n  let projects = {};\n  projects[DBitem] = {}\n  firebase\n    .database()\n    .ref(`/users/${DBitem}`)\n    .once('value')\n    .then(snapshot => {\n      projects[DBitem] = snapshot.val();\n      store.dispatch({ type: 'allProjects', value: projects });\n    });\n}\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable func-names */\n/* eslint-disable no-bitwise */\n/* eslint-disable prefer-rest-params */\n/* eslint-disable no-empty */\n/* eslint-disable no-var */\n/* eslint-disable no-use-before-define */\n/* eslint-disable no-lonely-if */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-shadow */\n/* eslint-disable prefer-const */\n/*\n * NeuQuant Neural-Net Quantization Algorithm\n * ------------------------------------------\n *\n * Copyright (c) 1994 Anthony Dekker\n *\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\n * the algorithm.\n *\n * Any party obtaining a copy of these files from the author, directly or\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\n * this software and documentation files (the \"Software\"), including without\n * limitation the rights to use, copy, modify, merge, publish, distribute,\n * sublicense, and/or sell copies of the Software, and to permit persons who\n * receive copies from any such party to do so, with the only requirement being\n * that this copyright notice remain intact.\n */\n\n/*\n * This class handles Neural-Net quantization algorithm\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\n\nconst NeuQuant = function () {\n  let exports = {};\n  let netsize = 256; /* number of colours used */\n\n  /* four primes near 500 - assume no image has a length so large */\n  /* that it is divisible by all four primes */\n\n  let prime1 = 499;\n  let prime2 = 491;\n  let prime3 = 487;\n  let prime4 = 503;\n  let minpicturebytes = 3 * prime4; /* minimum size for input image */\n\n  /*\n   * Program Skeleton ---------------- [select samplefac in range 1..30] [read\n   * image from input file] pic = (unsigned char*) malloc(3*width*height);\n   * initnet(pic,3*width*height,samplefac); learn(); unbiasnet(); [write output\n   * image header, using writecolourmap(f)] inxbuild(); write output image using\n   * inxsearch(b,g,r)\n   */\n\n  /*\n   * Network Definitions -------------------\n   */\n\n  let maxnetpos = netsize - 1;\n  let netbiasshift = 4; /* bias for colour values */\n  let ncycles = 100; /* no. of learning cycles */\n\n  /* defs for freq and bias */\n  let intbiasshift = 16; /* bias for fractions */\n  let intbias = 1 << intbiasshift;\n  let gammashift = 10; /* gamma = 1024 */\n  let gamma = 1 << gammashift;\n  let betashift = 10;\n  let beta = intbias >> betashift; /* beta = 1/1024 */\n  let betagamma = intbias << (gammashift - betashift);\n\n  /* defs for decreasing radius factor */\n  let initrad = netsize >> 3; /* for 256 cols, radius starts */\n  let radiusbiasshift = 6; /* at 32.0 biased by 6 bits */\n  let radiusbias = 1 << radiusbiasshift;\n  let initradius = initrad * radiusbias; /* and decreases by a */\n  let radiusdec = 30; /* factor of 1/30 each cycle */\n\n  /* defs for decreasing alpha factor */\n  let alphabiasshift = 10; /* alpha starts at 1.0 */\n  let initalpha = 1 << alphabiasshift;\n  let alphadec; /* biased by 10 bits */\n\n  /* radbias and alpharadbias used for radpower calculation */\n  let radbiasshift = 8;\n  let radbias = 1 << radbiasshift;\n  let alpharadbshift = alphabiasshift + radbiasshift;\n  let alpharadbias = 1 << alpharadbshift;\n\n  /*\n   * Types and Global Variables --------------------------\n   */\n\n  let thepicture; /* the input image itself */\n  let lengthcount; /* lengthcount = H*W*3 */\n  let samplefac; /* sampling factor 1..30 */\n\n  // typedef int pixel[4]; /* BGRc */\n  let network; /* the network itself - [netsize][4] */\n  let netindex = [];\n\n  /* for network lookup - really 256 */\n  let bias = [];\n\n  /* bias and freq arrays for learning */\n  let freq = [];\n  let radpower = [];\n\n  let NeuQuant = (exports.NeuQuant = function NeuQuant(thepic, len, sample) {\n    let i;\n    let p;\n\n    thepicture = thepic;\n    lengthcount = len;\n    samplefac = sample;\n\n    network = new Array(netsize);\n\n    for (i = 0; i < netsize; i++) {\n      network[i] = new Array(4);\n      p = network[i];\n      p[0] = p[1] = p[2] = (i << (netbiasshift + 8)) / netsize;\n      freq[i] = intbias / netsize; /* 1/netsize */\n      bias[i] = 0;\n    }\n  });\n\n  let colorMap = function colorMap() {\n    let map = [];\n    let index = new Array(netsize);\n\n    for (let i = 0; i < netsize; i++) index[network[i][3]] = i;\n\n    let k = 0;\n    for (let l = 0; l < netsize; l++) {\n      let j = index[l];\n      map[k++] = network[j][0];\n      map[k++] = network[j][1];\n      map[k++] = network[j][2];\n    }\n\n    return map;\n  };\n\n  /*\n   * Insertion sort of network and building of netindex[0..255] (to do after\n   * unbias)\n   * -------------------------------------------------------------------------------\n   */\n\n  let inxbuild = function inxbuild() {\n    let i;\n    let j;\n    let smallpos;\n    let smallval;\n    let p;\n    let q;\n    let previouscol;\n    let startpos;\n\n    previouscol = 0;\n    startpos = 0;\n    for (i = 0; i < netsize; i++) {\n      p = network[i];\n      smallpos = i;\n      smallval = p[1]; /* index on g */\n\n      /* find smallest in i..netsize-1 */\n      for (j = i + 1; j < netsize; j++) {\n        q = network[j];\n        if (q[1] < smallval) {\n          /* index on g */\n          smallpos = j;\n          smallval = q[1]; /* index on g */\n        }\n      }\n      q = network[smallpos];\n\n      /* swap p (i) and q (smallpos) entries */\n      if (i != smallpos) {\n        j = q[0];\n        q[0] = p[0];\n        p[0] = j;\n        j = q[1];\n        q[1] = p[1];\n        p[1] = j;\n        j = q[2];\n        q[2] = p[2];\n        p[2] = j;\n        j = q[3];\n        q[3] = p[3];\n        p[3] = j;\n      }\n\n      /* smallval entry is now in position i */\n\n      if (smallval != previouscol) {\n        netindex[previouscol] = (startpos + i) >> 1;\n\n        for (j = previouscol + 1; j < smallval; j++) netindex[j] = i;\n\n        previouscol = smallval;\n        startpos = i;\n      }\n    }\n\n    netindex[previouscol] = (startpos + maxnetpos) >> 1;\n    for (j = previouscol + 1; j < 256; j++) netindex[j] = maxnetpos; /* really 256 */\n  };\n\n  /*\n   * Main Learning Loop ------------------\n   */\n\n  let learn = function learn() {\n    let i;\n    let j;\n    let b;\n    let g;\n    let r;\n    let radius;\n    let rad;\n    let alpha;\n    let step;\n    let delta;\n    let samplepixels;\n    let p;\n    let pix;\n    let lim;\n\n    if (lengthcount < minpicturebytes) samplefac = 1;\n\n    alphadec = 30 + (samplefac - 1) / 3;\n    p = thepicture;\n    pix = 0;\n    lim = lengthcount;\n    samplepixels = lengthcount / (3 * samplefac);\n    delta = (samplepixels / ncycles) | 0;\n    alpha = initalpha;\n    radius = initradius;\n\n    rad = radius >> radiusbiasshift;\n    if (rad <= 1) rad = 0;\n\n    for (i = 0; i < rad; i++) radpower[i] = alpha * (((rad * rad - i * i) * radbias) / (rad * rad));\n\n    if (lengthcount < minpicturebytes) step = 3;\n    else if (lengthcount % prime1 !== 0) step = 3 * prime1;\n    else {\n      if (lengthcount % prime2 !== 0) step = 3 * prime2;\n      else if ((lengthcount % prime3) !== 0) step = 3 * prime3;\n      else step = 3 * prime4;\n    }\n\n    i = 0;\n    while (i < samplepixels) {\n      b = (p[pix + 0] & 0xff) << netbiasshift;\n      g = (p[pix + 1] & 0xff) << netbiasshift;\n      r = (p[pix + 2] & 0xff) << netbiasshift;\n      j = contest(b, g, r);\n\n      altersingle(alpha, j, b, g, r);\n      if (rad !== 0) alterneigh(rad, j, b, g, r); /* alter neighbours */\n\n      pix += step;\n      if (pix >= lim) pix -= lengthcount;\n\n      i++;\n\n      if (delta === 0) delta = 1;\n\n      if (i % delta === 0) {\n        alpha -= alpha / alphadec;\n        radius -= radius / radiusdec;\n        rad = radius >> radiusbiasshift;\n\n        if (rad <= 1) rad = 0;\n\n        for (j = 0; j < rad; j++)\n          radpower[j] = alpha * (((rad * rad - j * j) * radbias) / (rad * rad));\n      }\n    }\n  };\n\n  /*\n   ** Search for BGR values 0..255 (after net is unbiased) and return colour\n   * index\n   * ----------------------------------------------------------------------------\n   */\n\n  let map = (exports.map = function map(b, g, r) {\n    let i;\n    let j;\n    let dist;\n    let a;\n    let bestd;\n    let p;\n    let best;\n\n    bestd = 1000; /* biggest possible dist is 256*3 */\n    best = -1;\n    i = netindex[g]; /* index on g */\n    j = i - 1; /* start at netindex[g] and work outwards */\n\n    while (i < netsize || j >= 0) {\n      if (i < netsize) {\n        p = network[i];\n        dist = p[1] - g; /* inx key */\n\n        if (dist >= bestd) i = netsize;\n        /* stop iter */ else {\n          i++;\n          if (dist < 0) dist = -dist;\n          a = p[0] - b;\n          if (a < 0) a = -a;\n          dist += a;\n\n          if (dist < bestd) {\n            a = p[2] - r;\n            if (a < 0) a = -a;\n            dist += a;\n\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n\n      if (j >= 0) {\n        p = network[j];\n        dist = g - p[1]; /* inx key - reverse dif */\n\n        if (dist >= bestd) j = -1;\n        /* stop iter */ else {\n          j--;\n          if (dist < 0) dist = -dist;\n          a = p[0] - b;\n          if (a < 0) a = -a;\n          dist += a;\n\n          if (dist < bestd) {\n            a = p[2] - r;\n            if (a < 0) a = -a;\n            dist += a;\n            if (dist < bestd) {\n              bestd = dist;\n              best = p[3];\n            }\n          }\n        }\n      }\n    }\n\n    return best;\n  });\n\n  let process = (exports.process = function process() {\n    learn();\n    unbiasnet();\n    inxbuild();\n    return colorMap();\n  });\n\n  /*\n   * Unbias network to give byte values 0..255 and record position i to prepare\n   * for sort\n   * -----------------------------------------------------------------------------------\n   */\n\n  var unbiasnet = function unbiasnet() {\n    let i;\n    let j;\n\n    for (i = 0; i < netsize; i++) {\n      network[i][0] >>= netbiasshift;\n      network[i][1] >>= netbiasshift;\n      network[i][2] >>= netbiasshift;\n      network[i][3] = i; /* record colour no */\n    }\n  };\n\n  /*\n   * Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2)) in\n   * radpower[|i-j|]\n   * ---------------------------------------------------------------------------------\n   */\n\n  var alterneigh = function alterneigh(rad, i, b, g, r) {\n    let j;\n    let k;\n    let lo;\n    let hi;\n    let a;\n    let m;\n    let p;\n\n    lo = i - rad;\n    if (lo < -1) lo = -1;\n\n    hi = i + rad;\n    if (hi > netsize) hi = netsize;\n\n    j = i + 1;\n    k = i - 1;\n    m = 1;\n\n    while (j < hi || k > lo) {\n      a = radpower[m++];\n\n      if (j < hi) {\n        p = network[j++];\n\n        try {\n          p[0] -= (a * (p[0] - b)) / alpharadbias;\n          p[1] -= (a * (p[1] - g)) / alpharadbias;\n          p[2] -= (a * (p[2] - r)) / alpharadbias;\n        } catch (e) { } // prevents 1.3 miscompilation\n      }\n\n      if (k > lo) {\n        p = network[k--];\n\n        try {\n          p[0] -= (a * (p[0] - b)) / alpharadbias;\n          p[1] -= (a * (p[1] - g)) / alpharadbias;\n          p[2] -= (a * (p[2] - r)) / alpharadbias;\n        } catch (e) { }\n      }\n    }\n  };\n\n  /*\n   * Move neuron i towards biased (b,g,r) by factor alpha\n   * ----------------------------------------------------\n   */\n\n  var altersingle = function altersingle(alpha, i, b, g, r) {\n    /* alter hit neuron */\n    let n = network[i];\n    n[0] -= (alpha * (n[0] - b)) / initalpha;\n    n[1] -= (alpha * (n[1] - g)) / initalpha;\n    n[2] -= (alpha * (n[2] - r)) / initalpha;\n  };\n\n  /*\n   * Search for biased BGR values ----------------------------\n   */\n\n  var contest = function contest(b, g, r) {\n    /* finds closest neuron (min dist) and updates freq */\n    /* finds best neuron (min dist-bias) and returns position */\n    /* for frequently chosen neurons, freq[i] is high and bias[i] is negative */\n    /* bias[i] = gamma*((1/netsize)-freq[i]) */\n\n    let i;\n    let dist;\n    let a;\n    let biasdist;\n    let betafreq;\n    let bestpos;\n    let bestbiaspos;\n    let bestd;\n    let bestbiasd;\n    let n;\n\n    bestd = ~(1 << 31);\n    bestbiasd = bestd;\n    bestpos = -1;\n    bestbiaspos = bestpos;\n\n    for (i = 0; i < netsize; i++) {\n      n = network[i];\n      dist = n[0] - b;\n      if (dist < 0) dist = -dist;\n      a = n[1] - g;\n      if (a < 0) a = -a;\n      dist += a;\n      a = n[2] - r;\n      if (a < 0) a = -a;\n      dist += a;\n\n      if (dist < bestd) {\n        bestd = dist;\n        bestpos = i;\n      }\n\n      biasdist = dist - (bias[i] >> (intbiasshift - netbiasshift));\n\n      if (biasdist < bestbiasd) {\n        bestbiasd = biasdist;\n        bestbiaspos = i;\n      }\n\n      betafreq = freq[i] >> betashift;\n      freq[i] -= betafreq;\n      bias[i] += betafreq << gammashift;\n    }\n\n    freq[bestpos] += beta;\n    bias[bestpos] -= betagamma;\n    return bestbiaspos;\n  };\n\n  NeuQuant.apply(this, arguments);\n  return exports;\n};\n\nexport { NeuQuant };\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-continue */\n/* eslint-disable no-unused-vars */\n/* eslint-disable prefer-rest-params */\n/* eslint-disable func-names */\n/* eslint-disable camelcase */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-shadow */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-labels */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-use-before-define */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-var */\n/* eslint-disable prefer-const */\n/**\n * This class handles LZW encoding\n * Adapted from Jef Poskanzer's Java port by way of J. M. G. Elliott.\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\n\nconst LZWEncoder = function() {\n  let exports = {};\n  let EOF = -1;\n  let imgW;\n  let imgH;\n  let pixAry;\n  let initCodeSize;\n  let remaining;\n  let curPixel;\n\n  // GIFCOMPR.C - GIF Image compression routines\n  // Lempel-Ziv compression based on 'compress'. GIF modifications by\n  // David Rowley (mgardi@watdcsu.waterloo.edu)\n  // General DEFINEs\n\n  let BITS = 12;\n  let HSIZE = 5003; // 80% occupancy\n\n  // GIF Image compression - modified 'compress'\n  // Based on: compress.c - File compression ala IEEE Computer, June 1984.\n  // By Authors: Spencer W. Thomas (decvax!harpo!utah-cs!utah-gr!thomas)\n  // Jim McKie (decvax!mcvax!jim)\n  // Steve Davies (decvax!vax135!petsd!peora!srd)\n  // Ken Turkowski (decvax!decwrl!turtlevax!ken)\n  // James A. Woods (decvax!ihnp4!ames!jaw)\n  // Joe Orost (decvax!vax135!petsd!joe)\n\n  let n_bits; // number of bits/code\n  let maxbits = BITS; // user settable max # bits/code\n  let maxcode; // maximum code, given n_bits\n  let maxmaxcode = 1 << BITS; // should NEVER generate this code\n  let htab = [];\n  let codetab = [];\n  let hsize = HSIZE; // for dynamic table sizing\n  let free_ent = 0; // first unused entry\n\n  // block compression parameters -- after all codes are used up,\n  // and compression rate changes, start over.\n\n  let clear_flg = false;\n\n  // Algorithm: use open addressing double hashing (no chaining) on the\n  // prefix code / next character combination. We do a variant of Knuth's\n  // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime\n  // secondary probe. Here, the modular division first probe is gives way\n  // to a faster exclusive-or manipulation. Also do block compression with\n  // an adaptive reset, whereby the code table is cleared when the compression\n  // ratio decreases, but after the table fills. The variable-length output\n  // codes are re-sized at this point, and a special CLEAR code is generated\n  // for the decompressor. Late addition: construct the table according to\n  // file size for noticeable speed improvement on small files. Please direct\n  // questions about this implementation to ames!jaw.\n\n  let g_init_bits;\n  let ClearCode;\n  let EOFCode;\n\n  // output\n  // Output the given code.\n  // Inputs:\n  // code: A n_bits-bit integer. If == -1, then EOF. This assumes\n  // that n_bits =< wordsize - 1.\n  // Outputs:\n  // Outputs code to the file.\n  // Assumptions:\n  // Chars are 8 bits long.\n  // Algorithm:\n  // Maintain a BITS character long buffer (so that 8 codes will\n  // fit in it exactly). Use the VAX insv instruction to insert each\n  // code in turn. When the buffer fills up empty it and start over.\n\n  let cur_accum = 0;\n  let cur_bits = 0;\n  let masks = [\n    0x0000,\n    0x0001,\n    0x0003,\n    0x0007,\n    0x000f,\n    0x001f,\n    0x003f,\n    0x007f,\n    0x00ff,\n    0x01ff,\n    0x03ff,\n    0x07ff,\n    0x0fff,\n    0x1fff,\n    0x3fff,\n    0x7fff,\n    0xffff\n  ];\n\n  // Number of characters so far in this 'packet'\n  let a_count;\n\n  // Define the storage for the packet accumulator\n  let accum = [];\n\n  let LZWEncoder = (exports.LZWEncoder = function LZWEncoder(width, height, pixels, color_depth) {\n    imgW = width;\n    imgH = height;\n    pixAry = pixels;\n    initCodeSize = Math.max(2, color_depth);\n  });\n\n  // Add a character to the end of the current packet, and if it is 254\n  // characters, flush the packet to disk.\n  let char_out = function char_out(c, outs) {\n    accum[a_count++] = c;\n    if (a_count >= 254) flush_char(outs);\n  };\n\n  // Clear out the hash table\n  // table clear for block compress\n\n  let cl_block = function cl_block(outs) {\n    cl_hash(hsize);\n    free_ent = ClearCode + 2;\n    clear_flg = true;\n    output(ClearCode, outs);\n  };\n\n  // reset code table\n  var cl_hash = function cl_hash(hsize) {\n    for (let i = 0; i < hsize; ++i) htab[i] = -1;\n  };\n\n  let compress = (exports.compress = function compress(init_bits, outs) {\n    let fcode;\n    let i; /* = 0 */\n    let c;\n    let ent;\n    let disp;\n    let hsize_reg;\n    let hshift;\n\n    // Set up the globals: g_init_bits - initial number of bits\n    g_init_bits = init_bits;\n\n    // Set up the necessary values\n    clear_flg = false;\n    n_bits = g_init_bits;\n    maxcode = MAXCODE(n_bits);\n\n    ClearCode = 1 << (init_bits - 1);\n    EOFCode = ClearCode + 1;\n    free_ent = ClearCode + 2;\n\n    a_count = 0; // clear packet\n\n    ent = nextPixel();\n\n    hshift = 0;\n    for (fcode = hsize; fcode < 65536; fcode *= 2) ++hshift;\n    hshift = 8 - hshift; // set hash code range bound\n\n    hsize_reg = hsize;\n    cl_hash(hsize_reg); // clear hash table\n\n    output(ClearCode, outs);\n\n    outer_loop: while ((c = nextPixel()) != EOF) {\n      fcode = (c << maxbits) + ent;\n      i = (c << hshift) ^ ent; // xor hashing\n\n      if (htab[i] == fcode) {\n        ent = codetab[i];\n        continue;\n      } else if (htab[i] >= 0) {\n        // non-empty slot\n\n        disp = hsize_reg - i; // secondary hash (after G. Knott)\n        if (i === 0) disp = 1;\n\n        do {\n          if ((i -= disp) < 0) i += hsize_reg;\n\n          if (htab[i] == fcode) {\n            ent = codetab[i];\n            continue outer_loop;\n          }\n        } while (htab[i] >= 0);\n      }\n\n      output(ent, outs);\n      ent = c;\n      if (free_ent < maxmaxcode) {\n        codetab[i] = free_ent++; // code -> hashtable\n        htab[i] = fcode;\n      } else cl_block(outs);\n    }\n\n    // Put out the final code.\n    output(ent, outs);\n    output(EOFCode, outs);\n  });\n\n  // ----------------------------------------------------------------------------\n  let encode = (exports.encode = function encode(os) {\n    os.writeByte(initCodeSize); // write \"initial code size\" byte\n    remaining = imgW * imgH; // reset navigation variables\n    curPixel = 0;\n    compress(initCodeSize + 1, os); // compress and write the pixel data\n    os.writeByte(0); // write block terminator\n  });\n\n  // Flush the packet to disk, and reset the accumulator\n  var flush_char = function flush_char(outs) {\n    if (a_count > 0) {\n      outs.writeByte(a_count);\n      outs.writeBytes(accum, 0, a_count);\n      a_count = 0;\n    }\n  };\n\n  var MAXCODE = function MAXCODE(n_bits) {\n    return (1 << n_bits) - 1;\n  };\n\n  // ----------------------------------------------------------------------------\n  // Return the next pixel from the image\n  // ----------------------------------------------------------------------------\n\n  var nextPixel = function nextPixel() {\n    if (remaining === 0) return EOF;\n    --remaining;\n    let pix = pixAry[curPixel++];\n    return pix & 0xff;\n  };\n\n  var output = function output(code, outs) {\n    cur_accum &= masks[cur_bits];\n\n    if (cur_bits > 0) cur_accum |= code << cur_bits;\n    else cur_accum = code;\n\n    cur_bits += n_bits;\n\n    while (cur_bits >= 8) {\n      char_out(cur_accum & 0xff, outs);\n      cur_accum >>= 8;\n      cur_bits -= 8;\n    }\n\n    // If the next entry is going to be too big for the code size,\n    // then increase it, if possible.\n\n    if (free_ent > maxcode || clear_flg) {\n      if (clear_flg) {\n        maxcode = MAXCODE((n_bits = g_init_bits));\n        clear_flg = false;\n      } else {\n        ++n_bits;\n        if (n_bits == maxbits) maxcode = maxmaxcode;\n        else maxcode = MAXCODE(n_bits);\n      }\n    }\n\n    if (code == EOFCode) {\n      // At EOF, write the rest of the buffer.\n      while (cur_bits > 0) {\n        char_out(cur_accum & 0xff, outs);\n        cur_accum >>= 8;\n        cur_bits -= 8;\n      }\n\n      flush_char(outs);\n    }\n  };\n\n  LZWEncoder.apply(this, arguments);\n  return exports;\n};\n\nexport { LZWEncoder };\n","/* eslint-disable consistent-return */\n/* eslint-disable no-console */\n/* eslint-disable func-names */\n/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-useless-concat */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-return-assign */\n/* eslint-disable no-nested-ternary */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-empty */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-use-before-define */\n/* eslint-disable camelcase */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-unused-vars */\n/* eslint-disable block-scoped-var */\n/* eslint-disable no-shadow */\n/* eslint-disable no-plusplus */\n/* eslint-disable no-var */\n/* eslint-disable vars-on-top */\n/**\n * This class lets you encode animated GIF files\n * Base class :  http://www.java2s.com/Code/Java/2D-Graphics-GUI/AnimatedGifEncoder.htm\n * @author Kevin Weiner (original Java version - kweiner@fmsware.com)\n * @author Thibault Imbert (AS3 version - bytearray.org)\n * @author Kevin Kwok (JavaScript version - https://github.com/antimatter15/jsgif)\n * @version 0.1 AS3 implementation\n */\nimport $ from 'jquery';\nimport { NeuQuant } from './NeuQuant';\nimport { LZWEncoder } from './LZWEncoder';\n\nconst GIFEncoder = function() {\n  for (var i = 0, chr = {}; i < 256; i++) chr[i] = String.fromCharCode(i);\n\n  function ByteArray() {\n    this.bin = [];\n  }\n\n  ByteArray.prototype.getData = function() {\n    for (var v = '', l = this.bin.length, i = 0; i < l; i++) v += chr[this.bin[i]];\n    return v;\n  };\n\n  ByteArray.prototype.writeByte = function(val) {\n    this.bin.push(val);\n  };\n\n  ByteArray.prototype.writeUTFBytes = function(string) {\n    for (let l = string.length, i = 0; i < l; i++) this.writeByte(string.charCodeAt(i));\n  };\n\n  ByteArray.prototype.writeBytes = function(array, offset, length) {\n    for (let l = length || array.length, i = offset || 0; i < l; i++) this.writeByte(array[i]);\n  };\n\n  const exports = {};\n  let width; // image size\n  let height;\n  let transparent = null; // transparent color if given\n  let transIndex; // transparent index in color table\n  let repeat = -1; // no repeat\n  let delay = 0; // frame delay (hundredths)\n  let started = false; // ready to output frames\n  let out;\n  let image; // current frame\n  let pixels; // BGR byte array from frame\n  let indexedPixels; // converted frame indexed to palette\n  let colorDepth; // number of bit planes\n  let colorTab; // RGB palette\n  const usedEntry = []; // active palette entries\n  let palSize = 7; // color table size (bits-1)\n  let dispose = -1; // disposal code (-1 = use default)\n  let closeStream = false; // close stream when finished\n  let firstFrame = true;\n  let sizeSet = false; // if false, get size from first frame\n  let sample = 10; // default sample interval for quantizer\n  let comment = 'Generated by jsgif (https://github.com/antimatter15/jsgif/)'; // default comment for generated gif\n\n  /**\n   * Sets the delay time between each frame, or changes it for subsequent frames\n   * (applies to last frame added)\n   * int delay time in milliseconds\n   * @param ms\n   */\n\n  const setDelay = (exports.setDelay = function setDelay(ms) {\n    delay = Math.round(ms / 10);\n  });\n\n  /**\n   * Sets the GIF frame disposal code for the last added frame and any\n   *\n   * subsequent frames. Default is 0 if no transparent color has been set,\n   * otherwise 2.\n   * @param code\n   * int disposal code.\n   */\n\n  const setDispose = (exports.setDispose = function setDispose(code) {\n    if (code >= 0) dispose = code;\n  });\n\n  /**\n   * Sets the number of times the set of GIF frames should be played. Default is\n   * 1; 0 means play indefinitely. Must be invoked before the first image is\n   * added.\n   *\n   * @param iter\n   * int number of iterations.\n   * @return\n   */\n\n  const setRepeat = (exports.setRepeat = function setRepeat(iter) {\n    if (iter >= 0) repeat = iter;\n  });\n\n  /**\n   * Sets the transparent color for the last added frame and any subsequent\n   * frames. Since all colors are subject to modification in the quantization\n   * process, the color in the final palette for each frame closest to the given\n   * color becomes the transparent color for that frame. May be set to null to\n   * indicate no transparent color.\n   * @param\n   * Color to be treated as transparent on display.\n   */\n\n  const setTransparent = (exports.setTransparent = function setTransparent(c) {\n    transparent = c;\n  });\n\n  /**\n   * Sets the comment for the block comment\n   * @param\n   * string to be insterted as comment\n   */\n\n  const setComment = (exports.setComment = function setComment(c) {\n    comment = c;\n  });\n\n  /**\n   * The addFrame method takes an incoming BitmapData object to create each frames\n   * @param\n   * BitmapData object to be treated as a GIF's frame\n   */\n\n  const addFrame = (exports.addFrame = function addFrame(im, is_imageData) {\n    if (im === null || !started || out === null) {\n      throw new Error('Please call start method before calling addFrame');\n    }\n\n    let ok = true;\n\n    try {\n      if (!is_imageData) {\n        image = im.getImageData(0, 0, im.canvas.width, im.canvas.height).data;\n        if (!sizeSet) setSize(im.canvas.width, im.canvas.height);\n      } else if (im instanceof ImageData) {\n        image = im.data;\n        if (width != im.width || height != im.height) {\n          setSize(im.width, im.height);\n        } else {\n        }\n      } else if (im instanceof Uint8ClampedArray) {\n        if (im.length == width * height * 4) {\n          image = im;\n        } else {\n          console.log('Please set the correct size: ImageData length mismatch');\n          ok = false;\n        }\n      } else {\n        console.log('Please provide correct input');\n        ok = false;\n      }\n      getImagePixels(); // convert to correct format if necessary\n      analyzePixels(); // build color table & map pixels\n\n      if (firstFrame) {\n        writeLSD(); // logical screen descriptior\n        writePalette(); // global color table\n        if (repeat >= 0) {\n          // use NS app extension to indicate reps\n          writeNetscapeExt();\n        }\n      }\n\n      writeGraphicCtrlExt(); // write graphic control extension\n      if (comment !== '') {\n        writeCommentExt(); // write comment extension\n      }\n      writeImageDesc(); // image descriptor\n      if (!firstFrame) writePalette(); // local color table\n      writePixels(); // encode and write pixel data\n      firstFrame = false;\n    } catch (e) {\n      ok = false;\n    }\n\n    return ok;\n  });\n\n  /**\n   * @description: Downloads the encoded gif with the given name\n   * No need of any conversion from the stream data (out) to base64\n   * Solves the issue of large file sizes when there are more frames\n   * and does not involve in creation of any temporary data in the process\n   * so no wastage of memory, and speeds up the process of downloading\n   * to just calling this function.\n   * @parameter {String} filename filename used for downloading the gif\n   */\n\n  const download = (exports.download = function download(filename) {\n    if (out === null || closeStream == false) {\n      console.log(\n        'Please call start method and add frames and call finish method before calling download'\n      );\n    } else {\n      filename =\n        filename !== undefined ? (filename.endsWith('.gif') ? filename : filename) : 'download.gif';\n      const templink = document.createElement('a');\n      templink.download = filename;\n      templink.href = URL.createObjectURL(\n        new Blob([new Uint8Array(out.bin)], { type: 'image/gif' })\n      );\n      templink.click();\n    }\n  });\n\n  const upload = (exports.upload = function upload(filename) {\n    if (out === null || closeStream == false) {\n      console.log(\n        'Please call start method and add frames and call finish method before calling download'\n      );\n    } else {\n      filename =\n        filename !== undefined ? (filename.endsWith('.gif') ? filename : filename) : 'download.gif';\n      const templink = document.createElement('a');\n      templink.target = '_blank';\n      templink.href = URL.createObjectURL(\n        new Blob([new Uint8Array(out.bin)], { type: 'image/gif' })\n      );\n      const link = $(templink)\n        .attr('href')\n        .replace('blob:', '');\n      return new Uint8Array(out.bin);\n    }\n  });\n\n  /**\n   * Adds final trailer to the GIF stream, if you don't call the finish method\n   * the GIF stream will not be valid.\n   */\n\n  const finish = (exports.finish = function finish() {\n    if (!started) return false;\n\n    let ok = true;\n    started = false;\n\n    try {\n      out.writeByte(0x3b); // gif trailer\n      closeStream = true;\n    } catch (e) {\n      ok = false;\n    }\n\n    return ok;\n  });\n\n  /**\n   * Resets some members so that a new stream can be started.\n   * This method is actually called by the start method\n   */\n\n  const reset = function reset() {\n    // reset for subsequent use\n    transIndex = 0;\n    image = null;\n    pixels = null;\n    indexedPixels = null;\n    colorTab = null;\n    closeStream = false;\n    firstFrame = true;\n  };\n\n  /**\n   * * Sets frame rate in frames per second. Equivalent to\n   * <code>setDelay(1000/fps)</code>.\n   * @param fps\n   * float frame rate (frames per second)\n   */\n\n  const setFrameRate = (exports.setFrameRate = function setFrameRate(fps) {\n    if (fps != 0xf) delay = Math.round(100 / fps);\n  });\n\n  /**\n   * Sets quality of color quantization (conversion of images to the maximum 256\n   * colors allowed by the GIF specification). Lower values (minimum = 1)\n   * produce better colors, but slow processing significantly. 10 is the\n   * default, and produces good color mapping at reasonable speeds. Values\n   * greater than 20 do not yield significant improvements in speed.\n   * @param quality\n   * int greater than 0.\n   * @return\n   */\n\n  const setQuality = (exports.setQuality = function setQuality(quality) {\n    if (quality < 1) quality = 1;\n    sample = quality;\n  });\n\n  /**\n   * Sets the GIF frame size. The default size is the size of the first frame\n   * added if this method is not invoked.\n   * @param w\n   * int frame width.\n   * @param h\n   * int frame width.\n   */\n\n  var setSize = (exports.setSize = function setSize(w, h) {\n    if (started && !firstFrame) return;\n    width = w;\n    height = h;\n    if (width < 1) width = 320;\n    if (height < 1) height = 240;\n    sizeSet = true;\n  });\n\n  /**\n   * Initiates GIF file creation on the given stream.\n   * @param os\n   * OutputStream on which GIF images are written.\n   * @return false if initial write failed.\n   */\n\n  const start = (exports.start = function start() {\n    reset();\n    let ok = true;\n    closeStream = false;\n    out = new ByteArray();\n    try {\n      out.writeUTFBytes('GIF89a'); // header\n    } catch (e) {\n      ok = false;\n    }\n\n    return (started = ok);\n  });\n\n  const cont = (exports.cont = function cont() {\n    reset();\n    const ok = true;\n    closeStream = false;\n    out = new ByteArray();\n\n    return (started = ok);\n  });\n\n  /**\n   * Analyzes image colors and creates color map.\n   */\n\n  var analyzePixels = function analyzePixels() {\n    const len = pixels.length;\n    const nPix = len / 3;\n    indexedPixels = [];\n    const nq = new NeuQuant(pixels, len, sample);\n\n    // initialize quantizer\n    colorTab = nq.process(); // create reduced palette\n\n    // map image pixels to new palette\n    let k = 0;\n    for (let j = 0; j < nPix; j++) {\n      const index = nq.map(pixels[k++] & 0xff, pixels[k++] & 0xff, pixels[k++] & 0xff);\n      usedEntry[index] = true;\n      indexedPixels[j] = index;\n    }\n\n    pixels = null;\n    colorDepth = 8;\n    palSize = 7;\n\n    // get closest match to transparent color if specified\n    if (transparent !== null) {\n      transIndex = findClosest(transparent);\n    }\n  };\n\n  /**\n   * Returns index of palette color closest to c\n   */\n\n  var findClosest = function findClosest(c) {\n    if (colorTab === null) return -1;\n    const r = (c & 0xff0000) >> 16;\n    const g = (c & 0x00ff00) >> 8;\n    const b = c & 0x0000ff;\n    let minpos = 0;\n    let dmin = 256 * 256 * 256;\n    const len = colorTab.length;\n\n    for (let i = 0; i < len; ) {\n      const dr = r - (colorTab[i++] & 0xff);\n      const dg = g - (colorTab[i++] & 0xff);\n      const db = b - (colorTab[i] & 0xff);\n      const d = dr * dr + dg * dg + db * db;\n      const index = i / 3;\n      if (usedEntry[index] && d < dmin) {\n        dmin = d;\n        minpos = index;\n      }\n      i++;\n    }\n    return minpos;\n  };\n\n  /**\n   * Extracts image pixels into byte array \"pixels\n   */\n\n  var getImagePixels = function getImagePixels() {\n    const w = width;\n    const h = height;\n    pixels = [];\n    const data = image;\n    let count = 0;\n\n    for (let i = 0; i < h; i++) {\n      for (let j = 0; j < w; j++) {\n        const b = i * w * 4 + j * 4;\n        pixels[count++] = data[b];\n        pixels[count++] = data[b + 1];\n        pixels[count++] = data[b + 2];\n      }\n    }\n  };\n\n  /**\n   * Writes Graphic Control Extension\n   */\n\n  var writeGraphicCtrlExt = function writeGraphicCtrlExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xf9); // GCE label\n    out.writeByte(4); // data block size\n    let transp;\n    let disp;\n    if (transparent === null) {\n      transp = 0;\n      disp = 0; // dispose = no action\n    } else {\n      transp = 1;\n      disp = 2; // force clear if using transparent color\n    }\n    if (dispose >= 0) {\n      disp = dispose & 7; // user override\n    }\n    disp <<= 2;\n    // packed fields\n    out.writeByte(\n      0 | // 1:3 reserved\n      disp | // 4:6 disposal\n      0 | // 7 user input - 0 = none\n        transp\n    ); // 8 transparency flag\n\n    WriteShort(delay); // delay x 1/100 sec\n    out.writeByte(transIndex); // transparent color index\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes Comment Extention\n   */\n\n  var writeCommentExt = function writeCommentExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xfe); // comment label\n    out.writeByte(comment.length); // Block Size (s)\n    out.writeUTFBytes(comment);\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes Image Descriptor\n   */\n\n  var writeImageDesc = function writeImageDesc() {\n    out.writeByte(0x2c); // image separator\n    WriteShort(0); // image position x,y = 0,0\n    WriteShort(0);\n    WriteShort(width); // image size\n    WriteShort(height);\n\n    // packed fields\n    if (firstFrame) {\n      // no LCT - GCT is used for first (or only) frame\n      out.writeByte(0);\n    } else {\n      // specify normal LCT\n      out.writeByte(\n        0x80 | // 1 local color table 1=yes\n        0 | // 2 interlace - 0=no\n        0 | // 3 sorted - 0=no\n        0 | // 4-5 reserved\n          palSize\n      ); // 6-8 size of color table\n    }\n  };\n\n  /**\n   * Writes Logical Screen Descriptor\n   */\n\n  var writeLSD = function writeLSD() {\n    // logical screen size\n    WriteShort(width);\n    WriteShort(height);\n    // packed fields\n    out.writeByte(\n      0x80 | // 1 : global color table flag = 1 (gct used)\n      0x70 | // 2-4 : color resolution = 7\n      0x00 | // 5 : gct sort flag = 0\n        palSize\n    ); // 6-8 : gct size\n\n    out.writeByte(0); // background color index\n    out.writeByte(0); // pixel aspect ratio - assume 1:1\n  };\n\n  /**\n   * Writes Netscape application extension to define repeat count.\n   */\n\n  var writeNetscapeExt = function writeNetscapeExt() {\n    out.writeByte(0x21); // extension introducer\n    out.writeByte(0xff); // app extension label\n    out.writeByte(11); // block size\n    out.writeUTFBytes('NETSCAPE' + '2.0'); // app id + auth code\n    out.writeByte(3); // sub-block size\n    out.writeByte(1); // loop sub-block id\n    WriteShort(repeat); // loop count (extra iterations, 0=repeat forever)\n    out.writeByte(0); // block terminator\n  };\n\n  /**\n   * Writes color table\n   */\n\n  var writePalette = function writePalette() {\n    out.writeBytes(colorTab);\n    const n = 3 * 256 - colorTab.length;\n    for (let i = 0; i < n; i++) out.writeByte(0);\n  };\n\n  var WriteShort = function WriteShort(pValue) {\n    out.writeByte(pValue & 0xff);\n    out.writeByte((pValue >> 8) & 0xff);\n  };\n\n  /**\n   * Encodes and writes pixel data\n   */\n\n  var writePixels = function writePixels() {\n    const myencoder = new LZWEncoder(width, height, indexedPixels, colorDepth);\n    myencoder.encode(out);\n  };\n\n  /**\n   * Retrieves the GIF stream\n   */\n\n  const stream = (exports.stream = function stream() {\n    return out;\n  });\n\n  const setProperties = (exports.setProperties = function setProperties(has_start, is_first) {\n    started = has_start;\n    firstFrame = is_first;\n  });\n\n  return exports;\n};\n\nexport { GIFEncoder };\n","import $ from 'jquery';\nimport { GIFEncoder } from 'services/jsgif-master/GIFEncoder';\nimport encode64 from 'services/jsgif-master/b64';\n\nexport function debugBase64(base64URL) {\n  const win = window.open();\n  $(win.document.body).css({\n    display: 'flex',\n    width: '100vw',\n    heigh: '100vh',\n    'justify-content': 'center',\n    'align-items': 'center',\n    background: 'whitesmoke'\n  });\n  $('<img></img>', {\n    src: base64URL\n  }).appendTo(win.document.body);\n}\n\nexport function debugBase64WithText(array, base64URL) {\n  const win = window.open();\n  $(win.document.body).css({\n    display: 'flex',\n    'flex-direction': 'column',\n    width: '100vw',\n    height: '100vh',\n    'align-items': 'center',\n    background: 'whitesmoke',\n    overflow: 'hidden'\n  });\n  const ancor = $('<div></div>', {\n    id: 'ancor',\n    width: '100%',\n    height: '50%'\n  })\n    .appendTo(win.document.body)\n    .css({\n      width: '80%',\n      height: '50%',\n      background: 'white',\n      'overflow-y': 'scroll',\n      'margin-bottom': '25px',\n      border: '1px solid black'\n    });\n  for (let i = 0; i < array.length; i += 1) {\n    $('<img></img>', {\n      src: array[i],\n      width: '25%'\n    })\n      .appendTo(ancor)\n      .css({ border: '1px solid black' });\n  }\n  $('<div></div>', {\n    text: base64URL\n  })\n    .appendTo(win.document.body)\n    .css({\n      display: 'flex',\n      'flex-wrap': 'wrap',\n      width: '80%',\n      height: '40%',\n      'overflow-y': 'scroll',\n      'word-break': 'break-word'\n    });\n}\n\nexport function saveAsGif(upload, fps, filename, frames) {\n  const delay = 1000 / fps;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  frames.forEach(item => {\n    const curCanv = document.querySelector(`#canvas${frames[0].id}`);\n    const originalContext = $(`#canvas${item.id}`)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(\n      0,\n      0,\n      $(`#canvas${item.id}`).width(),\n      $(`#canvas${item.id}`).width()\n    );\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  });\n  encoder.finish();\n  filename = filename || 'New Piskel-clone';\n  if (upload) {\n    return encoder.upload(`${filename}.gif`);\n  }\n  return encoder.download(`${filename}.gif`);\n}\n\nexport function uploadToUrl(fps, frames) {\n  const delay = 1000 / fps;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  frames.forEach(item => {\n    const curCanv = document.querySelector(`#canvas${frames[0].id}`);\n    const originalContext = $(`#canvas${item.id}`)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(\n      0,\n      0,\n      $(`#canvas${item.id}`).width(),\n      $(`#canvas${item.id}`).width()\n    );\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  });\n  encoder.finish();\n  const binaryGif = encoder.stream().getData();\n  const dataUrl = `data:image/gif;base64,${encode64(binaryGif)}`;\n  return dataUrl;\n}\n\nexport function downloadPng(currentCanvas, fps, filename) {\n  const delay = 1000 / fps;\n  const i = currentCanvas;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n  const width = $(`#canvas${i}`).width();\n  const originalContext = $(`#canvas${i}`)\n    .get(0)\n    .getContext('2d');\n  const imageData = originalContext.getImageData(0, 0, width, width);\n  let len = imageData.data.length;\n  const newArr = [];\n  let map1;\n  let map2;\n  let count = 0;\n  while (len > 0) {\n    map1 = imageData.data.slice(count, count + 4);\n    map2 = map1;\n    if (map2.every(item => item === 0)) {\n      map2 = map2.map(() => 255);\n    }\n    newArr.push(...map2);\n    count += 4;\n    len -= 4;\n  }\n  const fixedNewArray = Uint8ClampedArray.from(newArr);\n  const newImage = new ImageData(fixedNewArray, width, width);\n  encoder.setSize(width, width);\n  encoder.addFrame(newImage, true);\n  encoder.finish();\n  filename = filename || 'New Piskel-clone';\n  encoder.download(`${filename}.png`);\n}\n","/* eslint-disable no-multi-assign */\n/* eslint-disable no-restricted-globals */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-plusplus */\nexport default function encode64(input) {\n  let output = '';\n  let i = 0;\n  const l = input.length;\n  const key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  let chr1;\n  let chr2;\n  let chr3;\n  let enc1;\n  let enc2;\n  let enc3;\n  let enc4;\n  while (i < l) {\n    chr1 = input.charCodeAt(i++);\n    chr2 = input.charCodeAt(i++);\n    chr3 = input.charCodeAt(i++);\n    enc1 = chr1 >> 2;\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    enc4 = chr3 & 63;\n    if (isNaN(chr2)) enc3 = enc4 = 64;\n    else if (isNaN(chr3)) enc4 = 64;\n    output = output + key.charAt(enc1) + key.charAt(enc2) + key.charAt(enc3) + key.charAt(enc4);\n  }\n  return output;\n}\n","/* eslint-disable no-restricted-syntax */\n/* eslint-disable guard-for-in */\nimport { writeUserData } from 'components/functions/requestToDB';\nimport { uploadToUrl } from 'components/functions/menuFunctions/fromCanvasToFile';\nimport { getDate } from 'components/functions/random';\nimport store from 'store/store';\n\nexport function makeObjectToSave(newTitle, newDescription, fps, frames) {\n  const dataUrl = uploadToUrl(fps, frames);\n  const date = getDate().split('  ');\n  const project = {\n    gif: dataUrl,\n    frames,\n    title: newTitle || 'New Piskel-clone',\n    description: newDescription,\n    date: date[0],\n    time: date[1],\n    fps: fps\n  };\n  store.dispatch({ type: 'project', value: project });\n  return project;\n}\n\nexport function saveLocally(storage, projectID, newTitle, newDescription, fps, frames) {\n  const currentProject = makeObjectToSave(newTitle, newDescription, fps, frames);\n  // restrict saving piskels locally more than 20\n  let totalSaves;\n  if (storage) {\n    if (Object.keys(storage).length < 20) {\n      totalSaves = true;\n    } else if (\n      Object.entries(storage).some(item => item[0] === projectID)\n    ) {\n      totalSaves = true;\n    } else {\n      totalSaves = false;\n    }\n  } else {\n    totalSaves = true;\n  }\n  // update local projects\n  let newStorage = storage;\n  if (newStorage) {\n    if (Object.keys(newStorage).length === 0) {\n      newStorage[projectID] = currentProject;\n    } else {\n      for (const project in newStorage) {\n        if (project === projectID) {\n          newStorage[project] = currentProject;\n        } else {\n          newStorage[projectID] = currentProject;\n        }\n      }\n    }\n  } else {\n    newStorage = {};\n    newStorage[projectID] = currentProject;\n  }\n  return [totalSaves, newStorage];\n}\n\nexport function saveToGalery(storage, projectID, newTitle, newDescription, fps, frames, userID, allProjects) {\n  const saves = saveLocally(storage, projectID, newTitle, newDescription, fps, frames)\n  let updatedAllProjects = allProjects;\n  if (updatedAllProjects) {\n    if (Object.keys(updatedAllProjects).length === 0) {\n      updatedAllProjects[userID] = saves[1];\n    } else {\n      for (const user in updatedAllProjects) {\n        if (user === userID) {\n          updatedAllProjects[user] = saves[1];\n        } else {\n          updatedAllProjects[userID] = saves[1];\n        }\n      }\n    }\n  } else {\n    updatedAllProjects = {};\n    updatedAllProjects[userID] = saves[1];\n  }\n  // send user projects to firebase Realtime Database\n  const objForDB = Object.entries(updatedAllProjects[userID]);\n  for (let i = 0; i < objForDB.length; i += 1) {\n    const projectName = objForDB[i][0];\n    const projectItems = objForDB[i][1];\n    if (projectName === projectID) {\n      writeUserData(\n        userID,\n        projectName,\n        projectItems.frames,\n        projectItems.gif,\n        projectItems.date,\n        projectItems.time,\n        projectItems.title,\n        projectItems.description,\n        projectItems.fps\n      );\n    }\n  }\n  return [saves[0], updatedAllProjects];\n}\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/save/save.css';\r\nimport store from 'store/store';\r\nimport { saveLocally, saveToGalery } from 'components/functions/menuFunctions/saveProject';\r\n\r\nexport default class SaveOptions extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      isFull: false,\r\n      isSaved: false,\r\n      newTitle: false,\r\n      newDescription: false\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n    this.setState(null);\r\n  }\r\n\r\n  saveLocallyHandler() {\r\n    const storage = this.props.state.localProjects;\r\n    const localSaves = saveLocally(\r\n      storage,\r\n      this.props.state.projectID,\r\n      this.state.newTitle || this.props.state.project.title,\r\n      this.state.newDescription || this.props.state.project.description,\r\n      this.props.state.project.fps,\r\n      this.props.state.framesArray\r\n    );\r\n    store.dispatch({ type: 'localProjects', value: localSaves[1] });\r\n    if (localSaves[0]) {\r\n      this.setState({ isSaved: true });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isSaved: false });\r\n        }\r\n      }, 5000);\r\n    } else {\r\n      this.setState({ isFull: 'local' });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isFull: false });\r\n        }\r\n      }, 5000);\r\n      return;\r\n    }\r\n  }\r\n\r\n  saveToGaleryHandler() {\r\n    if (!this.props.state.userData.isAuthed) {\r\n      $('#signOuted').click();\r\n      return;\r\n    }\r\n    const storage = this.props.state.allProjects[this.props.state.userData.info.id];\r\n    const allProjects = this.props.state.allProjects;\r\n    const updatedAllProjects = saveToGalery(\r\n      storage,\r\n      this.props.state.projectID,\r\n      this.state.newTitle || this.props.state.project.title,\r\n      this.state.newDescription || this.props.state.project.description,\r\n      this.props.state.project.fps,\r\n      this.props.state.framesArray,\r\n      this.props.state.userData.info.id,\r\n      allProjects\r\n    )\r\n    store.dispatch({ type: 'allProjects', value: updatedAllProjects[1] });\r\n    if (updatedAllProjects[0]) {\r\n      this.setState({ isSaved: true });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isSaved: false });\r\n        }\r\n      }, 5000);\r\n    } else {\r\n      this.setState({ isFull: 'personal' });\r\n      setTimeout(() => {\r\n        if (this.mounted) {\r\n          this.setState({ isFull: false });\r\n        }\r\n      }, 5000);\r\n      return;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`save-settings-block ${\r\n          this.props.active === 'save-settings' ? 'flexed' : 'hidden'\r\n          }`}\r\n      >\r\n        <div className=\"sprite-info-block\">\r\n          <span className=\"sprite-info bold\">Sprite information</span>\r\n          <span className=\"label-title\">Title:</span>\r\n          <input\r\n            className=\"title-input\"\r\n            id=\"title-input\"\r\n            defaultValue={this.props.state.project.title}\r\n            onChange={e => this.setState({ newTitle: $(e.target).val() })}\r\n          />\r\n          <span className=\"label-description\">Description:</span>\r\n          <textarea\r\n            rows=\"1\"\r\n            cols=\"6\"\r\n            className=\"description-input\"\r\n            id=\"description-input\"\r\n            defaultValue={this.props.state.project.description}\r\n            onChange={e => this.setState({ newDescription: $(e.target).val() })}\r\n          />\r\n        </div>\r\n        <div className=\"save-online-block\">\r\n          <span className=\"save-online bold\">Save online</span>\r\n          <button\r\n            id=\"save-locally-button\"\r\n            className=\"save-online-button\"\r\n            type=\"button\"\r\n            onClick={() => this.saveLocallyHandler()}\r\n          >\r\n            Save locally\r\n          </button>\r\n          <p className=\"save-online-info\">\r\n            Your piskel will be saved and available only from this browser\r\n          </p>\r\n          <button\r\n            id=\"save-gallery-button\"\r\n            className={`save-online-button ${this.mounted && this.props.state.userData.isAuthed ? '' : 'hidden'}`}\r\n            type=\"button\"\r\n            onClick={() => this.saveToGaleryHandler()}\r\n          >\r\n            Save to your gallery\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => {\r\n              $('.abcRioButton.abcRioButtonLightBlue').click();\r\n            }}\r\n            className={`save-online-button ${this.mounted && this.props.state.userData.isAuthed ? 'hidden' : ''}`}\r\n          >\r\n            Sign in to save to your gallery\r\n          </button>\r\n          <p className=\"save-online-info\">Your piskel will be stored online in your gallery</p>\r\n          <p\r\n            id=\"error\"\r\n            className={`${this.mounted && this.state.isFull ? 'storage-warning error' : 'hidden'}`}\r\n          >\r\n            {`Your ${this.state.isFull} storage is full, please delete old piskels`}\r\n          </p>\r\n          <p\r\n            id=\"success\"\r\n            className={`${\r\n              this.mounted && this.state.isSaved ? 'storage-warning success' : 'hidden'\r\n              }`}\r\n          >\r\n            Your animation successfully saved!\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nSaveOptions.propTypes = {\r\n  active: PropTypes.string.isRequired,\r\n  state: PropTypes.object.isRequired\r\n};\r\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable no-multi-assign */\n/* eslint-disable func-names */\n/* eslint-disable no-param-reassign */\n/* eslint-disable eqeqeq */\n/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n/* eslint-disable no-underscore-dangle */\n// upload.js, from https://github.com/googledrive/cors-upload-sample\n// Contributors Steve Bazyl, Mike Procopio, Jeffrey Posnick, Renaud Sauvain\n// License: Apache 2.0 http://www.apache.org/licenses/LICENSE-2.0\n//\n// Implements Resumable Upload for Google Drive as described by\n// https://developers.google.com/drive/v3/web/resumable-upload\n//\n// Modified by Paul Brewer, Economic and Financial Technology Consulting LLC\n// Nov. 1 2017\n//  1. use Google Drive API V3 instead of V2\n//  2. wrap code in a \"use strict\" IIFE, only exposing MediaUploader\n//  3. explicitly export MediaUploader as window.UploaderForGoogleDrive\n//  4. if options.token undefined, get access token from existing window.gapi instance, if any\n//\n// Nov. 7, 2017\n//  5. Change file metadata \"title\" to \"name\" in line with Drive API v2-->v3 migration advisory\n//  6. export promise wrapper as window.pUploaderForGoogleDrive\n\n// jshint browser:true, strict:true\n\nconst Uploader = window.UploaderForGoogleDrive = (function () {\n\n\n  /**\n   * Helper for implementing retries with backoff. Initial retry\n   * delay is 1 second, increasing by 2x (+jitter) for subsequent retries\n   *\n   * @constructor\n   */\n\n  const RetryHandler = function () {\n    this.interval = 1000; // Start at one second\n    this.maxInterval = 60 * 1000; // Don't wait longer than a minute\n  };\n\n  /**\n   * Invoke the function after waiting\n   *\n   * @param {function} fn Function to invoke\n   */\n  RetryHandler.prototype.retry = function (fn) {\n    setTimeout(fn, this.interval);\n    this.interval = this.nextInterval_();\n  };\n\n  /**\n   * Reset the counter (e.g. after successful request.)\n   */\n  RetryHandler.prototype.reset = function () {\n    this.interval = 1000;\n  };\n\n  /**\n   * Calculate the next wait time.\n   * @return {number} Next wait interval, in milliseconds\n   *\n   * @private\n   */\n  RetryHandler.prototype.nextInterval_ = function () {\n    const interval = this.interval * 2 + this.getRandomInt_(0, 1000);\n    return Math.min(interval, this.maxInterval);\n  };\n\n  /**\n   * Get a random int in the range of min to max. Used to add jitter to wait times.\n   *\n   * @param {number} min Lower bounds\n   * @param {number} max Upper bounds\n   * @private\n   */\n  RetryHandler.prototype.getRandomInt_ = function (min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n  };\n\n  /**\n   * Helper class for resumable uploads using XHR/CORS. Can upload any Blob-like item, whether\n   * files or in-memory constructs.\n   *\n   * @example\n   * var content = new Blob([\"Hello world\"], {\"type\": \"text/plain\"});\n   * var uploader = new MediaUploader({\n   *   file: content,\n   *   token: accessToken,\n   *   onComplete: function(data) { ... }\n   *   onError: function(data) { ... }\n   * });\n   * uploader.upload();\n   *\n   * @constructor\n   * @param {object} options Hash of options\n   * @param {string} options.token Access token\n   * @param {blob} options.file Blob-like item to upload\n   * @param {string} [options.fileId] ID of file if replacing\n   * @param {object} [options.params] Additional query parameters\n   * @param {string} [options.contentType] Content-type, if overriding the type of the blob.\n   * @param {object} [options.metadata] File metadata\n   * @param {function} [options.onComplete] Callback for when upload is complete\n   * @param {function} [options.onProgress] Callback for status for the in-progress upload\n   * @param {function} [options.onError] Callback if upload fails\n   */\n  const MediaUploader = function (options) {\n    const noop = function () { };\n    this.file = options.file;\n    this.contentType = options.contentType || this.file.type || 'application/octet-stream';\n    this.metadata = options.metadata || {\n      name: this.file.name,\n      mimeType: this.contentType\n    };\n    // if options.token omitted, get access_token from existing window.gapi instance, if any : PJB 2017-11-01\n    // see https://developers.google.com/api-client-library/javascript/reference/referencedocs\n    if (options.token) {\n      this.token = options.token;\n    } else {\n      try {\n        this.token = window.gapi.auth2\n          .getAuthInstance()\n          .currentUser.get()\n          .getAuthResponse(true).access_token;\n      } catch (e) {\n        console.log(e);\n        throw new Error('Uploader: missing Google OAuth2 access_token');\n      }\n    }\n    // end access_token patch -- PJB 2017-11-01\n    this.onComplete = options.onComplete || noop;\n    this.onProgress = options.onProgress || noop;\n    this.onError = options.onError || noop;\n    this.offset = options.offset || 0;\n    this.chunkSize = options.chunkSize || 0;\n    this.retryHandler = new RetryHandler();\n\n    this.url = options.url;\n    if (!this.url) {\n      const params = options.params || {};\n      params.uploadType = 'resumable';\n      this.url = this.buildUrl_(options.fileId, params, options.baseUrl);\n    }\n    // PJB 2018.01.22 Change \"update/replace\" method from \"PUT\" to \"PATCH\"\n    //   per https://developers.google.com/drive/v3/reference/files/update\n    this.httpMethod = options.fileId ? 'PATCH' : 'POST';\n  };\n\n  /**\n   * Initiate the upload.\n   */\n  MediaUploader.prototype.upload = function () {\n    const self = this;\n    const xhr = new XMLHttpRequest();\n\n    xhr.open(this.httpMethod, this.url, true);\n    xhr.setRequestHeader('Authorization', `Bearer ${this.token}`);\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    xhr.setRequestHeader('X-Upload-Content-Length', this.file.size);\n    xhr.setRequestHeader('X-Upload-Content-Type', this.contentType);\n    xhr.setRequestHeader('writersCanShare', true);\n\n    xhr.onload = function (e) {\n      if (e.target.status < 400) {\n        const location = e.target.getResponseHeader('Location');\n        this.url = location;\n        this.sendFile_();\n      } else {\n        this.onUploadError_(e);\n      }\n    }.bind(this);\n    xhr.onerror = this.onUploadError_.bind(this);\n    xhr.send(JSON.stringify(this.metadata));\n  };\n\n  /**\n   * Send the actual file content.\n   *\n   * @private\n   */\n  MediaUploader.prototype.sendFile_ = function () {\n    let content = this.file;\n    let end = this.file.size;\n\n    if (this.offset || this.chunkSize) {\n      // Only bother to slice the file if we're either resuming or uploading in chunks\n      if (this.chunkSize) {\n        end = Math.min(this.offset + this.chunkSize, this.file.size);\n      }\n      content = content.slice(this.offset, end);\n    }\n\n    const xhr = new XMLHttpRequest();\n    xhr.open('PUT', this.url, true);\n    xhr.setRequestHeader('Content-Type', this.contentType);\n    xhr.setRequestHeader(\n      'Content-Range',\n      `bytes ${this.offset}-${end - 1}/${this.file.size}`\n    );\n    xhr.setRequestHeader('X-Upload-Content-Type', this.file.type);\n    xhr.setRequestHeader('writersCanShare', true);\n    if (xhr.upload) {\n      xhr.upload.addEventListener('progress', this.onProgress);\n    }\n    xhr.onload = this.onContentUploadSuccess_.bind(this);\n    xhr.onerror = this.onContentUploadError_.bind(this);\n    xhr.send(content);\n  };\n\n  /**\n   * Query for the state of the file for resumption.\n   *\n   * @private\n   */\n  MediaUploader.prototype.resume_ = function () {\n    const xhr = new XMLHttpRequest();\n    xhr.open('PUT', this.url, true);\n    xhr.setRequestHeader('Content-Range', `bytes */${this.file.size}`);\n    xhr.setRequestHeader('X-Upload-Content-Type', this.file.type);\n    xhr.setRequestHeader('writersCanShare', true);\n    if (xhr.upload) {\n      xhr.upload.addEventListener('progress', this.onProgress);\n    }\n    xhr.onload = this.onContentUploadSuccess_.bind(this);\n    xhr.onerror = this.onContentUploadError_.bind(this);\n    xhr.send();\n  };\n\n  /**\n   * Extract the last saved range if available in the request.\n   *\n   * @param {XMLHttpRequest} xhr Request object\n   */\n  MediaUploader.prototype.extractRange_ = function (xhr) {\n    const range = xhr.getResponseHeader('Range');\n    if (range) {\n      this.offset = parseInt(range.match(/\\d+/g).pop(), 10) + 1;\n    }\n  };\n\n  /**\n   * Handle successful responses for uploads. Depending on the context,\n   * may continue with uploading the next chunk of the file or, if complete,\n   * invokes the caller's callback.\n   *\n   * @private\n   * @param {object} e XHR event\n   */\n  MediaUploader.prototype.onContentUploadSuccess_ = function (e) {\n    if (e.target.status == 200 || e.target.status == 201) {\n      this.onComplete(e.target.response);\n    } else if (e.target.status == 308) {\n      this.extractRange_(e.target);\n      this.retryHandler.reset();\n      this.sendFile_();\n    } else {\n      this.onContentUploadError_(e);\n    }\n  };\n\n  /**\n   * Handles errors for uploads. Either retries or aborts depending\n   * on the error.\n   *\n   * @private\n   * @param {object} e XHR event\n   */\n  MediaUploader.prototype.onContentUploadError_ = function (e) {\n    if (e.target.status && e.target.status < 500) {\n      this.onError(e.target.response);\n    } else {\n      this.retryHandler.retry(this.resume_.bind(this));\n    }\n  };\n\n  /**\n   * Handles errors for the initial request.\n   *\n   * @private\n   * @param {object} e XHR event\n   */\n  MediaUploader.prototype.onUploadError_ = function (e) {\n    this.onError(e.target.response); // TODO - Retries for initial upload\n  };\n\n  /**\n   * Construct a query string from a hash/object\n   *\n   * @private\n   * @param {object} [params] Key/value pairs for query string\n   * @return {string} query string\n   */\n  MediaUploader.prototype.buildQuery_ = function (params) {\n    params = params || {};\n    return Object.keys(params)\n      .map(function (key) {\n        return `${encodeURIComponent(key)}=${encodeURIComponent(params[key])}`;\n      })\n      .join('&');\n  };\n\n  /**\n   * Build the drive upload URL\n   *\n   * @private\n   * @param {string} [id] File ID if replacing\n   * @param {object} [params] Query parameters\n   * @return {string} URL\n   */\n  MediaUploader.prototype.buildUrl_ = function (id, params, baseUrl) {\n    // modified next line to use v3, not v2 -- PJB, 2017-11-01\n    let url = baseUrl || 'https://www.googleapis.com/upload/drive/v3/files/';\n    if (id) {\n      url += id;\n    }\n    const query = this.buildQuery_(params);\n    if (query) {\n      url += `?${query}`;\n    }\n    return url;\n  };\n\n  return MediaUploader;\n})();\n\nwindow.pUploaderForGoogleDrive = function (options) {\n\n\n  return new Promise(function (resolve, reject) {\n    options.onComplete = function (r) {\n      let response;\n      try {\n        response = typeof r === 'string' ? JSON.parse(r) : r;\n      } catch (e) {\n        response = r;\n      }\n      resolve(response);\n    };\n    options.onError = function (e) {\n      reject(e);\n    };\n    const uploader = new window.UploaderForGoogleDrive(options);\n    uploader.upload();\n  });\n};\n\nexport { Uploader };\n","import { saveAsGif } from 'components/functions/menuFunctions/fromCanvasToFile';\nimport { Uploader } from 'services/google-uploader/googleUploader';\nimport store from 'store/store';\n\nconst apikey = 'AIzaSyD8p3NmO-jrbUeGpC9EYDHzH8FWOl3ivss';\n\nexport function loadClient() {\n  window.gapi.client.setApiKey(apikey);\n  return window.gapi.client\n    .load('https://content.googleapis.com/discovery/v1/apis/drive/v3/rest')\n    .then(\n      () => {\n        console.log('GAPI client loaded for API');\n      },\n      err => {\n        console.error('Error loading GAPI client for API', err);\n      }\n    );\n}\n\nexport function uploadToGoogle(filename, fps, frames) {\n  loadClient();\n  const content = new Blob([saveAsGif('upload', fps, filename, frames)], { type: 'image/gif' });\n  const uploader = new Uploader({\n    file: content,\n    metadata: {\n      name: filename\n    },\n    onComplete(data) {\n      const info = JSON.parse(data);\n      const fileId = info.id;\n      const googleUrl = `https://drive.google.com/open?id=${fileId}`;\n      const urlToGif = `https://drive.google.com/thumbnail?id=${fileId}`;\n      store.dispatch({ type: 'googleLinks', value: [googleUrl, urlToGif] });\n      window.gapi.client.drive.permissions\n        .create({\n          fileId: `${fileId}`,\n          resource: {\n            role: 'reader',\n            type: 'anyone'\n          }\n        })\n        .then(\n          response => {\n            // Handle the results here (response.result has the parsed body).\n            console.log('Response', response);\n          },\n          err => {\n            console.error('Execute error', err);\n          }\n        );\n    },\n    onError(data) {\n      console.log(data);\n    }\n  });\n  uploader.upload();\n}\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport $ from 'jquery';\r\nimport 'components/menuComponents/export/export.css';\r\nimport {\r\n  saveAsGif,\r\n  uploadToUrl,\r\n  downloadPng,\r\n  debugBase64,\r\n  debugBase64WithText\r\n} from 'components/functions/menuFunctions/fromCanvasToFile';\r\nimport { uploadToGoogle } from 'components/functions/menuFunctions/exportToGoogle';\r\nimport { pageNavigator } from 'components/functions/navigation';\r\n\r\nexport default class ExportOptions extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      active: 'show-gif-block',\r\n      dataUrl: '',\r\n      links: false\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  showExportOptions(e) {\r\n    const clicked = e.target.getAttribute('id');\r\n    this.setState({ active: clicked });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={`export-settings-block ${\r\n          this.props.active === 'export-settings' ? 'flexed' : 'hidden'\r\n          }`}\r\n      >\r\n        <span className=\"export-info bold\">Export</span>\r\n        <div className=\"file-format-buttons\">\r\n          <button\r\n            id=\"show-gif-block\"\r\n            className={`show-gif-block ${\r\n              this.state.active === 'show-gif-block'\r\n                ? 'active-show-button'\r\n                : 'not-active-show-button'\r\n              }`}\r\n            type=\"button\"\r\n            onClick={e => this.showExportOptions(e)}\r\n          >\r\n            GIF\r\n          </button>\r\n          <button\r\n            id=\"show-png-block\"\r\n            className={`show-png-block ${\r\n              this.state.active === 'show-png-block'\r\n                ? 'active-show-button'\r\n                : 'not-active-show-button'\r\n              }`}\r\n            type=\"button\"\r\n            onClick={e => this.showExportOptions(e)}\r\n          >\r\n            PNG\r\n          </button>\r\n        </div>\r\n        <div\r\n          className={`gif-block ${this.state.active === 'show-gif-block' ? 'flexed' : 'hidden'}`}\r\n        >\r\n          <span className=\"gif-title\">Convert your sprite to an animated GIF</span>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"download-gif\"\r\n              className=\"gif-button\"\r\n              type=\"button\"\r\n              onClick={\r\n                () => saveAsGif(\r\n                  null,\r\n                  this.props.state.project.fps,\r\n                  this.props.state.project.title,\r\n                  this.props.state.framesArray\r\n                )}\r\n            >\r\n              Download\r\n            </button>\r\n            <span className=\"download-gif-title\">Download as an animated GIF</span>\r\n          </div>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"upload-gif\"\r\n              className=\"gif-button\"\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const dataUrl = uploadToUrl(this.props.state.project.fps, this.props.state.framesArray);\r\n                this.setState({ dataUrl, links: false });\r\n                setTimeout(() => {\r\n                  if (this.mounted) {\r\n                    this.setState({ dataUrl: '' });\r\n                  }\r\n                }, 150000);\r\n              }}\r\n            >\r\n              Open in new tab\r\n            </button>\r\n            <span className=\"upload-gif-title\">Watch an animated GIF in new tab</span>\r\n            <div className={`link-to-gif ${this.state.dataUrl ? '' : 'hidden'}`}>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  debugBase64(this.state.dataUrl);\r\n                  this.setState({ dataUrl: '' });\r\n                }}\r\n              >\r\n                your animation file\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"upload-google\"\r\n              className={`gif-button ${this.props.state.userData.isAuthed ? '' : 'hidden'}`}\r\n              type=\"button\"\r\n              onClick={() => {\r\n                if (!this.props.state.userData.isAuthed) {\r\n                  pageNavigator(null, 'create', 'about', false);\r\n                  $('#signOuted').click();\r\n                  return;\r\n                }\r\n                uploadToGoogle(\r\n                  this.props.state.project.title,\r\n                  this.props.state.project.fps,\r\n                  this.props.state.framesArray);\r\n                this.setState({ dataUrl: '' });\r\n                setTimeout(() => {\r\n                  if (this.props.state.googleLinks.length > 0) {\r\n                    this.setState({ links: true });\r\n                  }\r\n                }, 3000);\r\n                setTimeout(() => {\r\n                  if (this.mounted) {\r\n                    this.setState({ links: false });\r\n                  }\r\n                }, 150000);\r\n              }}\r\n            >\r\n              Get link\r\n            </button>\r\n            <span className={`upload-gif-google ${this.props.state.userData.isAuthed ? 'blocked' : 'hidden'}`}>\r\n              Save your animation to Google disk to share\r\n            </span>\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                $('.abcRioButton.abcRioButtonLightBlue').click();\r\n              }}\r\n              className={`save-online-button ${this.props.state.userData.isAuthed ? 'hidden' : ''}`}\r\n            >\r\n              Sign in to save to Google disk\r\n            </button>\r\n\r\n            <div className={`link-to-gif ${this.state.links ? '' : 'hidden'}`}>\r\n              <span>Click the link</span>\r\n              <a\r\n                className=\"google-link\"\r\n                id=\"google-link\"\r\n                rel=\"noopener noreferrer\"\r\n                target=\"_blank\"\r\n                href={this.props.state.googleLinks[0]}\r\n              >\r\n                {'Link to file on Google disk'}\r\n              </a>\r\n              <a\r\n                className=\"google-link\"\r\n                id=\"span-link\"\r\n                rel=\"noopener noreferrer\"\r\n                target=\"_blank\"\r\n                href={this.props.state.googleLinks[1]}\r\n              >\r\n                {'Direct link to your GIF'}\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className={`png-block ${this.state.active === 'show-png-block' ? 'flexed' : 'hidden'}`}\r\n        >\r\n          <span className=\"png-title\">Export your animation as a PNG file</span>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"download-png\"\r\n              className=\"png-button\"\r\n              type=\"button\"\r\n              onClick={() =>\r\n                downloadPng(\r\n                  this.props.state.currentCanvas,\r\n                  this.props.state.project.fps,\r\n                  this.props.state.project.title\r\n                )}\r\n            >\r\n              Download\r\n            </button>\r\n            <span className=\"download-png-title\">Download selected frame as PNG file</span>\r\n          </div>\r\n          <div className=\"download-block\">\r\n            <button\r\n              id=\"open-png\"\r\n              className=\"png-button\"\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const array = [];\r\n                for (let i = 0; i < $('.preview').children().length; i += 1) {\r\n                  array.push($('.preview').children()[i].src);\r\n                }\r\n                const dataUrl = uploadToUrl(this.props.state.project.fps, this.props.state.framesArray);\r\n                debugBase64WithText(array, dataUrl);\r\n              }}\r\n            >\r\n              Open\r\n            </button>\r\n            <span className=\"open-png-title\">Open the spritesheet as a data uri</span>\r\n          </div>\r\n        </div>\r\n        <div id=\"hidden\" className=\"hidden\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nExportOptions.propTypes = {\r\n  active: PropTypes.string.isRequired,\r\n  state: PropTypes.object.isRequired\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'components/menuComponents/import/import.css';\r\nimport store from 'store/store';\r\n\r\nexport default function ImportOptions(props) {\r\n  return (\r\n    <div\r\n      className={`general-settings-block ${\r\n        props.active === 'import-settings' ? 'flexed' : 'hidden'\r\n        }`}\r\n    >\r\n      <div className=\"current-bg\">\r\n        <span className=\"default-bg bold\">Load from browser</span>\r\n        <p>Load your animation saved in this browser</p>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => store.dispatch({ type: 'showLocalSaves', value: true })}\r\n          className=\"browse-local-piskels-button\"\r\n        >\r\n          Browse local saves\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nImportOptions.propTypes = {\r\n  active: PropTypes.string.isRequired\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport 'containers/menu/optionsDomBuilder.css';\r\nimport AwesomeButton from 'components/buttons/awesomeButton';\r\nimport store from 'store/store';\r\nimport Layers from 'components/menuComponents/layers-list/layers-list';\r\nimport Palettes from 'components/menuComponents/palettes/palettes';\r\nimport Settings from 'components/menuComponents/settings/settings';\r\nimport ResizeCanvas from 'components/menuComponents/resize/resizeCanvas';\r\nimport SaveOptions from 'components/menuComponents/save/save';\r\nimport ExportOptions from 'components/menuComponents/export/export';\r\nimport ImportOptions from 'components/menuComponents/import/import';\r\n\r\nexport default class Options extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      fps: 3,\r\n      active: 'none'\r\n    };\r\n    this.mounted = false;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n    this.setState({ fps: this.props.state.project.fps });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n  }\r\n\r\n  showOptionsOnClick(id) {\r\n    if (this.mounted) {\r\n      if (this.state.active === id) {\r\n        this.setState({ active: 'none' });\r\n      } else {\r\n        this.setState({ active: id });\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"optionsBox\" id=\"optionsBox\">\r\n        <div className=\"fps-options\">\r\n          <span id=\"display-fps\" className=\"display-fps\">\r\n            {`${this.state.fps} FPS`}\r\n          </span>\r\n          <input\r\n            type=\"range\"\r\n            min=\"1\"\r\n            max=\"24\"\r\n            step=\"1\"\r\n            defaultValue={this.state.fps}\r\n            id=\"fps-bar\"\r\n            className=\"fps-bar\"\r\n            onChange={e => {\r\n              store.dispatch({ type: 'project', value: ['fps', e.target.value] });\r\n              this.setState({ fps: e.target.value });\r\n            }}\r\n          />\r\n        </div>\r\n        <Layers />\r\n        <Palettes colorSamples={this.props.state.palette} toolState={this.props.state.toolState} />\r\n        <div className={`options-blocks-area ${this.state.active === 'none' ? '' : 'slide'}`}>\r\n          <Settings active={this.state.active} />\r\n          <ResizeCanvas\r\n            active={this.state.active}\r\n            currentCanvas={this.props.state.currentCanvas} />\r\n          <SaveOptions\r\n            active={this.state.active}\r\n            state={this.props.state}\r\n          />\r\n          <ExportOptions\r\n            active={this.state.active}\r\n            state={this.props.state}\r\n          />\r\n          <ImportOptions active={this.state.active} />\r\n        </div>\r\n        <div\r\n          className={`settings-buttons ${\r\n            this.state.active && this.state.active === 'none' ? '' : 'slide'\r\n            }`}\r\n        >\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('settings')}\r\n            iconClass=\"fas fa-cog\"\r\n            active={this.state.active}\r\n            buttonId=\"settings\"\r\n            title=\"Settings\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('resize-settings')}\r\n            iconClass=\"fas fa-crop\"\r\n            active={this.state.active}\r\n            buttonId=\"resize-settings\"\r\n            title=\"Resize the drawing area\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('save-settings')}\r\n            iconClass=\"fas fa-save\"\r\n            active={this.state.active}\r\n            buttonId=\"save-settings\"\r\n            title=\"Save to your galery\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('export-settings')}\r\n            iconClass=\"fas fa-file-download\"\r\n            active={this.state.active}\r\n            buttonId=\"export-settings\"\r\n            title=\"Export as image or animated gif\"\r\n            placement=\"left\"\r\n          />\r\n          <AwesomeButton\r\n            buttonClass=\"settings-button\"\r\n            onClickHandler={() => this.showOptionsOnClick('import-settings')}\r\n            iconClass=\"fas fa-file-upload\"\r\n            active={this.state.active}\r\n            buttonId=\"import-settings\"\r\n            title=\"Import your animation\"\r\n            placement=\"left\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nOptions.propTypes = {\r\n  state: PropTypes.object.isRequired\r\n}\r\n","import $ from 'jquery';\nimport { GIFEncoder } from 'services/jsgif-master/GIFEncoder';\n\nexport function fromImageToCanvas() {\n  const newCanv = $('<canvas></canvas>', {\n    id: 'canvasSave1',\n    width: '421px',\n    height: '421px'\n  })\n    .appendTo('#hidden')\n    .attr('width', 421)\n    .attr('height', 421)\n    .css({ width: '421px', height: '421px' });\n\n  const originalContext = $(newCanv)\n    .get(0)\n    .getContext('2d');\n  originalContext.scale(1, 1);\n  const image = new Image();\n  image.onload = () => {\n    originalContext.drawImage(image, 0, 0, 421, 421);\n    image.style.display = 'none';\n  };\n}\n\nexport function makeFgif() {\n  const delay = 1000 / 3;\n  const encoder = new GIFEncoder();\n  encoder.setRepeat(0);\n  encoder.setDelay(delay);\n  encoder.start();\n\n  for (let i = 0; i < $('#hidden').children().length; i += 1) {\n    const curCanv = $('#hidden').children()[i];\n    const originalContext = $(curCanv)\n      .get(0)\n      .getContext('2d');\n    const imageData = originalContext.getImageData(0, 0, curCanv.width, curCanv.height);\n    let len = imageData.data.length;\n    const newArr = [];\n    let map1;\n    let map2;\n    let count = 0;\n    while (len > 0) {\n      map1 = imageData.data.slice(count, count + 4);\n      map2 = map1;\n      if (map2.every(item => item === 0)) {\n        map2 = map2.map(() => 255);\n      }\n      newArr.push(...map2);\n      count += 4;\n      len -= 4;\n    }\n    const fixedNewArray = Uint8ClampedArray.from(newArr);\n    const newImage = new ImageData(fixedNewArray, curCanv.width, curCanv.height);\n    encoder.setSize(curCanv.height, curCanv.width);\n    encoder.addFrame(newImage, true);\n  }\n  encoder.finish();\n  const filename = 'New Piskel-clone';\n  encoder.download(`${filename}.gif`);\n}\n\nexport function fromDataToCanvas(frames) {\n  const width = $('#drawCanvas').width();\n  frames.forEach(item => {\n    if ($('#canvas-block')) {\n      const ctx = $(`#canvas${item.id}`)\n        .get(0)\n        .getContext('2d');\n      const image = new Image();\n      image.src = item.frameSRC;\n      setTimeout(() => {\n        ctx.drawImage(image, 0, 0, width, width);\n      }, 200);\n    }\n  });\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport store from 'store/store';\nimport { fromDataToCanvas } from 'components/functions/menuFunctions/fromImageToCanvas';\nimport { pageNavigator } from 'components/functions/navigation';\n\nexport default function LocalSaves(props) {\n  const sorted = Object.entries(props.localProjects).sort((a, b) => b[1].time - a[1].time);\n  return (\n    <div className=\"local-saves-block\">\n      <div>\n        <span className=\"local-saves-title\">Browse local piskels</span>\n        <i\n          className=\"far fa-window-close local-saves-button\"\n          onClick={() => store.dispatch({ type: 'showLocalSaves', value: false })}\n          onKeyPress={undefined}\n          tabIndex=\"-1\"\n          role=\"button\"\n        />\n      </div>\n      <div className=\"table-wrapper\">\n        <table className=\"table-local-saves\" cellPadding=\"20\" cellSpacing=\"10\">\n          <thead>\n            <tr>\n              <th className=\"table-title\">Name</th>\n              <th className=\"table-title\">Date</th>\n              <th className=\"table-title\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {sorted.map(item => (\n              <tr key={item[0]}>\n                <td className=\"table-data\">\n                  {item[1].title}\n                </td>\n                <td className=\"table-data\">\n                  {item[1].date}\n                </td>\n                <td className=\"table-data table-data-buttons\">\n                  <button\n                    type=\"button\"\n                    className=\"table-button\"\n                    onClick={() => {\n                      store.dispatch({ type: 'projectID', value: item[0] });\n                      store.dispatch({ type: 'project', value: item[1] });\n                      store.dispatch({ type: 'framesArray', value: null });\n                      store.dispatch({ type: 'framesArray', value: item[1].frames });\n                      store.dispatch({ type: 'currentCanvas', value: item[1].frames[0].id });\n                      store.dispatch({ type: 'showLocalSaves', value: false });\n                      pageNavigator(null, 'general', 'create', null, item[0]);\n                      setTimeout(() => {\n                        fromDataToCanvas(item[1].frames);\n                      }, 500);\n                    }}\n                  >\n                    Load\n                    </button>\n                  <button\n                    type=\"button\"\n                    className=\"table-button\"\n                    onClick={() => store.dispatch({ type: 'localProjects', value: ['delete', item[0]] })}\n                  >\n                    Delete\n                    </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nLocalSaves.propTypes = {\n  localProjects: PropTypes.object.isRequired\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport $ from 'jquery';\nimport ToolsPanel from 'components/tools/toolsDomBuilder';\nimport FramesWrapper from 'components/screens/frames/frameDomBuilder';\nimport CanvasWrapper from 'components/screens/canvas/canvasDomBuilder';\nimport PreviewBlock from 'components/screens/preview/previewDomBuilder';\nimport Options from 'containers/menu/optionsDomBuilder';\nimport LocalSaves from 'containers/pages/localSaves/localSaves';\nimport 'containers/pages/create/create.css';\nimport store from 'store/store';\n\nclass CreateAnimation extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      showSaves: false,\n      size: '',\n      changeWidth: ''\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    const canvasWidth =\n      window.innerWidth - 500 < window.innerHeight - 155\n        ? window.innerWidth - 500\n        : window.innerHeight - 155;\n    this.setState({ size: canvasWidth > 350 ? canvasWidth : 350, changeWidth: canvasWidth });\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n    $(window).bind('beforeunload', () => 'are you sure you want to leave?');\n    $(window).bind('resize', () => {\n      const changeWidth =\n        window.innerWidth - 500 < window.innerHeight - 155\n          ? window.innerWidth - 500\n          : window.innerHeight - 155;\n      this.setState({ changeWidth });\n    });\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n    store.dispatch({ type: 'project', value: 'initial' });\n  }\n\n  render() {\n    return (\n      <div id=\"container\" className=\"create-page-wrapper\">\n        <section className=\"tool-pannel\" id=\"tool-pannel\">\n          <ToolsPanel toolState={this.props.state.toolState} />\n        </section>\n        <section className=\"frame-area\" id=\"frame-area\">\n          <FramesWrapper\n            framesArray={this.props.state.framesArray}\n            bg={this.props.state.settings.currentBG}\n          />\n        </section>\n        <section\n          className=\"canvas-area\"\n          id=\"canvas-area\"\n          style={{ overflow: `${this.state.size > this.state.changeWidth ? 'scroll' : ''}` }}\n        >\n          <CanvasWrapper\n            currentCanvas={this.props.state.currentCanvas}\n            toolState={this.props.state.toolState}\n            settings={this.props.state.settings}\n            framesArray={this.props.state.framesArray} />\n        </section>\n        <div className=\"right-side-panel\">\n          <section className=\"preview-area noselect\" id=\"preview-area\">\n            <PreviewBlock\n              framesArray={this.props.state.framesArray}\n            />\n          </section>\n          <section className=\"options-area\" id=\"options-area\">\n            <Options state={this.props.state} />\n          </section>\n        </div>\n        <div className={`local-saves-page ${this.mounted && this.props.state.showLocalSaves ? '' : 'hidden'}`}>\n          <div className=\"local-saves-background\" />\n          <LocalSaves localProjects={this.props.state.localProjects} />\n        </div>\n      </div>\n    );\n  }\n}\n\nCreateAnimation.propTypes = {\n  state: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  state: state\n});\n\nexport default connect(mapStateToProps)(CreateAnimation);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport makeAnimate from 'components/functions/animation';\nimport errorImage from 'assets/images/pages/error.jpg';\nimport 'containers/pages/error/error.css';\n\n\nexport default function ErrorPage(props) {\n  if (props.error) {\n    makeAnimate();\n  }\n  return (\n    <div className={`error-section ${props.error ? 'error-page' : 'hidden'}`}>\n      <div className=\"error-image-wrapper\" id=\"error-image-wrapper\">\n        <img src={errorImage} alt=\"Oops! Somthing went wrong\" />\n      </div>\n      <div className=\"error-text-wrapper\">\n        <span>Oops! Something went wrong :(</span>\n        <span>Please refresh the Webpage!</span>\n      </div>\n    </div>\n  );\n}\n\nErrorPage.propTypes = {\n  error: PropTypes.bool.isRequired\n};\n","import { makeRandomNumber } from 'components/functions/random';\n\nexport default function makeAnimate() {\n  const width = 100 - (480 * 100) / window.innerWidth;\n  const height = 100 - (375 * 100) / window.innerHeight;\n  const top = (55 * 100) / window.innerHeight;\n  const bottom = window.innerHeight - 370;\n  const node = document.getElementById('error-image-wrapper');\n  if (node) {\n    const animation = node.animate(\n      [\n        { top: '55px', left: '0' }, // 0\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 10%\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 20%\n        { top: `${bottom}px`, left: `${makeRandomNumber(width / 2, width)}%` }, // 30%\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(width / 2, width)}%` }, // 40%\n        { top: '55px', left: `${width}%` }, // 50%\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(width / 2, width)}%` }, // 60%\n        { top: `${bottom}px`, left: `${makeRandomNumber(width / 2, width)}%` }, // 70%\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 80%\n        { top: `${makeRandomNumber(top, height)}%`, left: `${makeRandomNumber(0, width / 2)}%` }, // 90%\n        { top: '55px', left: '0' } // 100%\n      ],\n      {\n        duration: 30000,\n        delay: 0,\n        easing: 'linear'\n      }\n    );\n    animation.play();\n    setTimeout(() => {\n      makeAnimate();\n    }, 30000);\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport 'components/projectCards/projectCard.css';\nimport AwesomeButton from 'components/buttons/awesomeButton';\n\nexport default class ProjectCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: ''\n    };\n  }\n\n  hoverIn(e) {\n    this.setState({ active: e.currentTarget.id });\n  }\n\n  hoverOut() {\n    this.setState({ active: false });\n  }\n\n  render() {\n    return (\n      <div\n        className=\"preview-wrapper\"\n        id={this.props.infoObj[0]}\n        onMouseEnter={e => this.hoverIn(e)}\n        onMouseLeave={() => this.hoverOut()}\n      >\n        <img className=\"preview-gif\" src={this.props.infoObj[1].gif} alt=\"preview\" />\n        <span className=\"preview-gif-title\">\n          {this.props.infoObj[1].title}\n        </span>\n        <span className=\"preview-gif-date\">\n          {this.props.infoObj[1].date}\n        </span>\n        <div className={`piskel-preview-button-block ${\n          this.state.active === this.props.infoObj[0] ? '' : 'hidden'\n          }`}>\n          <AwesomeButton\n            buttonClass='piskel-preview-button'\n            onClickHandler={() => this.props.deletePiskelOnClick(this.props.infoObj[0])}\n            iconClass='fas fa-trash-alt'\n            title='Delete piskel'\n            placement='bottom'\n          />\n          <AwesomeButton\n            buttonClass='piskel-preview-button'\n            onClickHandler={() =>\n              this.props.onClickHandler(this.props.infoObj[0], this.props.infoObj[1].frames, this.props.infoObj[1])}\n            iconClass='fas fa-pencil-alt'\n            title='Edit piskel'\n            placement='bottom'\n          />\n          <AwesomeButton\n            buttonClass='piskel-preview-button'\n            onClickHandler={() =>\n              this.props.onClickHandler(false, this.props.infoObj[1].frames, this.props.infoObj[1])}\n            iconClass='fas fa-copy'\n            title='Copy piskel'\n            placement='bottom'\n          />\n          <AwesomeButton\n            buttonClass='piskel-preview-button'\n            onClickHandler={() => this.props.onClickHandler(this.props.infoObj[0], false, this.props.infoObj)}\n            iconClass='fas fa-eye'\n            title='Preview piskel details'\n            placement='bottom'\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nProjectCard.propTypes = {\n  onClickHandler: PropTypes.func.isRequired,\n  deletePiskelOnClick: PropTypes.func.isRequired,\n  infoObj: PropTypes.array.isRequired,\n  isAuthed: PropTypes.bool.isRequired\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport $ from 'jquery';\nimport { getDBdata, deleteFromDB } from 'components/functions/requestToDB';\nimport { fromDataToCanvas } from 'components/functions/menuFunctions/fromImageToCanvas';\nimport { pageNavigator } from 'components/functions/navigation';\nimport ProjectCard from 'components/projectCards/projectCard';\nimport 'containers/pages/user/user.css';\nimport store from 'store/store';\n\nclass User extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      height: '',\n      projects: {}\n    };\n    this.mounted = false;\n  }\n\n  componentWillMount() {\n    if (!this.props.allProjects !== {} && !this.props.allProjects[this.props.userData.info.id]) {\n      getDBdata(this.props.userData.info.id);\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      height: window.innerHeight,\n      projects: this.props.allProjects[this.props.userData.info.id]\n    });\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  onClickHandler(projectId, projectFrames, preview) {\n    if (projectFrames) {\n      if (projectId) {\n        // edit piskel with projectID\n        pageNavigator(null, 'user', 'create', this.props.userData.isAuthed, projectId);\n      } else {\n        // copy piskel\n        pageNavigator(null, 'user', 'create', this.props.userData.isAuthed)\n      }\n      store.dispatch({ type: 'project', value: preview });\n      store.dispatch({ type: 'framesArray', value: projectFrames });\n      setTimeout(() => {\n        fromDataToCanvas(projectFrames);\n      }, 200);\n    } else if (preview) {\n      // preview & details of piskel\n      store.dispatch({ type: 'project', value: preview[1] });\n      store.dispatch({ type: 'projectID', value: preview[0] });\n      pageNavigator(\n        null,\n        'user',\n        `projects/user${this.props.userData.info.id}/${preview[0]}`,\n        this.props.userData.isAuthed\n      );\n    }\n  }\n\n  deletePiskel(item) {\n    if (!this.props.userData.isAuthed) {\n      this.setState({ isEmpty: true });\n      pageNavigator(null, this.props.page, 'about', false);\n      $('#signOuted').click();\n      return;\n    }\n    const projects = Object.entries(this.props.allProjects[this.props.userData.info.id]);\n    for (let i = 0; i < projects.length; i += 1) {\n      if (projects[i][0] === item) {\n        deleteFromDB(`users/${this.props.userData.info.id}/${projects[i][0]}`);\n        store.dispatch({ type: 'allProjects', value: ['delete', this.props.userData.info.id, item] });\n        this.setState({ projects: this.props.allProjects[this.props.userData.info.id] })\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"user-page\" style={{ height: this.state.height - 110 }}>\n        <div\n          className=\"user-image\"\n          style={{\n            backgroundImage: `url(${this.props.userData.info.image})`,\n            backgroundSize: 'contain'\n          }}\n        />\n        <h2 className=\"user-name\">{this.props.userData.info.name}</h2>\n        <ul className=\"piskel-list\">\n          <li>all</li>\n          <li>public</li>\n          <li>private</li>\n          <li>deleted</li>\n        </ul>\n        <div id=\"user-piskel-preview-area\" className=\"user-piskel-preview-area\">\n          <div className=\"user-preview-piskel-block flexed\">\n            {!this.state.projects || Object.entries(this.state.projects).length === 0\n              ? <span>No piskel available in &#39;all&#39; category.</span>\n              : Object.entries(this.state.projects)\n                .sort((a, b) => b[1].time - a[1].time)\n                .map(item => (\n                  <ProjectCard\n                    key={item[0]}\n                    infoObj={item}\n                    onClickHandler={(...args) => this.onClickHandler(...args)}\n                    deletePiskelOnClick={(...args) => this.deletePiskel(...args)}\n                    isAuthed={this.props.userData.isAuthed}\n                  />\n                ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nUser.propTypes = {\n  userData: PropTypes.object.isRequired,\n  page: PropTypes.string.isRequired,\n  allProjects: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  userData: state.userData,\n  page: state.page,\n  allProjects: state.allProjects\n});\n\nexport default connect(mapStateToProps)(User);","import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport 'containers/pages/projectPage/project.css';\n\nfunction ProjectInfo(props) {\n  return (\n    <div className=\"project-section\">\n      <div className=\"project-wrapper\">\n        <div className=\"piskel-page-gif-wrapper\">\n          <img src={props.project.gif} alt=\"preview-gif\" />\n        </div>\n        <div className=\"piskel-page-info-wrapper\">\n          <span className=\"sprite-info-title bold\">\n            Title\n              </span>\n          <h3 className=\"sprite-title\">\n            {props.project.title}\n          </h3>\n          <span className=\"sprite-info-title bold\">\n            Description\n              </span>\n          <h3 className=\"sprite-description\">\n            {`${props.project.description || 'no-description yet'}`}\n          </h3>\n          <span className=\"sprite-info-title bold\">\n            Created:\n              </span>\n          <h3 className=\"sprite-date bold\">\n            {props.project.date}\n          </h3>\n          <div>\n            <span className=\"sprite-info-title bold\">\n              Animation info:\n                </span>\n            <h3 className=\"sprite-options bold\">\n              Frames:\n                </h3>\n            <span>{props.project.frames.length ? props.project.frames.length : 0}</span>\n            <h3 className=\"sprite-options bold\">\n              FPS:\n                </h3>\n            <span>\n              {`${props.project.frames.length && props.project.frames.length === 1\n                ? 0\n                : props.project.fps} frames per second`}\n            </span>\n            <h3 className=\"sprite-options bold\">\n              The total duration:\n                </h3>\n            <span>\n              {`${(props.project.frames.length && props.project.frames.length === 1\n                ? 0\n                : props.project.frames.length / props.project.fps\n              ).toFixed(1)} seconds`}\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nProjectInfo.propTypes = {\n  project: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  project: state.project\n});\n\nexport default connect(mapStateToProps)(ProjectInfo);","import React from 'react';\nimport { Route, HashRouter, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport Header from 'components/header/header';\nimport About from 'containers/pages/about/about';\nimport CreateAnimation from 'containers/pages/create/create';\nimport ErrorPage from 'containers/pages/error/error';\nimport User from 'containers/pages/user/user';\nimport ProjectInfo from 'containers/pages/projectPage/project';\nimport store from 'store/store';\nimport { googleAuth, onSuccessHandler } from 'services/googleAuth/authApi';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userData: {},\n      error: false\n    };\n    this.onSuccess = this.onSuccess.bind(this);\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      googleAuth(this.onSuccess);\n    }, 200);\n  }\n\n  onSuccess(googleUser) {\n    const userData = onSuccessHandler(googleUser);\n    store.dispatch({ type: 'userData', value: userData });\n  }\n\n  componentWillUnmount() {\n    this.setState(null);\n  }\n\n  render() {\n    return (\n      <HashRouter>\n        <Header isAuthed={this.props.userData.isAuthed} page={this.props.page} />\n        <ErrorPage error={this.props.error} />\n        <div className={`${this.props.error ? 'hidden' : 'page-wrapper'}`}>\n          <Route path={`/${this.props.locale}/about`} component={About} />\n          <Route path={`/${this.props.locale}/user/*`} component={User} />\n          <Route path={`/${this.props.locale}/create-animation/*`} component={CreateAnimation} />\n          <Route path={`/${this.props.locale}/projects/*`} component={ProjectInfo} />\n          <Route path={`*`}>\n            {this.props.locale && this.props.page !== ''\n              ? this.props.page === 'user'\n                ? this.props.userData.isAuthed\n                  ? <Redirect to={`/${this.props.locale}/user/${this.props.userData.info.id}`} />\n                  : <Redirect to={`/${this.props.locale}/about`} />\n                : <Redirect to={`/${this.props.locale}/${this.props.page}`} />\n              : <Redirect to={`/${this.props.locale}/about`} />}\n          </Route>\n        </div>\n      </HashRouter>\n    );\n  }\n}\n\nApp.propTypes = {\n  locale: PropTypes.string.isRequired,\n  userData: PropTypes.object.isRequired,\n  page: PropTypes.string.isRequired,\n  error: PropTypes.bool.isRequired,\n  project: PropTypes.object.isRequired\n}\n\nconst mapStateToProps = state => ({\n  locale: state.locales.locale,\n  userData: state.userData,\n  page: state.page,\n  error: state.error,\n  project: state.project\n});\n\nexport default connect(mapStateToProps)(App);\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-console */\n/* eslint-disable no-use-before-define */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { connect } from 'react-redux';\r\nimport { IntlProvider } from 'react-intl';\r\n\r\nfunction mapStateToProps(state) {\r\n  const { locale, messages } = state.locales;\r\n  return { key: locale, locale: locale, messages };\r\n}\r\n\r\nexport default connect(mapStateToProps)(IntlProvider);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { addLocaleData } from 'react-intl';\nimport en from 'react-intl/locale-data/en';\nimport ru from 'react-intl/locale-data/ru';\nimport App from 'app';\nimport store from 'store/store';\nimport * as serviceWorker from './serviceWorker';\nimport ConnectedIntlProvider from './ConnectedIntlProvider';\nimport 'index.css';\nimport 'reset.css';\n\naddLocaleData([...en, ...ru]);\n\nReactDOM.render(\n  <Provider store={store}>\n    <ConnectedIntlProvider>\n      <App />\n    </ConnectedIntlProvider>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}